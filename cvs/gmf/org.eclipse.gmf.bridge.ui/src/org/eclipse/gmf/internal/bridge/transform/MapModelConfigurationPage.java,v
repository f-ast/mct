head	1.7;
access;
symbols
	v20080924-1925:1.7
	v20080722-1827:1.7
	v20080716-1642:1.7
	R2_1_maintenance:1.7.0.2
	Root_R2_1_maintenance:1.7
	R2_1_0:1.7
	v20080417-1610:1.7
	v20080322-0000:1.7
	v20080222-1200:1.6
	v20080215-1500:1.6
	v20080207-0207:1.6
	v20071124-0000:1.6
	v20071108-0000:1.6
	v20070903-0000:1.6
	v20070809-0000:1.6
	R2_0_maintenance:1.6.0.2
	R2_0:1.6
	R4_20:1.6
	v20070621-0000:1.6
	RC3_20:1.6
	v20070608-1300:1.6
	v20070605-1400:1.6
	v20070601-1400:1.6
	v20070520-1200:1.6
	v20070518-1300:1.6
	v20070420-1000:1.6
	v20070413-1300:1.5
	v20070405-2000:1.4
	v20070330-1300:1.4
	v20070322-1100:1.4
	v20060316-0600:1.3
	v20070301-1200:1.3
	v20070228-2000:1.2
	v20070208-1800:1.2;
locks; strict;
comment	@# @;
expand	@k@;


1.7
date	2008.03.06.12.46.32;	author atikhomirov;	state Exp;
branches;
next	1.6;
commitid	7e5d47cfe7a74567;

1.6
date	2007.04.18.12.29.18;	author atikhomirov;	state Exp;
branches;
next	1.5;
commitid	779946260f1e4567;

1.5
date	2007.04.12.14.40.18;	author atikhomirov;	state Exp;
branches;
next	1.4;
commitid	5f58461e44d04567;

1.4
date	2007.03.20.16.54.35;	author atikhomirov;	state Exp;
branches;
next	1.3;
commitid	33aa460011ca4567;

1.3
date	2007.03.01.16.34.40;	author atikhomirov;	state Exp;
branches;
next	1.2;
commitid	657145e7009f4567;

1.2
date	2007.02.07.12.11.12;	author atikhomirov;	state Exp;
branches;
next	1.1;
commitid	ff145c9c1e04567;

1.1
date	2007.01.18.18.49.15;	author atikhomirov;	state Exp;
branches;
next	;
commitid	197b45afc1284567;


desc
@@


1.7
log
@[220711] respect workspace resource models - refactored transformation operation to manage resource set easily
@
text
@/*
 * Copyright (c) 2006, 2008 Borland Software Corporation
 * 
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    Alexander Fedorov (Borland) - initial API and implementation
 */
package org.eclipse.gmf.internal.bridge.transform;

import org.eclipse.core.runtime.CoreException;
import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.emf.common.util.Diagnostic;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.emf.ecore.resource.ResourceSet;
import org.eclipse.gmf.internal.common.ui.ResourceLocationProvider;
import org.eclipse.gmf.mappings.Mapping;


class MapModelConfigurationPage extends ModelConfigurationPage {
	
	MapModelConfigurationPage(String pageId, ResourceLocationProvider rlp, ResourceSet resourceSet) {
		super(pageId, rlp, resourceSet);
		setTitle(Messages.TransformToGenModelWizard_title_mapmodel);
		setDescription(Messages.TransformToGenModelWizard_descr_mapmodel);
		setModelFileExtension("gmfmap"); //$NON-NLS-1$
	}

	@@Override
	protected Resource doLoadResource(IProgressMonitor monitor) throws CoreException {
		TransformToGenModelOperation o = getOperation();
		Mapping mapping = o.loadMappingModel(getURI(), monitor);
		return mapping.eResource();
	}

	TransformToGenModelOperation getOperation() {
		TransformToGenModelWizard wizard = (TransformToGenModelWizard) getWizard();
		return wizard.getTransformOperation();
	}
	
	@@Override
	protected void resourceChanged() {
		super.resourceChanged();
		Diagnostic load = getOperation().getMapmodelValidationResult();
		if (load != null) {
			if ((load.getSeverity() == IStatus.WARNING) || (load.getSeverity() == IStatus.INFO) ) {
				setStatusMessage(TransformToGenModelOperation.getFirst(load));
			}
		}
	}
}
@


1.6
log
@overriding method to pass constant value is not a good approach
@
text
@d1 2
a2 2
/**
 * Copyright (c) 2006, 2007 Borland Software Corporation
d36 1
a36 1
		Mapping mapping = o.loadMappingModel(getResourceSet(), getURI(), monitor);
a54 1

@


1.5
log
@[181896] afedorov - Allow transformation wizard to complete if there are errors in the resulting gmfgen model
refactored not to define extra strings for page names, titles and descriptions moved to owning pages.
@
text
@d2 1
a2 1
 * Copyright (c) 2006 Borland Software Corporation
a25 2
	private static final String FILE_EXT_GMFMAP = "gmfmap"; //$NON-NLS-1$

d30 1
a32 4
	protected String getModelFileExtension() {
		return FILE_EXT_GMFMAP;
	}
	
@


1.4
log
@[175837] afedorov - Can't ignore validation errors in new "Create generator model" wizard
@
text
@d30 2
@


1.3
log
@[176019] afedorov - correctly handle Back&value change user activities in the map->gmfgen wizard
@
text
@d17 1
a47 3
	/* (non-Javadoc)
	 * @@see org.eclipse.gmf.internal.common.ui.ModelSelectionPage#resourceChanged()
	 */
d51 1
a51 1
		IStatus load = getOperation().getLoadMappingStatus();
d54 1
a54 1
				setStatusMessage(load);
d58 1
@


1.2
log
@[171593] afedorov - Tests for TransformToGenModelOperation
@
text
@a13 1
import org.eclipse.core.resources.IFile;
a16 1
import org.eclipse.emf.common.util.URI;
a35 8
	protected void initControls() {
		super.initControls();
		TransformToGenModelWizard wizard = (TransformToGenModelWizard) getWizard();
		IFile target = wizard.getTargetFile();
		getOperation().setGenURI(URI.createPlatformResourceURI(target.getFullPath().toString(), true));
	}
	
	@@Override
@


1.1
log
@[148836] afedorov - Provide "Create generator model..." wizard instead of existing dialog sequence
@
text
@a47 1
		o.reset(getURI());
@

