16a17,18
> import org.eclipse.emf.edit.domain.EditingDomain;
> import org.eclipse.emf.edit.domain.IEditingDomainProvider;
17a20
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
20d22
< import org.eclipse.jface.viewers.IStructuredSelection;
138,142c140,145
<         if (!selection.isEmpty() && selection instanceof IStructuredSelection) {
<             Object firstElement = ((IStructuredSelection) selection)
<                 .getFirstElement();
<             if (firstElement instanceof EObject) {
<                 setEObject((EObject) firstElement);
---
>         IEditingDomainProvider provider = (IEditingDomainProvider) part
>             .getAdapter(IEditingDomainProvider.class);
>         if (provider != null) {
>             EditingDomain theEditingDomain = provider.getEditingDomain();
>             if (theEditingDomain instanceof TransactionalEditingDomain) {
>                 setEditingDomain((TransactionalEditingDomain) theEditingDomain);
