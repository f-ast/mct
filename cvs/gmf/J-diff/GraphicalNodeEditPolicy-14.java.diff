17a18
> import org.eclipse.core.commands.ExecutionException;
25a27
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
137,138c139,143
< 		protected CommandResult doExecute(IProgressMonitor progressMonitor) {
< 			CommandResult cmdResult = super.doExecute(progressMonitor);
---
> 		protected CommandResult doExecuteWithResult(
>                 IProgressMonitor progressMonitor, IAdaptable info)
>             throws ExecutionException {
>             
> 			CommandResult cmdResult = super.doExecuteWithResult(progressMonitor, info);
149c154
< 			return newOKCommandResult();
---
> 			return CommandResult.newOKCommandResult();
152c157
< 		protected CommandResult doUndo() {
---
> 		protected CommandResult doUndoWithResult(IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
156c161
< 			return super.doUndo();
---
> 			return super.doUndoWithResult(progressMonitor, info);
159c164
< 		protected CommandResult doRedo() {
---
> 		protected CommandResult doRedoWithResult(IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
163c168
< 			return super.doRedo();
---
> 			return super.doRedoWithResult(progressMonitor, info);
325a331
> 
328c334,335
< 			ICommand spc = new SetPropertyCommand(connection,
---
> 			ICommand spc = new SetPropertyCommand(
>                 getEditingDomain(), connection,
346a354,355
>         TransactionalEditingDomain editingDomain = getEditingDomain();
> 		
352c361
< 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(null);
---
> 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(editingDomain, null);
356c365
< 		SetConnectionAnchorsCommand scaCommand = new SetConnectionAnchorsCommand(null);
---
> 		SetConnectionAnchorsCommand scaCommand = new SetConnectionAnchorsCommand(editingDomain, null);
385c394,395
< 			SetConnectionBendpointsCommand sbbCommand = new SetConnectionBendpointsCommand();
---
>             
> 			SetConnectionBendpointsCommand sbbCommand = new SetConnectionBendpointsCommand(editingDomain);
405a416,417
>         TransactionalEditingDomain editingDomain = getEditingDomain();
>         
407c419
< 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(null);
---
> 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(editingDomain, null);
412c424
< 		SetConnectionAnchorsCommand scaCommand = new SetConnectionAnchorsCommand(null);
---
> 		SetConnectionAnchorsCommand scaCommand = new SetConnectionAnchorsCommand(editingDomain, null);
447,448c459,461
< 		SetConnectionEndsCommand sceCommand = (SetConnectionEndsCommand) cc
< 			.getCommands().get(1);
---
>         Iterator commandItr = cc.iterator();
>         commandItr.next(); //0
> 		SetConnectionEndsCommand sceCommand = (SetConnectionEndsCommand) commandItr.next(); //1
450,451c463
< 		SetConnectionAnchorsCommand scaCommand = (SetConnectionAnchorsCommand) cc
< 		.getCommands().get(2);
---
> 		SetConnectionAnchorsCommand scaCommand = (SetConnectionAnchorsCommand) commandItr.next(); //2
468,469c480
< 		SetConnectionBendpointsCommand sbbCommand = (SetConnectionBendpointsCommand) cc
< 			.getCommands().get(3);
---
> 		SetConnectionBendpointsCommand sbbCommand = (SetConnectionBendpointsCommand) commandItr.next(); //3
500c511,512
< 		CreateCommand createCommand = new CreateCommand(req
---
>         TransactionalEditingDomain editingDomain = getEditingDomain();
>         CreateCommand createCommand = new CreateCommand(editingDomain, req
504c516,518
< 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(null);
---
>         
>         
>         SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(editingDomain, null);
509c523
< 		SetConnectionAnchorsCommand scaCommand = new SetConnectionAnchorsCommand(null);
---
> 		SetConnectionAnchorsCommand scaCommand = new SetConnectionAnchorsCommand(editingDomain, null);
513c527
< 		SetConnectionBendpointsCommand sbbCommand = new SetConnectionBendpointsCommand();
---
> 		SetConnectionBendpointsCommand sbbCommand = new SetConnectionBendpointsCommand(editingDomain);
873a888,891
>     private TransactionalEditingDomain getEditingDomain() {
>         return ((IGraphicalEditPart) getHost()).getEditingDomain();
>     }
> 
