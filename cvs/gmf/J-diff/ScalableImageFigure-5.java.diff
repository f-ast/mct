19a20,24
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapModeUtil;
> import org.eclipse.gmf.runtime.draw2d.ui.render.RenderInfo;
> import org.eclipse.gmf.runtime.draw2d.ui.render.RenderedImage;
> import org.eclipse.gmf.runtime.draw2d.ui.render.factory.RenderedImageFactory;
> import org.eclipse.gmf.runtime.draw2d.ui.render.internal.DrawableRenderedImage;
26,31d30
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
< import org.eclipse.gmf.runtime.draw2d.ui.render.RenderInfo;
< import org.eclipse.gmf.runtime.draw2d.ui.render.RenderedImage;
< import org.eclipse.gmf.runtime.draw2d.ui.render.factory.RenderedImageFactory;
< import org.eclipse.gmf.runtime.draw2d.ui.render.internal.DrawableRenderedImage;
< 
49,51d47
<     /** Default meta image size */
<     private final int META_EXTENT = MapMode.DPtoLP(32);
< 
168c164,165
< 			preferredSize =  new Dimension(META_EXTENT,META_EXTENT);
---
> 			int extent = MapModeUtil.getMapMode(this).DPtoLP(32);
> 			preferredSize =  new Dimension(extent,extent);
177,178c174,175
< 						preferredSize.width = MapMode.DPtoLP(imgRect.width);
< 						preferredSize.height = MapMode.DPtoLP(imgRect.height);
---
> 						preferredSize.width = MapModeUtil.getMapMode(this).DPtoLP(imgRect.width);
> 						preferredSize.height = MapModeUtil.getMapMode(this).DPtoLP(imgRect.height);
219d215
< 				// TODO get the antialias property from the preferences.
259c255
< 		   area = (Rectangle)MapMode.translateToDP(area);
---
> 		   area = (Rectangle)MapModeUtil.getMapMode(this).LPtoDP(area);
