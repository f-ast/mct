35a36
> import org.eclipse.swt.widgets.Shell;
83a85,86
>         Shell shell = new Shell();
>         try {
86c89
< 				.createDiagramEditPart(diagram);
---
>                 .createDiagramEditPart(diagram, shell);
91a95,97
>         } finally {
>             shell.dispose();
>         }
153a160,161
>         Shell shell = null;
>         try {
154a163
>                 shell = new Shell();
157c166
< 					.createDiagramEditPart(diagram);
---
>                     .createDiagramEditPart(diagram, shell);
171a181,185
>         } finally {
>             if (shell != null) {
>                 shell.dispose();
>             }
>         }
198a213,214
>         Shell shell = new Shell();
>         try {
201c217
< 				.createDiagramEditPart(diagram);
---
>                 .createDiagramEditPart(diagram, shell);
207c223,224
< 		final Runnable layoutRun = LayoutService.getInstance().layoutLayoutNodes(
---
>             final Runnable layoutRun = LayoutService.getInstance()
>                 .layoutLayoutNodes(
210a228,230
>         } finally {
>             shell.dispose();
>         }
248a269,270
>         Shell shell = new Shell();
>         try {
252c274
< 				.createDiagramEditPart(diagram);
---
>                 .createDiagramEditPart(diagram, shell);
258,259c280,282
< 		final Runnable layoutRun = LayoutService.getInstance().layoutLayoutNodes(
< 				getLayoutNodes(diagramEP, nodes), true, layoutHint);
---
>             final Runnable layoutRun = LayoutService.getInstance()
>                 .layoutLayoutNodes(getLayoutNodes(diagramEP, nodes), true,
>                     layoutHint);
260a284,286
>         } finally {
>             shell.dispose();
>         }
