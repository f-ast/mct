12a13
> import java.util.LinkedHashSet;
26a28
> import org.eclipse.gmf.codegen.gmfgen.GenExpressionProviderContainer;
28a31,32
> import org.eclipse.gmf.codegen.gmfgen.GenFeatureValueSpec;
> import org.eclipse.gmf.codegen.gmfgen.GenJavaExpressionProvider;
30a35
> import org.eclipse.gmf.common.codegen.ImportAssistant;
162a168
> 			if(parentFSeqInitializer.getCreatingInitializer() != null) {
163a170
> 			}
165a173,177
> 				EList siblingInitalizers = getCreatingInitializer().getNewElementInitializers();		
> 				if(siblingInitalizers.size() > 1) {
> 					int pos = siblingInitalizers.indexOf(this);
> 					buf.append('_').append(pos + 1);
> 				}				
368a381,425
> 	public String getElementClassAccessor(ImportAssistant importAssistant) {
> 		if(getElementClass() == null) {
> 			return ""; //$NON-NLS-1$
> 		}
> 		StringBuffer buf = new StringBuffer();
> 		buf.append(getElementQualifiedPackageInterfaceName())
> 			.append(".eINSTANCE.get") //$NON-NLS-1$
> 			.append(getElementClass().getClassifierAccessorName())
> 			.append("()"); //$NON-NLS-1$
> 		return buf.toString();
> 	}
> 	
> 	public String getFeatureAccessor(GenFeatureInitializer featureInitializer, ImportAssistant importAssistant) {
> 		if(featureInitializer.getFeature() == null) {
> 			return ""; //$NON-NLS-1$
> 		}
> 		StringBuffer buf = new StringBuffer();
> 		buf.append(importAssistant.getImportedName(featureInitializer.getFeatureQualifiedPackageInterfaceName()))
> 			.append(".eINSTANCE.get") //$NON-NLS-1$
> 			.append(featureInitializer.getFeature().getFeatureAccessorName())
> 			.append("()"); //$NON-NLS-1$
> 		return buf.toString();
> 	}
> 	
> 	public LinkedHashSet<GenFeatureValueSpec> getJavaExpressionFeatureInitializers(GenExpressionProviderContainer expressionProviders) {
> 		LinkedHashSet<GenFeatureValueSpec> result = new LinkedHashSet<GenFeatureValueSpec>();
> 		if(expressionProviders != null) {
> 			for (Iterator it = getInitializers().iterator(); it.hasNext();) {
> 				GenFeatureInitializer next = (GenFeatureInitializer) it.next();
> 				if(next instanceof GenFeatureValueSpec) {
> 					GenFeatureValueSpec featureValueSpec = (GenFeatureValueSpec) next;				
> 					if(expressionProviders.getProvider(featureValueSpec) instanceof GenJavaExpressionProvider && 
> 						!expressionProviders.isCopy(featureValueSpec)) {
> 						result.add(featureValueSpec);
> 					}
> 				} else {					
> 					for (GenFeatureSeqInitializer ftSeqInitializer : next.getAllFeatureSeqInitializers()) {
> 						result.addAll(ftSeqInitializer.getJavaExpressionFeatureInitializers(expressionProviders));
> 					}					
> 				}
> 			}
> 		}
> 		return result;
> 	}
> 
