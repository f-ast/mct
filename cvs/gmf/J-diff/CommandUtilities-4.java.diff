13a14,15
> import java.util.Collection;
> import java.util.Collections;
14a17
> import java.util.LinkedHashSet;
18a22
> import org.eclipse.gmf.runtime.common.core.command.ICommand;
69a74,105
> 	/**
> 	 * Determines the files affected by <code>command</code>. Since GEF
> 	 * command API has no support for #getAffectedFiles, this utility will
> 	 * traverse the contents of GEF wrapper commands and determine the files
> 	 * affected by the <code>ICommands</code> it contains.
> 	 * 
> 	 * @param command
> 	 *            the command
> 	 * @return the affected files
> 	 */
> 	public static Collection getAffectedFiles(Command command)
> 	{
> 		if (command == null)
> 			return Collections.EMPTY_LIST;
> 		
> 		if (command instanceof ICommand) {
> 			return ((ICommand) command).getAffectedFiles();
> 			
> 		} else if (command instanceof ICommandProxy) {
> 			return ((ICommandProxy)command).getICommand().getAffectedFiles();
> 			
> 		} else if (command instanceof CompoundCommand) {
> 			LinkedHashSet result = new LinkedHashSet();
> 			
> 			for (Iterator iter = ((CompoundCommand)command).getCommands().iterator(); iter.hasNext();) {
> 				result.addAll(getAffectedFiles((Command) iter.next()));
> 			}
> 			return result;
> 		}
> 		return Collections.EMPTY_LIST;
> 	}
> 
