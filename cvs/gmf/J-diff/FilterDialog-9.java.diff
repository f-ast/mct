20a21
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
32c33
< import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeTransactionalCommand;
439,440c440,441
< 		CompositeModelCommand cc = new CompositeModelCommand(
< 			DiagramUIMessages.Command_SortFilterCommand);		
---
>         TransactionalEditingDomain editingDomain = null;
>         List childCommands = new ArrayList();
443a445,449
>             
>             if (editingDomain == null) {
>                 editingDomain = ep.getEditingDomain();
>             }
>             
451c457
< 						cc.compose(new CommandProxy(editPart
---
>                         childCommands.add(new CommandProxy(editPart
453c459
< 						cc.compose(new CommandProxy(editPart
---
>                         childCommands.add(new CommandProxy(editPart
458a465,468
>         
>         CompositeTransactionalCommand cc = new CompositeTransactionalCommand(editingDomain, 
>             DiagramUIMessages.Command_SortFilterCommand, childCommands);   
>         
