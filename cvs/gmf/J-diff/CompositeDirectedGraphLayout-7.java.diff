30a31
> import org.eclipse.gmf.runtime.draw2d.ui.graph.GMFDirectedGraphLayout;
90c91
<             if (advancedSubgraphParent != null && advancedSubgraphParent.getDirection() != PositionConstants.NONE) {
---
>             if (advancedSubgraphParent != null) {
95c96
<             DirectedGraphLayout layout = new DirectedGraphLayout();
---
>             DirectedGraphLayout layout = new GMFDirectedGraphLayout();
97,98c98,100
<             if (advancedSubgraphParent != null) {
<                 adjustAutoSizeNodeWidthAndHeight(advancedSubgraphParent);
---
>             if (advancedSubgraphParent != null && advancedSubgraphParent.isAutoSize()) {
>                 advancedSubgraphParent.width = g.getLayoutSize().width;
>                 advancedSubgraphParent.height = g.getLayoutSize().height;
260,296c262,298
<     private void adjustAutoSizeNodeWidthAndHeight(AdvancedSubGraph subGraph) {
<     	if (!subGraph.isAutoSize()) {
<     	    return;
<     	}
<         NodeList nodes = subGraph.members;
<         if (nodes.isEmpty())
<             return;
<         int size = nodes.size();
<         Node node = nodes.getNode(0);
<         int top=node.y,left=node.x,bottom = top + node.height ,right = left+node.width;
<         Node topNode, leftNode;
<         topNode = leftNode = node;
<         for (int index = 1 ; index<size; index++) {
<             node = (Node)nodes.get(index);
<             if (top>node.y){
<                 top = node.y;
<                 topNode = node;
<             }
<             if (bottom < (node.y+node.height))
<                 bottom = node.y+node.height;
<             if (left>node.x){
<                 left = node.x;
<                 leftNode = node;
<             }
<             if (right<(node.x+node.width))
<                 right = node.x+node.width;
<         }
<         int xDiff = 0 ;
<         int yDiff = 0 ;
<         if (subGraph.isHasBufferedZone()){
<              xDiff = leftNode.x;
<              yDiff = topNode.y ;
<         }
<         subGraph.width = right - left + xDiff;
<         subGraph.height = bottom - top + yDiff;
<         
<     }
---
> //    private void adjustAutoSizeNodeWidthAndHeight(AdvancedSubGraph subGraph) {
> //    	if (!subGraph.isAutoSize()) {
> //    	    return;
> //    	}
> //        NodeList nodes = subGraph.members;
> //        if (nodes.isEmpty())
> //            return;
> //        int size = nodes.size();
> //        Node node = nodes.getNode(0);
> //        int top=node.y,left=node.x,bottom = top + node.height ,right = left+node.width;
> //        Node topNode, leftNode;
> //        topNode = leftNode = node;
> //        for (int index = 1 ; index<size; index++) {
> //            node = (Node)nodes.get(index);
> //            if (top>node.y){
> //                top = node.y;
> //                topNode = node;
> //            }
> //            if (bottom < (node.y+node.height))
> //                bottom = node.y+node.height;
> //            if (left>node.x){
> //                left = node.x;
> //                leftNode = node;
> //            }
> //            if (right<(node.x+node.width))
> //                right = node.x+node.width;
> //        }
> //        int xDiff = 0 ;
> //        int yDiff = 0 ;
> //        if (subGraph.isHasBufferedZone()){
> //             xDiff = leftNode.x;
> //             yDiff = topNode.y ;
> //        }
> //        subGraph.width = right - left + xDiff;
> //        subGraph.height = bottom - top + yDiff;
> //        
> //    }
