9,10d8
< import java.util.Collection;
< 
13,15d10
< 
< import org.eclipse.emf.common.util.EList;
< 
18d12
< 
21,26d14
< 
< import org.eclipse.emf.ecore.util.EObjectWithInverseResolvingEList;
< import org.eclipse.emf.ecore.util.InternalEList;
< 
< import org.eclipse.gmf.gmfgraph.CustomFigure;
< import org.eclipse.gmf.gmfgraph.DiagramElement;
28a17
> import org.eclipse.gmf.gmfgraph.RealFigure;
37d25
<  *   <li>{@link org.eclipse.gmf.gmfgraph.impl.FigureAccessorImpl#getReferencingElements <em>Referencing Elements</em>}</li>
47,56d34
< 	 * The cached value of the '{@link #getReferencingElements() <em>Referencing Elements</em>}' reference list.
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @see #getReferencingElements()
< 	 * @generated
< 	 * @ordered
< 	 */
< 	protected EList<DiagramElement> referencingElements = null;
< 
< 	/**
77c55
< 	 * The cached value of the '{@link #getTypedFigure() <em>Typed Figure</em>}' reference.
---
> 	 * The cached value of the '{@link #getTypedFigure() <em>Typed Figure</em>}' containment reference.
84c62
< 	protected CustomFigure typedFigure = null;
---
> 	protected RealFigure typedFigure;
110,121d87
< 	public EList<DiagramElement> getReferencingElements() {
< 		if (referencingElements == null) {
< 			referencingElements = new EObjectWithInverseResolvingEList<DiagramElement>(DiagramElement.class, this, GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS, GMFGraphPackage.DIAGRAM_ELEMENT__FIGURE);
< 		}
< 		return referencingElements;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
143,160c109
< 	public CustomFigure getTypedFigure() {
< 		if (typedFigure != null && typedFigure.eIsProxy()) {
< 			InternalEObject oldTypedFigure = (InternalEObject)typedFigure;
< 			typedFigure = (CustomFigure)eResolveProxy(oldTypedFigure);
< 			if (typedFigure != oldTypedFigure) {
< 				if (eNotificationRequired())
< 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, oldTypedFigure, typedFigure));
< 			}
< 		}
< 		return typedFigure;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public CustomFigure basicGetTypedFigure() {
---
> 	public RealFigure getTypedFigure() {
169,170c118,119
< 	public void setTypedFigure(CustomFigure newTypedFigure) {
< 		CustomFigure oldTypedFigure = typedFigure;
---
> 	public NotificationChain basicSetTypedFigure(RealFigure newTypedFigure, NotificationChain msgs) {
> 		RealFigure oldTypedFigure = typedFigure;
172,173c121,125
< 		if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, oldTypedFigure, typedFigure));
---
> 		if (eNotificationRequired()) {
> 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, oldTypedFigure, newTypedFigure);
> 			if (msgs == null) msgs = notification; else msgs.add(notification);
> 		}
> 		return msgs;
181,186c133,141
< 	@SuppressWarnings("unchecked")
< 		@Override
< 	public NotificationChain eInverseAdd(InternalEObject otherEnd, int featureID, NotificationChain msgs) {
< 		switch (featureID) {
< 			case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS:
< 				return ((InternalEList<InternalEObject>)(InternalEList<?>)getReferencingElements()).basicAdd(otherEnd, msgs);
---
> 	public void setTypedFigure(RealFigure newTypedFigure) {
> 		if (newTypedFigure != typedFigure) {
> 			NotificationChain msgs = null;
> 			if (typedFigure != null)
> 				msgs = ((InternalEObject)typedFigure).eInverseRemove(this, EOPPOSITE_FEATURE_BASE - GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, null, msgs);
> 			if (newTypedFigure != null)
> 				msgs = ((InternalEObject)newTypedFigure).eInverseAdd(this, EOPPOSITE_FEATURE_BASE - GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, null, msgs);
> 			msgs = basicSetTypedFigure(newTypedFigure, msgs);
> 			if (msgs != null) msgs.dispatch();
188c143,144
< 		return super.eInverseAdd(otherEnd, featureID, msgs);
---
> 		else if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, newTypedFigure, newTypedFigure));
199,200c155,156
< 			case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS:
< 				return ((InternalEList<?>)getReferencingElements()).basicRemove(otherEnd, msgs);
---
> 			case GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE:
> 				return basicSetTypedFigure(null, msgs);
213,214d168
< 			case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS:
< 				return getReferencingElements();
218,219c172
< 				if (resolve) return getTypedFigure();
< 				return basicGetTypedFigure();
---
> 				return getTypedFigure();
233,236d185
< 			case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS:
< 				getReferencingElements().clear();
< 				getReferencingElements().addAll((Collection<? extends DiagramElement>)newValue);
< 				return;
241c190
< 				setTypedFigure((CustomFigure)newValue);
---
> 				setTypedFigure((RealFigure)newValue);
255,257d203
< 			case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS:
< 				getReferencingElements().clear();
< 				return;
262c208
< 				setTypedFigure((CustomFigure)null);
---
> 				setTypedFigure((RealFigure)null);
276,277d221
< 			case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS:
< 				return referencingElements != null && !referencingElements.isEmpty();
