24d23
< import org.eclipse.emf.ecore.util.EcoreUtil;
25a25
> import org.eclipse.gmf.internal.common.migrate.ModelLoadHelper;
70,73c70
< 		Resource resource = MigrationUtil.migrateModel(fileURI);
< 		if (resource == null) {
< 			return;
< 		}
---
> 		ModelLoadHelper loadHelper = MigrationUtil.migrateModel(fileURI);
75,77c72,73
< 		if (!resource.getErrors().isEmpty() || !resource.getWarnings().isEmpty()) {
< 			IStatus loadStatus = BasicDiagnostic.toIStatus(EcoreUtil.computeDiagnostic(resource, true));
< 			openErrorDialog(action.getText(), Messages.migration_problemsDetectedTitle, loadStatus);
---
> 		if (!loadHelper.isOK()) {
> 			DiagnosticsDialog.openOk(getShell(), action.getText(), Messages.migration_problemsDetectedTitle, loadHelper.getDiagnostics());
94a91,92
> 		Resource resource = loadHelper.getLoadedResource();
> 
