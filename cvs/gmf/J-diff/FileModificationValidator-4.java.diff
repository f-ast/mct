23a24
> import org.eclipse.ui.PlatformUI;
112a114
> 	 * 
139,141c141,150
< 	public boolean okToEdit(IFile[] files, String modificationReason) {
< 		IStatus status = ResourcesPlugin.getWorkspace().validateEdit(files,
< 			Display.getCurrent().getActiveShell());
---
> 	public boolean okToEdit(final IFile[] files, final String modificationReason) {
> 		final boolean result[] = new boolean[] {false};
> 
> 		PlatformUI.getWorkbench().getDisplay().syncExec(new Runnable() {
> 
> 			public void run() {
> 				IStatus status = ResourcesPlugin.getWorkspace().validateEdit(
> 					files,
> 					PlatformUI.getWorkbench().getActiveWorkbenchWindow()
> 						.getShell());
143c152
< 			return true;
---
> 					result[0] = true;
145,148c154,159
< 			MessageDialog.openError(Display.getCurrent().getActiveShell(),
< 				MessageFormat.format(editProblemDialogTitle,
< 					new Object[] {modificationReason}), MessageFormat.format(
< 					editProblemDialogMessage_part1,
---
> 
> 					MessageDialog.openError(PlatformUI.getWorkbench()
> 						.getActiveWorkbenchWindow().getShell(), MessageFormat
> 						.format(editProblemDialogTitle,
> 							new Object[] {modificationReason}), MessageFormat
> 						.format(editProblemDialogMessage_part1,
155c166,167
< 			return false;
---
> 					result[0] = false;
> 				}
156a169,170
> 		});
> 		return result[0];
