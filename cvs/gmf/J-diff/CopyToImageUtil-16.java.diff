2c2
<  * Copyright (c) 2005, 2007 IBM Corporation and others.
---
>  * Copyright (c) 2005, 2008 IBM Corporation and others.
47a48,49
> import org.eclipse.gmf.runtime.draw2d.ui.render.awt.internal.svg.SVGImage;
> import org.eclipse.gmf.runtime.draw2d.ui.render.awt.internal.svg.SVGImageConverter;
199c201
<         if (format.equals(ImageFileFormat.SVG)) {
---
>         if (format.equals(ImageFileFormat.SVG) || format.equals(ImageFileFormat.PDF)) {
230c232,233
< 		if (format.equals(ImageFileFormat.SVG)) {
---
> 		if (format.equals(ImageFileFormat.SVG)
> 				|| format.equals(ImageFileFormat.PDF)) {
233c236
< 			saveSVGToFile(destination, (DiagramSVGGenerator) gen, monitor);
---
> 			saveToFile(destination, (DiagramSVGGenerator) gen, format, monitor);
306a310
>     
321a326,346
> 		saveToFile(destination, generator, ImageFileFormat.SVG, monitor);
> 	}
>         
>     
>     /**
> 	 * Saves an SVG or PDF files.
> 	 * 
> 	 * @param destination
> 	 *            the destination file, including path and file name
> 	 * @param generator
> 	 *            the svg generator for a diagram, used to write
> 	 * @param format
> 	 *            currently supports SVG or PDF
> 	 * @param monitor
> 	 *            the progress monitor
> 	 * @exception CoreException
> 	 *                if this method fails
> 	 */
>     protected void saveToFile(IPath destination,
>             DiagramSVGGenerator generator, ImageFileFormat format, IProgressMonitor monitor)
>         throws CoreException {
328d352
<         
332d355
< 
335a359,361
> 			if (format == ImageFileFormat.PDF) {
> 				SVGImageConverter.exportToPDF((SVGImage) generator.getRenderedImage(), os);
> 			} else if (format == ImageFileFormat.SVG) {
336a363,366
> 			} else {
> 				throw new IllegalArgumentException(
> 						"Unexpected format: " + format.getName()); //$NON-NLS-1$
> 			}
345,346c375,376
<             IStatus status =
<                 new Status(IStatus.ERROR, "exportToFile", IStatus.OK, //$NON-NLS-1$
---
> 			IStatus status = new Status(IStatus.ERROR,
> 					"exportToFile", IStatus.OK, //$NON-NLS-1$
351a382,384
>   
>     
> 
