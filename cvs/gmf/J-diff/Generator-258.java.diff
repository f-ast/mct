18a19
> import java.util.List;
33a35
> import org.eclipse.gmf.codegen.gmfgen.GenCustomPreferencePage;
48a51
> import org.eclipse.gmf.codegen.gmfgen.GenPreferencePage;
49a53
> import org.eclipse.gmf.codegen.gmfgen.GenStandardPreferencePage;
54a59
> import org.eclipse.gmf.codegen.gmfgen.StandardPreferencePages;
207,211c212
< 		generateAppearancePreferencePage();
< 		generateConnectionsPreferencePage();
< 		generateGeneralPreferencePage();
< 		generatePrintingPreferencePage();
< 		generateRulersAndGridPreferencePage();
---
> 		generatePreferencePages(myDiagram.getPreferencePages());
516,517c517,525
< 	private void generateAppearancePreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getAppearancePreferencePageEmitter(), myEmitters.getAppearancePreferencePageName(myDiagram), myDiagram);
---
> 	private void generatePreferencePages(List<GenPreferencePage> pages) throws UnexpectedBehaviourException, InterruptedException {
> 		for (GenPreferencePage p : pages) {
> 			if (p instanceof GenCustomPreferencePage) {
> 				if (((GenCustomPreferencePage) p).isGenerateBoilerplate()) {
> 					doGenerateJavaClass(myEmitters.getCustomPreferencePageEmitter(), p.getQualifiedClassName(), p);
> 				}
> 			} else if (p instanceof GenStandardPreferencePage) {
> 				if (((GenStandardPreferencePage) p).getKind() != StandardPreferencePages.PATHMAPS_LITERAL) {
> 					doGenerateJavaClass(myEmitters.getStandardPreferencePageEmitter(), p.getQualifiedClassName(), p);
519,525c527,528
< 
< 	private void generateConnectionsPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getConnectionsPreferencePageEmitter(), myEmitters.getConnectionsPreferencePageName(myDiagram), myDiagram);
< 	}
< 
< 	private void generateGeneralPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getGeneralPreferencePageEmitter(), myEmitters.getGeneralPreferencePageName(myDiagram), myDiagram);
---
> 			} else {
> 				throw new UnexpectedBehaviourException("No idea how to handle GenPreferencePage subclass:" + p);
527,529c530
< 
< 	private void generatePrintingPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getPrintingPreferencePageEmitter(), myEmitters.getPrintingPreferencePageName(myDiagram), myDiagram);
---
> 			generatePreferencePages(p.getChildren());
531,533d531
< 
< 	private void generateRulersAndGridPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getRulersAndGridPreferencePageEmitter(), myEmitters.getRulersAndGridPreferencePageName(myDiagram), myDiagram);
