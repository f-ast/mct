19d18
< import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;
23a23,24
> import org.eclipse.gmf.runtime.notation.FillStyle;
> import org.eclipse.gmf.runtime.notation.LineStyle;
69c70,74
< 			IPreferenceStore store = (IPreferenceStore) getPreferencesHint().getPreferenceStore();
---
> 			IPreferenceStore store = (IPreferenceStore) getPreferencesHint()
> 				.getPreferenceStore();
> 			FillStyle fillStyle = (FillStyle) view
> 				.getStyle(NotationPackage.Literals.FILL_STYLE);
> 			if (fillStyle != null) {
71,73c76
< 			RGB fillRGB =
< 				PreferenceConverter.getColor(
< 					store,
---
> 				RGB fillRGB = PreferenceConverter.getColor(store,
75d77
< 			ViewUtil.setStructuralFeatureValue(view,NotationPackage.eINSTANCE.getFillStyle_FillColor(), FigureUtilities.RGBToInteger(fillRGB));
76a79,85
> 				fillStyle.setFillColor(FigureUtilities.RGBToInteger(fillRGB)
> 					.intValue());
> 			}
> 
> 			LineStyle lineStyle = (LineStyle) view
> 				.getStyle(NotationPackage.Literals.LINE_STYLE);
> 			if (lineStyle != null) {
78,80c87
< 			RGB lineRGB =
< 				PreferenceConverter.getColor(
< 					store,
---
> 				RGB lineRGB = PreferenceConverter.getColor(store,
82,83c89,94
< 			ViewUtil.setStructuralFeatureValue(view,NotationPackage.eINSTANCE.getLineStyle_LineColor(), FigureUtilities.RGBToInteger(lineRGB));
< 		}	}
---
> 
> 				lineStyle.setLineColor(FigureUtilities.RGBToInteger(lineRGB)
> 					.intValue());
> 			}
> 		}
> 	}
