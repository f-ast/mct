21a22
> import org.eclipse.draw2d.PositionConstants;
41a43,44
> 	private int graphDirection = PositionConstants.SOUTH;
> 
45a49
> 		graphDirection = graph.getDirection();
84a89,94
>             AdvancedSubGraph advancedSubgraphParent = parent instanceof AdvancedSubGraph ? (AdvancedSubGraph)parent : null;
>             if (advancedSubgraphParent != null && advancedSubgraphParent.getDirection() != PositionConstants.NONE) {
>            		g.setDirection(advancedSubgraphParent.getDirection());
>             } else {
>             	g.setDirection(graphDirection);            	
>             }
87,88c97,99
<             if (parent instanceof AdvancedSubGraph)
<                 adjustAutoSizeNodeWidthAndHeight((AdvancedSubGraph)parent);
---
>             if (advancedSubgraphParent != null) {
>                 adjustAutoSizeNodeWidthAndHeight(advancedSubgraphParent);
>             }
