23d22
< import org.eclipse.gmf.runtime.common.core.util.Trace;
25d23
< import org.eclipse.gmf.runtime.diagram.ui.l10n.SharedImages;
27,28d24
< import org.eclipse.gmf.runtime.diagram.ui.render.internal.DiagramUIRenderDebugOptions;
< import org.eclipse.gmf.runtime.diagram.ui.render.internal.DiagramUIRenderPlugin;
31d26
< import org.eclipse.gmf.runtime.draw2d.ui.render.awt.internal.image.ImageConverter;
127c122,123
< 	 * @see org.eclipse.gmf.runtime.diagram.ui.internal.clipboard.DiagramGenerator#createAWTImageForParts(java.util.List)
---
> 	 * @see org.eclipse.gmf.runtime.diagram.ui.render.clipboard.DiagramGenerator#createAWTImageForParts(java.util.List,
> 	 *      org.eclipse.swt.graphics.Rectangle)
129,130c125
< 	public java.awt.Image createAWTImageForParts(List selectedObjects) {
< 		org.eclipse.swt.graphics.Rectangle sourceRect = calculateImageRectangle(selectedObjects);
---
> 	public java.awt.Image createAWTImageForParts(List selectedObjects, org.eclipse.swt.graphics.Rectangle sourceRect) {
133d127
< 		try {
135,137c129,130
< 			awtImage = new BufferedImage(mm.LPtoDP(sourceRect.width),
< 				mm.LPtoDP(sourceRect.height),
< 				BufferedImage.TYPE_4BYTE_ABGR_PRE);
---
> 		awtImage = new BufferedImage(mm.LPtoDP(sourceRect.width), mm
> 				.LPtoDP(sourceRect.height), BufferedImage.TYPE_4BYTE_ABGR_PRE);
144,145c137,138
< 			IPreferenceStore preferenceStore =
< 				(IPreferenceStore) getDiagramEditPart().getDiagramPreferencesHint().getPreferenceStore();
---
> 		IPreferenceStore preferenceStore = (IPreferenceStore) getDiagramEditPart()
> 				.getDiagramPreferencesHint().getPreferenceStore();
147c140,141
< 			if (preferenceStore.getBoolean(IPreferenceConstants.PREF_ENABLE_ANTIALIAS)) {				
---
> 		if (preferenceStore
> 				.getBoolean(IPreferenceConstants.PREF_ENABLE_ANTIALIAS)) {
165c159,160
< 			renderToGraphics(mapModeGraphics, new Point(sourceRect.x, sourceRect.y), selectedObjects);
---
> 		renderToGraphics(mapModeGraphics,
> 				new Point(sourceRect.x, sourceRect.y), selectedObjects);
169,185d163
< 		} catch (Error e) {
< 			// log the Error but allow execution to continue
< 			Trace.catching(DiagramUIRenderPlugin.getInstance(),
< 				DiagramUIRenderDebugOptions.EXCEPTIONS_THROWING, getClass(),
< 				"createAWTImageForParts() failed to generate image", //$NON-NLS-1$
< 				e);
< 			awtImage = ImageConverter.convert(SharedImages.get(SharedImages.IMG_ERROR));
< 
< 		} catch (Exception ex) {
< 			// log the Exception but allow execution to continue
< 			Trace.catching(DiagramUIRenderPlugin.getInstance(),
< 				DiagramUIRenderDebugOptions.EXCEPTIONS_THROWING, getClass(),
< 				"createAWTImageForParts() failed to generate image", //$NON-NLS-1$
< 				ex);
< 			awtImage = ImageConverter.convert(SharedImages.get(SharedImages.IMG_ERROR));
< 		}
< 
