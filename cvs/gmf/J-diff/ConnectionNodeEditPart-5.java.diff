14d13
< import java.beans.PropertyChangeEvent;
25d23
< 
27,29d24
< import org.eclipse.gmf.runtime.diagram.core.listener.NotificationEvent;
< import org.eclipse.gmf.runtime.diagram.ui.editpolicies.GraphicalNodeEditPolicy;
< import org.eclipse.gmf.runtime.diagram.ui.properties.Properties;
30a26
> import org.eclipse.gmf.runtime.diagram.ui.editpolicies.GraphicalNodeEditPolicy;
33d28
< import org.eclipse.gmf.runtime.emf.core.util.MetaModelUtil;
39,41d33
< /*
<  * @canBeSeenBy %partners
<  */
173,190d164
< 	/**
< 	 * @see org.eclipse.gmf.runtime.diagram.ui.editparts.ConnectionEditPart#handlePropertyChangeEvent(java.beans.PropertyChangeEvent)
< 	 */
< 	protected void handlePropertyChangeEvent(PropertyChangeEvent event) {
< 		if (Properties.ID_SOURCECONNECTIONS.equals(event.getPropertyName()))
< 			refreshSourceConnections();
< 		else
< 		if (Properties.ID_TARGETCONNECTIONS.equals(event.getPropertyName()))
< 			refreshTargetConnections();
< 		else
< 			super.handlePropertyChangeEvent(event);
< 
<         Object element = MetaModelUtil.getElement(event.getPropertyName());
<         if (element != null && element.equals(NotationPackage.eINSTANCE.getIdentityAnchor_Id())) {
<         	anchorChange();
<         }
< 	}
< 		
201,205c175,187
< 	protected void handleNotificationEvent(NotificationEvent e) {
< 		super.handleNotificationEvent(e);
< 		Notification event = e.getNotification();
< 		if (event.getNewValue() instanceof IdentityAnchor ||
< 	 			event.getOldValue() instanceof IdentityAnchor){
---
> 	protected void handleNotificationEvent(Notification notification) {
> 		Object feature = notification.getFeature();
> 		if (NotationPackage.eINSTANCE.getView_SourceEdges().equals(feature))
> 			refreshSourceConnections();
> 		else
> 		if (NotationPackage.eINSTANCE.getView_TargetEdges().equals(feature))
> 			refreshTargetConnections();
> 		else
> 			super.handleNotificationEvent(notification);
> 
>         if (  NotationPackage.eINSTANCE.getIdentityAnchor_Id().equals(feature) ||
>         	  notification.getNewValue() instanceof IdentityAnchor ||
>         	  notification.getOldValue() instanceof IdentityAnchor) {
