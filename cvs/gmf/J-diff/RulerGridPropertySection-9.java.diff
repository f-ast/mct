6a7
> import org.eclipse.gmf.runtime.diagram.ui.l10n.DiagramUIMessages;
21a23,24
> import org.eclipse.swt.accessibility.AccessibleAdapter;
> import org.eclipse.swt.accessibility.AccessibleEvent;
23d25
< import org.eclipse.swt.custom.CLabel;
29,30d30
< import org.eclipse.swt.layout.FormAttachment;
< import org.eclipse.swt.layout.FormData;
42d41
< import org.eclipse.ui.views.properties.tabbed.ITabbedPropertyConstants;
92a92,94
>     // Default color for the grid.
>     private static final int LIGHT_GRAY_RGB = 12632256;
> 
175,176d176
<             private static final int LIGHT_GRAY_RGB = 12632256;
<             
221a222
>         getWidgetFactory().createLabel(composite, LINE_COLOR_LABEL);
225a227,232
>         lineColorButton.getAccessible().addAccessibleListener(new AccessibleAdapter() {
>             public void getName(AccessibleEvent e) {
>                 e.result = DiagramUIMessages.PropertyDescriptorFactory_LineColor;
>             }
>         });
>         
236c243
<                 lineColor = changeColor(event, lineColorButton,null, DiagramUIPropertiesImages.DESC_LINE_COLOR);
---
>                 lineColor = changeColor(event, lineColorButton, DiagramUIPropertiesImages.DESC_LINE_COLOR);
242,246d248
<         FormData data = new FormData();
<         data.left = new FormAttachment(0,80);
<         data.right = new FormAttachment(100, 0);
<         data.top = new FormAttachment(0, 0);
<         lineColorButton.setLayoutData(data);
248,249d249
<         
<         createLabelWidget(composite, LINE_COLOR_LABEL, lineColorButton);
252a253,254
>         getWidgetFactory().createLabel(composite, LINE_STYLE_LABEL); 
> 
268,274d269
<         FormData data = new FormData();
<         data.left = new FormAttachment(0,80);
<         data.right = new FormAttachment(100, 0);
<         data.top = new FormAttachment(0, 0);
<         lineStyleCombo.setLayoutData(data);
<         
<         createLabelWidget(composite, LINE_STYLE_LABEL, lineStyleCombo); 
282,283d276
<      * @param preferenceId -
<      *            id of the preference of the default color value for that property
290c283
<             String preferenceId, ImageDescriptor imageDescriptor) {
---
>             ImageDescriptor imageDescriptor) {
293c286
<             .getShell(), preferenceId, IDialogConstants.BUTTON_BAR_HEIGHT);
---
>             .getShell(), IDialogConstants.BUTTON_BAR_HEIGHT);
297a291,294
> 
>         if (popup.useDefaultColor()) {
>             return FigureUtilities.integerToRGB(new Integer(LIGHT_GRAY_RGB));
>         }
309c306,307
<             value = new Double(getPreferenceStore().getDouble(IPreferenceConstants.PREF_GRID_SPACING));
---
>             value = new Double(getWorkspacePropertyDouble(WorkspaceViewerProperties.GRIDSPACING));
>             setGridSpacing(value.doubleValue());
313a312,318
>     private void setGridSpacing(double value) {
>         // Set grid spacing back to the input value
>         NumberFormat numberFormater = NumberFormat.getInstance();
>         textWidget.setText(numberFormater.format(value));
>         textWidget.selectAll();
>     }       
>     
321c326
<         measurementGroup.setLayout(new GridLayout(2, true));
---
>         measurementGroup.setLayout(new GridLayout(2, false));
438c443
<                     double value = new Double(currentText).doubleValue();
---
>                     double value = convertStringToDouble(currentText).doubleValue();
441c446,447
<                         setWorkspaceProperty(WorkspaceViewerProperties.GRIDSPACING, new Double(currentText).doubleValue());
---
>                         setWorkspaceProperty(WorkspaceViewerProperties.GRIDSPACING, value);                       
>                         setGridSpacing(value);
456,458c462
<             NumberFormat numberFormater = NumberFormat.getInstance();
<             textWidget.setText(numberFormater.format(value));
<             textWidget.selectAll();
---
>             setGridSpacing(value);
459a464
>         
569,586d573
<      * Create a label for property name
<      * 
<      * @param parent -
<      *            parent composite
<      * @return - label to show property name
<      */
<     private CLabel createLabelWidget(Composite parent, String labelText, Control control) {
<         CLabel label = getWidgetFactory().createCLabel(parent, labelText);
<         FormData data = new FormData();
<         data.left = new FormAttachment(0, 0);
<         data.right = new FormAttachment(control,
<             -ITabbedPropertyConstants.HSPACE);
<         data.top = new FormAttachment(control, 0, SWT.CENTER);
<         label.setLayoutData(data);
<         return label;
<     }
<     
<     /**
642,648c629,632
<         gridlineGroup.setLayout(new GridLayout(1, true));
< 
<         Composite sectionComposite3 = getWidgetFactory().createFlatFormComposite(gridlineGroup);
<         createLineColorControl(sectionComposite3);
< 
<         Composite sectionComposite4 = getWidgetFactory().createFlatFormComposite(gridlineGroup);
<         createLineStyleControl(sectionComposite4);
---
>         GridLayout gridLayout = new GridLayout(2, false);
>         gridlineGroup.setLayout(gridLayout);
>         createLineColorControl(gridlineGroup);
>         createLineStyleControl(gridlineGroup);
