164c164,185
< 		Image image = null;
---
> 		Image image = getImage(side);
> 
> 		ImageFigure imageFigure = new ImageFigure(image);
> 		imageFigure.setSize(image.getBounds().width, image.getBounds().height);
> 		add(imageFigure);
> 
> 		setSize(imageFigure.getSize().getUnioned(ERROR_IMAGE.getSize()));
> 
> 		super.validate();
> 	}
>     
>     /**
>      * Gets the image to be used for the connection handle given the side of the
>      * shape where the connection handle will appear. A call to
>      * <code>isIncoming()</code> will reveal the direction of the handle.
>      * 
>      * @param side
>      *            the side of the shape where the connection handle will appear,
>      *            a value in PositionConstants
>      * @return the image to be used for the connection handle
>      */
>     protected Image getImage(int side) {
166c187
< 			image = isIncoming() ? DiagramUIPluginImages
---
>             return isIncoming() ? DiagramUIPluginImages
171c192
< 			image = isIncoming() ? DiagramUIPluginImages
---
>             return isIncoming() ? DiagramUIPluginImages
176c197
< 			image = isIncoming() ? DiagramUIPluginImages
---
>             return isIncoming() ? DiagramUIPluginImages
181c202
< 			image = isIncoming() ? DiagramUIPluginImages
---
>             return isIncoming() ? DiagramUIPluginImages
186,193d206
< 
< 		ImageFigure imageFigure = new ImageFigure(image);
< 		imageFigure.setSize(image.getBounds().width, image.getBounds().height);
< 		add(imageFigure);
< 
< 		setSize(imageFigure.getSize().getUnioned(ERROR_IMAGE.getSize()));
< 
< 		super.validate();
