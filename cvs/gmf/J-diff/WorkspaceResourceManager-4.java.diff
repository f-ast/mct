12a13
> import java.util.LinkedList;
13a15
> import org.eclipse.core.resources.ICommand;
19a22,23
> import org.eclipse.gmf.internal.xpand.Activator;
> import org.eclipse.gmf.internal.xpand.ResourceManager;
98a103,127
> 	protected ResourceManager[] getDependenies() {
> 		LinkedList<ResourceManager> rv = new LinkedList<ResourceManager>();
> 		try {
> 			IProject[] referencedProjects = contextProject.getReferencedProjects();
> 				for (IProject next : referencedProjects) {
> 					if (!next.isAccessible() || !hasXpandBuilder(next)) {
> 						continue;
> 					}
> 					rv.add(Activator.getResourceManager(next));
> 				}
> 		} catch (CoreException e) {
> 			//ignore
> 		}
> 		return rv.toArray(new ResourceManager[rv.size()]);
> 	}
> 
> 	private static boolean hasXpandBuilder(IProject p) throws CoreException {
> 		for (ICommand c : p.getDescription().getBuildSpec()) {
> 			if (OawBuilder.getBUILDER_ID().equals(c.getBuilderName())) {
> 				return true;
> 			}
> 		}
> 		return false;
> 	}
> 
