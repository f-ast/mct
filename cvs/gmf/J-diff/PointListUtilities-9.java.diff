18a19
> import org.eclipse.draw2d.geometry.PrecisionRectangle;
22d22
< 
58c58
< 			if (points.size() <= 2 || ptTerm == null || ptNext == null)
---
> 			if (points.size() <= 2 || ptTerm == null || ptNext == null) {
59a60
> 			}
65c66
< 				if (seg.y < straightLineTolerance) {
---
> 				if (Math.abs(seg.y) < straightLineTolerance) {
67c68
< 				} else if (seg.x < straightLineTolerance){
---
> 				} else if (Math.abs(seg.x) < straightLineTolerance){
77a79
> 	
121c123
< 				points.removePoint(i);
---
> 				points.removePoint(i--);
1804c1806,1808
< 		Point result = points.getFirstPoint();
---
> 		Point result = null;
> 		if (points.size() != 0) {
> 			result = points.getFirstPoint();
1811a1816
> 		}
1824c1829,1831
< 		Point result = points.getFirstPoint();
---
> 		Point result = null;
> 		if (points.size() != 0) {
> 			result = points.getFirstPoint();
1831a1839
> 		}
