59,68c59,60
< 
< 		ScrollBar hBar = scrollpane.getHorizontalScrollBar(),
< 			vBar = scrollpane.getVerticalScrollBar();
< 		Viewport viewport = scrollpane.getViewport();
< 
< 		Insets insets = new Insets();
< 		insets.bottom =
< 			hBar.getPreferredSize(clientArea.width, clientArea.height).height;
< 		insets.right =
< 			vBar.getPreferredSize(clientArea.width, clientArea.height).width;
---
> 		int bottom = 0;
> 		int right  = 0 ;
73,77d64
< 		Dimension available = clientArea.getSize(),
< 			preferred =
< 				viewport
< 					.getPreferredSize(available.width, available.height)
< 					.getCopy();
79,80c66,70
< 		boolean none = available.contains(preferred),
< 			both =
---
> 		Viewport viewport = scrollpane.getViewport();
> 		Dimension available = clientArea.getSize();
> 		Dimension preferred = viewport.getPreferredSize(available.width, available.height).getCopy();
> 		boolean none = available.contains(preferred);
> 		boolean both =
84,87c74,76
< 					&& preferred.contains(available),
< 			showV = both || preferred.height > available.height,
< 			showH = both || preferred.width > available.width;
< 
---
> 				&& preferred.contains(available);
> 		boolean showV = both || preferred.height > available.height;
> 		boolean showH = both || preferred.width > available.width;
91,95d79
< 
< 		if (!showV)
< 			insets.right = 0;
< 		if (!showH)
< 			insets.bottom = 0;
96a81,99
> 		int hPad = 0;
> 		int vPad = 0;
> 		ScrollBar vBar = null;
> 		ScrollBar hBar = null;
> 		
> 		if (hVis!=NEVER)
> 			hBar = scrollpane.getHorizontalScrollBar();
> 		if (vVis!=NEVER)
> 			vBar = scrollpane.getVerticalScrollBar();
> 				
> 		if (showH){
> 			bottom = hBar.getPreferredSize(clientArea.width, clientArea.height).height;
> 			hPad = hBar.getSize().height;
> 		}
> 		
> 		if (showV){
> 			right =	vBar.getPreferredSize(clientArea.width, clientArea.height).width;
> 			vPad = vBar.getSize().width;
> 		}
98,99d100
< 		int vPad = showV ? vBar.getSize().width : 0;
< 		int hPad = showH ?  hBar.getSize().height : 0;
103c104
< 					viewportArea.right() - insets.right,
---
> 					viewportArea.right() - right,
105c106
< 					insets.right,
---
> 					right,
108d108
< 			//vBar.setMaximum(preferred.height);
114c114
< 					viewportArea.bottom() - insets.bottom,
---
> 					viewportArea.bottom() - bottom,
116c116
< 					insets.bottom);
---
> 					bottom);
118d117
< 			//hBar.setMaximum(preferred.width);
119a119
> 		if (vBar!=null)
120a121
> 		if (hBar!=null)
