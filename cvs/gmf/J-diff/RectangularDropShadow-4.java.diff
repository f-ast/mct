27c27
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapModeUtil;
110c110
< 		Point pt = new Point(rBox.getRight().x - MapMode.DPtoLP(alpha_ir.width),
---
> 		Point pt = new Point(rBox.getRight().x - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ir.width),
122c122
< 		Dimension dim = getRightShadowDimension(rBox);
---
> 		Dimension dim = getRightShadowDimension(figure, rBox);
126,127c126,127
< 				rBox.getRight().x - MapMode.DPtoLP(alpha_ir.width),
< 				rBox.getTop().y + MapMode.DPtoLP(alpha_itr.height)) ;
---
> 				rBox.getRight().x - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ir.width),
> 				rBox.getTop().y + MapModeUtil.getMapMode(figure).DPtoLP(alpha_itr.height)) ;
147,148c147,148
< 				rBox.getRight().x - MapMode.DPtoLP(alpha_ir.width),
< 				rBox.getBottom().y - MapMode.DPtoLP(alpha_ib.height) );
---
> 				rBox.getRight().x - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ir.width),
> 				rBox.getBottom().y - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ib.height) );
160c160
< 		Dimension dim = getBottomShadowDimension(rBox);
---
> 		Dimension dim = getBottomShadowDimension(figure, rBox);
164,165c164,165
< 				rBox.getLeft().x + MapMode.DPtoLP(alpha_ilb.width),
< 				rBox.getBottom().y - MapMode.DPtoLP(alpha_ib.height) );
---
> 				rBox.getLeft().x + MapModeUtil.getMapMode(figure).DPtoLP(alpha_ilb.width),
> 				rBox.getBottom().y - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ib.height) );
180c180
< 				rBox.getBottom().y - MapMode.DPtoLP(alpha_ib.height) );
---
> 				rBox.getBottom().y - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ib.height) );
185a186
> 	 * @param figure
189c190
< 	protected Dimension getRightShadowDimension(Rectangle rBox) {
---
> 	protected Dimension getRightShadowDimension(IFigure figure, Rectangle rBox) {
191c192
< 		int height = Math.max(MapMode.LPtoDP(rBox.height) - alpha_itr.height - alpha_irb.height,
---
> 		int height = Math.max(MapModeUtil.getMapMode(figure).LPtoDP(rBox.height) - alpha_itr.height - alpha_irb.height,
207c208
< 	protected Dimension getBottomShadowDimension(Rectangle rBox) {
---
> 	protected Dimension getBottomShadowDimension(IFigure figure, Rectangle rBox) {
209c210
< 		int width = Math.max(MapMode.LPtoDP( rBox.width ) - alpha_ilb.width - alpha_irb.width,
---
> 		int width = Math.max(MapModeUtil.getMapMode(figure).LPtoDP( rBox.width ) - alpha_ilb.width - alpha_irb.width,
