2c2
<  * Copyright (c) 2002, 2003 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
14a15
> import org.eclipse.draw2d.IFigure;
15a17
> import org.eclipse.draw2d.geometry.Rectangle;
27a30
>     private IFigure containerFigure = null;
29c32,53
< 	/* (non-Javadoc)
---
> 
>     /**
>      * Constrcuts an instance
>      */
>     public CollapseFigure() {
>         super();
>     }
> 
>     /**
>      * Constrcuts an instance
>      * 
>      * @param containerFigure
>      *            containers's figure
>      */
>     public CollapseFigure(IFigure containerFigure) {
>         super();
>         this.containerFigure = containerFigure;
>     }
> 	
> 	/*
>      * (non-Javadoc)
>      * 
73a98,120
>     /*
>      * (non-Javadoc)
>      * 
>      * @see org.eclipse.draw2d.Figure#isVisible()
>      */
>     public boolean isVisible() {
>         boolean visibility = super.isVisible();
>         if (visibility && containerFigure != null) {
>             /*
>              * Try to hide the handle if it's to be drawn outside of the
>              * container edit part figure
>              */
>             Rectangle containerBounds = containerFigure.getClientArea()
>                 .getCopy();
>             containerFigure.translateToAbsolute(containerBounds);
>             translateToRelative(containerBounds);
>             return containerBounds.contains(getBounds());
>         }
>         return visibility;
>     }
>     
>     
> 
