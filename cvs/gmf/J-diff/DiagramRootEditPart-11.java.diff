285a286
> 		double gridSpacing = 0;
287c288,289
< 		double gridSpacing = getWorkspaceViewerPreferences().getDouble(WorkspaceViewerProperties.GRIDSPACING);
---
> 		if (getWorkspaceViewerPreferences() != null)
> 			gridSpacing = getWorkspaceViewerPreferences().getDouble(WorkspaceViewerProperties.GRIDSPACING);
329c331,333
< 		int rulerUnits = getWorkspaceViewerPreferences().getInt(WorkspaceViewerProperties.RULERUNIT);
---
> 		int rulerUnits = RulerProvider.UNIT_INCHES;
> 		if (getWorkspaceViewerPreferences() != null)
> 			rulerUnits = getWorkspaceViewerPreferences().getInt(WorkspaceViewerProperties.RULERUNIT);
529a534
> 		if (getWorkspaceViewerPreferences() != null)
549a555
> 		
551a558
> 		
574a582
> 		if (wsPrefStore != null) {
596a605
> 	}
