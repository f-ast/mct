20a21
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
117a119
>     private final TransactionalEditingDomain editingDomain;
119c121
< 	public DiagramRulerProvider( DiagramRuler ruler, IMapMode mm ) {
---
> 	public DiagramRulerProvider(TransactionalEditingDomain editingDomain, DiagramRuler ruler, IMapMode mm ) {
121a124
>         this.editingDomain = editingDomain;
175c178,179
< 		return new EtoolsProxyCommand( new CreateGuideCommand(theRuler, position) );
---
>         return new EtoolsProxyCommand(new CreateGuideCommand(
>             editingDomain, theRuler, position));
182c186
< 		return new EtoolsProxyCommand( new DeleteGuideCommand((Guide)guide) );
---
> 		return new EtoolsProxyCommand( new DeleteGuideCommand(editingDomain, (Guide)guide) );
192c196
< 		cmd.add( new EtoolsProxyCommand( new MoveGuideCommand((Guide)guide, pDelta) ) );
---
> 		cmd.add( new EtoolsProxyCommand( new MoveGuideCommand(editingDomain, (Guide)guide, pDelta) ) );
206c210
< 				spc = new SetPropertyCommand(new EObjectAdapter(part), Properties.ID_POSITIONX, Properties.ID_POSITIONX, new Integer(x));
---
> 				spc = new SetPropertyCommand(editingDomain, new EObjectAdapter(part), Properties.ID_POSITIONX, Properties.ID_POSITIONX, new Integer(x));
209c213
< 				spc = new SetPropertyCommand(new EObjectAdapter(part), Properties.ID_POSITIONY, Properties.ID_POSITIONY, new Integer(y));
---
> 				spc = new SetPropertyCommand(editingDomain, new EObjectAdapter(part), Properties.ID_POSITIONY, Properties.ID_POSITIONY, new Integer(y));
