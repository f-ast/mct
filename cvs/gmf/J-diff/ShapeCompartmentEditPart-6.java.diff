13a14
> import java.beans.PropertyChangeListener;
29a31
> import org.eclipse.emf.common.notify.Notification;
44,46c46
< import org.eclipse.swt.widgets.Display;
< 
< import org.eclipse.gmf.runtime.diagram.core.listener.NotificationEvent;
---
> import org.eclipse.gmf.runtime.diagram.core.listener.NotificationUtil;
58d57
< import org.eclipse.gmf.runtime.diagram.ui.properties.Properties;
60a60
> import org.eclipse.gmf.runtime.notation.NotationPackage;
61a62
> import org.eclipse.swt.widgets.Display;
69c70
< public abstract class ShapeCompartmentEditPart extends ResizableCompartmentEditPart implements ISurfaceEditPart {
---
> public abstract class ShapeCompartmentEditPart extends ResizableCompartmentEditPart implements ISurfaceEditPart, PropertyChangeListener {
402,404c403
< 		if (Properties.ID_EXTENTX.equals(pName)
< 			|| Properties.ID_EXTENTY.equals(pName)
< 			|| RangeModel.PROPERTY_EXTENT.equals(pName)
---
> 		if (RangeModel.PROPERTY_EXTENT.equals(pName)
408,410d406
< 		else {
< 			super.handlePropertyChangeEvent(event);
< 		}
420c416,421
< 	protected void handleNotificationEvent( NotificationEvent event ) {
---
> 	protected void handleNotificationEvent( Notification event ) {
> 		Object feature = event.getFeature();
> 		if (NotationPackage.eINSTANCE.getSize_Width().equals(feature)
> 			|| NotationPackage.eINSTANCE.getSize_Height().equals(feature)) {
> 			refreshConnectors();
> 		} else
422c423,425
< 		if ( event.isElementAddedToSlot() || event.isElementRemovedFromSlot() ) {
---
> 		
> 		if (NotificationUtil.isElementAddedToSlot(event) ||
> 			NotificationUtil.isElementRemovedFromSlot(event) ) {
562a566,576
> 	
> 	/**
> 	 * Handles the passed property changed event only if the editpart's view is
> 	 * not deleted.
> 	 */
> 	public final void propertyChange(PropertyChangeEvent event) {
> 		if (isActive())
> 			handlePropertyChangeEvent(event);
> 	}
> 
> 
