104,107c104,118
< 	/**
< 	 * An image descriptor that overlays two images: a basic icon and a thin
< 	 * color bar underneath it
< 	 */
---
> 	/** the default preference color */
> 	protected static final RGB DEFAULT_PREF_COLOR = new RGB(0, 0, 0);
> 
> 	protected Button fontColorButton;
> 
>     protected Button lineColorButton;
> 
> 	protected RGB fontColor;
> 
> 	protected RGB lineColor;
> 
> 	protected Group colorsAndFontsGroup;
> 
> 	protected int previousColor;
> 
159,173d169
< 	/** the default preference color */
< 	protected static final RGB DEFAULT_PREF_COLOR = new RGB(0, 0, 0);
< 
< 	protected Button fontColorButton;
< 
<     protected Button lineColorButton;
< 
< 	protected RGB fontColor;
< 
< 	protected RGB lineColor;
< 
< 	protected Group colorsAndFontsGroup;
< 
< 
< 
327a324,326
> 		if (lineColor != null){
> 			previousColor = FigureUtilities.RGBToInteger(lineColor);	
> 		}	
339a339,341
> 		if (fontColor != null){
> 			previousColor = FigureUtilities.RGBToInteger(fontColor);
> 		}
393c395
< 
---
>         popup.setPreviousColor(previousColor);
397d398
< 
401d401
< 
