21d20
< 
23d21
< import org.eclipse.gmf.runtime.common.core.util.ObjectAdapter;
26a25
> import org.eclipse.gmf.runtime.diagram.ui.commands.GetConnectorTypeAndEndCommand;
28d26
< import org.eclipse.gmf.runtime.diagram.ui.internal.commands.GetConnectorTypeAndEndCommand;
49,50d46
< 	 * 
< 	 * @see org.eclipse.gef.EditPolicy#getCommand(org.eclipse.gef.Request)
86,87c82,83
< 		GetConnectorTypeAndEndCommand menuCmd = new GetConnectorTypeAndEndCommand(
< 			request, (IGraphicalEditPart) getHost());
---
> 		GetConnectorTypeAndEndCommand menuCmd = getConnectorTypeAndEndPopupCommand(
> 			request);
92c88
< 		CreateViewAndOptionallyElementCommand createOtherEndCmd = getCreateViewAndOptionallyElementCommand(
---
> 		CreateViewAndOptionallyElementCommand createOtherEndCmd = getCreateOtherEndCommand(
98c94
< 			? getDeferredCreateConnectorViewAndElementCommand( 
---
> 			? getCreateConnectorCommand( 
100c96
< 				menuCmd.getConnectorTypeAdapter(),
---
> 				menuCmd.getConnectorAdapter(),
103c99
< 			: getDeferredCreateConnectorViewAndElementCommand(
---
> 			: getCreateConnectorCommand(
105c101
< 				menuCmd.getConnectorTypeAdapter(), 
---
> 				menuCmd.getConnectorAdapter(), 
115,116c111,116
< 	 
< 	 * @return a <code>CreateViewAndOptionallyElementCommand</code>
---
> 	 * @param request
> 	 *            A single create connection request or unspecified connection
> 	 *            requests (i.e. where the popup also prompts the user for the
> 	 *            type of relationship to created).
> 	 * @param part
> 	 * @return
117a118,123
> 	protected GetConnectorTypeAndEndCommand getConnectorTypeAndEndPopupCommand(
> 			CreateConnectionRequest request) {
> 		return new GetConnectorTypeAndEndCommand(request,
> 			(IGraphicalEditPart) getHost());
> 	}
> 
124,125c130,131
< 	protected CreateViewAndOptionallyElementCommand getCreateViewAndOptionallyElementCommand(
< 			ObjectAdapter endAdapter, Point location ) {
---
> 	protected CreateViewAndOptionallyElementCommand getCreateOtherEndCommand(
> 			IAdaptable endAdapter, Point location ) {
139c145
< 	protected DeferredCreateConnectorViewAndElementCommand getDeferredCreateConnectorViewAndElementCommand(
---
> 	protected ICommand getCreateConnectorCommand(
