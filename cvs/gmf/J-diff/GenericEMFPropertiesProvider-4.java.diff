14a15
> import org.eclipse.emf.edit.domain.AdapterFactoryEditingDomain;
16,17c17,18
< import org.eclipse.ui.views.properties.IPropertySourceProvider;
< 
---
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> import org.eclipse.emf.transaction.util.TransactionUtil;
23d23
< import org.eclipse.gmf.runtime.emf.core.internal.util.MSLAdapterFactoryManager;
24a25
> import org.eclipse.ui.views.properties.IPropertySourceProvider;
40d40
< 		// TODO Auto-generated constructor stub
41a42
> 
46,47c47,55
< 	protected static AdapterFactory getAdapterFactory() {
< 		return MSLAdapterFactoryManager.getAdapterFactory();
---
> 	protected static AdapterFactory getAdapterFactory(Object object) {
>         TransactionalEditingDomain editingDomain = TransactionUtil
>             .getEditingDomain(object);
> 
>         if (editingDomain instanceof AdapterFactoryEditingDomain) {
>             return ((AdapterFactoryEditingDomain) editingDomain)
>                 .getAdapterFactory();
>         }
>         return null;
60c68,72
< 			IItemPropertySource itemPropertySource = (IItemPropertySource) (getAdapterFactory()
---
>             AdapterFactory adapterFactory = getAdapterFactory(object);
>             if (adapterFactory == null) {
>                 return null;
>             }
> 			IItemPropertySource itemPropertySource = (IItemPropertySource) (adapterFactory
