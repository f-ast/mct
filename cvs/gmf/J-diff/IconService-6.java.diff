2c2
<  * Copyright (c) 2002, 2005 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
17a18
> import org.eclipse.gmf.runtime.common.core.service.IProvider;
71c72,73
< 					return getProvider().provides(operation);
---
> 					IProvider theProvider = getProvider();
> 					return theProvider != null ? theProvider.provides(operation) : false;
75c77,78
< 			return getProvider().provides(operation);
---
> 			IProvider theProvider = getProvider();
> 			return theProvider != null ? theProvider.provides(operation) : false;
85c88,89
< 			if (operation instanceof GetIconOperation) {
---
> 			if (operation instanceof GetIconOperation
> 					&& providerConfiguration != null) {
