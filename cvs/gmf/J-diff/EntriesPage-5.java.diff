21a22
> import org.eclipse.gmf.mappings.LabelNodeMapping;
26a28
> import org.eclipse.gmf.mappings.ShapeNodeMapping;
153,154c155,161
< 					if (next.getChild().getDiagramNode() != null) {
< 						sb.append(next.getChild().getDiagramNode().getName());
---
> 					if (next.getChild() instanceof ShapeNodeMapping && ((ShapeNodeMapping) next.getChild()).getDiagramNode() != null) {
> 						sb.append(((ShapeNodeMapping) next.getChild()).getDiagramNode().getName());
> 						if (next.getContainmentFeature() != null) {
> 							sb.append(";  ");
> 						}
> 					} else if (next.getChild() instanceof LabelNodeMapping && ((LabelNodeMapping) next.getChild()).getDiagramLabel() != null) {
> 						sb.append(((LabelNodeMapping) next.getChild()).getDiagramLabel().getName());
359c366
< 					NodeMapping nm = GMFMapFactory.eINSTANCE.createNodeMapping();
---
> 					ShapeNodeMapping nm = GMFMapFactory.eINSTANCE.createShapeNodeMapping();
559,560c566,567
< 			if (m.getDiagramNode() != null) {
< 				diagramElementLabel.setText(m.getDiagramNode().getName());
---
> 			if (m instanceof ShapeNodeMapping && ((ShapeNodeMapping) m).getDiagramNode() != null) {
> 				diagramElementLabel.setText(((ShapeNodeMapping) m).getDiagramNode().getName());
