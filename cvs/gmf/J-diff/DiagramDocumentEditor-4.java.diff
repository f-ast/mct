173a174,176
>         IDocumentProvider provider = getDocumentProvider();
>         IStatus status = provider.getStatus(getEditorInput());
> 
174a178
> 
176a181
>         if(status != null && status.isOK())
307c312
< 	 * @since 3.0
---
> 	 * 
325c330
< 	 * @since 3.0
---
> 	 * 
468c473
< 	 * @since 3.0
---
> 	 * 
492c497
< 	 * @since 2.1
---
> 	 * 
503a509
>     private boolean isHandlingElementDeletion = false;
523c529,530
< 
---
>             try {
>                 isHandlingElementDeletion = true;
525d531
< 
544d549
< 
546d550
< 
552c556,558
< 
---
>             } finally {
>                 isHandlingElementDeletion = false;
>             }
647c653
< 	 * @since 2.0
---
> 	 * 
658c664
< 	 * @since 2.0
---
> 	 * 
674c680
< 	 * @since 2.0
---
> 	 * 
694c700
< 	 * @since 2.1
---
> 	 * 
708c714
< 	 * @since 2.0
---
> 	 * 
779c785
< 	 * @since 2.0
---
> 	 * 
807c813
< 	 * @since 3.0
---
> 	 * 
833c839
< 	 * @since 2.0
---
> 	 * 
901c907
< 	 * @since 3.1
---
> 	 * 
943c949
< 	 * @since 3.0
---
> 	 * 
955c961
< 	 * @since 3.0
---
> 	 * 
964c970
< 	 * @since 2.0
---
> 	 * 
981c987
< 	 * @since 2.1
---
> 	 * 
1012c1018
< 	 * @since 2.0
---
> 	 * 
1025c1031
< 	 * @since 2.0
---
> 	 * 
1030c1036
< 	 * @since 2.1
---
> 	 * 
1035c1041
< 	 * @since 2.0
---
> 	 * 
1040c1046
< 	 * @since 2.0
---
> 	 * 
1050c1056
< 		 * @since 3.1
---
> 		 * 
1058c1064
< 		 * @since 3.1
---
> 		 * 
1067c1073
< 		 * @since 3.1
---
> 		 * 
1138c1144
< 		 * @since 3.1
---
> 		 * 
1157c1163
< 		 * @since 3.1
---
> 		 * 
1165c1171
< 		 * @since 3.1
---
> 		 * 
1173c1179
< 		 * @since 3.1
---
> 		 * 
1187c1193
< 		 * @since 3.0
---
> 		 * 
1267c1273
< 			if (deletedElement != null && deletedElement.equals(getEditorInput())) {
---
> 			if (deletedElement != null && deletedElement.equals(getEditorInput()) && !isHandlingElementDeletion) {
1301c1307,1308
< 							if (isDirty()) {
---
>                             final boolean initialDirtyState = isDirty();
> 							if (initialDirtyState || reuseDiagramOnMove()) {
1322c1329
< 							if (changed != null) {
---
> 							if (changed != null && previousContent != null) {
1326a1334,1344
>                                         
>                                         if(reuseDiagramOnMove() && !initialDirtyState) {
>                                             try {
>                                                 getDocumentProvider().resetDocument(getEditorInput());
>                                             } catch (CoreException e) {
>                                                 String title= EditorMessages.Editor_error_setinput_title;
>                                                 String msg= EditorMessages.Editor_error_setinput_message;
>                                                 Shell shell= getSite().getShell();
>                                                 ErrorDialog.openError(shell, title, msg, e.getStatus());
>                                             }
>                                         }
1348c1366
< 		 * @since 2.0
---
> 		 * 
1356c1374
< 		 * @since 2.0
---
> 		 * 
1365c1383
< 		 * @since 2.0
---
> 		 * 
1381c1399
< 		 * @since 3.0
---
> 		 * 
1485a1504,1507
>     
>     protected boolean reuseDiagramOnMove() {
>         return false;
>     }
