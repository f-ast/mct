24,29d23
< import org.eclipse.jface.preference.IPreferenceStore;
< import org.eclipse.swt.SWT;
< import org.eclipse.swt.SWTError;
< import org.eclipse.swt.printing.Printer;
< import org.eclipse.swt.widgets.Display;
< 
37c31,36
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
> import org.eclipse.jface.preference.IPreferenceStore;
> import org.eclipse.swt.SWT;
> import org.eclipse.swt.SWTError;
> import org.eclipse.swt.printing.Printer;
> import org.eclipse.swt.widgets.Display;
108,109c107,108
<     public static Point getPageSize(IPreferenceStore store) {
<     	return getPageSize(store, true);
---
>     public static Point getPageSize(IPreferenceStore store, IMapMode mm) {
>     	return getPageSize(store, true, mm);
116c115
<     public static Point getPageSize(IPreferenceStore store, boolean subtractMargins) {
---
>     public static Point getPageSize(IPreferenceStore store, boolean subtractMargins, IMapMode mm) {
157,158c156,157
< 		paperSize[0] = MapMode.DPtoLP((int)(width * displayDPI.x));
< 		paperSize[1] = MapMode.DPtoLP((int)(height * displayDPI.y));
---
> 		paperSize[0] = mm.DPtoLP((int)(width * displayDPI.x));
> 		paperSize[1] = mm.DPtoLP((int)(height * displayDPI.y));
270c269
< 	public static PageMargins getPageMargins(IPreferenceStore preferenceStore) {
---
> 	public static PageMargins getPageMargins(IPreferenceStore preferenceStore, IMapMode mm) {
275,276c274
< 		margins.left = MapMode
< 		.DPtoLP((int) ( displayDPI.x * preferenceStore
---
> 		margins.left = mm.DPtoLP((int) ( displayDPI.x * preferenceStore
278,279c276
< 		margins.right = MapMode
< 		.DPtoLP((int) ( displayDPI.x * preferenceStore
---
> 		margins.right = mm.DPtoLP((int) ( displayDPI.x * preferenceStore
281,282c278
< 		margins.top = MapMode
< 		.DPtoLP((int) ( displayDPI.y * preferenceStore
---
> 		margins.top = mm.DPtoLP((int) ( displayDPI.y * preferenceStore
284,285c280
< 		margins.bottom = MapMode
< 		.DPtoLP((int) ( displayDPI.y * preferenceStore
---
> 		margins.bottom = mm.DPtoLP((int) ( displayDPI.y * preferenceStore
