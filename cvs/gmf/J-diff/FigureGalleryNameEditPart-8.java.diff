48a49
> import org.eclipse.gmf.runtime.draw2d.ui.figures.WrappingLabel;
127,128c128,129
< 		if (figure instanceof WrapLabel) {
< 			return ((WrapLabel) figure).getText();
---
> 		if (figure instanceof WrappingLabel) {
> 			return ((WrappingLabel) figure).getText();
138,139c139,140
< 		if (figure instanceof WrapLabel) {
< 			((WrapLabel) figure).setText(text);
---
> 		if (figure instanceof WrappingLabel) {
> 			((WrappingLabel) figure).setText(text);
149,150c150,151
< 		if (figure instanceof WrapLabel) {
< 			return ((WrapLabel) figure).getIcon();
---
> 		if (figure instanceof WrappingLabel) {
> 			return ((WrappingLabel) figure).getIcon();
160,161c161,162
< 		if (figure instanceof WrapLabel) {
< 			((WrapLabel) figure).setIcon(icon);
---
> 		if (figure instanceof WrappingLabel) {
> 			((WrappingLabel) figure).setIcon(icon);
196,197c197
< 		EObject element = resolveSemanticElement();
< 		return element != null ? element : (View) getModel();
---
> 		return resolveSemanticElement();
216,217c216,218
< 		if (getParser() != null) {
< 			text = getParser().getPrintString(new EObjectAdapter(getParserElement()), getParserOptions().intValue());
---
> 		EObject parserElement = getParserElement();
> 		if (parserElement != null && getParser() != null) {
> 			text = getParser().getPrintString(new EObjectAdapter(parserElement), getParserOptions().intValue());
240c241
< 		if (getParser() == null) {
---
> 		if (getParserElement() == null || getParser() == null) {
286c287
< 		if (getParser() == null) {
---
> 		if (getParserElement() == null || getParser() == null) {
411,412c412,413
< 		if (style != null && getFigure() instanceof WrapLabel) {
< 			((WrapLabel) getFigure()).setTextUnderline(style.isUnderline());
---
> 		if (style != null && getFigure() instanceof WrappingLabel) {
> 			((WrappingLabel) getFigure()).setTextUnderline(style.isUnderline());
421,422c422,423
< 		if (style != null && getFigure() instanceof WrapLabel) {
< 			((WrapLabel) getFigure()).setTextStrikeThrough(style.isStrikeThrough());
---
> 		if (style != null && getFigure() instanceof WrappingLabel) {
> 			((WrappingLabel) getFigure()).setTextStrikeThrough(style.isStrikeThrough());
