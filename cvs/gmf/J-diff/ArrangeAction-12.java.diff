2c2
<  * Copyright (c) 2002, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2007 IBM Corporation and others.
31d30
< import org.eclipse.gef.commands.UnexecutableCommand;
85,87d83
< 	/* (non-Javadoc)
< 	 * @see org.eclipse.gmf.runtime.diagram.ui.actions.DiagramAction#getCommand()
< 	 */
89d84
< 		if (isArrangeAll()){
90a86
> 		if (isArrangeAll()) {
98,103c94
<             if (!arrangeCC.isEmpty())
<                 return arrangeCC;
<             else
<                 return UnexecutableCommand.INSTANCE;
<         }
< 		else if (getOperationSet().size() >= 2) {
---
> 		} else if (getOperationSet().size() >= 2) {
105,106c96,99
< 			if (parent != null)
< 				return parent.getCommand(getTargetRequest());
---
> 			if (parent != null) {
> 				Command cmd = parent.getCommand(getTargetRequest());
> 				if (cmd != null)
> 					arrangeCC.add(cmd);
108c101,102
< 		return UnexecutableCommand.INSTANCE;
---
> 		}
> 		return arrangeCC;
112,115c106,109
< 	 * Action is enabled if arrange all.   
< 	 * If arrange selection, action is enabled if the 
< 	 * operation set's parent has XYLayout 
< 	 * and there is atleast 2 siblings to arrange
---
> 	 * Action is enabled if arrange all. If arrange selection, action is enabled
> 	 * if the operation set's parent has XYLayout and there is atleast 2
> 	 * siblings to arrange
> 	 * 
