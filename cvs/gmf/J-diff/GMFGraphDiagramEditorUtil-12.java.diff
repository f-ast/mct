24a25
> import org.eclipse.core.resources.IResource;
36d36
< import org.eclipse.emf.ecore.xmi.XMIResource;
38d37
< import org.eclipse.emf.edit.ui.util.EditUIUtil;
60a60
> import org.eclipse.ui.IWorkbenchPage;
61a62,63
> import org.eclipse.ui.PlatformUI;
> import org.eclipse.ui.part.FileEditorInput;
71,75d72
< 	private static Map ourSaveOptions = null;
< 
< 	/**
< 	 * @generated
< 	 */
77,83c74,77
< 		if (ourSaveOptions == null) {
< 			ourSaveOptions = new HashMap();
< 			ourSaveOptions.put(XMIResource.OPTION_ENCODING, "UTF-8"); //$NON-NLS-1$
< 			ourSaveOptions.put(XMLResource.OPTION_RECORD_UNKNOWN_FEATURE, Boolean.TRUE);
< 			ourSaveOptions.put(Resource.OPTION_SAVE_ONLY_IF_CHANGED, Resource.OPTION_SAVE_ONLY_IF_CHANGED_MEMORY_BUFFER);
< 		}
< 		return ourSaveOptions;
---
> 		Map saveOptions = new HashMap();
> 		saveOptions.put(XMLResource.OPTION_ENCODING, "UTF-8"); //$NON-NLS-1$
> 		saveOptions.put(Resource.OPTION_SAVE_ONLY_IF_CHANGED, Resource.OPTION_SAVE_ONLY_IF_CHANGED_MEMORY_BUFFER);
> 		return saveOptions;
90c84,90
< 		return EditUIUtil.openEditor((EObject) diagram.getContents().get(0));
---
> 		String path = diagram.getURI().toPlatformString(true);
> 		IResource workspaceResource = ResourcesPlugin.getWorkspace().getRoot().findMember(new Path(path));
> 		if (workspaceResource instanceof IFile) {
> 			IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
> 			return null != page.openEditor(new FileEditorInput((IFile) workspaceResource), GMFGraphDiagramEditor.ID);
> 		}
> 		return false;
