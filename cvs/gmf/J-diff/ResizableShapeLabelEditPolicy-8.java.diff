2c2
<  * Copyright (c) 2004, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2004, 2007 IBM Corporation and others.
76,82d75
< 		PointList pl = new PointList();
< 		if (getHost().getParent() instanceof AbstractConnectionEditPart) {
< 			pl = ((AbstractConnectionEditPart) getHost().getParent())
< 				.getConnectionFigure().getPoints();
< 		} else {
< 			pl.addPoint(getReferencePoint());
< 		}
180a174,177
>         Point refPoint = getReferencePoint();
>         Point normalPoint = LabelHelper.offsetFromRelativeCoordinate(
>             getHostFigure(), rect, refPoint);
> 
183c180,181
< 			new EObjectAdapter(shapeView), rect.getSize());
---
>             new EObjectAdapter(shapeView), new Rectangle(normalPoint, rect
>                 .getSize()));
