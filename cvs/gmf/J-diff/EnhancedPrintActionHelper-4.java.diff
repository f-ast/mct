96c96
< 		DiagramPrinterUtil.printWithSettings(diagramEditor, createDiagramMap(diagramEditor),
---
> 		DiagramPrinterUtil.printWithSettings(diagramEditor, createDiagramMap(),
102,106c102
< 	 * All entries in the map correspond to open editors with the
< 	 * diagramEditor's id.
< 	 * 
< 	 * @param diagramEditor, we'll check for open editors with the
< 	 * diagramEditor's id.
---
> 	 * All entries in the map correspond to open editors.
112,114c108
< 	private Map createDiagramMap(DiagramEditor diagramEditor) {
< 		
< 		assert diagramEditor != null;
---
> 	private Map createDiagramMap() {
118,122d111
< 		String id = diagramEditor.getEditorSite().getId();
< 		
< 		//you cannot have a diagram with no id
< 		assert id != null;
< 		
124c113
< 		List diagramEditors = EditorService.getInstance().getRegisteredEditors(id);
---
> 		List diagramEditors = EditorService.getInstance().getRegisteredEditorParts();
136a126,127
>                 
>                 
152,154c143,145
< 					//the last choice is to use the id.
< 					//not very descriptive but better than nothing.
< 					diagramName = id;
---
> 					//the last choice is to use the actual name of the diagram
>                     //this has to exist!
> 					diagramName = dEditor.getDiagram().getName();
