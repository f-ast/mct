125c125,129
< 		return update_diagram(containerEditPart, g, false);
---
> 		Command cmd = update_diagram(containerEditPart, g, false);
> 		
> 		// reset mm mapmode to avoid memory leak
> 		mm = null;
> 		return cmd;
149c153
< 		return update_diagram(containerEditPart, g, true);
---
> 		Command cmd = update_diagram(containerEditPart, g, true);
150a155,157
> 		// reset mm mapmode to avoid memory leak
> 		mm = null;
> 		return cmd;
