2c2
<  * Copyright (c) 2002, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2007 IBM Corporation and others.
425c425
<         org.eclipse.draw2d.geometry.Point pageSize = PageInfoHelper.getPageSize(fPreferences, false, getMapMode());
---
>         org.eclipse.draw2d.geometry.Point pageBounds = PageInfoHelper.getPageSize(fPreferences, getMapMode());
442c442
<         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageSize, true);
---
>         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageBounds, true);
602,603d601
<         g.translate(translated.x, translated.y);
<         g.scale(userScale);
606a605,607
>         g.translate(translated.x, translated.y);
>         g.scale(userScale);
> 
659,661c660,662
<         org.eclipse.draw2d.geometry.Point pageSize = PageInfoHelper
<             .getPageSize(fPreferences, false, getMapMode());
<         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageSize, false);
---
>         org.eclipse.draw2d.geometry.Point pageBounds = PageInfoHelper
>             .getPageSize(fPreferences, getMapMode());
>         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageBounds, false);
668,670c669
<             Rectangle rectangle = dgrmEP.getChildrenBounds();
<             figureBounds.width = rectangle.x + rectangle.width + (numCols)*margins.right + numCols*margins.left ;
<             figureBounds.height = rectangle.y + rectangle.height + (numRows)*margins.top + numRows*margins.bottom;
---
>         	figureBounds = dgrmEP.getChildrenBounds();
674,675c673,674
<             actualWidth = numCols * pageSize.x;
<             actualHeight = numRows * pageSize.y;
---
>             actualWidth = numCols * pageBounds.x;
>             actualHeight = numRows * pageBounds.y;
678,689c677,678
<         org.eclipse.draw2d.geometry.Point pageBounds = PageInfoHelper
<             .getPageSize(fPreferences, getMapMode());
<         
< 
<         
<         Rectangle translate = new Rectangle(Math.min(0, figureBounds.x), Math
<             .min(0, figureBounds.y),
<             Math.max(pageBounds.x, numCols * pageSize.x), Math.max(pageBounds.y,
<                 numRows * pageSize.y));
<         
<         int totalHeight = (this.rows * pageSize.y);
<         int totalWidth  = (this.columns * pageSize.x);
---
>         int totalHeight = (this.rows * pageBounds.y);
>         int totalWidth  = (this.columns * pageBounds.x);
697,698c686,687
<         translated = new Point((int) (-translate.x * userScale),
<             (int) (-translate.y * userScale));
---
>         translated = new Point((int) (-figureBounds.x * userScale),
>             (int) (-figureBounds.y * userScale));
724c713
<                     drawPage(gc_, dgrmEP, fPreferences, translate, margins,
---
>                     drawPage(gc_, dgrmEP, fPreferences, figureBounds, margins,
