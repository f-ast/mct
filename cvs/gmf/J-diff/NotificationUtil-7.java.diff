2c2
<  * Copyright (c) 2004 IBM Corporation and others.
---
>  * Copyright (c) 2004, 2006 IBM Corporation and others.
12d11
< 
55d53
< 
96,98c94,100
<             if (notification.getFeature() instanceof EReference
<                 && ((EReference) notification.getFeature()).isContainment()) {
<                 if (notification.getEventType() == Notification.REMOVE_MANY) {
---
>             int eventType = notification.getEventType();
>             if ((eventType == Notification.REMOVE_MANY)
>                 || (eventType == Notification.REMOVE)) {
>                 Object feature = notification.getFeature();
>                 if (feature instanceof EReference
>                     && ((EReference) feature).isContainment()) {                    
>                     if (eventType == Notification.REMOVE_MANY) {
103c105
<                             deletedObjects.add(notification.getOldValue());
---
>                                 deletedObjects.add(removedObject);
106,108c108,109
<                 }
<                 if (notification.getEventType() == Notification.REMOVE
<                     && ((EObject) notification.getOldValue()).eResource() == null) {
---
>                     } else if (((EObject) notification.getOldValue())
>                         .eResource() == null) {
112a114
>         }
114a117
>     
