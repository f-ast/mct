2c2
<  * Copyright (c) 2002, 2005 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
13a14
> 
42a44
> import org.eclipse.gmf.runtime.diagram.ui.l10n.DiagramColorRegistry;
47d48
< import org.eclipse.gmf.runtime.draw2d.ui.figures.FigureUtilities;
49a51
> import org.eclipse.gmf.runtime.draw2d.ui.internal.mapmode.IMapModeHolder;
80c82
< 	private class WrapperMapMode implements IMapMode {
---
> 	private class WrapperMapMode implements IMapModeHolder {
118a121,124
> 		public IMapMode getMapMode() {
> 			return containedMM;
> 		}
> 		
392c398
< 		gridLayer.setForegroundColor(FigureUtilities.integerToColor(rgbValue));
---
> 		gridLayer.setForegroundColor(DiagramColorRegistry.getInstance().getColor(rgbValue));
601c607
< 		if (layers instanceof org.eclipse.gmf.runtime.draw2d.ui.internal.graphics.ScalableFreeformLayeredPane)
---
> 		if (getLayers() instanceof org.eclipse.gmf.runtime.draw2d.ui.internal.graphics.ScalableFreeformLayeredPane)
659a666,667
> 			} else {
> 				moveGridLayer(wsPrefStore.getBoolean(WorkspaceViewerProperties.GRIDORDER));
