14a15,16
> import org.eclipse.emf.ecore.EClassifier;
> import org.eclipse.emf.ecore.EObject;
19d20
< import org.eclipse.emf.ecore.util.EcoreUtil;
20a22
> import org.eclipse.gmf.mappings.FeatureInitializer;
22d23
< import org.eclipse.gmf.mappings.FeatureValueSpec;
24a26
> import org.eclipse.gmf.mappings.ReferenceNewElementSpec;
34a37,38
>  *   <li>{@link org.eclipse.gmf.mappings.impl.FeatureSeqInitializerImpl#getElementClass <em>Element Class</em>}</li>
>  *   <li>{@link org.eclipse.gmf.mappings.impl.FeatureSeqInitializerImpl#getCreatingInitializer <em>Creating Initializer</em>}</li>
51a56,65
> 	 * The cached value of the '{@link #getElementClass() <em>Element Class</em>}' reference.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getElementClass()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected EClass elementClass = null;
> 
> 	/**
75,76c89,103
< 		if (eContainerFeatureID != GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY) return null;
< 		return (MappingEntry)eContainer();
---
> 		MappingEntry mappingEntry = basicGetMappingEntry();
> 		return mappingEntry != null && mappingEntry.eIsProxy() ? (MappingEntry)eResolveProxy((InternalEObject)mappingEntry) : mappingEntry;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated NOT
> 	 */
> 	public MappingEntry basicGetMappingEntry() {
> 		EObject container = eContainer();
> 		while(container != null && !(container instanceof MappingEntry)) {
> 			container = container.eContainer();
> 		}
> 		return (container != null) ? (MappingEntry)container : null;
84,86c111,135
< 	public NotificationChain basicSetMappingEntry(MappingEntry newMappingEntry, NotificationChain msgs) {
< 		msgs = eBasicSetContainer((InternalEObject)newMappingEntry, GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY, msgs);
< 		return msgs;
---
> 	public EList getInitializers() {
> 		if (initializers == null) {
> 			initializers = new EObjectContainmentWithInverseEList(FeatureInitializer.class, this, GMFMapPackage.FEATURE_SEQ_INITIALIZER__INITIALIZERS, GMFMapPackage.FEATURE_INITIALIZER__FEATURE_SEQ_INITIALIZER);
> 		}
> 		return initializers;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated NOT
> 	 */
> 	public EClass getElementClass() {
> 		if(getCreatingInitializer() == null) {
> 			return (getMappingEntry() != null) ? getMappingEntry().getDomainContext() : null;
> 		}
> 		EClass eClass = getElementClassGen();
> 		if(eClass != null) {
> 			return eClass;
> 		}
> 		EClassifier eClassifier = null;
> 		if(getCreatingInitializer().getFeature() != null) {
> 			eClassifier = getCreatingInitializer().getFeature().getEType();			
> 		}
> 		return (eClassifier instanceof EClass) ? (EClass)eClassifier : null;
94,104c143,150
< 	public void setMappingEntry(MappingEntry newMappingEntry) {
< 		if (newMappingEntry != eInternalContainer() || (eContainerFeatureID != GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY && newMappingEntry != null)) {
< 			if (EcoreUtil.isAncestor(this, newMappingEntry))
< 				throw new IllegalArgumentException("Recursive containment not allowed for " + toString());
< 			NotificationChain msgs = null;
< 			if (eInternalContainer() != null)
< 				msgs = eBasicRemoveFromContainer(msgs);
< 			if (newMappingEntry != null)
< 				msgs = ((InternalEObject)newMappingEntry).eInverseAdd(this, GMFMapPackage.MAPPING_ENTRY__DOMAIN_INITIALIZER, MappingEntry.class, msgs);
< 			msgs = basicSetMappingEntry(newMappingEntry, msgs);
< 			if (msgs != null) msgs.dispatch();
---
> 	public EClass getElementClassGen() {
> 		if (elementClass != null && elementClass.eIsProxy()) {
> 			InternalEObject oldElementClass = (InternalEObject)elementClass;
> 			elementClass = (EClass)eResolveProxy(oldElementClass);
> 			if (elementClass != oldElementClass) {
> 				if (eNotificationRequired())
> 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS, oldElementClass, elementClass));
> 			}
106,107c152
< 		else if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY, newMappingEntry, newMappingEntry));
---
> 		return elementClass;
115,117c160,161
< 	public EList getInitializers() {
< 		if (initializers == null) {
< 			initializers = new EObjectContainmentWithInverseEList(FeatureValueSpec.class, this, GMFMapPackage.FEATURE_SEQ_INITIALIZER__INITIALIZERS, GMFMapPackage.FEATURE_VALUE_SPEC__FEATURE_SEQ_INITIALIZER);
---
> 	public EClass basicGetElementClass() {
> 		return elementClass;
119c163,195
< 		return initializers;
---
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated NOT
> 	 */
> 	public void setElementClass(EClass newElementClass) {
> 		if(getCreatingInitializer() == null && eContainer() != null) {
> 			return;
> 		}
> 		setElementClassGen(newElementClass);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public void setElementClassGen(EClass newElementClass) {
> 		EClass oldElementClass = elementClass;
> 		elementClass = newElementClass;
> 		if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS, oldElementClass, elementClass));
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public ReferenceNewElementSpec getCreatingInitializer() {
> 		if (eContainerFeatureID != GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER) return null;
> 		return (ReferenceNewElementSpec)eContainer();
129,132d204
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
< 				if (eInternalContainer() != null)
< 					msgs = eBasicRemoveFromContainer(msgs);
< 				return basicSetMappingEntry((MappingEntry)otherEnd, msgs);
134a207,210
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
> 				if (eInternalContainer() != null)
> 					msgs = eBasicRemoveFromContainer(msgs);
> 				return eBasicSetContainer(otherEnd, GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER, msgs);
146,147d221
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
< 				return basicSetMappingEntry(null, msgs);
149a224,225
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
> 				return eBasicSetContainer(null, GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER, msgs);
161,162c237,238
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
< 				return eInternalContainer().eInverseRemove(this, GMFMapPackage.MAPPING_ENTRY__DOMAIN_INITIALIZER, MappingEntry.class, msgs);
---
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
> 				return eInternalContainer().eInverseRemove(this, GMFMapPackage.REFERENCE_NEW_ELEMENT_SPEC__NEW_ELEMENT_INITIALIZERS, ReferenceNewElementSpec.class, msgs);
175c251,252
< 				return getMappingEntry();
---
> 				if (resolve) return getMappingEntry();
> 				return basicGetMappingEntry();
177a255,259
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
> 				if (resolve) return getElementClass();
> 				return basicGetElementClass();
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
> 				return getCreatingInitializer();
189,191d270
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
< 				setMappingEntry((MappingEntry)newValue);
< 				return;
195a275,277
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
> 				setElementClass((EClass)newValue);
> 				return;
207,209d288
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
< 				setMappingEntry((MappingEntry)null);
< 				return;
212a292,294
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
> 				setElementClass((EClass)null);
> 				return;
225c307
< 				return getMappingEntry() != null;
---
> 				return basicGetMappingEntry() != null;
227a310,313
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
> 				return elementClass != null;
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
> 				return getCreatingInitializer() != null;
