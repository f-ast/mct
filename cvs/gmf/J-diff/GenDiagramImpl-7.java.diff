11d10
< import java.util.Iterator;
22d20
< import org.eclipse.emf.ecore.EPackage;
42d39
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenDiagramImpl#getEmfGenModel <em>Emf Gen Model</em>}</li>
77,87c74
< 	protected EPackage domainMetaModel = null;
< 
< 	/**
< 	 * The cached value of the '{@link #getEmfGenModel() <em>Emf Gen Model</em>}' reference.
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @see #getEmfGenModel()
< 	 * @generated
< 	 * @ordered
< 	 */
< 	protected GenModel emfGenModel = null;
---
> 	protected GenPackage domainMetaModel = null;
97c84
< 	protected EClass domainDiagramElement = null;
---
> 	protected GenClass domainDiagramElement = null;
472c459
< 	public EPackage getDomainMetaModel() {
---
> 	public GenPackage getDomainMetaModel() {
474,475c461,462
< 			EPackage oldDomainMetaModel = domainMetaModel;
< 			domainMetaModel = (EPackage)eResolveProxy((InternalEObject)domainMetaModel);
---
> 			GenPackage oldDomainMetaModel = domainMetaModel;
> 			domainMetaModel = (GenPackage)eResolveProxy((InternalEObject)domainMetaModel);
489c476
< 	public EPackage basicGetDomainMetaModel() {
---
> 	public GenPackage basicGetDomainMetaModel() {
498,499c485,486
< 	public void setDomainMetaModel(EPackage newDomainMetaModel) {
< 		EPackage oldDomainMetaModel = domainMetaModel;
---
> 	public void setDomainMetaModel(GenPackage newDomainMetaModel) {
> 		GenPackage oldDomainMetaModel = domainMetaModel;
510,548c497
< 	public GenModel getEmfGenModel() {
< 		if (emfGenModel != null && emfGenModel.eIsProxy()) {
< 			GenModel oldEmfGenModel = emfGenModel;
< 			emfGenModel = (GenModel)eResolveProxy((InternalEObject)emfGenModel);
< 			if (emfGenModel != oldEmfGenModel) {
< 				if (eNotificationRequired())
< 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFGenPackage.GEN_DIAGRAM__EMF_GEN_MODEL, oldEmfGenModel, emfGenModel));
< 			}
< 		}
< 		return emfGenModel;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public GenModel basicGetEmfGenModel() {
< 		return emfGenModel;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public void setEmfGenModel(GenModel newEmfGenModel) {
< 		GenModel oldEmfGenModel = emfGenModel;
< 		emfGenModel = newEmfGenModel;
< 		if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_DIAGRAM__EMF_GEN_MODEL, oldEmfGenModel, emfGenModel));
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public EClass getDomainDiagramElement() {
---
> 	public GenClass getDomainDiagramElement() {
550,551c499,500
< 			EClass oldDomainDiagramElement = domainDiagramElement;
< 			domainDiagramElement = (EClass)eResolveProxy((InternalEObject)domainDiagramElement);
---
> 			GenClass oldDomainDiagramElement = domainDiagramElement;
> 			domainDiagramElement = (GenClass)eResolveProxy((InternalEObject)domainDiagramElement);
565c514
< 	public EClass basicGetDomainDiagramElement() {
---
> 	public GenClass basicGetDomainDiagramElement() {
574,575c523,524
< 	public void setDomainDiagramElement(EClass newDomainDiagramElement) {
< 		EClass oldDomainDiagramElement = domainDiagramElement;
---
> 	public void setDomainDiagramElement(GenClass newDomainDiagramElement) {
> 		GenClass oldDomainDiagramElement = domainDiagramElement;
660c609
< 			return toLowerCase(getDomainMetaModel().getName()) + ".edit.parts";
---
> 			return getPackageNamePrefix() + ".edit.parts";
689c638
< 			return toLowerCase(getDomainMetaModel().getName()) + ".edit.commands";
---
> 			return getPackageNamePrefix() + ".edit.commands";
718c667
< 			return toLowerCase(getDomainMetaModel().getName()) + ".providers";
---
> 			return getPackageNamePrefix() + ".providers";
740c689
< 			char[] v = getDomainMetaModel().getName().toCharArray();
---
> 			char[] v = getDomainMetaModel().getEcorePackage().getName().toCharArray();
809c758
< 			return getEmfGenModel().getModelPluginID() + ".gmf.editor";
---
> 			return getEMFGenModel().getModelPluginID() + ".gmf.editor";
838c787
< 			return CodeGenUtil.validJavaIdentifier(getEmfGenModel().getModelName()) + "DiagramEditorPlugin";
---
> 			return CodeGenUtil.validJavaIdentifier(getEMFGenModel().getModelName()) + "DiagramEditorPlugin";
867c816
< 			return toLowerCase(getDomainMetaModel().getName()) + ".editor";
---
> 			return getPackageNamePrefix() + ".editor";
896c845
< 			return toLowerCase(getDomainMetaModel().getName()) + ".edit.providers";
---
> 			return getPackageNamePrefix() + ".edit.providers";
1009c958
< 			return getEmfGenModel().getModelName().toLowerCase() + "_diagram";
---
> 			return getEMFGenModel().getModelName().toLowerCase() + "_diagram";
1072a1022,1030
> 	public GenModel getEMFGenModel() {
> 		return getDomainMetaModel().getGenModel();
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated NOT
> 	 */
1107c1065
< 	 * @generated NOT
---
> 	 * @generated
1110,1117c1068,1070
< 		GenPackage gp = getEmfGenModel().findGenPackage(domainMetaClass.getEPackage());
< 		for (Iterator it = gp.getGenClasses().iterator(); it.hasNext();) {
< 			GenClass genClass = (GenClass) it.next();
< 			if (genClass.getEcoreClass().equals(domainMetaClass)) {
< 				return genClass;
< 			}
< 		}
< 		throw new IllegalStateException("Can't find genClass for class '" + domainMetaClass.getName() + "' in package " + gp.getPackageName());
---
> 		// TODO: implement this method
> 		// Ensure that you remove @generated or mark it @generated NOT
> 		throw new UnsupportedOperationException();
1123c1076
< 	 * @generated NOT
---
> 	 * @generated
1126,1133c1079,1081
< 		GenClass genClass = findGenClass(domainMetaFeature.getEContainingClass());
< 		for (Iterator it = genClass.getGenFeatures().iterator(); it.hasNext();) {
< 			GenFeature next = (GenFeature) it.next();
< 			if (next.getEcoreFeature().equals(domainMetaFeature)) {
< 				return next;
< 			}
< 		}
< 		throw new IllegalStateException("Can't find genFeature for feature '" + domainMetaFeature.getName() + "' in class " + genClass.getName());
---
> 		// TODO: implement this method
> 		// Ensure that you remove @generated or mark it @generated NOT
> 		throw new UnsupportedOperationException();
1234,1236d1181
< 			case GMFGenPackage.GEN_DIAGRAM__EMF_GEN_MODEL:
< 				if (resolve) return getEmfGenModel();
< 				return basicGetEmfGenModel();
1302,1305c1247
< 				setDomainMetaModel((EPackage)newValue);
< 				return;
< 			case GMFGenPackage.GEN_DIAGRAM__EMF_GEN_MODEL:
< 				setEmfGenModel((GenModel)newValue);
---
> 				setDomainMetaModel((GenPackage)newValue);
1308c1250
< 				setDomainDiagramElement((EClass)newValue);
---
> 				setDomainDiagramElement((GenClass)newValue);
1393,1396c1335
< 				setDomainMetaModel((EPackage)null);
< 				return;
< 			case GMFGenPackage.GEN_DIAGRAM__EMF_GEN_MODEL:
< 				setEmfGenModel((GenModel)null);
---
> 				setDomainMetaModel((GenPackage)null);
1399c1338
< 				setDomainDiagramElement((EClass)null);
---
> 				setDomainDiagramElement((GenClass)null);
1479,1480d1417
< 			case GMFGenPackage.GEN_DIAGRAM__EMF_GEN_MODEL:
< 				return emfGenModel != null;
1569a1507,1510
> 	private String getPackageNamePrefix() {
> 		return toLowerCase(getDomainMetaModel().getEcorePackage().getName());
> 	}
> 
