51a52
> import org.eclipse.emf.ecore.plugin.EcorePlugin;
635a637
> 	 * @generated
639,682c641
< 
< 		// Create an adapter factory that yields item providers.
< 		//
< 		// XXX revisit - why don't we get this automatically generated?
< 		ArrayList<AdapterFactory> factories = new ArrayList<AdapterFactory>();
< 		factories.add(new ResourceItemProviderAdapterFactory());
< 		factories.add(new GMFGenItemProviderAdapterFactory());
< 		factories.add(new EcoreItemProviderAdapterFactory());
< 		factories.add(new GenModelItemProviderAdapterFactory());
< 		factories.add(new ReflectiveItemProviderAdapterFactory());
< 
< 		adapterFactory = new ComposedAdapterFactory(factories);
< 
< 		// Create the command stack that will notify this editor as commands are executed.
< 		//
< 		BasicCommandStack commandStack = new BasicCommandStack();
< 
< 		// Add a listener to set the most recent command's affected objects to be the selection of the viewer with focus.
< 		//
< 		commandStack.addCommandStackListener
< 			(new CommandStackListener() {
< 				 public void commandStackChanged(final EventObject event) {
< 					 getContainer().getDisplay().asyncExec
< 						 (new Runnable() {
< 							  public void run() {
< 								  firePropertyChange(IEditorPart.PROP_DIRTY);
< 
< 								  // Try to select the affected objects.
< 								  //
< 								  Command mostRecentCommand = ((CommandStack)event.getSource()).getMostRecentCommand();
< 								  if (mostRecentCommand != null) {
< 									  setSelectionToViewer(mostRecentCommand.getAffectedObjects());
< 								  }
< 								  if (propertySheetPage != null) {
< 									  propertySheetPage.refresh();
< 								  }
< 							  }
< 						  });
< 				 }
< 			 });
< 
< 		// Create the editing domain with a special command stack.
< 		//
< 		editingDomain = new AdapterFactoryEditingDomain(adapterFactory, commandStack, new HashMap<Resource, Boolean>());
---
> 		initializeEditingDomain();
691c650
< 	protected void initializeEditingDomain() {
---
> 	protected void initializeEditingDomainGen() {
734a694,698
> 	protected void initializeEditingDomain() {
> 		initializeEditingDomainGen();
> 		editingDomain.getResourceSet().getURIConverter().getURIMap().putAll(EcorePlugin.computePlatformURIMap());
> 	}
> 
