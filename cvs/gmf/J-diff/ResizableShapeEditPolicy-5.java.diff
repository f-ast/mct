2c2
<  * Copyright (c) 2002, 2005 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
16a17
> import org.eclipse.core.commands.ExecutionException;
26a28
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
40a43
> import org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart;
44c47
< import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand;
101c104,105
< 		ICommand resizeCommand = new SetBoundsCommand(
---
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost()).getEditingDomain();
> 		ICommand resizeCommand = new SetBoundsCommand(editingDomain, 
116c120
< 			extends AbstractModelCommand {
---
> 			extends AbstractTransactionalCommand {
124a129,130
>              * @param editingDomain
>              * the editing domain through which model changes are made
129c135
< 			public SetDeferredPropertyCommand(String label,
---
> 			public SetDeferredPropertyCommand(TransactionalEditingDomain editingDomain, String label,
131c137
< 				super(label, null);
---
> 				super(editingDomain, label, null);
136c142,145
< 			protected CommandResult doExecute(IProgressMonitor progressMonitor) {
---
> 			protected CommandResult doExecuteWithResult(
>                     IProgressMonitor progressMonitor, IAdaptable info)
>                 throws ExecutionException {
>                 
138c147
< 					return newCancelledCommandResult();
---
> 					return CommandResult.newCancelledCommandResult();
151c160
< 				return newOKCommandResult();
---
> 				return CommandResult.newOKCommandResult();
154c163,168
< 		SetDeferredPropertyCommand cmd = new SetDeferredPropertyCommand(
---
>         View view = (View) getHost().getModel();
>         
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost())
>             .getEditingDomain();
>         
>         SetDeferredPropertyCommand cmd = new SetDeferredPropertyCommand(editingDomain,
156c170
< 			new EObjectAdapter((View) getHost().getModel()), request
---
> 			new EObjectAdapter(view), request
