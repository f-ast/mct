18a19
> import org.eclipse.core.runtime.IConfigurationElement;
27a29
> import org.eclipse.gmf.runtime.common.ui.services.util.ActivityFilterProviderDescriptor;
39a42,61
>     /**
>      * A provider descriptor that will ignore providers that are contributed by
>      * a plug-in that is matched to a disabled capability.
>      */
>     private static class ProviderDescriptor
>         extends Service.ProviderDescriptor {
> 
>         private ActivityFilterProviderDescriptor activityFilter;
> 
>         public ProviderDescriptor(IConfigurationElement element) {
>             super(element);
>             activityFilter = new ActivityFilterProviderDescriptor(element);
>         }
> 
>         public boolean provides(IOperation operation) {
>             return activityFilter.provides(operation)
>                 && super.provides(operation);
>         }
>     }
> 
275a298,302
>     
>     protected Service.ProviderDescriptor newProviderDescriptor(
>             IConfigurationElement element) {
>             return new ProviderDescriptor(element);
>     }
