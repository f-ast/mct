270c270
< 	protected Collection selectionChangedListeners = new ArrayList();
---
> 	protected Collection<ISelectionChangedListener> selectionChangedListeners = new ArrayList<ISelectionChangedListener>();
315a316
> 				// Ignore.
317a319
> 				// Ignore.
319a322
> 				// Ignore.
321a325
> 				// Ignore.
329c333
< 	protected Collection removedResources = new ArrayList();
---
> 	protected Collection<Resource> removedResources = new ArrayList<Resource>();
335c339
< 	protected Collection changedResources = new ArrayList();
---
> 	protected Collection<Resource> changedResources = new ArrayList<Resource>();
341c345
< 	protected Collection savedResources = new ArrayList();
---
> 	protected Collection<Resource> savedResources = new ArrayList<Resource>();
349c353
< 	protected Map resourceToDiagnosticMap = new LinkedHashMap();
---
> 	protected Map<Resource, Diagnostic> resourceToDiagnosticMap = new LinkedHashMap<Resource, Diagnostic>();
366a371
> 			@Override
389a395
> 							break;
397a404
> 			@Override
401a409
> 			@Override
423,424c431,432
< 							protected Collection changedResources = new ArrayList();
< 							protected Collection removedResources = new ArrayList();
---
> 							protected Collection<Resource> changedResources = new ArrayList<Resource>();
> 							protected Collection<Resource> removedResources = new ArrayList<Resource>();
445c453
< 							public Collection getChangedResources() {
---
> 							public Collection<Resource> getChangedResources() {
449c457
< 							public Collection getRemovedResources() {
---
> 							public Collection<Resource> getRemovedResources() {
532,533c540
< 			for (Iterator i = changedResources.iterator(); i.hasNext(); ) {
< 				Resource resource = (Resource)i.next();
---
> 			for (Resource resource : changedResources) {
566,567c573
< 			for (Iterator i = resourceToDiagnosticMap.values().iterator(); i.hasNext(); ) {
< 				Diagnostic childDiagnostic = (Diagnostic)i.next();
---
> 			for (Diagnostic childDiagnostic : resourceToDiagnosticMap.values()) {
631c637,638
< 		List factories = new ArrayList();
---
> 		// XXX revisit - why don't we get this automatically generated?
> 		ArrayList<AdapterFactory> factories = new ArrayList<AdapterFactory>();
670c677
< 		editingDomain = new AdapterFactoryEditingDomain(adapterFactory, commandStack, new HashMap());
---
> 		editingDomain = new AdapterFactoryEditingDomain(adapterFactory, commandStack, new HashMap<Resource, Boolean>());
678a686
> 	@Override
689,690c697,698
< 	public void setSelectionToViewer(Collection collection) {
< 		final Collection theSelection = collection;
---
> 	public void setSelectionToViewer(Collection<?> collection) {
> 		final Collection<?> theSelection = collection;
953a962
> 	@Override
962c971
< 		    !((Resource)getEditingDomain().getResourceSet().getResources().get(0)).getContents().isEmpty()) {
---
> 		    !(getEditingDomain().getResourceSet().getResources().get(0)).getContents().isEmpty()) {
967a977
> 						@Override
972a983
> 						@Override
984a996
> 				selectionViewer.setSelection(new StructuredSelection(editingDomain.getResourceSet().getResources().get(0)), true);
998a1011
> 						@Override
1003a1017
> 						@Override
1025a1040
> 						@Override
1028a1044
> 						@Override
1048a1065
> 						@Override
1051a1069
> 						@Override
1073a1092
> 						@Override
1076a1096
> 						@Override
1114a1135
> 						@Override
1117a1139
> 						@Override
1159a1182
> 				@Override
1213a1237
> 	@Override
1227a1252,1253
> 	@SuppressWarnings("unchecked")
> 		@Override
1253a1280
> 				@Override
1272,1274c1299
< 					  ArrayList selection = new ArrayList();
< 					  selection.add(editingDomain.getResourceSet().getResources().get(0));
< 					  contentOutlineViewer.setSelection(new StructuredSelection(selection), true);
---
> 					  contentOutlineViewer.setSelection(new StructuredSelection(editingDomain.getResourceSet().getResources().get(0)), true);
1277a1303
> 				@Override
1282a1309
> 				@Override
1316c1343,1344
< 					public void setSelectionToViewer(List selection) {
---
> 					@Override
> 					public void setSelectionToViewer(List<?> selection) {
1320a1349
> 					@Override
1340c1369
< 			Iterator selectedElements = ((IStructuredSelection)selection).iterator();
---
> 			Iterator<?> selectedElements = ((IStructuredSelection)selection).iterator();
1349c1378
< 					ArrayList selectionList = new ArrayList();
---
> 					ArrayList<Object> selectionList = new ArrayList<Object>();
1376a1406
> 	@Override
1386a1417
> 	@Override
1393a1425
> 				@Override
1398,1399c1430
< 					for (Iterator i = editingDomain.getResourceSet().getResources().iterator(); i.hasNext(); ) {
< 						Resource resource = (Resource)i.next();
---
> 					for (Resource resource : editingDomain.getResourceSet().getResources()) {
1450a1482
> 			// Ignore
1460a1493
> 	@Override
1470a1504
> 	@Override
1478c1512
< 				doSaveAs(URI.createPlatformResourceURI(file.getFullPath().toString()), new FileEditorInput(file));
---
> 				doSaveAs(URI.createPlatformResourceURI(file.getFullPath().toString(), true), new FileEditorInput(file));
1489c1523
< 		((Resource)editingDomain.getResourceSet().getResources().get(0)).setURI(uri);
---
> 		(editingDomain.getResourceSet().getResources().get(0)).setURI(uri);
1543a1578
> 	@Override
1557a1593
> 	@Override
1607,1608c1643
< 		for (Iterator listeners = selectionChangedListeners.iterator(); listeners.hasNext(); ) {
< 			ISelectionChangedListener listener = (ISelectionChangedListener)listeners.next();
---
> 		for (ISelectionChangedListener listener : selectionChangedListeners) {
1625c1660
< 				Collection collection = ((IStructuredSelection)selection).toList();
---
> 				Collection<?> collection = ((IStructuredSelection)selection).toList();
1709a1745
> 	@Override
