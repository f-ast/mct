68a69
> import org.eclipse.gmf.graphdef.codegen.templates.TopGenerator;
82a84,85
> 	private static final String ENTRY_POINT = "main";
> 
102,113c105
< 		KeyMap keyMap = new HierarchyKeyMap() {
< 			/*
< 			 * Capture knowledge that we use classes and strings as keys
< 			 */
< 			public KeyChain map(Object key) {
< 				if (key instanceof String) {
< 					return super.map(key);
< 				} else {
< 					return super.map(key.getClass());
< 				}
< 			}
< 		};
---
> 		KeyMap keyMap = new ClassesOrStringsKeyMap();
122a115
> 		tr.put(ENTRY_POINT, "/top/Top.javajet", TopGenerator.class);
187,188c180,181
< 		Object args = new Object[] {fig, importManager, myTopDispatcher.getFQNSwitch(), myInnerDispatcher, Boolean.valueOf(myIsInnerClassCode)};
< 		res = myTopDispatcher.dispatch(fig, args);
---
> 		Object args = new Object[] {fig, myInnerDispatcher, myTopDispatcher, Boolean.valueOf(myIsInnerClassCode)};
> 		res = myTopDispatcher.dispatch(ENTRY_POINT, args);
193a187,199
> 	
> 	private static class ClassesOrStringsKeyMap extends HierarchyKeyMap {
> 		/*
> 		 * Capture knowledge that we use classes and strings as keys
> 		 */
> 		public KeyChain map(Object key) {
> 			if (key instanceof String) {
> 				return super.map(key);
> 			} else {
> 				return super.map(key.getClass());
> 			}
> 		}
> 	}
