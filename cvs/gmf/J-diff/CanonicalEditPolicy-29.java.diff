62d61
< import org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramEditPart;
67a67
> import org.eclipse.gmf.runtime.diagram.ui.parts.DiagramGraphicalViewer;
484,485c484,490
<         while (ep !=null && !(ep instanceof DiagramEditPart)){
<             ep = ep.getParent();
---
>         boolean isActivating = true;
>         // use the viewer to determine if we are still initializing the diagram
>         // do not use the DiagramEditPart.isActivating since ConnectionEditPart's
>         // parent will not be a diagram edit part
>         EditPartViewer viewer = ep.getViewer();
>         if (viewer instanceof DiagramGraphicalViewer){
>             isActivating = ((DiagramGraphicalViewer)viewer).isInitializing();
488,489c493,494
<         if ( ep==null ||
<             (ep!=null && ((DiagramEditPart)ep).isActivatingDiagram())||
---
>        
>         if (isActivating||
