13a14
> import java.awt.image.BufferedImage;
36a38
> import org.eclipse.gmf.runtime.diagram.ui.image.PartPositionInfo;
44a47
> import org.eclipse.gmf.runtime.draw2d.ui.render.awt.internal.image.ImageExporter;
77c80,81
< 	public DiagramEditPart createDiagramEditPart(Diagram diagram, Shell shell, PreferencesHint preferencesHint) {
---
>     public DiagramEditPart createDiagramEditPart(Diagram diagram, Shell shell,
>             PreferencesHint preferencesHint) {
86,87c90,91
< 		RootEditPart rootEP = EditPartService.getInstance()
< 			.createRootEditPart(diagram);
---
>         RootEditPart rootEP = EditPartService.getInstance().createRootEditPart(
>             diagram);
121c125,126
< 	 * @exception CoreException if this method fails
---
>      * @exception CoreException
>      *                if this method fails
124c129,130
< 			ImageFileFormat format, IProgressMonitor monitor, PreferencesHint preferencesHint)
---
>             ImageFileFormat format, IProgressMonitor monitor,
>             PreferencesHint preferencesHint)
147d152
< 
160c165,166
< 	 * @exception CoreException if this method fails
---
>      * @exception CoreException
>      *                if this method fails
165a172
>         boolean found = false;
176c183,188
< 		} else {
---
>         } else if (format.equals(ImageFileFormat.JPEG)
>                 || format.equals(ImageFileFormat.PNG)) {
> 
>             String exportFormat = ImageExporter.JPEG_FILE;
>             if (format.equals(ImageFileFormat.PNG))
>                 exportFormat = ImageExporter.PNG_FILE;
178a191,200
>             java.awt.Image image = gen.createAWTImageForDiagram();
>             if (image instanceof BufferedImage) {
>                 ImageExporter.exportToFile(destination, (BufferedImage) image,
>                     exportFormat, monitor);
>                 found = true;
>             }
>         }
> 
>         if (!found) {
>             gen = new DiagramImageGenerator(diagramEP);
205c227,228
< 	 * @exception CoreException if this method fails
---
>      * @exception CoreException
>      *                if this method fails
210a234
>         boolean found = false;
218a243,245
>             found = true;
>         } else if (format.equals(ImageFileFormat.JPEG)
>             || format.equals(ImageFileFormat.PNG)) {
220c247,258
< 		} else {
---
>             String exportFormat = ImageExporter.JPEG_FILE;
>             if (format.equals(ImageFileFormat.PNG))
>                 exportFormat = ImageExporter.PNG_FILE;
> 
>             java.awt.Image image = new DiagramImageGenerator(diagramEP)
>                 .createAWTImageForParts(selection);
>             if (image instanceof BufferedImage) {
>                 ImageExporter.exportToFile(destination, (BufferedImage) image,
>                     exportFormat, monitor);
>                 found = true;
>             }
>         }
221a260
>         if (!found) {
245c284,285
< 	 * @exception CoreException if this method fails
---
>      * @exception CoreException
>      *                if this method fails
277c317,318
< 	 * @exception CoreException if this method fails
---
>      * @exception CoreException
>      *                if this method fails
309c350,351
< 	 * @exception CoreException if this method fails
---
>      * @exception CoreException
>      *                if this method fails
334c376,377
< 	 * @exception CoreException if this method fails
---
>      * @exception CoreException
>      *                if this method fails
353,354c396
< 	private ImageData createImageData(Image image)
<  {
---
>     private ImageData createImageData(Image image) {
