16d15
< import org.eclipse.gmf.mappings.AbstractNodeMapping;
21c20
< import org.eclipse.gmf.mappings.ChildNodeMapping;
---
> import org.eclipse.gmf.mappings.ChildReference;
34a34
> import org.eclipse.gmf.mappings.NeedsContainment;
35a36
> import org.eclipse.gmf.mappings.NodeReference;
37a39
> import org.eclipse.gmf.mappings.TopNodeReference;
53c55
< 	private EClass abstractNodeMappingEClass = null;
---
> 	private EClass mappingEntryEClass = null;
60c62
< 	private EClass mappingEntryEClass = null;
---
> 	private EClass needsContainmentEClass = null;
67c69,83
< 	private EClass nodeMappingEClass = null;
---
> 	private EClass nodeReferenceEClass = null;
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	private EClass childReferenceEClass = null;
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	private EClass topNodeReferenceEClass = null;
74c90
< 	private EClass childNodeMappingEClass = null;
---
> 	private EClass nodeMappingEClass = null;
272,273c288,289
< 	public EClass getAbstractNodeMapping() {
< 		return abstractNodeMappingEClass;
---
> 	public EClass getMappingEntry() {
> 		return mappingEntryEClass;
281,282c297,298
< 	public EReference getAbstractNodeMapping_ChildMappings() {
< 		return (EReference)abstractNodeMappingEClass.getEStructuralFeatures().get(0);
---
> 	public EReference getMappingEntry_DomainMetaElement() {
> 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(0);
290,291c306,307
< 	public EReference getAbstractNodeMapping_CompartmentMappings() {
< 		return (EReference)abstractNodeMappingEClass.getEStructuralFeatures().get(1);
---
> 	public EReference getMappingEntry_DomainSpecialization() {
> 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(1);
299,300c315,316
< 	public EClass getMappingEntry() {
< 		return mappingEntryEClass;
---
> 	public EReference getMappingEntry_DomainInitializer() {
> 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(2);
308,309c324,325
< 	public EReference getMappingEntry_DomainMetaElement() {
< 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(0);
---
> 	public EReference getMappingEntry_LabelMappings() {
> 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(3);
317,318c333,334
< 	public EReference getMappingEntry_DomainSpecialization() {
< 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(1);
---
> 	public EClass getNeedsContainment() {
> 		return needsContainmentEClass;
326,327c342,343
< 	public EReference getMappingEntry_DomainInitializer() {
< 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(2);
---
> 	public EReference getNeedsContainment_ContainmentFeature() {
> 		return (EReference)needsContainmentEClass.getEStructuralFeatures().get(0);
335,336c351,352
< 	public EReference getMappingEntry_ContainmentFeature() {
< 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(3);
---
> 	public EClass getNodeReference() {
> 		return nodeReferenceEClass;
344,345c360,361
< 	public EReference getMappingEntry_LabelMappings() {
< 		return (EReference)mappingEntryEClass.getEStructuralFeatures().get(4);
---
> 	public EReference getNodeReference_ChildrenFeature() {
> 		return (EReference)nodeReferenceEClass.getEStructuralFeatures().get(0);
353,354c369,370
< 	public EClass getNodeMapping() {
< 		return nodeMappingEClass;
---
> 	public EClass getChildReference() {
> 		return childReferenceEClass;
362,363c378,388
< 	public EReference getNodeMapping_DiagramNode() {
< 		return (EReference)nodeMappingEClass.getEStructuralFeatures().get(0);
---
> 	public EReference getChildReference_ParentNode() {
> 		return (EReference)childReferenceEClass.getEStructuralFeatures().get(0);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EReference getChildReference_Compartment() {
> 		return (EReference)childReferenceEClass.getEStructuralFeatures().get(1);
371,372c396,397
< 	public EClass getChildNodeMapping() {
< 		return childNodeMappingEClass;
---
> 	public EReference getChildReference_OwnedChild() {
> 		return (EReference)childReferenceEClass.getEStructuralFeatures().get(2);
380,381c405,406
< 	public EReference getChildNodeMapping_DiagramNode() {
< 		return (EReference)childNodeMappingEClass.getEStructuralFeatures().get(0);
---
> 	public EReference getChildReference_ReferencedChild() {
> 		return (EReference)childReferenceEClass.getEStructuralFeatures().get(3);
389,390c414,415
< 	public EReference getChildNodeMapping_Compartment() {
< 		return (EReference)childNodeMappingEClass.getEStructuralFeatures().get(1);
---
> 	public EClass getTopNodeReference() {
> 		return topNodeReferenceEClass;
398,399c423,460
< 	public EReference getChildNodeMapping_ParentNode() {
< 		return (EReference)childNodeMappingEClass.getEStructuralFeatures().get(2);
---
> 	public EReference getTopNodeReference_OwnedChild() {
> 		return (EReference)topNodeReferenceEClass.getEStructuralFeatures().get(0);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EClass getNodeMapping() {
> 		return nodeMappingEClass;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EReference getNodeMapping_DiagramNode() {
> 		return (EReference)nodeMappingEClass.getEStructuralFeatures().get(0);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EReference getNodeMapping_Children() {
> 		return (EReference)nodeMappingEClass.getEStructuralFeatures().get(1);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EReference getNodeMapping_Compartments() {
> 		return (EReference)nodeMappingEClass.getEStructuralFeatures().get(2);
416c477
< 	public EReference getCompartmentMapping_ParentNodeMapping() {
---
> 	public EReference getCompartmentMapping_Compartment() {
425c486
< 	public EReference getCompartmentMapping_Compartment() {
---
> 	public EReference getCompartmentMapping_ParentNode() {
434c495
< 	public EReference getCompartmentMapping_ChildNodes() {
---
> 	public EReference getCompartmentMapping_Children() {
1071d1131
< 		createEReference(mappingEntryEClass, MAPPING_ENTRY__CONTAINMENT_FEATURE);
1074,1076c1134,1147
< 		abstractNodeMappingEClass = createEClass(ABSTRACT_NODE_MAPPING);
< 		createEReference(abstractNodeMappingEClass, ABSTRACT_NODE_MAPPING__CHILD_MAPPINGS);
< 		createEReference(abstractNodeMappingEClass, ABSTRACT_NODE_MAPPING__COMPARTMENT_MAPPINGS);
---
> 		needsContainmentEClass = createEClass(NEEDS_CONTAINMENT);
> 		createEReference(needsContainmentEClass, NEEDS_CONTAINMENT__CONTAINMENT_FEATURE);
> 
> 		nodeReferenceEClass = createEClass(NODE_REFERENCE);
> 		createEReference(nodeReferenceEClass, NODE_REFERENCE__CHILDREN_FEATURE);
> 
> 		childReferenceEClass = createEClass(CHILD_REFERENCE);
> 		createEReference(childReferenceEClass, CHILD_REFERENCE__PARENT_NODE);
> 		createEReference(childReferenceEClass, CHILD_REFERENCE__COMPARTMENT);
> 		createEReference(childReferenceEClass, CHILD_REFERENCE__OWNED_CHILD);
> 		createEReference(childReferenceEClass, CHILD_REFERENCE__REFERENCED_CHILD);
> 
> 		topNodeReferenceEClass = createEClass(TOP_NODE_REFERENCE);
> 		createEReference(topNodeReferenceEClass, TOP_NODE_REFERENCE__OWNED_CHILD);
1080,1084c1151,1152
< 
< 		childNodeMappingEClass = createEClass(CHILD_NODE_MAPPING);
< 		createEReference(childNodeMappingEClass, CHILD_NODE_MAPPING__DIAGRAM_NODE);
< 		createEReference(childNodeMappingEClass, CHILD_NODE_MAPPING__COMPARTMENT);
< 		createEReference(childNodeMappingEClass, CHILD_NODE_MAPPING__PARENT_NODE);
---
> 		createEReference(nodeMappingEClass, NODE_MAPPING__CHILDREN);
> 		createEReference(nodeMappingEClass, NODE_MAPPING__COMPARTMENTS);
1087d1154
< 		createEReference(compartmentMappingEClass, COMPARTMENT_MAPPING__PARENT_NODE_MAPPING);
1089c1156,1157
< 		createEReference(compartmentMappingEClass, COMPARTMENT_MAPPING__CHILD_NODES);
---
> 		createEReference(compartmentMappingEClass, COMPARTMENT_MAPPING__PARENT_NODE);
> 		createEReference(compartmentMappingEClass, COMPARTMENT_MAPPING__CHILDREN);
1196,1201c1264,1270
< 		abstractNodeMappingEClass.getESuperTypes().add(this.getMappingEntry());
< 		abstractNodeMappingEClass.getESuperTypes().add(this.getMenuOwner());
< 		abstractNodeMappingEClass.getESuperTypes().add(this.getToolOwner());
< 		abstractNodeMappingEClass.getESuperTypes().add(this.getAppearanceSteward());
< 		nodeMappingEClass.getESuperTypes().add(this.getAbstractNodeMapping());
< 		childNodeMappingEClass.getESuperTypes().add(this.getAbstractNodeMapping());
---
> 		nodeReferenceEClass.getESuperTypes().add(this.getNeedsContainment());
> 		childReferenceEClass.getESuperTypes().add(this.getNodeReference());
> 		topNodeReferenceEClass.getESuperTypes().add(this.getNodeReference());
> 		nodeMappingEClass.getESuperTypes().add(this.getMappingEntry());
> 		nodeMappingEClass.getESuperTypes().add(this.getMenuOwner());
> 		nodeMappingEClass.getESuperTypes().add(this.getToolOwner());
> 		nodeMappingEClass.getESuperTypes().add(this.getAppearanceSteward());
1202a1272
> 		linkMappingEClass.getESuperTypes().add(this.getNeedsContainment());
1212c1282
< 		initEReference(getMapping_Nodes(), this.getNodeMapping(), null, "nodes", null, 1, -1, Mapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 		initEReference(getMapping_Nodes(), this.getTopNodeReference(), null, "nodes", null, 1, -1, Mapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1222d1291
< 		initEReference(getMappingEntry_ContainmentFeature(), ecorePackage.getEReference(), null, "containmentFeature", null, 0, 1, MappingEntry.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1227,1229c1296,1311
< 		initEClass(abstractNodeMappingEClass, AbstractNodeMapping.class, "AbstractNodeMapping", IS_ABSTRACT, !IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
< 		initEReference(getAbstractNodeMapping_ChildMappings(), this.getChildNodeMapping(), this.getChildNodeMapping_ParentNode(), "childMappings", null, 0, -1, AbstractNodeMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
< 		initEReference(getAbstractNodeMapping_CompartmentMappings(), this.getCompartmentMapping(), this.getCompartmentMapping_ParentNodeMapping(), "compartmentMappings", null, 0, -1, AbstractNodeMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 		initEClass(needsContainmentEClass, NeedsContainment.class, "NeedsContainment", IS_ABSTRACT, IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
> 		initEReference(getNeedsContainment_ContainmentFeature(), ecorePackage.getEReference(), null, "containmentFeature", null, 0, 1, NeedsContainment.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 
> 		initEClass(nodeReferenceEClass, NodeReference.class, "NodeReference", IS_ABSTRACT, !IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
> 		initEReference(getNodeReference_ChildrenFeature(), ecorePackage.getEReference(), null, "childrenFeature", null, 0, 1, NodeReference.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 
> 		addEOperation(nodeReferenceEClass, this.getNodeMapping(), "getChild", 0, 1);
> 
> 		initEClass(childReferenceEClass, ChildReference.class, "ChildReference", !IS_ABSTRACT, !IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
> 		initEReference(getChildReference_ParentNode(), this.getNodeMapping(), this.getNodeMapping_Children(), "parentNode", null, 1, 1, ChildReference.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getChildReference_Compartment(), this.getCompartmentMapping(), this.getCompartmentMapping_Children(), "compartment", null, 0, 1, ChildReference.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getChildReference_OwnedChild(), this.getNodeMapping(), null, "ownedChild", null, 0, 1, ChildReference.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getChildReference_ReferencedChild(), this.getNodeMapping(), null, "referencedChild", null, 0, 1, ChildReference.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 
> 		initEClass(topNodeReferenceEClass, TopNodeReference.class, "TopNodeReference", !IS_ABSTRACT, !IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
> 		initEReference(getTopNodeReference_OwnedChild(), this.getNodeMapping(), null, "ownedChild", null, 1, 1, TopNodeReference.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1233,1237c1315,1316
< 
< 		initEClass(childNodeMappingEClass, ChildNodeMapping.class, "ChildNodeMapping", !IS_ABSTRACT, !IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
< 		initEReference(getChildNodeMapping_DiagramNode(), theGMFGraphPackage.getChild(), null, "diagramNode", null, 1, 1, ChildNodeMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
< 		initEReference(getChildNodeMapping_Compartment(), this.getCompartmentMapping(), this.getCompartmentMapping_ChildNodes(), "compartment", null, 0, 1, ChildNodeMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
< 		initEReference(getChildNodeMapping_ParentNode(), this.getAbstractNodeMapping(), this.getAbstractNodeMapping_ChildMappings(), "parentNode", null, 1, 1, ChildNodeMapping.class, !IS_TRANSIENT, !IS_VOLATILE, !IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 		initEReference(getNodeMapping_Children(), this.getChildReference(), this.getChildReference_ParentNode(), "children", null, 0, -1, NodeMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getNodeMapping_Compartments(), this.getCompartmentMapping(), this.getCompartmentMapping_ParentNode(), "compartments", null, 0, -1, NodeMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1240d1318
< 		initEReference(getCompartmentMapping_ParentNodeMapping(), this.getAbstractNodeMapping(), this.getAbstractNodeMapping_CompartmentMappings(), "parentNodeMapping", null, 1, 1, CompartmentMapping.class, !IS_TRANSIENT, !IS_VOLATILE, !IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1242c1320,1321
< 		initEReference(getCompartmentMapping_ChildNodes(), this.getChildNodeMapping(), this.getChildNodeMapping_Compartment(), "childNodes", null, 0, -1, CompartmentMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 		initEReference(getCompartmentMapping_ParentNode(), this.getNodeMapping(), this.getNodeMapping_Compartments(), "parentNode", null, 1, 1, CompartmentMapping.class, !IS_TRANSIENT, !IS_VOLATILE, !IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getCompartmentMapping_Children(), this.getChildReference(), this.getChildReference_Compartment(), "children", null, 0, -1, CompartmentMapping.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1472c1551
< 		  (getMappingEntry_ContainmentFeature(), 
---
> 		  (getNeedsContainment_ContainmentFeature(), 
1479c1558
< 		  (abstractNodeMappingEClass, 
---
> 		  (nodeMappingEClass, 
1486c1565
< 		  (abstractNodeMappingEClass, 
---
> 		  (nodeMappingEClass, 
1493,1499d1571
< 		  (childNodeMappingEClass, 
< 		   source, 
< 		   new String[] {
< 			 "ocl", "not containmentFeature.oclIsUndefined() ",
< 			 "description", "The child node mapping containmentFeature must be set"
< 		   });			
< 		addAnnotation
