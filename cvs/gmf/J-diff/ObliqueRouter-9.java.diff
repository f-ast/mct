246c246,249
< 		if (conn.getSourceAnchor().getOwner() == null)
---
>         
>         IFigure sourceOwner = conn.getSourceAnchor().getOwner();
>         IFigure targetOwner = conn.getTargetAnchor().getOwner();
> 		if (sourceOwner == null)
248c251
< 		if (conn.getTargetAnchor().getOwner() == null)
---
> 		if (targetOwner == null)
251,252c254,257
< 		Rectangle startRect = new Rectangle(conn.getSourceAnchor().getOwner().getBounds());
< 		conn.getSourceAnchor().getOwner().translateToAbsolute(startRect);
---
> 		Rectangle startRect = null;        
>         if (!(sourceOwner instanceof Connection)) {
>             startRect = new Rectangle(sourceOwner.getBounds());
>             sourceOwner.translateToAbsolute(startRect);
253a259
>         }
255,256c261,264
< 		Rectangle endRect = new Rectangle(conn.getTargetAnchor().getOwner().getBounds());
< 		conn.getTargetAnchor().getOwner().translateToAbsolute(endRect);
---
>         Rectangle endRect = null;        
>         if (!(targetOwner instanceof Connection)) {
>     		endRect = new Rectangle(targetOwner.getBounds());
>             targetOwner.translateToAbsolute(endRect);
257a266
>         }
266c275,276
< 			else if (!startRect.contains(pt) && !endRect.contains(pt)) {
---
> 			else if ((startRect == null || !startRect.contains(pt))
>                 && (endRect == null || !endRect.contains(pt))) {
