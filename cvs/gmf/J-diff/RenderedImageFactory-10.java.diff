297c297
< 				return image;
---
> 				break;
299a300
> 		if (image == null) {
302c303,310
< 		return new ImageRenderedImage(buffer, key);
---
> 			image = new ImageRenderedImage(buffer, key);
> 		}
> 		
> 		if (image != null) {
> 			instanceMap.put(key, new WeakReference(image));
> 		}
> 		
> 		return image;
