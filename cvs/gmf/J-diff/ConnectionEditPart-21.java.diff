44a45
> import org.eclipse.gef.RootEditPart;
1493,1494c1494,1495
< 	 * @return <code>IMapMode</code> that allows for the coordinate mapping
< 	 *         from device to logical units.
---
> 	 * @return <code>IMapMode</code> that allows for the coordinate mapping from device to
> 	 * logical units. 
1497,1503c1498,1502
< 		EditPart parent = getParent();
< 		if (parent instanceof DiagramRootEditPart)
< 			return ((DiagramRootEditPart) parent).getMapMode();
< 		else if (parent instanceof org.eclipse.gef.GraphicalEditPart)
< 			return MapModeUtil
< 				.getMapMode(((org.eclipse.gef.GraphicalEditPart) parent)
< 					.getFigure());
---
> 		RootEditPart root = getRoot();
> 		if (root instanceof DiagramRootEditPart) {
> 			DiagramRootEditPart dgrmRoot = (DiagramRootEditPart)root;
> 			return dgrmRoot.getMapMode();
> 		}
