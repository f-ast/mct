23,30d22
< import org.eclipse.jface.preference.IPreferenceStore;
< import org.eclipse.jface.resource.ImageDescriptor;
< import org.eclipse.swt.graphics.GC;
< import org.eclipse.swt.graphics.Image;
< import org.eclipse.swt.graphics.ImageData;
< import org.eclipse.swt.graphics.Rectangle;
< import org.eclipse.swt.widgets.Display;
< 
37c29
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
40a33,39
> import org.eclipse.jface.preference.IPreferenceStore;
> import org.eclipse.jface.resource.ImageDescriptor;
> import org.eclipse.swt.graphics.GC;
> import org.eclipse.swt.graphics.Image;
> import org.eclipse.swt.graphics.ImageData;
> import org.eclipse.swt.graphics.Rectangle;
> import org.eclipse.swt.widgets.Display;
135,136c134,136
< 			awtImage = new BufferedImage(MapMode.LPtoDP(sourceRect.width),
< 				MapMode.LPtoDP(sourceRect.height),
---
> 			IMapMode mm = getMapMode();
> 			awtImage = new BufferedImage(mm.LPtoDP(sourceRect.width),
> 				mm.LPtoDP(sourceRect.height),
159c159
< 				new Rectangle(0, 0, MapMode.LPtoDP(sourceRect.width), MapMode
---
> 				new Rectangle(0, 0, mm.LPtoDP(sourceRect.width), mm
163c163
< 				graphics);
---
> 				graphics, mm);
