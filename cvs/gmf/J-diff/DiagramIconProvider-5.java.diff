52c52,54
< 		if( hint instanceof View && DiagramViewProvider.isTextView((View)hint)) {
---
>         View view = (View) hint.getAdapter(View.class);
>         if (view != null) {
>             if (DiagramViewProvider.isTextView(view)) {
56c58
< 		else if( hint instanceof View && DiagramViewProvider.isNoteView((View)hint)) {
---
>             else if (DiagramViewProvider.isNoteView(view)) {
60,61c62
< 		
< 		else if (hint.getAdapter(IElementType.class) != null){
---
>         } else if (hint.getAdapter(IElementType.class) != null) {
81,83c82,85
< 		if(adapter instanceof View && 
< 		   (DiagramViewProvider.isNoteView((View)adapter)
< 		   	|| DiagramViewProvider.isTextView((View)adapter))) {
---
>         View view = (View) adapter.getAdapter(View.class);
>         if (view != null && 
> 		   (DiagramViewProvider.isNoteView(view)
> 		   	|| DiagramViewProvider.isTextView(view))) {
