40c40
< 			DiagramUIGeoshapesPluginImages.DESC_OVAL);
---
> 			DiagramUIGeoshapesPluginImages.IMG_OVAL);
42c42
< 			DiagramUIGeoshapesPluginImages.DESC_TRIANGLE);
---
> 			DiagramUIGeoshapesPluginImages.IMG_TRIANGLE);
44c44
< 			DiagramUIGeoshapesPluginImages.DESC_RECTANGLE);
---
> 			DiagramUIGeoshapesPluginImages.IMG_RECTANGLE);
46c46
< 			DiagramUIGeoshapesPluginImages.DESC_SHADOWRECTANGLE);
---
> 			DiagramUIGeoshapesPluginImages.IMG_SHADOWRECTANGLE);
48c48
< 			DiagramUIGeoshapesPluginImages.DESC_3DRECTANGLE);
---
> 			DiagramUIGeoshapesPluginImages.IMG_3DRECTANGLE);
50c50
< 			DiagramUIGeoshapesPluginImages.DESC_ROUNDRECTANGLE);
---
> 			DiagramUIGeoshapesPluginImages.IMG_ROUNDRECTANGLE);
52c52
< 			DiagramUIGeoshapesPluginImages.DESC_HEXAGON);
---
> 			DiagramUIGeoshapesPluginImages.IMG_HEXAGON);
54c54
< 			DiagramUIGeoshapesPluginImages.DESC_OCTAGON);
---
> 			DiagramUIGeoshapesPluginImages.IMG_OCTAGON);
56c56
< 			DiagramUIGeoshapesPluginImages.DESC_PENTAGON);
---
> 			DiagramUIGeoshapesPluginImages.IMG_PENTAGON);
58c58
< 			DiagramUIGeoshapesPluginImages.DESC_DIAMOND);
---
> 			DiagramUIGeoshapesPluginImages.IMG_DIAMOND);
60c60
< 			DiagramUIGeoshapesPluginImages.DESC_CYLINDER);
---
> 			DiagramUIGeoshapesPluginImages.IMG_CYLINDER);
63,86c63
< 			DiagramUIGeoshapesPluginImages.DESC_LINE);
< 	}
< 
< 	/** map for storing icon images based on type */
< 	private static HashMap typeIconMap = new HashMap();
< 	static {
< 
< 		typeIconMap.put(GeoshapeType.OVAL, DiagramUIGeoshapesPluginImages.DESC_OVAL);
< 		typeIconMap.put(GeoshapeType.TRIANGLE, DiagramUIGeoshapesPluginImages.DESC_TRIANGLE);
< 		typeIconMap.put(GeoshapeType.RECTANGLE,
< 			DiagramUIGeoshapesPluginImages.DESC_RECTANGLE);
< 		typeIconMap.put(GeoshapeType.SHADOWRECTANGLE,
< 			DiagramUIGeoshapesPluginImages.DESC_SHADOWRECTANGLE);
< 		typeIconMap.put(GeoshapeType.THREEDRECTANGLE,
< 			DiagramUIGeoshapesPluginImages.DESC_3DRECTANGLE);
< 		typeIconMap.put(GeoshapeType.ROUNDRECTANGLE,
< 			DiagramUIGeoshapesPluginImages.DESC_ROUNDRECTANGLE);
< 		typeIconMap.put(GeoshapeType.HEXAGON, DiagramUIGeoshapesPluginImages.DESC_HEXAGON);
< 		typeIconMap.put(GeoshapeType.OCTAGON, DiagramUIGeoshapesPluginImages.DESC_OCTAGON);
< 		typeIconMap.put(GeoshapeType.PENTAGON, DiagramUIGeoshapesPluginImages.DESC_PENTAGON);
< 		typeIconMap.put(GeoshapeType.DIAMOND, DiagramUIGeoshapesPluginImages.DESC_DIAMOND);
< 		typeIconMap.put(GeoshapeType.CYLINDER, DiagramUIGeoshapesPluginImages.DESC_CYLINDER);
< 
< 		typeIconMap.put(GeoshapeType.LINE, DiagramUIGeoshapesPluginImages.DESC_LINE);
---
> 			DiagramUIGeoshapesPluginImages.IMG_LINE);
97,100c74,75
< 		if (hint != null) {
< 			if (hint instanceof View) {
< 				View view = (View) hint;
< 
---
>         View view = (View) hint.getAdapter(View.class);
>         if (view != null) {
103,111d77
< 			} else {
< 				String fileName = (String) typeIconMap.get(hint);
< 
< 				if (fileName != null) {
< 					return DiagramUIGeoshapesPluginImages.get(
< 						fileName);
< 				}
< 			}
< 
144,145c110,112
< 			if (hint instanceof View) {
< 				String semanticHint = ((View)hint).getType();
---
>             View view = (View) hint.getAdapter(View.class);
>             if (view != null) {
> 				String semanticHint = view.getType();
148,151d114
< 			Object type = hint.getAdapter(GeoshapeType.class);
< 			if (type != null && typeIconMap.containsKey(type)) {
< 				return true;
< 			}
