19a20
> import org.eclipse.emf.common.command.Command;
22a24
> import org.eclipse.emf.transaction.NotificationFilter;
24a27
> import org.eclipse.emf.transaction.ResourceSetListenerImpl;
59a63
> 		private ResourceSetListener debWrapper = null;
64a69,71
> 				debWrapper = new ResourceSetListenerImpl() {
> 					public boolean isAggregatePrecommitListener() {
> 						return deb.isAggregatePrecommitListener();
66a74,97
> 					public boolean isPrecommitOnly() {
> 						return true;
> 					}
> 					
> 					public Command transactionAboutToCommit(ResourceSetChangeEvent event)
> 						throws RollbackException {
> 						return deb.transactionAboutToCommit(event);
> 					}
> 					
> 					public void resourceSetChanged(ResourceSetChangeEvent event) {
> 						deb.resourceSetChanged(event);
> 					}
> 					
> 					public NotificationFilter getFilter() {
> 						return deb.getFilter();
> 					}
> 					
> 					public boolean isPostcommitOnly() {
> 						return false;
> 					}
> 				};
> 				
> 				super.addResourceSetListener(debWrapper);
> 			} else {
68a100
> 		}
74,75c106,108
< 			}
< 			
---
> 				super.removeResourceSetListener(debWrapper);
> 				debWrapper = null;
> 			} else {
77a111
> 		}
