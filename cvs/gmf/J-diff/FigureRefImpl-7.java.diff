10d9
< import org.eclipse.emf.common.notify.NotificationChain;
14,15d12
< import org.eclipse.emf.ecore.impl.EObjectImpl;
< import org.eclipse.gmf.gmfgraph.Figure;
18,19c15
< import org.eclipse.gmf.gmfgraph.Layout;
< import org.eclipse.gmf.gmfgraph.LayoutData;
---
> import org.eclipse.gmf.gmfgraph.RealFigure;
28,30d23
<  *   <li>{@link org.eclipse.gmf.gmfgraph.impl.FigureRefImpl#getLayoutData <em>Layout Data</em>}</li>
<  *   <li>{@link org.eclipse.gmf.gmfgraph.impl.FigureRefImpl#getLayout <em>Layout</em>}</li>
<  *   <li>{@link org.eclipse.gmf.gmfgraph.impl.FigureRefImpl#getParent <em>Parent</em>}</li>
37,57c30
< public class FigureRefImpl extends EObjectImpl implements FigureRef {
< 	/**
< 	 * The cached value of the '{@link #getLayoutData() <em>Layout Data</em>}' containment reference.
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @see #getLayoutData()
< 	 * @generated
< 	 * @ordered
< 	 */
< 	protected LayoutData layoutData = null;
< 
< 	/**
< 	 * The cached value of the '{@link #getLayout() <em>Layout</em>}' containment reference.
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @see #getLayout()
< 	 * @generated
< 	 * @ordered
< 	 */
< 	protected Layout layout = null;
< 
---
> public class FigureRefImpl extends AbstractFigureImpl implements FigureRef {
66c39
< 	protected Figure figure = null;
---
> 	protected RealFigure figure;
92,188c65
< 	public LayoutData getLayoutData() {
< 		return layoutData;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public NotificationChain basicSetLayoutData(LayoutData newLayoutData, NotificationChain msgs) {
< 		LayoutData oldLayoutData = layoutData;
< 		layoutData = newLayoutData;
< 		if (eNotificationRequired()) {
< 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGraphPackage.FIGURE_REF__LAYOUT_DATA, oldLayoutData, newLayoutData);
< 			if (msgs == null) msgs = notification; else msgs.add(notification);
< 		}
< 		return msgs;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public void setLayoutData(LayoutData newLayoutData) {
< 		if (newLayoutData != layoutData) {
< 			NotificationChain msgs = null;
< 			if (layoutData != null)
< 				msgs = ((InternalEObject)layoutData).eInverseRemove(this, GMFGraphPackage.LAYOUT_DATA__OWNER, LayoutData.class, msgs);
< 			if (newLayoutData != null)
< 				msgs = ((InternalEObject)newLayoutData).eInverseAdd(this, GMFGraphPackage.LAYOUT_DATA__OWNER, LayoutData.class, msgs);
< 			msgs = basicSetLayoutData(newLayoutData, msgs);
< 			if (msgs != null) msgs.dispatch();
< 		}
< 		else if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGraphPackage.FIGURE_REF__LAYOUT_DATA, newLayoutData, newLayoutData));
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public Layout getLayout() {
< 		return layout;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public NotificationChain basicSetLayout(Layout newLayout, NotificationChain msgs) {
< 		Layout oldLayout = layout;
< 		layout = newLayout;
< 		if (eNotificationRequired()) {
< 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGraphPackage.FIGURE_REF__LAYOUT, oldLayout, newLayout);
< 			if (msgs == null) msgs = notification; else msgs.add(notification);
< 		}
< 		return msgs;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public void setLayout(Layout newLayout) {
< 		if (newLayout != layout) {
< 			NotificationChain msgs = null;
< 			if (layout != null)
< 				msgs = ((InternalEObject)layout).eInverseRemove(this, EOPPOSITE_FEATURE_BASE - GMFGraphPackage.FIGURE_REF__LAYOUT, null, msgs);
< 			if (newLayout != null)
< 				msgs = ((InternalEObject)newLayout).eInverseAdd(this, EOPPOSITE_FEATURE_BASE - GMFGraphPackage.FIGURE_REF__LAYOUT, null, msgs);
< 			msgs = basicSetLayout(newLayout, msgs);
< 			if (msgs != null) msgs.dispatch();
< 		}
< 		else if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGraphPackage.FIGURE_REF__LAYOUT, newLayout, newLayout));
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public Figure getParent() {
< 		if (eContainerFeatureID != GMFGraphPackage.FIGURE_REF__PARENT) return null;
< 		return (Figure)eContainer();
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public Figure getFigure() {
---
> 	public RealFigure getFigure() {
191c68
< 			figure = (Figure)eResolveProxy(oldFigure);
---
> 			figure = (RealFigure)eResolveProxy(oldFigure);
205c82
< 	public Figure basicGetFigure() {
---
> 	public RealFigure basicGetFigure() {
214,215c91,92
< 	public void setFigure(Figure newFigure) {
< 		Figure oldFigure = figure;
---
> 	public void setFigure(RealFigure newFigure) {
> 		RealFigure oldFigure = figure;
227,278d103
< 	public NotificationChain eInverseAdd(InternalEObject otherEnd, int featureID, NotificationChain msgs) {
< 		switch (featureID) {
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT_DATA:
< 				if (layoutData != null)
< 					msgs = ((InternalEObject)layoutData).eInverseRemove(this, EOPPOSITE_FEATURE_BASE - GMFGraphPackage.FIGURE_REF__LAYOUT_DATA, null, msgs);
< 				return basicSetLayoutData((LayoutData)otherEnd, msgs);
< 			case GMFGraphPackage.FIGURE_REF__PARENT:
< 				if (eInternalContainer() != null)
< 					msgs = eBasicRemoveFromContainer(msgs);
< 				return eBasicSetContainer(otherEnd, GMFGraphPackage.FIGURE_REF__PARENT, msgs);
< 		}
< 		return super.eInverseAdd(otherEnd, featureID, msgs);
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	@Override
< 	public NotificationChain eInverseRemove(InternalEObject otherEnd, int featureID, NotificationChain msgs) {
< 		switch (featureID) {
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT_DATA:
< 				return basicSetLayoutData(null, msgs);
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT:
< 				return basicSetLayout(null, msgs);
< 			case GMFGraphPackage.FIGURE_REF__PARENT:
< 				return eBasicSetContainer(null, GMFGraphPackage.FIGURE_REF__PARENT, msgs);
< 		}
< 		return super.eInverseRemove(otherEnd, featureID, msgs);
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	@Override
< 	public NotificationChain eBasicRemoveFromContainerFeature(NotificationChain msgs) {
< 		switch (eContainerFeatureID) {
< 			case GMFGraphPackage.FIGURE_REF__PARENT:
< 				return eInternalContainer().eInverseRemove(this, GMFGraphPackage.FIGURE__CHILDREN, Figure.class, msgs);
< 		}
< 		return super.eBasicRemoveFromContainerFeature(msgs);
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	@Override
281,286d105
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT_DATA:
< 				return getLayoutData();
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT:
< 				return getLayout();
< 			case GMFGraphPackage.FIGURE_REF__PARENT:
< 				return getParent();
298a118
> 	@SuppressWarnings("unchecked")
302,307d121
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT_DATA:
< 				setLayoutData((LayoutData)newValue);
< 				return;
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT:
< 				setLayout((Layout)newValue);
< 				return;
309c123
< 				setFigure((Figure)newValue);
---
> 				setFigure((RealFigure)newValue);
323,328d136
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT_DATA:
< 				setLayoutData((LayoutData)null);
< 				return;
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT:
< 				setLayout((Layout)null);
< 				return;
330c138
< 				setFigure((Figure)null);
---
> 				setFigure((RealFigure)null);
344,349d151
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT_DATA:
< 				return layoutData != null;
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT:
< 				return layout != null;
< 			case GMFGraphPackage.FIGURE_REF__PARENT:
< 				return getParent() != null;
