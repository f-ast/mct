2c2
<  * Copyright (c) 2002, 2003 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
15a16
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
29a31
> import org.eclipse.gmf.runtime.notation.Diagram;
264c266,267
< 		CreateCommand createCommand = new CreateCommand(
---
>         Diagram diagram = diagramEditPart.getDiagramView().getDiagram();
> 		CreateCommand createCommand = new CreateCommand(diagramEditPart.getEditingDomain(),
266c269
< 			diagramEditPart.getDiagramView().getDiagram());
---
>             diagram);
271c274,276
< 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(
---
>         TransactionalEditingDomain editingDomain = diagramEditPart.getEditingDomain();
> 
> 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(editingDomain, 
296,297c301,303
< 		CreateCommand createCommand = new CreateCommand(viewDescriptor,
< 			diagramEditPart.getDiagramView().getDiagram());
---
>         Diagram diagram = diagramEditPart.getDiagramView().getDiagram();
> 		CreateCommand createCommand = new CreateCommand(diagramEditPart.getEditingDomain(), viewDescriptor,
>             diagram);
302c308,310
< 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(
---
>         TransactionalEditingDomain editingDomain = diagramEditPart.getEditingDomain();
> 
> 		SetConnectionEndsCommand sceCommand = new SetConnectionEndsCommand(editingDomain, 
