12a13
> import org.eclipse.draw2d.CompoundBorder;
13a15,16
> import org.eclipse.draw2d.LineBorder;
> import org.eclipse.draw2d.MarginBorder;
16d18
< import org.eclipse.gef.EditPart;
18,19d19
< import org.eclipse.gef.Request;
< import org.eclipse.gef.commands.Command;
21,22d20
< import org.eclipse.gef.editpolicies.NonResizableEditPolicy;
< import org.eclipse.gef.requests.CreateRequest;
24c22
< import org.eclipse.gmf.runtime.diagram.ui.editparts.ShapeNodeEditPart;
---
> import org.eclipse.gmf.graphdef.editor.edit.polocies.DomainBasedXYLayoutEditPolicy;
28a27,28
> import org.eclipse.swt.SWT;
> import org.eclipse.swt.widgets.Display;
33c33
< public class Polyline3EditPart extends ShapeNodeEditPart {
---
> public class Polyline3EditPart extends AbstractFigureEditPart {
72,91c72
< 		LayoutEditPolicy lep = new LayoutEditPolicy() {
< 
< 			protected EditPolicy createChildEditPolicy(EditPart child) {
< 				EditPolicy result = child.getEditPolicy(EditPolicy.PRIMARY_DRAG_ROLE);
< 				if (result == null) {
< 					result = new NonResizableEditPolicy();
< 				}
< 				return result;
< 			}
< 
< 			protected Command getMoveChildrenCommand(Request request) {
< 				return null;
< 			}
< 
< 			protected Command getCreateCommand(CreateRequest request) {
< 				return null;
< 			}
< 		};
< 		return lep;
< 
---
> 		return new DomainBasedXYLayoutEditPolicy(getMapMode());
112a94,97
> 		LineBorder contourBorder = new LineBorder(Display.getDefault().getSystemColor(SWT.COLOR_WIDGET_NORMAL_SHADOW));
> 		MarginBorder marginBorder = new MarginBorder(5);
> 		CompoundBorder compoundBorder = new CompoundBorder(contourBorder, marginBorder);
> 		result.setBorder(compoundBorder);
