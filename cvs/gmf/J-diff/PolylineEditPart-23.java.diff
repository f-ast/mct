19a20
> import org.eclipse.draw2d.geometry.Rectangle;
31a33
> import org.eclipse.gmf.runtime.diagram.ui.editpolicies.NonResizableEditPolicyEx;
100,105c102
< 		DefaultSizeNodeFigure result = new DefaultSizeNodeFigure(getMapMode().DPtoLP(0), getMapMode().DPtoLP(0)) {
< 
< 			protected boolean useLocalCoordinates() {
< 				return true;
< 			}
< 		};
---
> 		DefaultSizeNodeFigureExt result = new DefaultSizeNodeFigureExt(getMapMode().DPtoLP(0), getMapMode().DPtoLP(0));
203d199
< 			getPrimaryShape().setLineWidth(modelElement.getLineWidth());
212a209,211
> 			refreshMainFigureBounds();
> 			getPrimaryShape().setLineWidth(modelElement.getLineWidth());
> 			refreshMainFigureBounds();
275,282d273
< 		ChangeTracker lineWidthTracker = new ChangeTracker() {
< 
< 			public void modelChanged(Notification msg) {
< 				getPrimaryShape().setLineWidth(modelElement.getLineWidth());
< 			}
< 		};
< 		myDomainElementAdapters.add(new FeatureTracker(lineWidthTracker, GMFGraphPackage.eINSTANCE.getShape_LineWidth()));
< 
359a351
> 				refreshMainFigureBounds();
363a356,364
> 
> 		ChangeTracker lineWidthTracker = new ChangeTracker() {
> 
> 			public void modelChanged(Notification msg) {
> 				getPrimaryShape().setLineWidth(modelElement.getLineWidth());
> 				refreshMainFigureBounds();
> 			}
> 		};
> 		myDomainElementAdapters.add(new FeatureTracker(lineWidthTracker, GMFGraphPackage.eINSTANCE.getShape_LineWidth()));
383a385,432
> 	/**
> 	 * @generated
> 	 */
> 	public void refreshMainFigureBounds() {
> 		DefaultSizeNodeFigureExt nodeFigure = (DefaultSizeNodeFigureExt) getFigure();
> 		nodeFigure.fireFigureMoved();
> 		nodeFigure.revalidate();
> 	}
> 
> 	/**
> 	 * @generated
> 	 */
> 	public EditPolicy getPrimaryDragEditPolicy() {
> 		return new NonResizableEditPolicyEx();
> 	}
> 
> 	/**
> 	 * @generated
> 	 */
> 	class DefaultSizeNodeFigureExt extends DefaultSizeNodeFigure {
> 
> 		/**
> 		 * @generated
> 		 */
> 		DefaultSizeNodeFigureExt(int width, int height) {
> 			super(width, height);
> 		}
> 
> 		/**
> 		 * @generated
> 		 */
> 		public void setBounds(Rectangle rect) {
> 			getPrimaryShape().setBounds(rect);
> 		}
> 
> 		/**
> 		 * @generated
> 		 */
> 		public Rectangle getBounds() {
> 			return getPrimaryShape().getBounds();
> 		}
> 
> 		public void fireFigureMoved() {
> 			super.fireFigureMoved();
> 		}
> 
> 	}
> 
