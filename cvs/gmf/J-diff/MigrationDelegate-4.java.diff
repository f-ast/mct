13a14
> import java.util.Arrays;
15a17
> import org.eclipse.emf.common.util.EList;
24a27
> 	private Collection<String> myBackwardSupportedURIs;
31a35,40
> 		myFeatureLabelMappings = null;
> 	}
> 
> 	@Override
> 	public boolean isOldVersionDetected(String uriString) {
> 		return !getMetamodelNsURI().equals(uriString) && getBackwardSupportedURIs().contains(uriString);
35a45,47
> 		if (myFeatureLabelMappings == null) {
> 			return;
> 		}
39c51,53
< 				entry.getLabelMappings().remove(mapping);
---
> 				EList<LabelMapping> labelMappings = entry.getLabelMappings();
> 				int originalIndex = labelMappings.indexOf(mapping);
> 				if (originalIndex != -1) {
45c59,60
< 				entry.getLabelMappings().add(newMapping);
---
> 					labelMappings.set(originalIndex, newMapping);
> 				}
62a78,91
> 
> 	protected Collection<String> getBackwardSupportedURIs() {
> 		if (myBackwardSupportedURIs == null) {
> 			myBackwardSupportedURIs = Arrays.asList(new String[] {
> 					"http://www.eclipse.org/gmf/2005/mappings", //$NON-NLS-1$
> 					"http://www.eclipse.org/gmf/2005/mappings/2.0" //$NON-NLS-1$
> 			});
> 		}
> 		return myBackwardSupportedURIs;
> 	}
> 
> 	protected String getMetamodelNsURI() {
> 		return GMFMapPackage.eNS_URI;
> 	}
