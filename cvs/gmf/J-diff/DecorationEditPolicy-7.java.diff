150,152c150,152
< 			decoration
< 				.setOwnerFigure(((GraphicalEditPart) getAdapter(GraphicalEditPart.class))
< 					.getFigure());
---
>             
>             GraphicalEditPart ownerEditPart = (GraphicalEditPart) getAdapter(GraphicalEditPart.class);
>             decoration.setOwnerFigure(ownerEditPart.getFigure());
154a155,159
>             // Register this figure with it's owner editpart so mouse events
>             // will be propagated to it's host.
>             ownerEditPart.getViewer().getVisualPartMap().put(decoration,
>                 ownerEditPart);
> 
