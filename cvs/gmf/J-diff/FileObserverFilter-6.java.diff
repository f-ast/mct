2c2
<  * Copyright (c) 2002, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2008 IBM Corporation and others.
17d16
< import org.eclipse.core.resources.ResourcesPlugin;
146,147c145,146
< 			String FileExtension = resource.getFullPath().getFileExtension();
< 			if (matchesExtension(FileExtension)) {
---
> 			String fileExtension = resource.getFullPath().getFileExtension();
> 			if (matchesExtension(fileExtension)) {
167c166
< 			&& getAbsolutePath(getFileFilter()).equals(path.toOSString())) {
---
> 			&& getFileFilter().getFullPath().equals(path.toString())) {
171c170
< 				&& getAbsolutePath(getFolderFilter()).startsWith(path.toOSString())) {
---
> 				&& path.isPrefixOf(getFolderFilter().getFullPath())) {
175c174
< 				&& matchesContentType(path.toFile().getName())) {
---
> 				&& matchesContentType(path.segment(path.segmentCount()-1))) {
297,300c296,297
< 		if (resource.getLocation() == null) {
< 			IPath root = ResourcesPlugin.getWorkspace().getRoot().getLocation();
< 			IPath path = root.append(resource.getFullPath());
< 			return path.toOSString();
---
> 		if (resource.getLocationURI() == null) {
> 			return resource.getFullPath().toString();
302c299
< 			return resource.getLocation().toOSString();
---
> 			return resource.getLocationURI().toString();
