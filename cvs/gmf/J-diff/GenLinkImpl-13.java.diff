21a22
> import org.eclipse.gmf.codegen.gmfgen.FeatureModelFacet;
26a28
> import org.eclipse.gmf.codegen.gmfgen.LinkModelFacet;
27a30
> import org.eclipse.gmf.codegen.gmfgen.TypeLinkModelFacet;
38c41
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenLinkImpl#getDomainLinkTargetFeature <em>Domain Link Target Feature</em>}</li>
---
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenLinkImpl#getModelFacet <em>Model Facet</em>}</li>
45c48
< public abstract class GenLinkImpl extends GenBaseElementImpl implements GenLink {
---
> public class GenLinkImpl extends GenBaseElementImpl implements GenLink {
47c50
< 	 * The cached value of the '{@link #getDomainLinkTargetFeature() <em>Domain Link Target Feature</em>}' reference.
---
> 	 * The cached value of the '{@link #getModelFacet() <em>Model Facet</em>}' containment reference.
50c53
< 	 * @see #getDomainLinkTargetFeature()
---
> 	 * @see #getModelFacet()
54c57
< 	protected GenFeature domainLinkTargetFeature = null;
---
> 	protected LinkModelFacet modelFacet = null;
99,108c102,103
< 	public GenFeature getDomainLinkTargetFeature() {
< 		if (domainLinkTargetFeature != null && domainLinkTargetFeature.eIsProxy()) {
< 			GenFeature oldDomainLinkTargetFeature = domainLinkTargetFeature;
< 			domainLinkTargetFeature = (GenFeature)eResolveProxy((InternalEObject)domainLinkTargetFeature);
< 			if (domainLinkTargetFeature != oldDomainLinkTargetFeature) {
< 				if (eNotificationRequired())
< 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE, oldDomainLinkTargetFeature, domainLinkTargetFeature));
< 			}
< 		}
< 		return domainLinkTargetFeature;
---
> 	public LinkModelFacet getModelFacet() {
> 		return modelFacet;
116,117c111,118
< 	public GenFeature basicGetDomainLinkTargetFeature() {
< 		return domainLinkTargetFeature;
---
> 	public NotificationChain basicSetModelFacet(LinkModelFacet newModelFacet, NotificationChain msgs) {
> 		LinkModelFacet oldModelFacet = modelFacet;
> 		modelFacet = newModelFacet;
> 		if (eNotificationRequired()) {
> 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_LINK__MODEL_FACET, oldModelFacet, newModelFacet);
> 			if (msgs == null) msgs = notification; else msgs.add(notification);
> 		}
> 		return msgs;
125,129c126,137
< 	public void setDomainLinkTargetFeature(GenFeature newDomainLinkTargetFeature) {
< 		GenFeature oldDomainLinkTargetFeature = domainLinkTargetFeature;
< 		domainLinkTargetFeature = newDomainLinkTargetFeature;
< 		if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE, oldDomainLinkTargetFeature, domainLinkTargetFeature));
---
> 	public void setModelFacet(LinkModelFacet newModelFacet) {
> 		if (newModelFacet != modelFacet) {
> 			NotificationChain msgs = null;
> 			if (modelFacet != null)
> 				msgs = ((InternalEObject)modelFacet).eInverseRemove(this, EOPPOSITE_FEATURE_BASE - GMFGenPackage.GEN_LINK__MODEL_FACET, null, msgs);
> 			if (newModelFacet != null)
> 				msgs = ((InternalEObject)newModelFacet).eInverseAdd(this, EOPPOSITE_FEATURE_BASE - GMFGenPackage.GEN_LINK__MODEL_FACET, null, msgs);
> 			msgs = basicSetModelFacet(newModelFacet, msgs);
> 			if (msgs != null) msgs.dispatch();
> 		}
> 		else if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_LINK__MODEL_FACET, newModelFacet, newModelFacet));
186a195,196
> 				case GMFGenPackage.GEN_LINK__MODEL_FACET:
> 					return basicSetModelFacet(null, msgs);
237,239c247,248
< 			case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE:
< 				if (resolve) return getDomainLinkTargetFeature();
< 				return basicGetDomainLinkTargetFeature();
---
> 			case GMFGenPackage.GEN_LINK__MODEL_FACET:
> 				return getModelFacet();
274,275c283,284
< 			case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE:
< 				setDomainLinkTargetFeature((GenFeature)newValue);
---
> 			case GMFGenPackage.GEN_LINK__MODEL_FACET:
> 				setModelFacet((LinkModelFacet)newValue);
313,314c322,323
< 			case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE:
< 				setDomainLinkTargetFeature((GenFeature)null);
---
> 			case GMFGenPackage.GEN_LINK__MODEL_FACET:
> 				setModelFacet((LinkModelFacet)null);
346,347c355,356
< 			case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE:
< 				return domainLinkTargetFeature != null;
---
> 			case GMFGenPackage.GEN_LINK__MODEL_FACET:
> 				return modelFacet != null;
353a363,382
> 	public String getClassNamePrefix() {
> 		LinkModelFacet aModelFacet = getModelFacet();
> 		if (aModelFacet instanceof FeatureModelFacet) {
> 			GenFeature metaFeature = ((FeatureModelFacet) aModelFacet).getMetaFeature();
> 			return metaFeature.getGenClass().getName() + metaFeature.getCapName();
> 		} else if (aModelFacet instanceof TypeLinkModelFacet) {
> 			GenClass metaClass = ((TypeLinkModelFacet) aModelFacet).getMetaClass();
> 			return metaClass.getName();
> 		}
> 		return "Link$" + hashCode();
> 	}
> 
> 	public String getClassNameSuffux() {
> 		return "Link";
> 	}
> 
> 	public String getUniqueIdentifier() {
> 		return getClassNamePrefix() + "_" + getVisualID();
> 	}
> 
