16a17
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
30c31
< import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeTransactionalCommand;
81c82,83
< 		CompositeModelCommand command = null;
---
> 		CompositeTransactionalCommand command = null;
>         TransactionalEditingDomain editingDomain = null;
86a89,91
>                     if (editingDomain == null) {
>                         editingDomain = ((IGraphicalEditPart) editPart).getEditingDomain();
>                     }
96c101
< 				if (command2 != null) {
---
> 				if (command2 != null && editingDomain != null) {
98c103
< 						command = new CompositeModelCommand(command2.getLabel());
---
> 						command = new CompositeTransactionalCommand(editingDomain, command2.getLabel());
105c110
< 		if ((command != null)&&(command.getCommands().size() > 0))
---
> 		if ((command != null)&&(command.size() > 0))
