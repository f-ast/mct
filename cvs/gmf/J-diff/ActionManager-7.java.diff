2c2
<  * Copyright (c) 2002, 2005 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
19a20,21
> import org.eclipse.core.commands.operations.IOperationHistory;
> import org.eclipse.core.commands.operations.OperationHistoryFactory;
56,59c58
< 	/**
< 	 * The command manager with which this action manager is associated.
< 	 */
< 	private final CommandManager commandManager;
---
>     private final IOperationHistory operationHistory;
73c72
< 	 * Constructs a new action manager for the specified command manager.
---
>      * Intializes me with an operation history.
75c74
< 	 * @param commandManager The command manager for this action manager.
---
>      * @param operationHistory The operation history for this action manager.
77c76
< 	public ActionManager(CommandManager commandManager) {
---
>     public ActionManager(IOperationHistory operationHistory) {
80c79,81
< 		assert null != commandManager;
---
>         assert null != operationHistory;
>         this.operationHistory = operationHistory;
>     }
82c83,90
< 		this.commandManager = commandManager;
---
>    	/**
> 	 * Constructs a new action manager for the specified command manager.
> 	 * 
> 	 * @param commandManager The command manager for this action manager.
>      * @deprecated Use {@link #ActionManager(IOperationHistory)} instead.
> 	 */
> 	public ActionManager(CommandManager commandManager) {
> 		this(OperationHistoryFactory.getOperationHistory());
92c100
< 			actionManager = new ActionManager(CommandManager.getDefault());
---
> 			actionManager = new ActionManager(OperationHistoryFactory.getOperationHistory());
98a107,115
>      * Gets my operation history.
>      * 
>      * @return my operation history
>      */
>     public final IOperationHistory getOperationHistory() {
>         return operationHistory;
>     }
> 
> 	/**
101a119
>      * @deprecated Use {@link #getOperationHistory()} instead.
104c122
< 		return commandManager;
---
> 		return CommandManager.getDefault();
