9a10
> import java.util.Iterator;
11a13
> import org.eclipse.emf.common.notify.Notification;
16c18,19
< import org.eclipse.emf.ecore.util.EObjectContainmentWithInverseEList;
---
> import org.eclipse.emf.ecore.impl.ENotificationImpl;
> import org.eclipse.emf.ecore.util.EObjectContainmentEList;
19,21d21
< import org.eclipse.gmf.codegen.gmfgen.LinkEntry;
< import org.eclipse.gmf.codegen.gmfgen.NodeEntry;
< import org.eclipse.gmf.codegen.gmfgen.Palette;
22a23
> import org.eclipse.gmf.codegen.gmfgen.ToolGroupItem;
31,33c32,35
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.ToolGroupImpl#getNodeTools <em>Node Tools</em>}</li>
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.ToolGroupImpl#getLinkTools <em>Link Tools</em>}</li>
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.ToolGroupImpl#getPalette <em>Palette</em>}</li>
---
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.ToolGroupImpl#isStack <em>Stack</em>}</li>
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.ToolGroupImpl#isCollapse <em>Collapse</em>}</li>
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.ToolGroupImpl#getEntries <em>Entries</em>}</li>
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.ToolGroupImpl#isToolsOnly <em>Tools Only</em>}</li>
41c43
< 	 * The cached value of the '{@link #getNodeTools() <em>Node Tools</em>}' containment reference list.
---
> 	 * The default value of the '{@link #isStack() <em>Stack</em>}' attribute.
44c46
< 	 * @see #getNodeTools()
---
> 	 * @see #isStack()
48c50
< 	protected EList nodeTools = null;
---
> 	protected static final boolean STACK_EDEFAULT = false;
51c53
< 	 * The cached value of the '{@link #getLinkTools() <em>Link Tools</em>}' containment reference list.
---
> 	 * The cached value of the '{@link #isStack() <em>Stack</em>}' attribute.
54c56
< 	 * @see #getLinkTools()
---
> 	 * @see #isStack()
58c60,100
< 	protected EList linkTools = null;
---
> 	protected boolean stack = STACK_EDEFAULT;
> 
> 	/**
> 	 * The default value of the '{@link #isCollapse() <em>Collapse</em>}' attribute.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #isCollapse()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected static final boolean COLLAPSE_EDEFAULT = false;
> 
> 	/**
> 	 * The cached value of the '{@link #isCollapse() <em>Collapse</em>}' attribute.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #isCollapse()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected boolean collapse = COLLAPSE_EDEFAULT;
> 
> 	/**
> 	 * The cached value of the '{@link #getEntries() <em>Entries</em>}' containment reference list.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getEntries()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected EList entries = null;
> 
> 	/**
> 	 * The default value of the '{@link #isToolsOnly() <em>Tools Only</em>}' attribute.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #isToolsOnly()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected static final boolean TOOLS_ONLY_EDEFAULT = false;
83,85c125,127
< 	public EList getNodeTools() {
< 		if (nodeTools == null) {
< 			nodeTools = new EObjectContainmentWithInverseEList(NodeEntry.class, this, GMFGenPackage.TOOL_GROUP__NODE_TOOLS, GMFGenPackage.NODE_ENTRY__GROUP);
---
> 	public EList getEntries() {
> 		if (entries == null) {
> 			entries = new EObjectContainmentEList(ToolGroupItem.class, this, GMFGenPackage.TOOL_GROUP__ENTRIES);
87c129
< 		return nodeTools;
---
> 		return entries;
93c135
< 	 * @generated
---
> 	 * @generated NOT
95,97c137,141
< 	public EList getLinkTools() {
< 		if (linkTools == null) {
< 			linkTools = new EObjectContainmentWithInverseEList(LinkEntry.class, this, GMFGenPackage.TOOL_GROUP__LINK_TOOLS, GMFGenPackage.LINK_ENTRY__GROUP);
---
> 	public boolean isToolsOnly() {
> 		for (Iterator it = getEntries().iterator(); it.hasNext(); ) {
> 			if (it.next() instanceof ToolGroup) {
> 				return false;
> 			}
99c143
< 		return linkTools;
---
> 		return true;
107,109c151,152
< 	public Palette getPalette() {
< 		if (eContainerFeatureID != GMFGenPackage.TOOL_GROUP__PALETTE) return null;
< 		return (Palette)eContainer();
---
> 	public boolean isStack() {
> 		return stack;
117,128c160,164
< 	public NotificationChain eInverseAdd(InternalEObject otherEnd, int featureID, NotificationChain msgs) {
< 		switch (featureID) {
< 			case GMFGenPackage.TOOL_GROUP__NODE_TOOLS:
< 				return ((InternalEList)getNodeTools()).basicAdd(otherEnd, msgs);
< 			case GMFGenPackage.TOOL_GROUP__LINK_TOOLS:
< 				return ((InternalEList)getLinkTools()).basicAdd(otherEnd, msgs);
< 			case GMFGenPackage.TOOL_GROUP__PALETTE:
< 				if (eInternalContainer() != null)
< 					msgs = eBasicRemoveFromContainer(msgs);
< 				return eBasicSetContainer(otherEnd, GMFGenPackage.TOOL_GROUP__PALETTE, msgs);
< 		}
< 		return super.eInverseAdd(otherEnd, featureID, msgs);
---
> 	public void setStack(boolean newStack) {
> 		boolean oldStack = stack;
> 		stack = newStack;
> 		if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.TOOL_GROUP__STACK, oldStack, stack));
136,143c172,173
< 	public NotificationChain eInverseRemove(InternalEObject otherEnd, int featureID, NotificationChain msgs) {
< 		switch (featureID) {
< 			case GMFGenPackage.TOOL_GROUP__NODE_TOOLS:
< 				return ((InternalEList)getNodeTools()).basicRemove(otherEnd, msgs);
< 			case GMFGenPackage.TOOL_GROUP__LINK_TOOLS:
< 				return ((InternalEList)getLinkTools()).basicRemove(otherEnd, msgs);
< 			case GMFGenPackage.TOOL_GROUP__PALETTE:
< 				return eBasicSetContainer(null, GMFGenPackage.TOOL_GROUP__PALETTE, msgs);
---
> 	public boolean isCollapse() {
> 		return collapse;
145c175,185
< 		return super.eInverseRemove(otherEnd, featureID, msgs);
---
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public void setCollapse(boolean newCollapse) {
> 		boolean oldCollapse = collapse;
> 		collapse = newCollapse;
> 		if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.TOOL_GROUP__COLLAPSE, oldCollapse, collapse));
153,156c193,196
< 	public NotificationChain eBasicRemoveFromContainerFeature(NotificationChain msgs) {
< 		switch (eContainerFeatureID) {
< 			case GMFGenPackage.TOOL_GROUP__PALETTE:
< 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.PALETTE__GROUPS, Palette.class, msgs);
---
> 	public NotificationChain eInverseRemove(InternalEObject otherEnd, int featureID, NotificationChain msgs) {
> 		switch (featureID) {
> 			case GMFGenPackage.TOOL_GROUP__ENTRIES:
> 				return ((InternalEList)getEntries()).basicRemove(otherEnd, msgs);
158c198
< 		return super.eBasicRemoveFromContainerFeature(msgs);
---
> 		return super.eInverseRemove(otherEnd, featureID, msgs);
168,173c208,215
< 			case GMFGenPackage.TOOL_GROUP__NODE_TOOLS:
< 				return getNodeTools();
< 			case GMFGenPackage.TOOL_GROUP__LINK_TOOLS:
< 				return getLinkTools();
< 			case GMFGenPackage.TOOL_GROUP__PALETTE:
< 				return getPalette();
---
> 			case GMFGenPackage.TOOL_GROUP__STACK:
> 				return isStack() ? Boolean.TRUE : Boolean.FALSE;
> 			case GMFGenPackage.TOOL_GROUP__COLLAPSE:
> 				return isCollapse() ? Boolean.TRUE : Boolean.FALSE;
> 			case GMFGenPackage.TOOL_GROUP__ENTRIES:
> 				return getEntries();
> 			case GMFGenPackage.TOOL_GROUP__TOOLS_ONLY:
> 				return isToolsOnly() ? Boolean.TRUE : Boolean.FALSE;
185,191c227,235
< 			case GMFGenPackage.TOOL_GROUP__NODE_TOOLS:
< 				getNodeTools().clear();
< 				getNodeTools().addAll((Collection)newValue);
< 				return;
< 			case GMFGenPackage.TOOL_GROUP__LINK_TOOLS:
< 				getLinkTools().clear();
< 				getLinkTools().addAll((Collection)newValue);
---
> 			case GMFGenPackage.TOOL_GROUP__STACK:
> 				setStack(((Boolean)newValue).booleanValue());
> 				return;
> 			case GMFGenPackage.TOOL_GROUP__COLLAPSE:
> 				setCollapse(((Boolean)newValue).booleanValue());
> 				return;
> 			case GMFGenPackage.TOOL_GROUP__ENTRIES:
> 				getEntries().clear();
> 				getEntries().addAll((Collection)newValue);
204,205c248,249
< 			case GMFGenPackage.TOOL_GROUP__NODE_TOOLS:
< 				getNodeTools().clear();
---
> 			case GMFGenPackage.TOOL_GROUP__STACK:
> 				setStack(STACK_EDEFAULT);
207,208c251,255
< 			case GMFGenPackage.TOOL_GROUP__LINK_TOOLS:
< 				getLinkTools().clear();
---
> 			case GMFGenPackage.TOOL_GROUP__COLLAPSE:
> 				setCollapse(COLLAPSE_EDEFAULT);
> 				return;
> 			case GMFGenPackage.TOOL_GROUP__ENTRIES:
> 				getEntries().clear();
221,226c268,275
< 			case GMFGenPackage.TOOL_GROUP__NODE_TOOLS:
< 				return nodeTools != null && !nodeTools.isEmpty();
< 			case GMFGenPackage.TOOL_GROUP__LINK_TOOLS:
< 				return linkTools != null && !linkTools.isEmpty();
< 			case GMFGenPackage.TOOL_GROUP__PALETTE:
< 				return getPalette() != null;
---
> 			case GMFGenPackage.TOOL_GROUP__STACK:
> 				return stack != STACK_EDEFAULT;
> 			case GMFGenPackage.TOOL_GROUP__COLLAPSE:
> 				return collapse != COLLAPSE_EDEFAULT;
> 			case GMFGenPackage.TOOL_GROUP__ENTRIES:
> 				return entries != null && !entries.isEmpty();
> 			case GMFGenPackage.TOOL_GROUP__TOOLS_ONLY:
> 				return isToolsOnly() != TOOLS_ONLY_EDEFAULT;
230a280,296
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public String toString() {
> 		if (eIsProxy()) return super.toString();
> 
> 		StringBuffer result = new StringBuffer(super.toString());
> 		result.append(" (stack: ");
> 		result.append(stack);
> 		result.append(", collapse: ");
> 		result.append(collapse);
> 		result.append(')');
> 		return result.toString();
> 	}
> 
235c301
< 		return CodeGenUtil.validJavaIdentifier("create" + getTitleKey() + getEntryID() + "Group");
---
> 		return CodeGenUtil.validJavaIdentifier("create" + getTitle() + getEntryID() + "Group");
