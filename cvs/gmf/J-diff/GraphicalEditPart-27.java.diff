40a41
> import org.eclipse.gef.RootEditPart;
1282,1284c1283,1287
< 		EditPart parent = getParent();
< 		if (parent instanceof org.eclipse.gef.GraphicalEditPart)
< 			return MapModeUtil.getMapMode(((org.eclipse.gef.GraphicalEditPart)parent).getFigure());
---
> 		RootEditPart root = getRoot();
> 		if (root instanceof DiagramRootEditPart) {
> 			DiagramRootEditPart dgrmRoot = (DiagramRootEditPart)root;
> 			return dgrmRoot.getMapMode();
> 		}
