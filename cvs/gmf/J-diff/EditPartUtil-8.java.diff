19d18
< import org.eclipse.gef.EditPartViewer;
21d19
< import org.eclipse.gmf.runtime.diagram.ui.parts.DiagramGraphicalViewer;
62,63c60,62
< 		if (Display.getCurrent() == null) {
< 			TransactionalEditingDomain editingDomain = (TransactionalEditingDomain)editPart.getEditingDomain();
---
> 		InternalTransactionalEditingDomain editingDomain = (InternalTransactionalEditingDomain)editPart.getEditingDomain();
>         
> 		if (Display.getCurrent() == null && editingDomain != null && editingDomain.getActiveTransaction() != null) {
