16a17
> import org.eclipse.gmf.internal.common.migrate.MigrationConfig;
29a31
> import org.eclipse.gmf.mappings.FeatureInitializer;
47a50
> import org.eclipse.gmf.mappings.ReferenceNewElementSpec;
52a56
> import org.eclipse.gmf.mappings.util.GMFMapMigration;
179a184,190
> 	private EClass featureInitializerEClass = null;
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
186a198,204
> 	private EClass referenceNewElementSpecEClass = null;
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
376a395
> 		MigrationConfig.Registry.INSTANCE.register(GMFMapMigration.CONFIG);
959a979,1023
> 	public EReference getFeatureSeqInitializer_ElementClass() {
> 		return (EReference)featureSeqInitializerEClass.getEStructuralFeatures().get(1);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EReference getFeatureSeqInitializer_CreatingInitializer() {
> 		return (EReference)featureSeqInitializerEClass.getEStructuralFeatures().get(2);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EClass getFeatureInitializer() {
> 		return featureInitializerEClass;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EReference getFeatureInitializer_Feature() {
> 		return (EReference)featureInitializerEClass.getEStructuralFeatures().get(0);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public EReference getFeatureInitializer_FeatureSeqInitializer() {
> 		return (EReference)featureInitializerEClass.getEStructuralFeatures().get(1);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
969,970c1033,1034
< 	public EReference getFeatureValueSpec_Feature() {
< 		return (EReference)featureValueSpecEClass.getEStructuralFeatures().get(0);
---
> 	public EClass getReferenceNewElementSpec() {
> 		return referenceNewElementSpecEClass;
978,979c1042,1043
< 	public EReference getFeatureValueSpec_FeatureSeqInitializer() {
< 		return (EReference)featureValueSpecEClass.getEStructuralFeatures().get(1);
---
> 	public EReference getReferenceNewElementSpec_NewElementInitializers() {
> 		return (EReference)referenceNewElementSpecEClass.getEStructuralFeatures().get(0);
1520a1585,1590
> 		createEReference(featureSeqInitializerEClass, FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS);
> 		createEReference(featureSeqInitializerEClass, FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER);
> 
> 		featureInitializerEClass = createEClass(FEATURE_INITIALIZER);
> 		createEReference(featureInitializerEClass, FEATURE_INITIALIZER__FEATURE);
> 		createEReference(featureInitializerEClass, FEATURE_INITIALIZER__FEATURE_SEQ_INITIALIZER);
1523,1524c1593,1595
< 		createEReference(featureValueSpecEClass, FEATURE_VALUE_SPEC__FEATURE);
< 		createEReference(featureValueSpecEClass, FEATURE_VALUE_SPEC__FEATURE_SEQ_INITIALIZER);
---
> 
> 		referenceNewElementSpecEClass = createEClass(REFERENCE_NEW_ELEMENT_SPEC);
> 		createEReference(referenceNewElementSpecEClass, REFERENCE_NEW_ELEMENT_SPEC__NEW_ELEMENT_INITIALIZERS);
1634a1706,1707
> 		featureValueSpecEClass.getESuperTypes().add(this.getFeatureInitializer());
> 		referenceNewElementSpecEClass.getESuperTypes().add(this.getFeatureInitializer());
1658c1731
< 		initEReference(getMappingEntry_DomainInitializer(), this.getElementInitializer(), this.getElementInitializer_MappingEntry(), "domainInitializer", null, 0, 1, MappingEntry.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 		initEReference(getMappingEntry_DomainInitializer(), this.getElementInitializer(), null, "domainInitializer", null, 0, 1, MappingEntry.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1724c1797
< 		initEReference(getElementInitializer_MappingEntry(), this.getMappingEntry(), this.getMappingEntry_DomainInitializer(), "mappingEntry", null, 1, 1, ElementInitializer.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 		initEReference(getElementInitializer_MappingEntry(), this.getMappingEntry(), null, "mappingEntry", null, 1, 1, ElementInitializer.class, IS_TRANSIENT, IS_VOLATILE, !IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1727c1800,1806
< 		initEReference(getFeatureSeqInitializer_Initializers(), this.getFeatureValueSpec(), this.getFeatureValueSpec_FeatureSeqInitializer(), "initializers", null, 1, -1, FeatureSeqInitializer.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 		initEReference(getFeatureSeqInitializer_Initializers(), this.getFeatureInitializer(), this.getFeatureInitializer_FeatureSeqInitializer(), "initializers", null, 1, -1, FeatureSeqInitializer.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getFeatureSeqInitializer_ElementClass(), ecorePackage.getEClass(), null, "elementClass", null, 0, 1, FeatureSeqInitializer.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getFeatureSeqInitializer_CreatingInitializer(), this.getReferenceNewElementSpec(), this.getReferenceNewElementSpec_NewElementInitializers(), "creatingInitializer", null, 0, 1, FeatureSeqInitializer.class, !IS_TRANSIENT, !IS_VOLATILE, !IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 
> 		initEClass(featureInitializerEClass, FeatureInitializer.class, "FeatureInitializer", IS_ABSTRACT, IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
> 		initEReference(getFeatureInitializer_Feature(), ecorePackage.getEStructuralFeature(), null, "feature", null, 1, 1, FeatureInitializer.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
> 		initEReference(getFeatureInitializer_FeatureSeqInitializer(), this.getFeatureSeqInitializer(), this.getFeatureSeqInitializer_Initializers(), "featureSeqInitializer", null, 1, 1, FeatureInitializer.class, !IS_TRANSIENT, !IS_VOLATILE, !IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1730,1731c1809,1811
< 		initEReference(getFeatureValueSpec_Feature(), ecorePackage.getEStructuralFeature(), null, "feature", null, 1, 1, FeatureValueSpec.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
< 		initEReference(getFeatureValueSpec_FeatureSeqInitializer(), this.getFeatureSeqInitializer(), this.getFeatureSeqInitializer_Initializers(), "featureSeqInitializer", null, 1, 1, FeatureValueSpec.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, !IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
---
> 
> 		initEClass(referenceNewElementSpecEClass, ReferenceNewElementSpec.class, "ReferenceNewElementSpec", !IS_ABSTRACT, !IS_INTERFACE, IS_GENERATED_INSTANCE_CLASS);
> 		initEReference(getReferenceNewElementSpec_NewElementInitializers(), this.getFeatureSeqInitializer(), this.getFeatureSeqInitializer_CreatingInitializer(), "newElementInitializers", null, 1, -1, ReferenceNewElementSpec.class, !IS_TRANSIENT, !IS_VOLATILE, IS_CHANGEABLE, IS_COMPOSITE, !IS_RESOLVE_PROXIES, !IS_UNSETTABLE, IS_UNIQUE, !IS_DERIVED, IS_ORDERED);
1851,1857d1930
< 		  (getMappingEntry_DomainInitializer(), 
< 		   source, 
< 		   new String[] {
< 			 "def", "context",
< 			 "ocl", "self.getDomainContext()"
< 		   });																									
< 		addAnnotation
1911a1985,1991
> 		  (getFeatureSeqInitializer_Initializers(), 
> 		   source, 
> 		   new String[] {
> 			 "def", "context",
> 			 "ocl", "self.elementClass"
> 		   });									
> 		addAnnotation
1918c1998
< 		  (getFeatureValueSpec_Feature(), 
---
> 		  (featureValueSpecEClass, 
1921c2001,2002
< 			 "def", "type"
---
> 			 "def", "type",
> 			 "ocl", "feature"
2129c2210,2252
< 		  (getFeatureValueSpec_Feature(), 
---
> 		  (getFeatureSeqInitializer_ElementClass(), 
> 		   source, 
> 		   new String[] {
> 			 "ocl", "not creatingInitializer.feature.oclIsUndefined() implies creatingInitializer.feature.oclAsType(ecore::EReference).eReferenceType.isSuperTypeOf(elementClass)",
> 			 "description", "\'elementClass\' must be the same as or sub-type of the containing \'GenReferenceNewElementSpec\' reference type"
> 		   });		
> 		addAnnotation
> 		  (getFeatureSeqInitializer_ElementClass(), 
> 		   source, 
> 		   new String[] {
> 			 "ocl", "not creatingInitializer.feature.oclIsUndefined() implies not (elementClass.interface or elementClass.abstract)",
> 			 "description", "\'elementClass\' must be a concrete EClass which is the same or sub-type of the containing \'GenReferenceNewElementSpec\' reference type"
> 		   });			
> 		addAnnotation
> 		  (getFeatureInitializer_Feature(), 
> 		   source, 
> 		   new String[] {
> 			 "ocl", "feature <> null implies not featureSeqInitializer.initializers->exists(i| i <> self and feature = self.feature)",
> 			 "description", "The feature is already initialized by another \'FeatureInitializer\' in the sequence"
> 		   });		
> 		addAnnotation
> 		  (getFeatureInitializer_Feature(), 
> 		   source, 
> 		   new String[] {
> 			 "ocl", "feature <> null implies feature.eContainingClass.isSuperTypeOf(featureSeqInitializer.elementClass)",
> 			 "description", "The \'feature\' of \'FeatureInitializer\' must be available in \'Meta Class\' of the initialized element"
> 		   });		
> 		addAnnotation
> 		  (getFeatureInitializer_Feature(), 
> 		   source, 
> 		   new String[] {
> 			 "ocl", "feature <> null implies feature.changeable",
> 			 "description", "The \'feature\' of \'FeatureInitializer\' must be changeable"
> 		   });					
> 		addAnnotation
> 		  (referenceNewElementSpecEClass, 
> 		   source, 
> 		   new String[] {
> 			 "ocl", "feature.many = false implies not (newElementInitializers->size() > 1)",
> 			 "description", "FeatureInitializer for single element EReference can\'t contain multiple element initializers"
> 		   });		
> 		addAnnotation
> 		  (referenceNewElementSpecEClass, 
2132,2133c2255,2256
< 			 "ocl", "feature.eContainingClass.isSuperTypeOf(featureSeqInitializer.mappingEntry.getDomainContext())",
< 			 "description", "Initialized \'Feature\' must be owned by \'Domain Element\' or its super type"
---
> 			 "ocl", "let r: ecore::EReference = feature.oclAsType(ecore::EReference) in feature <> null implies r.containment",
> 			 "description", "\'feature\' of \'ReferenceNewElementSpec\' must refer to containment ecore::EReference"
