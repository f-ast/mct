2c2
<  * Copyright (c) 2005 IBM Corporation and others.
---
>  * Copyright (c) 2005, 2006 IBM Corporation and others.
18a19,20
> import org.eclipse.core.commands.ExecutionException;
> import org.eclipse.core.runtime.IAdaptable;
23c25
< 
---
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
26c28
< import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand;
44c46
< 	extends AbstractModelCommand {
---
> 	extends AbstractTransactionalCommand {
59a62,63
>      * @param editingDomain
>      *            the editing domain through which model changes are made
65,66c69,71
< 	public DuplicateEObjectsCommand(String label, List eObjectsToBeDuplicated) {
< 		super(label, eObjectsToBeDuplicated);
---
> 	public DuplicateEObjectsCommand(TransactionalEditingDomain editingDomain, String label, List eObjectsToBeDuplicated) {
> 		super(editingDomain, label,
>             getWorkspaceFiles(eObjectsToBeDuplicated));
74a80,81
>      * @param editingDomain
>      *            the editing domain through which model changes are made
82,83c89,91
< 	public DuplicateEObjectsCommand(String label, List eObjectsToBeDuplicated, Map allDuplicatedObjectsMap) {
< 		super(label, eObjectsToBeDuplicated);
---
> 	public DuplicateEObjectsCommand(TransactionalEditingDomain editingDomain, String label, List eObjectsToBeDuplicated, Map allDuplicatedObjectsMap) {
>         super(editingDomain, label,
>             getWorkspaceFiles(eObjectsToBeDuplicated));
115d122
< 	 * @see org.eclipse.gmf.runtime.common.core.command.ICommand#isExecutable()
117c124
< 	public boolean isExecutable() {
---
> 	public boolean canExecute() {
134d140
< 	 * @see org.eclipse.gmf.runtime.common.core.internal.command.AbstractCommand#doExecute(org.eclipse.core.runtime.IProgressMonitor)
136c142,144
< 	protected CommandResult doExecute(IProgressMonitor progressMonitor) {
---
> 	protected CommandResult doExecuteWithResult(
>             IProgressMonitor progressMonitor, IAdaptable info)
>         throws ExecutionException {
164c172
< 		return newOKCommandResult(getAllDuplicatedObjectsMap());
---
> 		return CommandResult.newOKCommandResult(getAllDuplicatedObjectsMap());
