2c2
<  * Copyright (c) 2003, 2007 IBM Corporation and others.
---
>  * Copyright (c) 2003, 2008 IBM Corporation and others.
16a17
> import org.eclipse.draw2d.ColorConstants;
17a19
> import org.eclipse.draw2d.FigureListener;
49a52,53
>     private BorderItemContainerHelper helper = new BorderItemContainerHelper();
>     
347c351
<             extendedBounds = getBounds().getCopy();
---
>             extendedBounds = getParent().getBounds().getCopy();
375a380,418
>     
> 	/* (non-Javadoc)
> 	 * @see org.eclipse.draw2d.Figure#add(org.eclipse.draw2d.IFigure, java.lang.Object, int)
> 	 */
> 	public void add(IFigure figure, Object constraint, int index) {
> 		super.add(figure, constraint, index);
> 		helper.hookChild(figure);
> 	}
> 
> 	/* (non-Javadoc)
> 	 * @see org.eclipse.draw2d.Figure#remove(org.eclipse.draw2d.IFigure)
> 	 */
> 	public void remove(IFigure figure) {
> 		helper.unhookChild(figure);
> 		super.remove(figure);
> 	}
>     
>     private class BorderItemContainerHelper {
>     	
>     	class ChildTracker implements FigureListener {
>     		public void figureMoved(IFigure source) {
>     		    revalidate();
>     		}
>     	}
>     	
>     	private FigureListener figureListener = new ChildTracker();
>     	
>     	public void hookChild(IFigure child) {
>     	    revalidate();
>     		child.addFigureListener(figureListener);
>     	}
>     	
>     	public void unhookChild(IFigure child) {
>     	    revalidate();
>     		child.removeFigureListener(figureListener);
>     	}
>     	
>     }
>     
