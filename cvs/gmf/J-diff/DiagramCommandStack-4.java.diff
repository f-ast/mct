27d26
< 
36a36
> import org.eclipse.swt.widgets.Display;
143c143,149
< 		if (progressMonitor != null)
---
> 		if (progressMonitor != null) {
> 			DiagramGraphicalViewer viewer = getDiagramGraphicalViewer();
> 			
> 			if (viewer != null && Display.getCurrent() == null)
> 				viewer.enableUpdates(false);
> 			
> 			try {
144a151,155
> 			} finally {
> 				if (viewer != null)
> 					viewer.enableUpdates(true);
> 			}
> 		}
148a160,174
> 	private DiagramGraphicalViewer getDiagramGraphicalViewer() {
> 		IDiagramEditDomain ded = getDiagramEditDomain();
> 		DiagramGraphicalViewer viewer = null;
> 		
> 		if (ded instanceof DiagramEditDomain) {
> 			IDiagramWorkbenchPart dgrmWP = ((DiagramEditDomain)ded).getDiagramEditorPart();
> 			if (dgrmWP != null) {
> 				IDiagramGraphicalViewer dgv = ((DiagramEditDomain)ded).getDiagramEditorPart().getDiagramGraphicalViewer();
> 				if (dgv instanceof DiagramGraphicalViewer)
> 					viewer = (DiagramGraphicalViewer)dgv;
> 			}
> 		}
> 		return viewer;
> 	}
> 
