2c2
<  * Copyright (c) 2002, 2007 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2008 IBM Corporation and others.
113,114c113,114
<         
<         if (parent instanceof IGraphicalEditPart) {
---
>         EObject eObject = (EObject)getHost().getAdapter(EObject.class);
>         if (eObject != null && parent != null ) { //sanity checks
116,118c116,118
< 			if ( cep != null ) {
< 				return cep.isEnabled();						
< 			} 					
---
> 			return cep != null 
> 				&& cep.isEnabled()
> 				&& cep.canCreate(eObject); 					
