2c2
<  * Copyright (c) 2005 IBM Corporation and others.
---
>  * Copyright (c) 2005, 2007 IBM Corporation and others.
15a16
> import org.eclipse.draw2d.IFigure;
19d19
< 
65,66c65,66
< 		Rectangle startRect =
< 			new Rectangle(conn.getSourceAnchor().getOwner().getBounds());
---
>         
>         Rectangle startRect = getBounds(conn.getSourceAnchor().getOwner());
75,76c75
< 		Rectangle endRect =
< 			new Rectangle(conn.getTargetAnchor().getOwner().getBounds());
---
>         Rectangle endRect = getBounds(conn.getTargetAnchor().getOwner());
99c98
< 		Rectangle rect = new Rectangle(anchor.getOwner().getBounds());
---
> 		Rectangle rect = getBounds(anchor.getOwner());
160a160,172
>     
>     /**
>      * Returns a copy of the bounds of this figure or if the figure is a
>      * <code>Connection</code> the bounds of the pointlist will be returned.
>      * 
>      * @param figure
>      * @return a copy of the bounds
>      */
>     private static Rectangle getBounds(IFigure figure) {
>         return figure instanceof Connection ? ((Connection) figure).getPoints()
>             .getBounds().getCopy()
>             : figure.getBounds().getCopy();
>     }
