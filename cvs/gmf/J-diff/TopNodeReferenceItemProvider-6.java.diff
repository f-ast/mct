23a24
> import org.eclipse.gmf.mappings.LabelNodeMapping;
25a27
> import org.eclipse.gmf.mappings.ShapeNodeMapping;
117,118c119,122
<                 if (mapping.getDiagramNode() != null) { 
<                     result += reference.getChild().getDiagramNode().getName(); 
---
>                 if (mapping instanceof ShapeNodeMapping && ((ShapeNodeMapping) mapping).getDiagramNode() != null) { 
>                     result += ((ShapeNodeMapping) mapping).getDiagramNode().getName(); 
>                 } else if (mapping instanceof LabelNodeMapping && ((LabelNodeMapping) mapping).getDiagramLabel() != null) { 
>                     result += ((LabelNodeMapping) mapping).getDiagramLabel().getName(); 
169c173,178
< 				 GMFMapFactory.eINSTANCE.createNodeMapping()));
---
> 				 GMFMapFactory.eINSTANCE.createShapeNodeMapping()));
> 
> 		newChildDescriptors.add
> 			(createChildParameter
> 				(GMFMapPackage.eINSTANCE.getTopNodeReference_OwnedChild(),
> 				 GMFMapFactory.eINSTANCE.createLabelNodeMapping()));
