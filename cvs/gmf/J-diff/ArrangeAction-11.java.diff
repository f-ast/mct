39a40
> import org.eclipse.gmf.runtime.diagram.ui.internal.editparts.IEditableEditPart;
118a120,121
> 		List operationSet = getOperationSet();
> 		
120c123
< 		if( isArrangeAll() && !getOperationSet().isEmpty()){
---
> 		if( isArrangeAll() && !operationSet.isEmpty()){
123a127,144
> 		EditPart parentEP = getSelectionParent(operationSet);
> 		
> 		// bugzilla 156733: disable this action if the parent or selected edit parts are not editable
> 		if ((parentEP instanceof IEditableEditPart)
> 				&& !((IEditableEditPart) parentEP)
> 						.isEditModeEnabled()) {
> 			return false;
> 		}
> 		
> 		for (Iterator i = operationSet.iterator(); i.hasNext();) {
> 			Object next = i.next();
> 			if ((next instanceof IEditableEditPart)
> 					&& !((IEditableEditPart) next)
> 							.isEditModeEnabled()) {
> 				return false;
> 			}
> 		}
> 		
125,126c146
< 		if (getOperationSet().size() >= 2) {
< 			EditPart parentEP = getSelectionParent(getOperationSet());
---
> 		if (operationSet.size() >= 2) {
