30a31
> import org.eclipse.emf.ecore.EStructuralFeature;
46,53d46
< import org.eclipse.jface.util.Assert;
< import org.eclipse.swt.SWT;
< import org.eclipse.swt.accessibility.AccessibleEvent;
< import org.eclipse.swt.graphics.Color;
< import org.eclipse.swt.graphics.FontData;
< import org.eclipse.swt.widgets.Display;
< import org.eclipse.ui.IActionFilter;
< 
62a56
> import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;
79d72
< import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;
89a83,89
> import org.eclipse.jface.util.Assert;
> import org.eclipse.swt.SWT;
> import org.eclipse.swt.accessibility.AccessibleEvent;
> import org.eclipse.swt.graphics.Color;
> import org.eclipse.swt.graphics.FontData;
> import org.eclipse.swt.widgets.Display;
> import org.eclipse.ui.IActionFilter;
144c144
< 			addListenerFilter("SemanticProxy", this, PresentationListener.getNotifier(semanticProxy)); //$NON-NLS-1$
---
> 			addListenerFilter("SemanticProxy", this, semanticProxy); //$NON-NLS-1$
157a158
> 	 *  @deprecated use <code> addListenerFilter(String,PropertyChangeListener,EObject)</code>
170a172,218
> 	/**
> 	 * Adds a listener filter by adding the given listener to a passed notifier
> 	 * 
> 	 * @param filterId
> 	 *            A unique filter id (within the same editpart instance)
> 	 * @param listener
> 	 *            A listener instance
> 	 * @param element
> 	 *            An element to add the listener to
> 	 */
> 	protected void addListenerFilter(String filterId,
> 			PropertyChangeListener listener,
> 			EObject element) {
> 		if (element == null)
> 			return;
> 		Assert.isNotNull(filterId);
> 		Assert.isNotNull(listener);
> 		if (listenerFilters == null)
> 			listenerFilters = new HashMap();
> 		PresentationListener.getInstance().addPropertyChangeListener(element,listener);
> 		listenerFilters.put(filterId, new Object[] {element, listener});
> 	}
> 	
> 	/**
> 	 * Adds a listener filter by adding the given listener to a passed notifier
> 	 * 
> 	 * @param filterId
> 	 *            A unique filter id (within the same editpart instance)
> 	 * @param listener
> 	 *            A listener instance
> 	 * @param element
> 	 *            An element to add the listener to
> 	 */
> 	protected void addListenerFilter(String filterId,
> 			PropertyChangeListener listener,
> 			EObject element,
> 			EStructuralFeature feature) {
> 		if (element == null)
> 			return;
> 		Assert.isNotNull(filterId);
> 		Assert.isNotNull(listener);
> 		if (listenerFilters == null)
> 			listenerFilters = new HashMap();
> 		PresentationListener.getInstance().addPropertyChangeListener(element,listener);
> 		listenerFilters.put(filterId, new Object[] {element,feature, listener});
> 	}
> 
210a259,263
> 				if (obj.length>2){
> 					PresentationListener.getInstance().
> 						removePropertyChangeListener((EObject)obj[0],(EStructuralFeature) obj[1],(PropertyChangeListener) obj[2]);
> 				}else {
> 					if (obj[0] instanceof PropertyChangeNotifier)
211a265,267
> 					else
> 						PresentationListener.getInstance().removePropertyChangeListener((EObject) obj[0],(PropertyChangeListener) obj[1]);
> 				}
711a768,774
> 		if (objects.length>2){
> 			PresentationListener.getInstance().
> 				removePropertyChangeListener((EObject) objects[0],
> 											 (EStructuralFeature) objects[1],
> 											 (PropertyChangeListener) objects[2]);
> 		}else{
> 			if (objects[0] instanceof PropertyChangeNotifier){
713a777,780
> 			} else {
> 				PresentationListener.getInstance().removePropertyChangeListener((EObject) objects[0],(PropertyChangeListener) objects[1]);
> 			}
> 		}
782c849
< 		addListenerFilter("View", this, ViewUtil.getPropertyChangeNotifier((View)getModel())); //$NON-NLS-1$
---
> 		addListenerFilter("View", this,(View)getModel()); //$NON-NLS-1$
791c858
< 		addListenerFilter("SemanticElement", this, PresentationListener.getNotifier(resolveSemanticElement()));//$NON-NLS-1$
---
> 		addListenerFilter("SemanticElement", this,resolveSemanticElement());//$NON-NLS-1$
