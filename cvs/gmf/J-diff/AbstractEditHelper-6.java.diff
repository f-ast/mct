31c31
< import org.eclipse.gmf.runtime.common.core.command.UnexecutableCommand;
---
> import org.eclipse.gmf.runtime.common.core.command.IdentityCommand;
107a108,112
> 
>                     if (!beforeAdvice.canExecute()) {
>                         // The operation is not permitted
>                         return null;
>                     }
121c126,128
< 			if (insteadCommand == UnexecutableCommand.INSTANCE) {
---
> 			if (insteadCommand != null) {
>                 
>                 if (!insteadCommand.canExecute()) {
124,125c131
< 
< 			} else if (insteadCommand != null) {
---
>                 }
139a146,150
>                     
>                     if (!afterAdvice.canExecute()) {
>                         // The operation is not permitted
>                         return null;
>                     }
306,307c317,322
< 	 * By default, returns <code>null</code>. Subclasses may override to
< 	 * provide their command.
---
>      * <P>
>      * Returns the {@link IdentityCommand} if the request does not have a source
>      * or a target. This ensures that the create relationship gesture is enabled
>      * until the request can be completely specified.
>      * <P>
>      * Subclasses may override to provide their own command.
314a330,342
>         
>         EObject source = req.getSource();
>         EObject target = req.getTarget();
> 
>         boolean noSourceOrTarget = (source == null || target == null);
>         boolean noSourceAndTarget = (source == null && target == null);
> 
>         if (noSourceOrTarget && !noSourceAndTarget) {
>             // The request isn't complete yet. Return the identity command so
>             // that the create relationship gesture is enabled.
>             return IdentityCommand.INSTANCE;
>         }
>         
