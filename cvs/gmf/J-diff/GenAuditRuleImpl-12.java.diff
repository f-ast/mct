14d13
< import org.eclipse.emf.ecore.util.EcoreUtil;
15a15
> import org.eclipse.gmf.codegen.gmfgen.GenAuditRoot;
30a31,32
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getRoot <em>Root</em>}</li>
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getContextSelectorLocalClassName <em>Context Selector Local Class Name</em>}</li>
37d38
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getContainer <em>Container</em>}</li>
38a40
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getCategory <em>Category</em>}</li>
45a48,67
> 	 * The default value of the '{@link #getContextSelectorLocalClassName() <em>Context Selector Local Class Name</em>}' attribute.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getContextSelectorLocalClassName()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected static final String CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT = null;
> 
> 	/**
> 	 * The cached value of the '{@link #getContextSelectorLocalClassName() <em>Context Selector Local Class Name</em>}' attribute.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getContextSelectorLocalClassName()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected String contextSelectorLocalClassName = CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT;
> 
> 	/**
155a178,187
> 	 * The cached value of the '{@link #getCategory() <em>Category</em>}' reference.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getCategory()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected GenAuditContainer category = null;
> 
> 	/**
177a210,219
> 	public GenAuditRoot getRoot() {
> 		if (eContainerFeatureID != GMFGenPackage.GEN_AUDIT_RULE__ROOT) return null;
> 		return (GenAuditRoot)eContainer();
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
346,386d387
< 	 * @generated
< 	 */
< 	public GenAuditContainer getContainer() {
< 		if (eContainerFeatureID != GMFGenPackage.GEN_AUDIT_RULE__CONTAINER) return null;
< 		return (GenAuditContainer)eContainer();
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public NotificationChain basicSetContainer(GenAuditContainer newContainer, NotificationChain msgs) {
< 		msgs = eBasicSetContainer((InternalEObject)newContainer, GMFGenPackage.GEN_AUDIT_RULE__CONTAINER, msgs);
< 		return msgs;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	public void setContainer(GenAuditContainer newContainer) {
< 		if (newContainer != eInternalContainer() || (eContainerFeatureID != GMFGenPackage.GEN_AUDIT_RULE__CONTAINER && newContainer != null)) {
< 			if (EcoreUtil.isAncestor(this, newContainer))
< 				throw new IllegalArgumentException("Recursive containment not allowed for " + toString());
< 			NotificationChain msgs = null;
< 			if (eInternalContainer() != null)
< 				msgs = eBasicRemoveFromContainer(msgs);
< 			if (newContainer != null)
< 				msgs = ((InternalEObject)newContainer).eInverseAdd(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
< 			msgs = basicSetContainer(newContainer, msgs);
< 			if (msgs != null) msgs.dispatch();
< 		}
< 		else if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CONTAINER, newContainer, newContainer));
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
410a412,418
> 	 * @generated
> 	 */
> 	public String getContextSelectorLocalClassNameGen() {
> 		return contextSelectorLocalClassName;
> 	}
> 
> 	/**
413a422,424
> 		if (getContextSelectorLocalClassNameGen() != null) {
> 			return getContextSelectorLocalClassNameGen();
> 		}
422a434,445
> 	 * @generated
> 	 */
> 	public void setContextSelectorLocalClassName(String newContextSelectorLocalClassName) {
> 		String oldContextSelectorLocalClassName = contextSelectorLocalClassName;
> 		contextSelectorLocalClassName = newContextSelectorLocalClassName;
> 		if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME, oldContextSelectorLocalClassName, contextSelectorLocalClassName));
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
438,451c461
< 		if(getContainer() == null) {
< 			return null;
< 		}
< 		StringBuffer buf = new StringBuffer();
< 		for(GenAuditContainer container = getContainer(); container != null;) {
< 			GenAuditContainer parent = container.getParentContainer();
< 			if(parent != null) {
< 				buf.insert(0, parent.getChildContainers().indexOf(container) + 1);
< 			}
< 			container = parent;
< 		}
< 		buf.insert(0, "Adapter"); //$NON-NLS-1$
< 		buf.append(getContainer().getAudits().indexOf(this) + 1);
< 		return buf.toString(); 
---
> 		return "Adapter" + (getRoot().getRules().indexOf(this) + 1); //$NON-NLS-1$ 
467,468c477,478
< 		if(getContainer() != null && getContainer().getEditor() != null) {
< 			return getContainer().getEditor().getDiagram();
---
> 		if(getRoot() != null) {
> 			return getRoot().getEditorGen().getDiagram();
493a504,563
> 	public GenAuditContainer getCategory() {
> 		if (category != null && category.eIsProxy()) {
> 			InternalEObject oldCategory = (InternalEObject)category;
> 			category = (GenAuditContainer)eResolveProxy(oldCategory);
> 			if (category != oldCategory) {
> 				if (eNotificationRequired())
> 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFGenPackage.GEN_AUDIT_RULE__CATEGORY, oldCategory, category));
> 			}
> 		}
> 		return category;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public GenAuditContainer basicGetCategory() {
> 		return category;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public NotificationChain basicSetCategory(GenAuditContainer newCategory, NotificationChain msgs) {
> 		GenAuditContainer oldCategory = category;
> 		category = newCategory;
> 		if (eNotificationRequired()) {
> 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CATEGORY, oldCategory, newCategory);
> 			if (msgs == null) msgs = notification; else msgs.add(notification);
> 		}
> 		return msgs;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public void setCategory(GenAuditContainer newCategory) {
> 		if (newCategory != category) {
> 			NotificationChain msgs = null;
> 			if (category != null)
> 				msgs = ((InternalEObject)category).eInverseRemove(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
> 			if (newCategory != null)
> 				msgs = ((InternalEObject)newCategory).eInverseAdd(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
> 			msgs = basicSetCategory(newCategory, msgs);
> 			if (msgs != null) msgs.dispatch();
> 		}
> 		else if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CATEGORY, newCategory, newCategory));
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
496c566
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
499c569,573
< 				return basicSetContainer((GenAuditContainer)otherEnd, msgs);
---
> 				return eBasicSetContainer(otherEnd, GMFGenPackage.GEN_AUDIT_RULE__ROOT, msgs);
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				if (category != null)
> 					msgs = ((InternalEObject)category).eInverseRemove(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
> 				return basicSetCategory((GenAuditContainer)otherEnd, msgs);
510a585,586
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
> 				return eBasicSetContainer(null, GMFGenPackage.GEN_AUDIT_RULE__ROOT, msgs);
515,516c591,592
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
< 				return basicSetContainer(null, msgs);
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				return basicSetCategory(null, msgs);
528,529c604,605
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
< 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
> 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_AUDIT_ROOT__RULES, GenAuditRoot.class, msgs);
540a617,620
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
> 				return getRoot();
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				return getContextSelectorLocalClassName();
553,554d632
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
< 				return getContainer();
556a635,637
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				if (resolve) return getCategory();
> 				return basicGetCategory();
567a649,651
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				setContextSelectorLocalClassName((String)newValue);
> 				return;
586,587c670,671
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
< 				setContainer((GenAuditContainer)newValue);
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				setCategory((GenAuditContainer)newValue);
599a684,686
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				setContextSelectorLocalClassName(CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT);
> 				return;
618,619c705,706
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
< 				setContainer((GenAuditContainer)null);
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				setCategory((GenAuditContainer)null);
631a719,722
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
> 				return getRoot() != null;
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				return CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT == null ? contextSelectorLocalClassName != null : !CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT.equals(contextSelectorLocalClassName);
644,645d734
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
< 				return getContainer() != null;
647a737,738
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				return category != null;
661c752,754
< 		result.append(" (id: ");
---
> 		result.append(" (contextSelectorLocalClassName: ");
> 		result.append(contextSelectorLocalClassName);
> 		result.append(", id: ");
