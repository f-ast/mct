14d13
< import org.eclipse.gmf.codegen.gmfgen.CompartmentLayoutKind;
31c30
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenCompartmentImpl#getLayoutKind <em>Layout Kind</em>}</li>
---
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenCompartmentImpl#getDiagram <em>Diagram</em>}</li>
120c119
< 	 * The default value of the '{@link #getLayoutKind() <em>Layout Kind</em>}' attribute.
---
> 	 * The cached value of the '{@link #getNode() <em>Node</em>}' reference.
123c122
< 	 * @see #getLayoutKind()
---
> 	 * @see #getNode()
127,137c126
< 	protected static final CompartmentLayoutKind LAYOUT_KIND_EDEFAULT = CompartmentLayoutKind.BORDER_LITERAL;
< 
< 	/**
< 	 * The cached value of the '{@link #getLayoutKind() <em>Layout Kind</em>}' attribute.
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @see #getLayoutKind()
< 	 * @generated
< 	 * @ordered
< 	 */
< 	protected CompartmentLayoutKind layoutKind = LAYOUT_KIND_EDEFAULT;
---
> 	protected GenNode node = null;
246,247c235,237
< 	public CompartmentLayoutKind getLayoutKind() {
< 		return layoutKind;
---
> 	public GenDiagram getDiagram() {
> 		if (eContainerFeatureID != GMFGenPackage.GEN_COMPARTMENT__DIAGRAM) return null;
> 		return (GenDiagram)eContainer();
255,257c245,249
< 	public void setLayoutKind(CompartmentLayoutKind newLayoutKind) {
< 		CompartmentLayoutKind oldLayoutKind = layoutKind;
< 		layoutKind = newLayoutKind == null ? LAYOUT_KIND_EDEFAULT : newLayoutKind;
---
> 	public GenNode getNode() {
> 		if (node != null && node.eIsProxy()) {
> 			InternalEObject oldNode = (InternalEObject)node;
> 			node = (GenNode)eResolveProxy(oldNode);
> 			if (node != oldNode) {
259c251,254
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND, oldLayoutKind, layoutKind));
---
> 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFGenPackage.GEN_COMPARTMENT__NODE, oldNode, node));
> 			}
> 		}
> 		return node;
267,269c262,278
< 	public GenNode getNode() {
< 		if (eContainerFeatureID != GMFGenPackage.GEN_COMPARTMENT__NODE) return null;
< 		return (GenNode)eContainer();
---
> 	public GenNode basicGetNode() {
> 		return node;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public NotificationChain basicSetNode(GenNode newNode, NotificationChain msgs) {
> 		GenNode oldNode = node;
> 		node = newNode;
> 		if (eNotificationRequired()) {
> 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_COMPARTMENT__NODE, oldNode, newNode);
> 			if (msgs == null) msgs = notification; else msgs.add(notification);
> 		}
> 		return msgs;
288c297
< 			case GMFGenPackage.GEN_COMPARTMENT__NODE:
---
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
291c300,304
< 				return eBasicSetContainer(otherEnd, GMFGenPackage.GEN_COMPARTMENT__NODE, msgs);
---
> 				return eBasicSetContainer(otherEnd, GMFGenPackage.GEN_COMPARTMENT__DIAGRAM, msgs);
> 			case GMFGenPackage.GEN_COMPARTMENT__NODE:
> 				if (node != null)
> 					msgs = ((InternalEObject)node).eInverseRemove(this, GMFGenPackage.GEN_NODE__COMPARTMENTS, GenNode.class, msgs);
> 				return basicSetNode((GenNode)otherEnd, msgs);
302a316,317
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
> 				return eBasicSetContainer(null, GMFGenPackage.GEN_COMPARTMENT__DIAGRAM, msgs);
304c319
< 				return eBasicSetContainer(null, GMFGenPackage.GEN_COMPARTMENT__NODE, msgs);
---
> 				return basicSetNode(null, msgs);
316,317c331,332
< 			case GMFGenPackage.GEN_COMPARTMENT__NODE:
< 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_NODE__COMPARTMENTS, GenNode.class, msgs);
---
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
> 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_DIAGRAM__COMPARTMENTS, GenDiagram.class, msgs);
337,338c352,353
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
< 				return getLayoutKind();
---
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
> 				return getDiagram();
340c355,356
< 				return getNode();
---
> 				if (resolve) return getNode();
> 				return basicGetNode();
364,366d379
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
< 				setLayoutKind((CompartmentLayoutKind)newValue);
< 				return;
390,392d402
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
< 				setLayoutKind(LAYOUT_KIND_EDEFAULT);
< 				return;
412,413c422,423
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
< 				return layoutKind != LAYOUT_KIND_EDEFAULT;
---
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
> 				return getDiagram() != null;
415c425
< 				return getNode() != null;
---
> 				return node != null;
437,438d446
< 		result.append(", layoutKind: ");
< 		result.append(layoutKind);
467,470d474
< 	public GenDiagram getDiagram() {
< 		return getNode().getDiagram();
< 	}
< 
