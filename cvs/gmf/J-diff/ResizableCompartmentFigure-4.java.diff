22a23
> import org.eclipse.draw2d.geometry.Insets;
24,26d24
< import org.eclipse.swt.graphics.Color;
< import org.eclipse.swt.graphics.Font;
< 
33c31,32
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapModeUtil;
34a34,35
> import org.eclipse.swt.graphics.Color;
> import org.eclipse.swt.graphics.Font;
49,55d49
< public class ResizableCompartmentFigure extends NodeFigure {
< 
< 	/**
< 	 * The minimum client area height for the compartment
< 	 */
< 	public static final int MIN_CLIENT_SIZE = MapMode.DPtoLP(11);
< 
57c51,52
< 	 * The minmum dimension for the compartment
---
>  * @author Steve
>  *
59c54
< 	private static Dimension minClientDim = new Dimension(MIN_CLIENT_SIZE,MIN_CLIENT_SIZE);
---
> public class ResizableCompartmentFigure extends NodeFigure {
70a66,71
> 	
> 	/**
> 	 * the minimum size the client area can occupy in logical coordinates
> 	 */
> 	private int minClientSize = 0;
> 	
86c87,93
< 	 * A constructor for a top level resizable compartment figure
---
> 	 * Specifies the default minimum client size of this figure in device coordinates.
> 	 * Clients should use their editors <code>IMapMode</code> to convert this to logical
> 	 * coordinates.
> 	 */
> 	public static final int MIN_CLIENT_DP = 11;
> 	
> 	/**
87a95,98
> 	 * @deprecated use @link(ResizableCompartment(String compartmentTitle, int minClientSize)} instead.
> 	 * Clients must specify the minClientSize in their own logical coordinate system instead of the
> 	 * figure assuming a default.  @link{ ResizableCompartmentFigure.MIN_CLIENT_DP } is provided as a default
> 	 * value for convenience in device coordinates.
89a101,110
> 		this(compartmentTitle, MapModeUtil.getMapMode().DPtoLP(MIN_CLIENT_DP));
> 	}
> 	/**
> 	 * A constructor for a top level resizable compartment figure
> 	 * @param compartmentTitle
> 	 * @param minClientSize <code>int</code> that is the minimum size the client area can occupy in 
> 	 * logical coordinates.
> 	 */
> 	public ResizableCompartmentFigure(String compartmentTitle, int minClientSize) {
> 		this.minClientSize = minClientSize;
113c134,141
< 		scrollPane.setVerticalScrollBar(new ListScrollBar(Orientable.VERTICAL));
---
> 		
> 		IMapMode mm = MapModeUtil.getMapMode(this);
> 		Insets insets = new Insets(mm.DPtoLP(1), mm.DPtoLP(2),
> 			mm.DPtoLP(1), mm.DPtoLP(0));
> 		Dimension size = new Dimension(mm.DPtoLP(15), mm.DPtoLP(15));
> 		
> 		scrollPane.setVerticalScrollBar(new ListScrollBar(Orientable.VERTICAL, insets, size, 
> 									mm.DPtoLP(10), mm.DPtoLP(50)));
118c146
< 				new MarginBorder(1, MIN_CLIENT_SIZE/2, 1, MIN_CLIENT_SIZE/2));			
---
> 				new MarginBorder(1, getMinClientSize()/2, 1, getMinClientSize()/2));			
120a149,157
> 	
> 	/**
> 	 * @return that is the minimum size the client area can occupy in 
> 	 * logical coordinates.
> 	 */
> 	final protected int getMinClientSize() {
> 		return minClientSize;
> 	}
> 	
279c316
< 			graphics.drawRectangle(getClientArea().shrink(MapMode.DPtoLP(1), MapMode.DPtoLP(1)));
---
> 			graphics.drawRectangle(getClientArea().shrink(MapModeUtil.getMapMode(this).DPtoLP(1), MapModeUtil.getMapMode(this).DPtoLP(1)));
379c416
< 		return minClientDim;
---
> 		return new Dimension(getMinClientSize(), getMinClientSize());
