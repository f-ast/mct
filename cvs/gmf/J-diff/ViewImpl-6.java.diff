2c2
<  * Copyright (c) 2004 IBM Corporation and others.
---
>  * Copyright (c) 2004, 2006 IBM Corporation and others.
21a22
> import org.eclipse.emf.common.util.ECollections;
41,42c42
<  * <!-- begin-user-doc -->
<  * An implementation of the model object '<em><b>View</b></em>'.
---
>  * <!-- begin-user-doc --> An implementation of the model object '<em><b>View</b></em>'.
65c65,68
< public abstract class ViewImpl extends EModelElementImpl implements View {
---
> public abstract class ViewImpl
>     extends EModelElementImpl
>     implements View {
> 
68,69c71
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
78,79c80
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
88,89c89
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
98,99c98
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
108,109c107
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
118,119c116
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
128,129c125
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
138,139c134
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
148,149c143
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
158,159c152
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
168,169c161
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
177,179c169,171
<      * The flag representing whether the Element reference has been set.
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * The flag representing whether the Element reference has been set. <!--
>      * begin-user-doc --> <!-- end-user-doc -->
>      * 
187,188c179
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
196a188,191
>     protected static final EStructuralFeature[] childrenFeatures = new EStructuralFeature[] {
>         NotationPackage.Literals.VIEW__PERSISTED_CHILDREN,
>         NotationPackage.Literals.VIEW__TRANSIENT_CHILDREN};
> 
198,199c193
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
208,209c202
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
217,218c210
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
226,227c218
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
238,239c229
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
247,248c237,238
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
>      * 
253c243,244
< 		type = (newType == null)?null:newType.intern();
---
>         type = (newType == null) ? null
>             : newType.intern();
255c246,247
< 			eNotify(new ENotificationImpl(this, Notification.SET, NotationPackage.VIEW__TYPE, oldType, type));
---
>             eNotify(new ENotificationImpl(this, Notification.SET,
>                 NotationPackage.VIEW__TYPE, oldType, type));
258d249
< 
260,261c251
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
269,270c259
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
281,282c270
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
293,294c281
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
305,306c292
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
317,318c303
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
322,325c307
< 			allChildren =  new EContentsEList(this, 
< 				new EStructuralFeature[] {
< 					NotationPackage.eINSTANCE.getView_PersistedChildren(),
< 					NotationPackage.eINSTANCE.getView_TransientChildren()});
---
>             allChildren = new EContentsEList(this, childrenFeatures);
331,332c313
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
343,344c324,325
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
>      * 
360c341,342
< 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, NotationPackage.VIEW__ELEMENT, oldElement, element));
---
>                     eNotify(new ENotificationImpl(this, Notification.RESOLVE,
>                         NotationPackage.VIEW__ELEMENT, oldElement, element));
368,369c350
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
377,378c358
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
391,392c371
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
405,406c384
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
414,415c392
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
424,425c401
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
428,429c404,407
< 		for (EObject parent = this; parent != null; parent = parent.eContainer())
< 			if (NotationPackage.eINSTANCE.getDiagram().isSuperTypeOf(parent.eClass()))
---
>         for (EObject parent = this; parent != null; parent = parent
>             .eContainer())
>             if (NotationPackage.Literals.DIAGRAM.isSuperTypeOf(
>                 parent.eClass()))
435,436c413
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
447,448c424
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
451c427,428
< 		if (eClass != null && eIsSet(NotationPackage.eINSTANCE.getView_Styles())) {
---
>         if (eClass != null
>             && eIsSet(NotationPackage.Literals.VIEW__STYLES)) {
462,463c439
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
466c442,443
< 		Node newChild = (Node) eClass.getEPackage().getEFactoryInstance().create(eClass);
---
>         Node newChild = (Node) eClass.getEPackage().getEFactoryInstance()
>             .create(eClass);
472,473c449
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
476c452,453
< 		Style newStyle = (Style) eClass.getEPackage().getEFactoryInstance().create(eClass);
---
>         Style newStyle = (Style) eClass.getEPackage().getEFactoryInstance()
>             .create(eClass);
482,483c459
<      * <!-- begin-user-doc -->
<      * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
487a464,465
>             case NotationPackage.VIEW__EANNOTATIONS:
>                 return ((InternalEList)getEAnnotations()).basicAdd(otherEnd, msgs);
493c471
<         return super.eInverseAdd(otherEnd, featureID, msgs);
---
>         return eDynamicInverseAdd(otherEnd, featureID, msgs);
497,498c475
<      * <!-- begin-user-doc -->
<      * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
502a480,481
>             case NotationPackage.VIEW__EANNOTATIONS:
>                 return ((InternalEList)getEAnnotations()).basicRemove(otherEnd, msgs);
514c493
<         return super.eInverseRemove(otherEnd, featureID, msgs);
---
>         return eDynamicInverseRemove(otherEnd, featureID, msgs);
518,519c497
<      * <!-- begin-user-doc -->
<      * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
523a502,503
>             case NotationPackage.VIEW__EANNOTATIONS:
>                 return getEAnnotations();
547c527
<         return super.eGet(featureID, resolve, coreType);
---
>         return eDynamicGet(featureID, resolve, coreType);
551,552c531
<      * <!-- begin-user-doc -->
<      * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
556a536,539
>             case NotationPackage.VIEW__EANNOTATIONS:
>                 getEAnnotations().clear();
>                 getEAnnotations().addAll((Collection)newValue);
>                 return;
590c573
<         super.eSet(featureID, newValue);
---
>         eDynamicSet(featureID, newValue);
594,595c577
<      * <!-- begin-user-doc -->
<      * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
599a582,584
>             case NotationPackage.VIEW__EANNOTATIONS:
>                 getEAnnotations().clear();
>                 return;
628c613
<         super.eUnset(featureID);
---
>         eDynamicUnset(featureID);
632,633c617
<      * <!-- begin-user-doc -->
<      * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
637a622,623
>             case NotationPackage.VIEW__EANNOTATIONS:
>                 return eAnnotations != null && !eAnnotations.isEmpty();
659c645
<         return super.eIsSet(featureID);
---
>         return eDynamicIsSet(featureID);
663,664c649
<      * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
682,683c667
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
686,687c670
< 		if (transientChildren!=null &&
< 			transientChildren.size()>0){
---
>         if (transientChildren != null && transientChildren.size() > 0) {
693,694c676
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
702,703c684
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
712d692
< 	
714,715c694
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
727,728c706
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
731,734c709,711
< 		if (child.eContainingFeature() == 
< 			NotationPackage.eINSTANCE.getView_TransientChildren()){
< 			if (transientChildren!=null && 
< 			    transientChildren.size()>0){
---
>         if (child.eContainingFeature() == NotationPackage.Literals
>             .VIEW__TRANSIENT_CHILDREN) {
>             if (transientChildren != null && transientChildren.size() > 0) {
737,740c714,716
< 		} else if (child.eContainingFeature() == 
< 			NotationPackage.eINSTANCE.getView_PersistedChildren()){
< 			if (persistedChildren!=null && 
< 				persistedChildren.size()>0){
---
>         } else if (child.eContainingFeature() == NotationPackage.Literals
>             .VIEW__PERSISTED_CHILDREN) {
>             if (persistedChildren != null && persistedChildren.size() > 0) {
747,748c723
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
752,755c727,728
< 		if (eContainer!=null &&
< 			eContaingFeature!=null &&
< 			eContainer instanceof View &&
< 			eContaingFeature.isTransient()){
---
>         if (eContainer != null && eContaingFeature != null
>             && eContainer instanceof View && eContaingFeature.isTransient()) {
762,763c735
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
765a738,742
>         if ((persistedChildren == null || persistedChildren.isEmpty())
>             && (transientChildren == null || transientChildren.isEmpty())) {
>             return ECollections.EMPTY_ELIST;
>         }
> 
767,769c744,746
< 		if (persistedChildren!=null &&
< 			persistedChildren.size()>0){
< 			for (Iterator iter = getPersistedChildren().iterator(); iter.hasNext();) {
---
>         if (persistedChildren != null && persistedChildren.size() > 0) {
>             for (Iterator iter = persistedChildren.iterator(); iter
>                 .hasNext();) {
776,778c753,755
< 		if (transientChildren!=null&&
< 			transientChildren.size()>0){
< 			for (Iterator iter = getTransientChildren().iterator(); iter.hasNext();) {
---
>         if (transientChildren != null && transientChildren.size() > 0) {
>             for (Iterator iter = transientChildren.iterator(); iter
>                 .hasNext();) {
784c761,763
< 		return new BasicEList.UnmodifiableEList(_children.size(), _children.toArray());
---
>         
>         return new BasicEList.UnmodifiableEList(_children.size(), _children
>             .toArray());
