2c2
<  * Copyright (c) 2002, 2005 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
19a20,22
> import org.eclipse.core.commands.operations.IOperationHistory;
> import org.eclipse.core.commands.operations.IOperationHistoryListener;
> import org.eclipse.core.commands.operations.OperationHistoryEvent;
22,23d24
< import org.eclipse.gmf.runtime.common.core.command.CommandManagerChangeEvent;
< import org.eclipse.gmf.runtime.common.core.command.ICommandManagerChangeListener;
36d36
< import org.eclipse.gmf.runtime.common.ui.services.action.internal.filter.TestAttributeOperation;
51c51
< 	implements IActionFilterProvider, ICommandManagerChangeListener {
---
> 	implements IActionFilterProvider, IOperationHistoryListener {
185c185
< 		getCommandManager().addCommandManagerChangeListener(this);
---
>         getOperationHistory().addOperationHistoryListener(this);
253c253
< 	 *  
---
> 	 * @deprecated Use {@link #getOperationHistory()} instead.
256c256,265
< 		return getActionManager().getCommandManager();
---
> 		return CommandManager.getDefault();
> 	}
>     
>     /**
>      * Returns the operation history from my action manager.
>      * 
>      * @return the operation history
>      */
>     protected IOperationHistory getOperationHistory() {
>         return getActionManager().getOperationHistory();
358,364c367
< 	 * Handles an event indicating that a command manager has changed.
< 	 * 
< 	 * @param event
< 	 *            The command manager change event to be handled.
< 	 * 
< 	 * @see ICommandManagerChangeListener#commandManagerChanged(CommandManagerChangeEvent)
< 	 *  
---
>      * Clears my cache when my operation history changes.
366c369
< 	public void commandManagerChanged(CommandManagerChangeEvent event) {
---
>     public void historyNotification(OperationHistoryEvent event) {
