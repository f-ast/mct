17a18
> import org.eclipse.emf.ecore.xmi.impl.XMIResourceImpl;
27a29
> 
29c31,35
< 		XMLResource resource = (XMLResource) super.createResource(uri);
---
> 		return new ToolResource(uri);
> 	}
> 	
> 	
> 	public static class ToolResource extends XMIResourceImpl {
30a37,42
> 		public ToolResource(URI uri) {
> 			super(uri);
> 			setupOptions();
> 		}
> 		
> 		private void setupOptions() {
33c45
< 		resource.getDefaultLoadOptions().put(XMLResource.OPTION_DEFER_IDREF_RESOLUTION, Boolean.TRUE);
---
> 			getDefaultLoadOptions().put(XMLResource.OPTION_DEFER_IDREF_RESOLUTION, Boolean.TRUE);
36,38c48,49
< 		resource.getDefaultSaveOptions().put(XMLResource.OPTION_LINE_WIDTH, new Integer(1));
< 
< 		return resource;
---
> 			getDefaultSaveOptions().put(XMLResource.OPTION_LINE_WIDTH, new Integer(1));
> 		}		
