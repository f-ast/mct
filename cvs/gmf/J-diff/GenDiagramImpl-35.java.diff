9d8
< import java.util.ArrayList;
11a11
> import java.util.Collections;
13a14
> import java.util.LinkedHashSet;
28a30
> import org.eclipse.gmf.codegen.gmfgen.GenAuditContainer;
49a52
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenDiagramImpl#getAudits <em>Audits</em>}</li>
137a141,150
> 	 * The cached value of the '{@link #getAudits() <em>Audits</em>}' containment reference.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getAudits()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected GenAuditContainer audits = null;
> 
> 	/**
1051a1065,1107
> 	public GenAuditContainer getAudits() {
> 		return audits;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public NotificationChain basicSetAudits(GenAuditContainer newAudits, NotificationChain msgs) {
> 		GenAuditContainer oldAudits = audits;
> 		audits = newAudits;
> 		if (eNotificationRequired()) {
> 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_DIAGRAM__AUDITS, oldAudits, newAudits);
> 			if (msgs == null) msgs = notification; else msgs.add(notification);
> 		}
> 		return msgs;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public void setAudits(GenAuditContainer newAudits) {
> 		if (newAudits != audits) {
> 			NotificationChain msgs = null;
> 			if (audits != null)
> 				msgs = ((InternalEObject)audits).eInverseRemove(this, EOPPOSITE_FEATURE_BASE - GMFGenPackage.GEN_DIAGRAM__AUDITS, null, msgs);
> 			if (newAudits != null)
> 				msgs = ((InternalEObject)newAudits).eInverseAdd(this, EOPPOSITE_FEATURE_BASE - GMFGenPackage.GEN_DIAGRAM__AUDITS, null, msgs);
> 			msgs = basicSetAudits(newAudits, msgs);
> 			if (msgs != null) msgs.dispatch();
> 		}
> 		else if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_DIAGRAM__AUDITS, newAudits, newAudits));
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
2274a2331,2332
> 			case GMFGenPackage.GEN_DIAGRAM__AUDITS:
> 				return basicSetAudits(null, msgs);
2297a2356,2357
> 			case GMFGenPackage.GEN_DIAGRAM__AUDITS:
> 				return getAudits();
2402a2463,2465
> 			case GMFGenPackage.GEN_DIAGRAM__AUDITS:
> 				setAudits((GenAuditContainer)newValue);
> 				return;
2545a2609,2611
> 			case GMFGenPackage.GEN_DIAGRAM__AUDITS:
> 				setAudits((GenAuditContainer)null);
> 				return;
2684a2751,2752
> 			case GMFGenPackage.GEN_DIAGRAM__AUDITS:
> 				return audits != null;
2902c2970
< 		ArrayList requiredPlugins = new ArrayList();
---
> 		Collection requiredPlugins = new LinkedHashSet();
2907a2976
> 		requiredPlugins.addAll(getAuditRequiredPluginIDs());
3223a3293,3299
> 	
> 	private Set getAuditRequiredPluginIDs() {
> 		if(getAudits() != null && getAudits().getAllAuditRules().size() > 0) {
> 			return Collections.singleton("org.eclipse.emf.validation"); //$NON-NLS-1$ 
> 		}
> 		return Collections.EMPTY_SET;
> 	}
