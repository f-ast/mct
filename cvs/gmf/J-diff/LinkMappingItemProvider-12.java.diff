12,13d11
< import java.util.HashSet;
< import java.util.Iterator;
15d12
< import java.util.Set;
20d16
< import org.eclipse.emf.ecore.EReference;
31a28
> import org.eclipse.gmf.mappings.presentation.ScopeUtil;
178,188c175,179
< 							if (object instanceof LinkMapping) {
< 								LinkMapping nm = (LinkMapping) object;
< 								if (nm.getDomainMetaElement() != null) {
< 									Set features = new HashSet();
< 									for (Iterator it = nm.getDomainMetaElement().getEPackage().eAllContents(); it.hasNext(); ) {
< 										Object next = it.next();
< 										if (next instanceof EReference) {
< 											EReference ref = (EReference) next;
< 											if (ref.isContainment() && nm.getDomainMetaElement().equals(ref.getEType())) {
< 												features.add(ref);
< 											}
---
> 							ScopeUtil scopeUtil = new ScopeUtil((LinkMapping) object);
> 							if (scopeUtil.isDevisable()) {
> 								return scopeUtil.getPossibleContainments();
> 							} else {
> 								return super.getComboBoxObjects(object);
191,195d181
< 									return features;
< 								}
< 							}
< 							return Collections.EMPTY_LIST;
< 						}
