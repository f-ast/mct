13a14,19
> import org.eclipse.draw2d.AbstractLocator;
> import org.eclipse.draw2d.IFigure;
> import org.eclipse.draw2d.PositionConstants;
> import org.eclipse.draw2d.geometry.Point;
> import org.eclipse.emf.common.notify.Notification;
> import org.eclipse.gef.GraphicalEditPart;
14a21,26
> import org.eclipse.gmf.runtime.lite.edit.parts.update.IExternallyUpdatableEditPart;
> import org.eclipse.gmf.runtime.lite.edit.parts.update.UpdaterUtil;
> import org.eclipse.gmf.runtime.notation.Location;
> import org.eclipse.gmf.runtime.notation.Node;
> import org.eclipse.gmf.runtime.notation.NotationPackage;
> import org.eclipse.gmf.runtime.notation.View;
17c29
< 	public BaseExternalNodeLabelEditPart(org.eclipse.gmf.runtime.notation.View view) {
---
> 	public BaseExternalNodeLabelEditPart(View view) {
22c34
< 		org.eclipse.gmf.runtime.notation.Node node = (org.eclipse.gmf.runtime.notation.Node) getModel();
---
> 		Node node = (Node) getModel();
26,30c38,42
< 		assert node.getLayoutConstraint() instanceof org.eclipse.gmf.runtime.notation.Location;
< 		final org.eclipse.gmf.runtime.notation.Location location = (org.eclipse.gmf.runtime.notation.Location) node.getLayoutConstraint();
< 		getFigure().getParent().setConstraint(getFigure(), new org.eclipse.draw2d.AbstractLocator() {
< 			protected org.eclipse.draw2d.geometry.Point getReferencePoint() {
< 				return getLabelLocation(((org.eclipse.gef.GraphicalEditPart) getParent()).getFigure()).translate(location.getX(), location.getY());
---
> 		assert node.getLayoutConstraint() instanceof Location;
> 		final Location location = (Location) node.getLayoutConstraint();
> 		getFigure().getParent().setConstraint(getFigure(), new AbstractLocator() {
> 			protected Point getReferencePoint() {
> 				return getLabelLocation(((GraphicalEditPart) getParent()).getFigure()).translate(location.getX(), location.getY());
33c45
< 				return org.eclipse.draw2d.PositionConstants.SOUTH;
---
> 				return PositionConstants.SOUTH;
43c55
< 	protected org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart.Refresher boundsRefresher = new org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart.Refresher() {
---
> 	protected IExternallyUpdatableEditPart.ExternalRefresher boundsRefresher = new IExternallyUpdatableEditPart.ExternalRefresher() {
46a59,67
> 		public boolean isAffectingEvent(Notification msg) {
> 			if (NotationPackage.eINSTANCE.getLocation().getEStructuralFeatures().contains(msg.getFeature())) {
> 				return true;
> 			}
> 			if (NotationPackage.eINSTANCE.getNode_LayoutConstraint() == msg.getFeature()) {
> 				return UpdaterUtil.affects(msg, NotationPackage.eINSTANCE.getLocation());
> 			}
> 			return false;
> 		}
49,50c70,71
< 	public org.eclipse.draw2d.geometry.Point getReferencePoint() {
< 		return getLabelLocation(((org.eclipse.gef.GraphicalEditPart) getParent()).getFigure());
---
> 	public Point getReferencePoint() {
> 		return getLabelLocation(((GraphicalEditPart) getParent()).getFigure());
53,54c74,75
< 	protected org.eclipse.draw2d.geometry.Point getLabelLocation(org.eclipse.draw2d.IFigure parent) {
< 		org.eclipse.draw2d.geometry.Point result = parent.getBounds().getBottom();
---
> 	protected Point getLabelLocation(IFigure parent) {
> 		Point result = parent.getBounds().getBottom();
