31a32
> import org.eclipse.emf.common.notify.Adapter;
32a34
> import org.eclipse.emf.common.notify.Notifier;
41a44
> import org.eclipse.gmf.runtime.diagram.core.DiagramEditingDomainFactory;
64c67
< 	protected ElementInfo createElementInfo(Object element) throws org.eclipse.core.runtime.CoreException, CoreException {
---
> 	protected ElementInfo createElementInfo(Object element) throws CoreException {
93,95c96,98
< 	 * Sets up the given document as it would be provided for the given element.
< 	 * The content of the document is not changed. This default implementation
< 	 * is empty. Subclasses may reimplement.
---
> 	 * Sets up the given document as it would be provided for the given element. The
> 	 * content of the document is not changed. This default implementation is empty.
> 	 * Subclasses may reimplement.
97,100c100,101
< 	 * @param element
< 	 *            the blue-print element
< 	 * @param document
< 	 *            the document to set up
---
> 	 * @param element the blue-print element
> 	 * @param document the document to set up
135,136c136,140
< 	private org.eclipse.emf.transaction.TransactionalEditingDomain createEditingDomain() {
< 		org.eclipse.emf.transaction.TransactionalEditingDomain editingDomain = org.eclipse.gmf.runtime.diagram.core.DiagramEditingDomainFactory.getInstance().createEditingDomain();
---
> 	/**
> 	 * @generated
> 	 */
> 	private TransactionalEditingDomain createEditingDomain() {
> 		TransactionalEditingDomain editingDomain = DiagramEditingDomainFactory.getInstance().createEditingDomain();
138,142c142,144
< 		final org.eclipse.emf.transaction.NotificationFilter diagramResourceModifiedFilter = org.eclipse.emf.transaction.NotificationFilter.createNotifierFilter(editingDomain.getResourceSet()).and(
< 				org.eclipse.emf.transaction.NotificationFilter.createEventTypeFilter(org.eclipse.emf.common.notify.Notification.ADD)).and(
< 				org.eclipse.emf.transaction.NotificationFilter
< 						.createFeatureFilter(org.eclipse.emf.ecore.resource.ResourceSet.class, org.eclipse.emf.ecore.resource.ResourceSet.RESOURCE_SET__RESOURCES));
< 		editingDomain.getResourceSet().eAdapters().add(new org.eclipse.emf.common.notify.Adapter() {
---
> 		final NotificationFilter diagramResourceModifiedFilter = NotificationFilter.createNotifierFilter(editingDomain.getResourceSet())
> 				.and(NotificationFilter.createEventTypeFilter(Notification.ADD)).and(NotificationFilter.createFeatureFilter(ResourceSet.class, ResourceSet.RESOURCE_SET__RESOURCES));
> 		editingDomain.getResourceSet().eAdapters().add(new Adapter() {
144c146
< 			private org.eclipse.emf.common.notify.Notifier myTarger;
---
> 			private Notifier myTarger;
146c148
< 			public org.eclipse.emf.common.notify.Notifier getTarget() {
---
> 			public Notifier getTarget() {
154c156
< 			public void notifyChanged(org.eclipse.emf.common.notify.Notification notification) {
---
> 			public void notifyChanged(Notification notification) {
157,158c159,160
< 					if (value instanceof org.eclipse.emf.ecore.resource.Resource) {
< 						((org.eclipse.emf.ecore.resource.Resource) value).setTrackingModification(true);
---
> 					if (value instanceof Resource) {
> 						((Resource) value).setTrackingModification(true);
163c165
< 			public void setTarget(org.eclipse.emf.common.notify.Notifier newTarget) {
---
> 			public void setTarget(Notifier newTarget) {
194,195c196
< 						// options.put(org.eclipse.emf.ecore.xmi.XMLResource.OPTION_RECORD_UNKNOWN_FEATURE,
< 						// Boolean.TRUE);
---
> 						// options.put(org.eclipse.emf.ecore.xmi.XMLResource.OPTION_RECORD_UNKNOWN_FEATURE, Boolean.TRUE);
284c285
< 	protected void doValidateState(Object element, Object computationContext) throws org.eclipse.core.runtime.CoreException, CoreException {
---
> 	protected void doValidateState(Object element, Object computationContext) throws CoreException {
622c623
< 		private IDiagramDocument myDocument;
---
> 		private Collection myUnSynchronizedResources = new ArrayList();
627c628
< 		private Collection myUnSynchronizedResources = new ArrayList();
---
> 		private IDiagramDocument myDocument;
891c892
< 			if (myModifiedFilter.matches(notification)) {
---
> 			if (!notification.isTouch() && myModifiedFilter.matches(notification)) {
