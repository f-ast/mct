14d13
< import java.util.Collections;
21d19
< import org.eclipse.core.runtime.CoreException;
26a25
> import org.eclipse.emf.common.util.URI;
39a39
> import org.eclipse.osgi.util.NLS;
66c66
< 	public GMFGraphNewDiagramFileWizard(org.eclipse.emf.common.util.URI domainModelURI, EObject diagramRoot, TransactionalEditingDomain editingDomain) {
---
> 	public GMFGraphNewDiagramFileWizard(URI domainModelURI, EObject diagramRoot, TransactionalEditingDomain editingDomain) {
71,73c71,73
< 		myFileCreationPage = new WizardNewFileCreationPage("Initialize new diagram file", StructuredSelection.EMPTY);
< 		myFileCreationPage.setTitle("Diagram file");
< 		myFileCreationPage.setDescription("Create new diagram based on " + CanvasEditPart.MODEL_ID + " model content");
---
> 		myFileCreationPage = new WizardNewFileCreationPage(Messages.GMFGraphNewDiagramFileWizard_CreationPageName, StructuredSelection.EMPTY);
> 		myFileCreationPage.setTitle(Messages.GMFGraphNewDiagramFileWizard_CreationPageTitle);
> 		myFileCreationPage.setDescription(NLS.bind(Messages.GMFGraphNewDiagramFileWizard_CreationPageDescription, CanvasEditPart.MODEL_ID));
82c82
< 			throw new IllegalArgumentException("Unsupported URI: " + domainModelURI);
---
> 			throw new IllegalArgumentException("Unsupported URI: " + domainModelURI); //$NON-NLS-1$
87,89c87,89
< 		diagramRootElementSelectionPage = new DiagramRootElementSelectionPage("Select diagram root element");
< 		diagramRootElementSelectionPage.setTitle("Diagram root element");
< 		diagramRootElementSelectionPage.setDescription("Select semantic model element to be depicted on diagram");
---
> 		diagramRootElementSelectionPage = new DiagramRootElementSelectionPage(Messages.GMFGraphNewDiagramFileWizard_RootSelectionPageName);
> 		diagramRootElementSelectionPage.setTitle(Messages.GMFGraphNewDiagramFileWizard_RootSelectionPageTitle);
> 		diagramRootElementSelectionPage.setDescription(Messages.GMFGraphNewDiagramFileWizard_RootSelectionPageDescription);
109,113c109
< 		try {
< 			diagramFile.setCharset("UTF-8", new NullProgressMonitor()); //$NON-NLS-1$
< 		} catch (CoreException e) {
< 			GMFGraphDiagramEditorPlugin.getInstance().logError("Unable to set charset for diagram file", e); //$NON-NLS-1$
< 		}
---
> 		GMFGraphDiagramEditorUtil.setCharset(diagramFile);
115c111
< 		org.eclipse.emf.common.util.URI diagramModelURI = org.eclipse.emf.common.util.URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);
---
> 		URI diagramModelURI = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);
118c114
< 		AbstractTransactionalCommand command = new AbstractTransactionalCommand(myEditingDomain, "Initializing diagram contents", affectedFiles) { //$NON-NLS-1$
---
> 		AbstractTransactionalCommand command = new AbstractTransactionalCommand(myEditingDomain, Messages.GMFGraphNewDiagramFileWizard_InitDiagramCommand, affectedFiles) {
123c119
< 					return CommandResult.newErrorCommandResult("Incorrect model object stored as a root resource object"); //$NON-NLS-1$
---
> 					return CommandResult.newErrorCommandResult(Messages.GMFGraphNewDiagramFileWizard_IncorrectRootError);
132c128
< 			diagramResource.save(Collections.EMPTY_MAP);
---
> 			diagramResource.save(GMFGraphDiagramEditorUtil.getSaveOptions());
160c156
< 			return "Select diagram root element:";
---
> 			return Messages.GMFGraphNewDiagramFileWizard_RootSelectionPageSelectionTitle;
168c164
< 				setErrorMessage("Diagram root element is not selected");
---
> 				setErrorMessage(Messages.GMFGraphNewDiagramFileWizard_RootSelectionPageNoSelectionMessage);
173c169
< 			setErrorMessage(result ? null : "Invalid diagram root element is selected");
---
> 			setErrorMessage(result ? null : Messages.GMFGraphNewDiagramFileWizard_RootSelectionPageInvalidSelectionMessage);
