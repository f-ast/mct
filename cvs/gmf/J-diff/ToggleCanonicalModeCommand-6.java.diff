2c2
<  * Copyright (c) 2004 IBM Corporation and others.
---
>  * Copyright (c) 2004, 2007 IBM Corporation and others.
30a31
> import org.eclipse.gmf.runtime.diagram.ui.editparts.GroupEditPart;
142,143c143,153
< 	protected static CanonicalEditPolicy getCanonicalEditPolicy( EditPart editPart ) {
< 		return (CanonicalEditPolicy)editPart.getEditPolicy(EditPolicyRoles.CANONICAL_ROLE);
---
> 	protected static CanonicalEditPolicy getCanonicalEditPolicy(
>             EditPart editPart) {
> 
>         // If the editpart is a group, then we want to get the first parent
>         // that isn't a group and get the canonical editpolicy there.
>         while (editPart instanceof GroupEditPart) {
>             editPart = editPart.getParent();
>         }
> 
>         return (CanonicalEditPolicy) editPart
>             .getEditPolicy(EditPolicyRoles.CANONICAL_ROLE);
