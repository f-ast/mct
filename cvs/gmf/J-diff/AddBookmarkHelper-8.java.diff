22a23,24
> import org.eclipse.emf.ecore.xmi.XMLResource;
> import org.eclipse.emf.transaction.util.TransactionUtil;
32d33
< import org.eclipse.gmf.runtime.diagram.ui.internal.util.DiagramMEditingDomainGetter;
35,36c36
< import org.eclipse.gmf.runtime.emf.core.edit.MRunnable;
< import org.eclipse.gmf.runtime.emf.core.util.EObjectUtil;
---
> import org.eclipse.gmf.runtime.emf.core.util.EMFCoreUtil;
70,71c70,73
< 			DiagramMEditingDomainGetter.getMEditingDomain(editorPart).runAsRead( new MRunnable() {
< 				public Object run() {
---
> 			TransactionUtil.getEditingDomain(editorPart.getDiagram())
> 				.runExclusive(new Runnable() {
> 
> 					public void run() {
92c94
< 							elementName = EObjectUtil.getQName(semanticElement,true);
---
> 							elementName = EMFCoreUtil.getQualifiedName(semanticElement,true);
105c107,109
< 							attribMap.put(IBookmark.ELEMENT_ID, EObjectUtil.getID(view));
---
> 							attribMap.put(IBookmark.ELEMENT_ID,
> 									((XMLResource) view.eResource())
> 										.getID(view));
120d123
< 					return null;
