26a27
> import org.eclipse.draw2d.geometry.Geometry;
28a30
> import org.eclipse.draw2d.geometry.PrecisionRectangle;
56a59
>         PointList bends = super.calculateBendPoints(conn);
58c61
<         		|| super.calculateBendPoints(conn).size() > 2) {
---
>         		|| bends.size() > 2) {
60c63
<             return super.calculateBendPoints(conn);
---
>             return bends;
67c70
<         	return super.calculateBendPoints(conn);
---
>         	return bends;
81a85,88
>         if (bends.size() == 2 && !lineIntersectRectangle(bends.getFirstPoint(), bends.getLastPoint(), sourceParentRect)
>         		&& !lineIntersectRectangle(bends.getFirstPoint(), bends.getLastPoint(), targetParentRect)) {
>         	return bends;
>         }
99c106
<             return super.calculateBendPoints(conn);
---
>             return bends;
376c383
<         Rectangle rect = parent.getBounds().getCopy();
---
>         Rectangle rect = new PrecisionRectangle(parent.getBounds());
390a398,404
>     
>     private boolean lineIntersectRectangle(Point start, Point end, Rectangle rect) {
>     	return Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x, rect.y, rect.x + rect.width, rect.y)
>     		|| Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x + rect.width, rect.y, rect.x + rect.width, rect.y + rect.height)
>     		|| Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x + rect.width, rect.y + rect.height, rect.x, rect.y + rect.height)
>     		|| Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x, rect.y + rect.height, rect.x, rect.y);
>     }
