2c2
<  * Copyright (c) 2006 Borland Software Corporation and others.
---
>  * Copyright (c) 2006, 2007 Borland Software Corporation and others.
51d50
< import org.eclipse.ui.model.WorkbenchContentProvider;
52a52,56
> import org.eclipse.emf.ecore.util.FeatureMap;
> 
> import org.eclipse.emf.edit.provider.IWrapperItemProvider;
> 
> import org.eclipse.ui.model.WorkbenchContentProvider;
174c178
< 					Resource modelResource = resourceSet.getResource(URI.createPlatformResourceURI(resourcePath.toString()), true);
---
> 					Resource modelResource = resourceSet.getResource(URI.createPlatformResourceURI(resourcePath.toString(), true), true);
243a248,250
> 		/**
> 		 * @generated
> 		 */
245a253,255
> 		/**
> 		 * @generated
> 		 */
329,330c339,348
< 				if (selection.size() == 1 && selection.getFirstElement() instanceof EObject) {
< 					mySelectedModelElement = (EObject) selection.getFirstElement();
---
> 				if (selection.size() == 1) {
> 					Object selectedElement = selection.getFirstElement();
> 					if (selectedElement instanceof IWrapperItemProvider) {
> 						selectedElement = ((IWrapperItemProvider) selectedElement).getValue();
> 					}
> 					if (selectedElement instanceof FeatureMap.Entry) {
> 						selectedElement = ((FeatureMap.Entry) selectedElement).getValue();
> 					}
> 					if (selectedElement instanceof EObject) {
> 						mySelectedModelElement = (EObject) selectedElement;
335a354
> 			}
