8a9
> import org.eclipse.emf.codegen.ecore.genmodel.GenPackage;
266c267,284
< 			value = ((GenDiagramImpl) getEditorGen().getDiagram()).getModelIconPath();
---
> 			if (getEditorGen().getDiagram() != null) {
> 				return getEditorGen().getDiagram().getCreationWizardIconPath();
> 			} else {
> 				return createDefaultIconPath();
> 			}
> 		}
> 		return value;
> 	}
> 
> 	public String getIconPathX() {
> 		String value = getIconPath();
> 		if (GenDiagramImpl.REUSE_ICON_VALUE.equalsIgnoreCase(value)) {
> 			if (getEditorGen().getDiagram() != null && getEditorGen().getDiagram().getDomainDiagramElement() != null) {
> 				GenPackage domainMetaModel = getEditorGen().getDiagram().getDomainDiagramElement().getGenPackage();
> 				return "../" + getEditorGen().getDomainGenModel().getEditorPluginID() + "/icons/full/obj16/" + domainMetaModel.getPrefix() + "ModelFile.gif";
> 			} else {
> 				return createDefaultIconPath();
> 			}
270a289,293
> 	private static String createDefaultIconPath() {
> 		// use same default value as in the genDiagram
> 		return new GenDiagramImpl().getCreationWizardIconPath();
> 	}
> 
