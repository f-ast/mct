20d19
< import java.util.ArrayList;
34d32
< 		final ArrayList<ParserException.ErrorLocationInfo> errors = new ArrayList<ParserException.ErrorLocationInfo>();
37,44c35
< 			scanner = new XpandLexer(buffer, qualifiedTemplateName) {
<         		// FIXME move to XpandLexer.g template
<             	@Override
<             	public void reportError(int left_loc, int right_loc) {
<                     errors.add(XtendResourceParser.createError(this, left_loc, right_loc));
<             		super.reportError(left_loc, right_loc);
<             	}
< 			};
---
> 			scanner = new XpandLexer(buffer, qualifiedTemplateName);
50c41,42
<         	if (errors.isEmpty()) {
---
> 			ParserException.ErrorLocationInfo[] errors = scanner.getErrors();
>         	if (errors.length == 0) {
63c55,57
< 		return null;
---
> 		ParserException.ErrorLocationInfo[] errors = scanner.getErrors();
> 		assert errors.length > 0 : "otherwise, no reason not to get template";
> 		throw new ParserException(errors);
