98d97
< import org.eclipse.gmf.runtime.diagram.ui.internal.pagesetup.DefaultValues;
1204,1205c1203,1204
<         // Set defaults for Page Setup Dialog
<         // PSDialog.initDefaultPreferences(store);
---
>         // Initialize printing defaults from the workspace preferences 
>         IPreferenceStore workspacePreferences = (IPreferenceStore)preferencesHint.getPreferenceStore();
1207,1242d1205
<         // PSDefault.initDefaultPSPreferencePagePreferences(globalPreferenceStore);
< 
<         // String pageType = PageInfoHelper.getPrinterPageType();
<         // String pageSize = PageInfoHelper.getLocaleSpecificPageType();
<         // Point2D.Double point = (Point2D.Double)
<         // nnn.getPaperSizesInInchesMap().get(pageSize);
< 
<         // double[] marginSizes = nnn.getDefaultMarginSizes();
< 
<         // store.setValue(WorkspaceViewerProperties.USE_WORKSPACE_PRINT_SETTINGS,
<         // true);
<         // store.setValue(WorkspaceViewerProperties.USE_DIAGRAM_PRINT_SETTINGS,
<         // false);
< 
<         // store.setValue(WorkspaceViewerProperties.USE_INCHES, true);
<         // store.setValue(WorkspaceViewerProperties.USE_MILLIMETRES, false);
< 
<         // store.setValue(WorkspaceViewerProperties.PAGE_ORIENTATION_LANDSCAPE,
<         // false);
<         // store.setValue(WorkspaceViewerProperties.PAGE_ORIENTATION_PORTRAIT,
<         // true);
< 
<         // store.setValue(WorkspaceViewerProperties.PAGE_TYPE, pageSize);
< 
<         // store.setValue(WorkspaceViewerProperties.PAGE_WIDTH, point.x);
<         // store.setValue(WorkspaceViewerProperties.PAGE_HEIGHT, point.y);
< 
<         // store.setValue(WorkspaceViewerProperties.MARGIN_LEFT,
<         // marginSizes[0]);
<         // store.setValue(WorkspaceViewerProperties.MARGIN_TOP, marginSizes[1]);
<         // store.setValue(WorkspaceViewerProperties.MARGIN_RIGHT,
<         // marginSizes[2]);
<         // store.setValue(WorkspaceViewerProperties.MARGIN_BOTTOM,
<         // marginSizes[3]);
< 
<         // Initialize printing defaults
1244c1207,1209
<             DefaultValues.DEFAULT_USE_WORKSPACE_SETTINGS);
---
> 						workspacePreferences
> 								.getBoolean(WorkspaceViewerProperties.PREF_USE_WORKSPACE_SETTINGS));
> 
1246c1211,1212
<             DefaultValues.DEFAULT_USE_DIAGRAM_SETTINGS);
---
> 						workspacePreferences
> 								.getBoolean(WorkspaceViewerProperties.PREF_USE_WORKSPACE_SETTINGS));
1249c1215,1217
<             DefaultValues.DEFAULT_INCHES);
---
> 				workspacePreferences
> 						.getBoolean(WorkspaceViewerProperties.PREF_USE_INCHES));
> 
1251c1219,1220
<             DefaultValues.DEFAULT_MILLIM);
---
> 				workspacePreferences
> 						.getBoolean(WorkspaceViewerProperties.PREF_USE_MILLIM));
1254c1223,1225
<             DefaultValues.DEFAULT_PORTRAIT);
---
> 						workspacePreferences
> 								.getBoolean(WorkspaceViewerProperties.PREF_USE_PORTRAIT));
> 		
1256c1227,1236
<             DefaultValues.DEFAULT_LANDSCAPE);
---
> 						workspacePreferences
> 								.getBoolean(WorkspaceViewerProperties.PREF_USE_LANDSCAPE));
> 
> 		store.setValue(WorkspaceViewerProperties.PREF_PAGE_SIZE,
> 				workspacePreferences
> 						.getString(WorkspaceViewerProperties.PREF_PAGE_SIZE));
> 
> 		store.setValue(WorkspaceViewerProperties.PREF_PAGE_WIDTH,
> 				workspacePreferences
> 						.getDouble(WorkspaceViewerProperties.PREF_PAGE_WIDTH));
1258,1261d1237
<         store.setValue(WorkspaceViewerProperties.PREF_PAGE_SIZE, DefaultValues
<             .getLocaleSpecificPageType().getName());
<         store.setValue(WorkspaceViewerProperties.PREF_PAGE_WIDTH, DefaultValues
<             .getLocaleSpecificPageType().getWidth());
1263c1239,1240
<             DefaultValues.getLocaleSpecificPageType().getHeight());
---
> 				workspacePreferences
> 						.getDouble(WorkspaceViewerProperties.PREF_PAGE_HEIGHT));
1266c1243,1245
<             DefaultValues.DEFAULT_MARGIN_TOP);
---
> 				workspacePreferences
> 						.getDouble(WorkspaceViewerProperties.PREF_MARGIN_TOP));
> 
1268c1247,1249
<             DefaultValues.DEFAULT_MARGIN_BOTTOM);
---
> 						workspacePreferences
> 								.getDouble(WorkspaceViewerProperties.PREF_MARGIN_BOTTOM));
> 
1270,1272c1251,1252
<             DefaultValues.DEFAULT_MARGIN_LEFT);
<         store.setValue(WorkspaceViewerProperties.PREF_MARGIN_RIGHT,
<             DefaultValues.DEFAULT_MARGIN_RIGHT);
---
> 				workspacePreferences
> 						.getDouble(WorkspaceViewerProperties.PREF_MARGIN_LEFT));
1273a1254,1256
> 		store.setValue(WorkspaceViewerProperties.PREF_MARGIN_RIGHT,
> 						workspacePreferences
> 								.getDouble(WorkspaceViewerProperties.PREF_MARGIN_RIGHT));
