108a109
> import org.eclipse.gmf.gmfgraph.DiagramElement;
111a113
> import org.eclipse.gmf.gmfgraph.VisualFacet;
317c319
< 		genNode.setViewmap(myViewmaps.create(nme.getDiagramNode()));
---
> 		genNode.setViewmap(myViewmaps.create((Node) nme.getDiagramNode()));
421c423
< 		} else if (childNodeMapping.getDiagramNode().getAffixedParentSide() != Direction.NONE_LITERAL){
---
> 		} else if (((Node) childNodeMapping.getDiagramNode()).getAffixedParentSide() != Direction.NONE_LITERAL){
423,424c425,426
< 			sideAffixedNode.setViewmap(myViewmaps.create(childNodeMapping.getDiagramNode()));
< 			String positionConstantName = getAffixedSideAsPositionConstantsName(childNodeMapping.getDiagramNode());
---
> 			sideAffixedNode.setViewmap(myViewmaps.create((Node) childNodeMapping.getDiagramNode()));
> 			String positionConstantName = getAffixedSideAsPositionConstantsName((Node) childNodeMapping.getDiagramNode());
430c432
< 			childNode.setViewmap(myViewmaps.create(childNodeMapping.getDiagramNode()));
---
> 			childNode.setViewmap(myViewmaps.create((Node) childNodeMapping.getDiagramNode()));
568c570
< 		if (Knowledge.isExternal(mapping.getDiagramLabel())) {
---
> 		if (mapping.getDiagramLabel().isExternal()) {
592,593c594,595
< 		if (mapping.getDiagramLabel().find(AlignmentFacet.class) != null) {
< 			AlignmentFacet af = (AlignmentFacet) mapping.getDiagramLabel().find(AlignmentFacet.class);
---
> 		if (findVF(mapping.getDiagramLabel(), AlignmentFacet.class) != null) {
> 			AlignmentFacet af = findVF(mapping.getDiagramLabel(), AlignmentFacet.class);
597c599
< 		LabelOffsetFacet lof = (LabelOffsetFacet) mapping.getDiagramLabel().find(LabelOffsetFacet.class);
---
> 		LabelOffsetFacet lof = findVF(mapping.getDiagramLabel(), LabelOffsetFacet.class);
608a611,618
> 	private static <T extends VisualFacet> T findVF(DiagramElement element, Class<T> facetClass) {
> 		for (VisualFacet vf : element.getFacets()) {
> 			if (facetClass.isInstance(vf)) {
> 				return facetClass.cast(vf);
> 			}
> 		}
> 		return null;
> 	}
