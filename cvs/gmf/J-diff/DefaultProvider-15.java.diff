2c2
<  * Copyright (c) 2002, 2004 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
619c619
<         if (source.data != connectEP.getSource()) {
---
>         if (source.data == connectEP.getTarget()) {
626a627,639
>         int totalEdgeDiffX = diffX ;
>         int totalEdgeDiffY = diffY ;
>         Node parent=  null;
>         parent = source.getParent();
>         if (parent==null)
>             parent = target.getParent();
>         if (parent!=null){
>             Rectangle targetExt = getNodeMetrics(parent);
>             totalEdgeDiffX += targetExt.x;
>             totalEdgeDiffY += targetExt.y;
>         }
>         
>         
629c642
<             allPoints.addPoint(routePoints.getPoint(i).x + diffX, routePoints
---
>             allPoints.addPoint(routePoints.getPoint(i).x + totalEdgeDiffX, routePoints
631c644
<                 + diffY);
---
>                 + totalEdgeDiffY);
