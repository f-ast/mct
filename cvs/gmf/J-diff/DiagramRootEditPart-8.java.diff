441,442c441,444
< 		if( verticalRuler != null ) {
< 			verticalRuler.setUnit( rulerUnits );
---
> 		if( getVerticalRuler() != null ) {
> 			getVerticalRuler().setUnit( rulerUnits );
> 		} else {
> 			setVerticalRuler(new DiagramRuler(false, rulerUnits, null));
444,445c446,449
< 		if( horizontalRuler != null ) {
< 			horizontalRuler.setUnit( rulerUnits );
---
> 		if( getHorizontalRuler() != null ) {
> 			getHorizontalRuler().setUnit( rulerUnits );
> 		} else {
> 			setHorizontalRuler(new DiagramRuler(true, rulerUnits, null));			
479a484,494
> 	/**
> 	 * Refreshes ruler units on the diagram
> 	 */
> 	protected void refreshRulerUnits() {
> 		IPreferenceStore preferenceStore =
> 			(IPreferenceStore) getPreferencesHint().getPreferenceStore();
> 		int rulerUnits = preferenceStore.getInt(
> 			IPreferenceConstants.PREF_RULER_UNITS);
> 		setRulers(rulerUnits);
> 	}
> 
505a521,522
> 		refreshRulerUnits();
> 		
590a608,626
> 	public DiagramRuler getHorizontalRuler() {
> 		return horizontalRuler;
> 	}
> 
> 	
> 	private void setHorizontalRuler(DiagramRuler horizontalRuler) {
> 		this.horizontalRuler = horizontalRuler;
> 	}
> 
> 	
> 	public DiagramRuler getVerticalRuler() {
> 		return verticalRuler;
> 	}
> 
> 	
> 	private void setVerticalRuler(DiagramRuler verticalRuler) {
> 		this.verticalRuler = verticalRuler;
> 	}
> 
