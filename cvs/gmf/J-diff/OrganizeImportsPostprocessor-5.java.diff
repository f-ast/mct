57c57,59
< 	 *        specifies if the existing imports should be kept or removed, see {@link ImportRewrite#create(CompilationUnit, boolean)} for details.
---
> 	 *            specifies if the existing imports should be kept or removed,
> 	 *            see {@link ImportRewrite#create(CompilationUnit, boolean)} for
> 	 *            details.
149,150c151,152
< 		Set<String> oldSingleImports = new HashSet<String>();
< 		Set<String> oldDemandImports = new HashSet<String>();
---
> 		HashSet<String> oldSingleImports = new HashSet<String>();
> 		HashSet<String> oldDemandImports = new HashSet<String>();
152c154,156
<         String[] customImports = substract(declaredImports, astRoot.imports());
---
> 		@SuppressWarnings("unchecked")
> 		final List<ImportDeclaration> importDeclarations = astRoot.imports();
> 		String[] customImports = substract(declaredImports, importDeclarations);
161,163c165,167
< 		Collection<Name> qualifiedTypeReferences = new ArrayList<Name>();
< 		Collection<SimpleName> simpleTypeReferences = new ArrayList<SimpleName>();
< 		Collection<String> importsAdded = new ArrayList<String>();
---
> 		ArrayList<Name> qualifiedTypeReferences = new ArrayList<Name>();
> 		ArrayList<SimpleName> simpleTypeReferences = new ArrayList<SimpleName>();
> 		ArrayList<String> importsAdded = new ArrayList<String>();
209,210c213,214
<      * Since we do organizeImports prior to merge, we must ensure
<      * imports added manually are known to OrganizeImportsProcessor
---
> 	 * Since we do organizeImports prior to merge, we must ensure imports added
> 	 * manually are known to OrganizeImportsProcessor
221c225
<     private String[] substract(String[] declaredImports, List list) {
---
> 	private String[] substract(String[] declaredImports, List<ImportDeclaration> list) {
225c229
<         List<String> result = new ArrayList<String>(Arrays.asList(declaredImports));
---
> 		ArrayList<String> result = new ArrayList<String>(Arrays.asList(declaredImports));
227,228c231
<             ImportDeclaration next = (ImportDeclaration) list.get(i);
<             result.remove(next.getName().getFullyQualifiedName());
---
> 			result.remove(list.get(i).getName().getFullyQualifiedName());
252c255,256
<         final List imports = astRoot.imports();
---
> 		@SuppressWarnings("unchecked")
> 		final List<ImportDeclaration> imports = astRoot.imports();
254c258
< 			ImportDeclaration curr = (ImportDeclaration) imports.get(i);
---
> 			ImportDeclaration curr = imports.get(i);
