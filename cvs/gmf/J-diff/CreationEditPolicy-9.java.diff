20a21,22
> import org.eclipse.core.commands.ExecutionException;
> import org.eclipse.core.runtime.IAdaptable;
22a25
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
50c53
< import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeTransactionalCommand;
161c164
< 		return cc.isEmpty() ? null : new EtoolsProxyCommand(cc.unwrap());
---
> 		return cc.isEmpty() ? null : new EtoolsProxyCommand(cc.reduce());
168c171
< 	 * @return A CompositeCommand that will reparent both the semantic and notation elements.
---
> 	 * @return A CompositeCommand2 that will reparent both the semantic and notation elements.
176a180,182
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost())
>             .getEditingDomain();
>         
183c189
< 						new MoveRequest(context, element)));
---
> 						new MoveRequest(editingDomain, context, element)));
201c207
< 		return new AddCommand(new EObjectAdapter(container),
---
> 		return new AddCommand(gep.getEditingDomain(), new EObjectAdapter(container),
222c228,232
< 		CompositeModelCommand cc = new CompositeModelCommand(DiagramUIMessages.AddCommand_Label);
---
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost())
>             .getEditingDomain();
>         CompositeTransactionalCommand cc = new CompositeTransactionalCommand(
>             editingDomain, DiagramUIMessages.AddCommand_Label);
>         
230c240
< 				new CreateCommand(
---
> 				new CreateCommand(editingDomain,
236c246
< 		return new EtoolsProxyCommand(cc.unwrap());
---
> 		return new EtoolsProxyCommand(cc.reduce());
354,355d363
< 				 * 
< 				 * @see org.eclipse.gmf.runtime.common.core.command.AbstractCommand#doExecute(org.eclipse.core.runtime.IProgressMonitor)
357,359c365,369
< 				protected CommandResult doExecute(
< 						IProgressMonitor progressMonitor) {
< 					CommandResult cmdResult = super.doExecute(progressMonitor);
---
> 				protected CommandResult doExecuteWithResult(
>                         IProgressMonitor progressMonitor, IAdaptable info)
>                     throws ExecutionException {
>                     
> 					CommandResult cmdResult = super.doExecuteWithResult(progressMonitor, info);
377c387
< 					return newOKCommandResult();
---
> 					return CommandResult.newOKCommandResult();
380c390,393
< 				protected CommandResult doUndo() {
---
> 				protected CommandResult doUndoWithResult(
>                         IProgressMonitor progressMonitor, IAdaptable info)
>                     throws ExecutionException {
>                     
384c397
< 					return super.doUndo();
---
> 					return super.doUndoWithResult(progressMonitor, info);
387c400,403
< 				protected CommandResult doRedo() {
---
> 				protected CommandResult doRedoWithResult(
>                         IProgressMonitor progressMonitor, IAdaptable info)
>                     throws ExecutionException {
>                     
391c407
< 					return super.doRedo();
---
> 					return super.doRedoWithResult(progressMonitor, info);
