2c2
<  * Copyright (c) 2002, 2004 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
19a20
> import org.eclipse.emf.ecore.EObject;
147,148c148,149
<         private EditPart editPart= null;
<         public ResourceListener(Resource resource, EditPart editPart){
---
>         private NoteEditPart editPart= null;
>         public ResourceListener(Resource resource, NoteEditPart editPart){
158c159,163
<             if (editPart ==null || resourceRef.get()==null)
---
>             if (editPart ==null || resourceRef.get()==null) {
>                 if (editPart != null && editPart.listener!=null) {
>                     getEditingDomain().removeResourceSetListener(editPart.listener);
>                     editPart.listener = null;
>                 }
159a165
>             }
162a169,172
>                 if (editPart.listener!=null) {
>                     getEditingDomain().removeResourceSetListener(editPart.listener);
>                     editPart.listener = null;
>                 }
206c216
<         if (listener!=null)
---
>         if (listener!=null) {
207a218,219
>             listener = null;
>         }
210a223,232
>     protected void handleNotificationEvent(Notification notification) {
>         Object feature = notification.getFeature();
>         if (feature == NotationPackage.eINSTANCE.getView_Element() && notification.getEventType() == Notification.RESOLVE
>                  && ((EObject)notification.getNotifier())== getNotationView() && listener != null) {
>             // skipping the resolve event whenever the editpart is already resolved.
>             return;
>         }
>         
>         super.handleNotificationEvent(notification);
>     }
