2c2
<  * Copyright (c) 2002, 2007 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2008 IBM Corporation and others.
16a17
> import org.eclipse.core.runtime.IProgressMonitor;
29a31,32
> import org.eclipse.jface.dialogs.MessageDialog;
> import org.eclipse.swt.widgets.Display;
160a164,182
>     
>     /* (non-Javadoc)
>      * @see org.eclipse.gmf.runtime.diagram.ui.actions.DiagramAction#doRun(org.eclipse.core.runtime.IProgressMonitor)
>      */
>     protected void doRun(IProgressMonitor progressMonitor) {
>     	Command command = getCommand();
>     	//For performance improvement, sometimes, calculateEnable method
>     	//won't disable the action for all valid unexecutable cases. At
>     	//that time, we need this error check here to report delete 
>     	//error to the users.
>     	if (command == null || !command.canExecute()) {
>     		MessageDialog
> 			.openError(
> 				Display.getCurrent().getActiveShell(),
> 				DiagramUIMessages.DeleteFromModelAction_ErrorDialog_Title,
> 				DiagramUIMessages.DeleteFromModelAction_ErrorDialog_Text);
>     	}
> 		execute(getCommand(), progressMonitor);
> 	}
