2c2
<  * Copyright (c) 2002, 2004 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
22a23
> import org.eclipse.draw2d.Animation;
41d41
< import org.eclipse.gmf.runtime.draw2d.ui.internal.figures.AnimationFigureHelper;
278,279d277
< 		super.doRun(progressMonitor);
< 		
283a282,286
> 		if (animatedLayout)
> 			Animation.markBegin();
> 			
> 		super.doRun(progressMonitor);
> 		
284a288,291
> 			int durationInc = 800;
> 			int factor = 10;
> 			int size = 0;
> 			
289c296
< 					AnimationFigureHelper.getInstance().animate(element.getFigure());
---
> 					size += element.getFigure().getChildren().size();
294c301
< 				AnimationFigureHelper.getInstance().animate(container.getFigure());
---
> 				size += container.getFigure().getChildren().size();
295a303,307
> 			
> 			int totalDuration = Math.min(durationInc * factor / 2, Math.max(durationInc, (size / 
> 					factor) * durationInc));
> 			
> 			Animation.run(totalDuration);
