51d50
< import org.eclipse.gmf.runtime.emf.core.internal.util.EMFCoreConstants;
170c169
< 			diagram = copyDiagramResource(diagram);
---
> 			diagram = copyDiagramResource(diagram, file);
178c177
< 	private Diagram copyDiagramResource(Diagram sourceDiagram) {
---
> 	private Diagram copyDiagramResource(Diagram sourceDiagram, IFile file) {
186,188c185,187
< 		final Resource newResource = editingDomain
<             .createResource(
<                 EcoreUtil.generateUUID() + EMFCoreConstants.INVALID_PATH);
---
> 		String fileName = file.getFullPath().toString();
> 		final Resource newResource = editingDomain.getResourceSet()
>             .createResource(URI.createPlatformResourceURI(fileName, true));
