1073c1073,1077
< 		PolylineConnectionEx poly = ((PolylineConnectionEx) getConnectionFigure());
---
>         Connection connection = getConnectionFigure();
>         if (!(connection instanceof PolylineConnectionEx))
>             return;
>         
> 		PolylineConnectionEx poly = (PolylineConnectionEx) connection;
1095c1099,1103
< 		PolylineConnectionEx poly = ((PolylineConnectionEx) getConnectionFigure());
---
>         Connection connection = getConnectionFigure();
>         if (!(connection instanceof PolylineConnectionEx))
>             return;
>         
> 		PolylineConnectionEx poly = (PolylineConnectionEx) connection;
1129c1137,1141
< 		PolylineConnectionEx poly = ((PolylineConnectionEx) getConnectionFigure());
---
>         Connection connection = getConnectionFigure();
>         if (!(connection instanceof PolylineConnectionEx))
>             return;
>         
> 		PolylineConnectionEx poly = (PolylineConnectionEx) connection;
