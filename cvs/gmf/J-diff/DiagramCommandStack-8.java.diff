526,527c526,531
<             for (Iterator i = cc.iterator(); i.hasNext();)
<                 l.addAll(getReturnValues((ICommand) i.next()));
---
>             for (Iterator i = cc.iterator(); i.hasNext();) {
>             	IUndoableOperation child = (IUndoableOperation) i.next();
>             	if (child instanceof ICommand) {
>             		l.addAll(getReturnValues((ICommand) child));
>             	}
>             }
