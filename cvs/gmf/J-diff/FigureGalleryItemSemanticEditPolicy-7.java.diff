12a13,14
> import java.util.Iterator;
> 
14d15
< import org.eclipse.emf.ecore.EObject;
16a18,24
> import org.eclipse.gmf.graphdef.editor.edit.parts.Ellipse3EditPart;
> import org.eclipse.gmf.graphdef.editor.edit.parts.FigureDescriptorEditPart;
> import org.eclipse.gmf.graphdef.editor.edit.parts.FigureGalleryFiguresEditPart;
> import org.eclipse.gmf.graphdef.editor.edit.parts.Polyline3EditPart;
> import org.eclipse.gmf.graphdef.editor.edit.parts.Rectangle3EditPart;
> import org.eclipse.gmf.graphdef.editor.edit.parts.RoundedRectangle3EditPart;
> import org.eclipse.gmf.graphdef.editor.part.GMFGraphVisualIDRegistry;
18a27
> import org.eclipse.gmf.runtime.notation.Node;
30,31c39,48
< 		CompoundCommand cc = getDestroyEdgesCommand(req.isConfirmationRequired());
< 		cc.add(getMSLWrapper(new DestroyElementCommand(req) {
---
> 		CompoundCommand cc = getDestroyEdgesCommand();
> 		addDestroyChildNodesCommand(cc);
> 		addDestroyShortcutsCommand(cc);
> 		View view = (View) getHost().getModel();
> 		if (view.getEAnnotation("Shortcut") != null) { //$NON-NLS-1$
> 			req.setElementToDestroy(view);
> 		}
> 		cc.add(getGEFWrapper(new DestroyElementCommand(req)));
> 		return cc.unwrap();
> 	}
33c50,53
< 			protected EObject getElementToDestroy() {
---
> 	/**
> 	 * @generated
> 	 */
> 	protected void addDestroyChildNodesCommand(CompoundCommand cmd) {
37c57
< 					return view;
---
> 			return;
39c59,80
< 				return super.getElementToDestroy();
---
> 		for (Iterator it = view.getChildren().iterator(); it.hasNext();) {
> 			Node node = (Node) it.next();
> 			switch (GMFGraphVisualIDRegistry.getVisualID(node)) {
> 			case FigureGalleryFiguresEditPart.VISUAL_ID:
> 				for (Iterator cit = node.getChildren().iterator(); cit.hasNext();) {
> 					Node cnode = (Node) cit.next();
> 					switch (GMFGraphVisualIDRegistry.getVisualID(cnode)) {
> 					case FigureDescriptorEditPart.VISUAL_ID:
> 						cmd.add(getDestroyElementCommand(cnode));
> 						break;
> 					case Rectangle3EditPart.VISUAL_ID:
> 						cmd.add(getDestroyElementCommand(cnode));
> 						break;
> 					case Ellipse3EditPart.VISUAL_ID:
> 						cmd.add(getDestroyElementCommand(cnode));
> 						break;
> 					case RoundedRectangle3EditPart.VISUAL_ID:
> 						cmd.add(getDestroyElementCommand(cnode));
> 						break;
> 					case Polyline3EditPart.VISUAL_ID:
> 						cmd.add(getDestroyElementCommand(cnode));
> 						break;
41,43d81
< 
< 		}));
< 		return cc.unwrap();
44a83,87
> 				break;
> 			}
> 		}
> 	}
> 
