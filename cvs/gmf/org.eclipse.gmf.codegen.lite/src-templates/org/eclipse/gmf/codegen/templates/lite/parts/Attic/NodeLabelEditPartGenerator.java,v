head	1.24;
access;
symbols
	v20080910-1520:1.24
	v20070403-1500:1.23
	v20070330-1300:1.23
	v20060330-1300:1.23
	v20070322-1100:1.23
	v20060316-0600:1.23
	v20070307-0700:1.22
	v20070228-2000:1.21
	v20070221-1500:1.21
	v20070208-1800:1.21
	v20070103-0300:1.19
	M4_20:1.19
	v20061222-1800:1.19
	v20061214-0000:1.18
	v20061120-1300:1.18
	M3_20:1.18
	v20061117-0800:1.18
	v20061013-1330:1.11
	v20061005-1700:1.6
	M1_20:1.10
	v20060904-1500:1.10
	v20060824-1600:1.6
	v20060713-1700:1.6
	R1_0_maintenance:1.6.0.2
	R1_0:1.6
	v20060627-1200:1.6
	v20060626-1420:1.6
	v20060620-0400:1.5
	v20060616-1400:1.5
	v20060616-1200:1.5
	v20060609-1400:1.4
	v20060531-1730:1.4
	v20060530-1930:1.4
	v20060526-1200:1.4
	v20060519-1300:1.3
	v20060519-0800:1.3
	v20060512-1000:1.2
	I20060512-1000:1.2
	I20060505-1400:1.2
	I20060428-1300:1.2
	I20060424-0500:1.1
	I20060424-0300:1.1
	M6_10:1.1;
locks; strict;
comment	@# @;
expand	@k@;


1.24
date	2007.04.04.11.04.49;	author bblajer;	state dead;
branches;
next	1.23;
commitid	18c54613864d4567;

1.23
date	2007.03.15.16.43.30;	author bblajer;	state Exp;
branches;
next	1.22;
commitid	617845f977b04567;

1.22
date	2007.03.03.23.45.11;	author bblajer;	state Exp;
branches;
next	1.21;
commitid	2e3145ea08814567;

1.21
date	2007.02.08.16.44.13;	author bblajer;	state Exp;
branches;
next	1.20;
commitid	af945cb535c4567;

1.20
date	2007.01.19.17.15.18;	author bblajer;	state Exp;
branches;
next	1.19;
commitid	781645b0fca44567;

1.19
date	2006.12.19.19.11.42;	author bblajer;	state Exp;
branches;
next	1.18;
commitid	733e4588396c4567;

1.18
date	2006.11.09.18.15.42;	author bblajer;	state Exp;
branches;
next	1.17;

1.17
date	2006.10.26.14.34.57;	author bblajer;	state Exp;
branches;
next	1.16;

1.16
date	2006.10.19.11.00.31;	author bblajer;	state Exp;
branches;
next	1.15;

1.15
date	2006.10.18.16.29.03;	author bblajer;	state Exp;
branches;
next	1.14;

1.14
date	2006.10.18.14.35.15;	author dstadnik;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.18.09.56.59;	author dstadnik;	state Exp;
branches;
next	1.12;

1.12
date	2006.10.17.13.08.27;	author dstadnik;	state Exp;
branches;
next	1.11;

1.11
date	2006.09.11.15.45.01;	author atikhomirov;	state Exp;
branches;
next	1.10;

1.10
date	2006.09.01.16.14.08;	author atikhomirov;	state Exp;
branches;
next	1.9;

1.9
date	2006.08.04.17.05.48;	author atikhomirov;	state Exp;
branches;
next	1.8;

1.8
date	2006.08.02.10.43.51;	author atikhomirov;	state Exp;
branches;
next	1.7;

1.7
date	2006.07.03.18.10.52;	author ashatalin;	state Exp;
branches;
next	1.6;

1.6
date	2006.06.21.15.22.44;	author ashatalin;	state Exp;
branches;
next	1.5;

1.5
date	2006.06.16.07.52.07;	author ashatalin;	state Exp;
branches;
next	1.4;

1.4
date	2006.05.22.18.22.10;	author atikhomirov;	state Exp;
branches;
next	1.3;

1.3
date	2006.05.15.11.19.18;	author atikhomirov;	state Exp;
branches;
next	1.2;

1.2
date	2006.04.26.11.58.49;	author atikhomirov;	state Exp;
branches;
next	1.1;

1.1
date	2006.04.13.21.20.15;	author atikhomirov;	state Exp;
branches;
next	;


desc
@@


1.24
log
@[176696]: InitDiagramContents: do not create notational edges to and from child label nodes;
Rewrite editpart templates in xpt;
Unify what is refreshed for each edit part type;
Preparation for side-affixed elements.
@
text
@package org.eclipse.gmf.codegen.templates.lite.parts;

import java.util.*;
import org.eclipse.gmf.codegen.gmfgen.*;
import org.eclipse.gmf.common.codegen.*;
import org.eclipse.emf.codegen.ecore.genmodel.*;
import org.eclipse.emf.ecore.*;

public class NodeLabelEditPartGenerator
{
  protected static String nl;
  public static synchronized NodeLabelEditPartGenerator create(String lineSeparator)
  {
    nl = lineSeparator;
    NodeLabelEditPartGenerator result = new NodeLabelEditPartGenerator();
    nl = null;
    return result;
  }

  protected final String NL = nl == null ? (System.getProperties().getProperty("line.separator")) : nl;
  protected final String TEXT_1 = "";
  protected final String TEXT_2 = NL + "/*" + NL + " * ";
  protected final String TEXT_3 = NL + " */";
  protected final String TEXT_4 = NL;
  protected final String TEXT_5 = NL;
  protected final String TEXT_6 = "((";
  protected final String TEXT_7 = ")";
  protected final String TEXT_8 = "((";
  protected final String TEXT_9 = ")";
  protected final String TEXT_10 = ")";
  protected final String TEXT_11 = ".eGet(";
  protected final String TEXT_12 = ".eINSTANCE.get";
  protected final String TEXT_13 = "())";
  protected final String TEXT_14 = ")";
  protected final String TEXT_15 = "((";
  protected final String TEXT_16 = ")";
  protected final String TEXT_17 = ")";
  protected final String TEXT_18 = ".";
  protected final String TEXT_19 = "()";
  protected final String TEXT_20 = NL;
  protected final String TEXT_21 = NL;
  protected final String TEXT_22 = NL + NL + "/**" + NL + " * @@generated" + NL + " */";
  protected final String TEXT_23 = NL + "public class ";
  protected final String TEXT_24 = " extends ";
  protected final String TEXT_25 = " implements ";
  protected final String TEXT_26 = " {";
  protected final String TEXT_27 = NL;
  protected final String TEXT_28 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final int VISUAL_ID = ";
  protected final String TEXT_29 = ";";
  protected final String TEXT_30 = NL;
  protected final String TEXT_31 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_32 = " manager;" + NL;
  protected final String TEXT_33 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate String defaultText;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final ";
  protected final String TEXT_34 = " LABEL_DISPLAYER = createLabelTextDisplayer();" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_35 = "(View view) {";
  protected final String TEXT_36 = NL + "\t\tsuper(view);";
  protected final String TEXT_37 = NL + "\t\tsetModel(view);";
  protected final String TEXT_38 = NL + "\t}" + NL;
  protected final String TEXT_39 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic boolean isSelectable() {" + NL + "\t\treturn false;" + NL + "\t}";
  protected final String TEXT_40 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_41 = " getDiagramNode() {" + NL + "\t\treturn (";
  protected final String TEXT_42 = ") getModel();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void createEditPolicies() {";
  protected final String TEXT_43 = NL;
  protected final String TEXT_44 = "\t\tinstallEditPolicy(";
  protected final String TEXT_45 = ".DIRECT_EDIT_ROLE," + NL + "\t\t\t\tnew ";
  protected final String TEXT_46 = "());";
  protected final String TEXT_47 = NL;
  protected final String TEXT_48 = NL + "\t\tinstallEditPolicy(\"";
  protected final String TEXT_49 = "\", new ";
  protected final String TEXT_50 = "()); //$NON-NLS-1$";
  protected final String TEXT_51 = NL;
  protected final String TEXT_52 = NL + "\t\tinstallEditPolicy(";
  protected final String TEXT_53 = ".OPEN_ROLE";
  protected final String TEXT_54 = " + \"";
  protected final String TEXT_55 = "\" ";
  protected final String TEXT_56 = ", new ";
  protected final String TEXT_57 = "());";
  protected final String TEXT_58 = NL + "\t}" + NL;
  protected final String TEXT_59 = NL;
  protected final String TEXT_60 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_61 = " req) {";
  protected final String TEXT_62 = NL + "\t\tif (";
  protected final String TEXT_63 = ".REQ_DIRECT_EDIT.equals(req.getType()) && understandsRequest(req)) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t\treturn;" + NL + "\t\t}";
  protected final String TEXT_64 = NL;
  protected final String TEXT_65 = "if (";
  protected final String TEXT_66 = ".REQ_OPEN.equals(req.getType())) {" + NL + "\t";
  protected final String TEXT_67 = " command = getCommand(req);" + NL + "\tif (command != null && command.canExecute()) {" + NL + "\t\tgetViewer().getEditDomain().getCommandStack().execute(command);" + NL + "\t}" + NL + "\treturn;" + NL + "}" + NL + "\t\tsuper.performRequest(req);" + NL + "\t}";
  protected final String TEXT_68 = NL;
  protected final String TEXT_69 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_70 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_71 = "(this, ";
  protected final String TEXT_72 = ".class, new ";
  protected final String TEXT_73 = "(getViewer(), getLabel())) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelTextDisplayer().getEditText(";
  protected final String TEXT_74 = ".getElement()));" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tif (";
  protected final String TEXT_75 = ".isReadOnly(";
  protected final String TEXT_76 = ".getElement()) || ";
  protected final String TEXT_77 = ".isReadOnly(";
  protected final String TEXT_78 = ")) {" + NL + "\t\t\treturn;" + NL + "\t\t}" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_79 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_80 = NL;
  protected final String TEXT_81 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static ";
  protected final String TEXT_82 = " createLabelTextDisplayer() {";
  protected final String TEXT_83 = NL + "\t\treturn new ";
  protected final String TEXT_84 = "(\"";
  protected final String TEXT_85 = "\"";
  protected final String TEXT_86 = ", \"";
  protected final String TEXT_87 = "\"";
  protected final String TEXT_88 = ", " + NL + "\t\t\tnew ";
  protected final String TEXT_89 = "[] {";
  protected final String TEXT_90 = NL + "\t\t";
  protected final String TEXT_91 = ".eINSTANCE.get";
  protected final String TEXT_92 = "()";
  protected final String TEXT_93 = ",";
  protected final String TEXT_94 = "});";
  protected final String TEXT_95 = NL + "\t\t// TODO: implement this method" + NL + "\t\t// Ensure that you remove @@generated or mark it @@generated NOT" + NL + "\t\treturn null;";
  protected final String TEXT_96 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_97 = " getLabelTextDisplayer() {" + NL + "\t\treturn LABEL_DISPLAYER;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void setLabelText(String text) {" + NL + "\t\tgetLabel().setText(text);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_98 = " element = ";
  protected final String TEXT_99 = ".getElement();" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\tString result = getLabelTextDisplayer().getDisplayText(element);" + NL + "\t\tif (result == null || result.length() == 0) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn result;" + NL + "\t}";
  protected final String TEXT_100 = NL;
  protected final String TEXT_101 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_102 = NL + "\t\t";
  protected final String TEXT_103 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_104 = ") ";
  protected final String TEXT_105 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_106 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_107 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_108 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_109 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_110 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_111 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_112 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_113 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_114 = "\t" + NL + "\t}";
  protected final String TEXT_115 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_116 = " createdFont;";
  protected final String TEXT_117 = "\t";
  protected final String TEXT_118 = NL;
  protected final String TEXT_119 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_120 = " style = (";
  protected final String TEXT_121 = ")  ";
  protected final String TEXT_122 = ".getStyle(";
  protected final String TEXT_123 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_124 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_125 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_126 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_127 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_128 = " getLabelIcon() {";
  protected final String TEXT_129 = NL + "\t\t";
  protected final String TEXT_130 = " semanticElement = ";
  protected final String TEXT_131 = "(";
  protected final String TEXT_132 = ") ";
  protected final String TEXT_133 = "resolveSemanticElement();" + NL + "\t\tif (semanticElement != null) {" + NL + "\t\t\treturn ";
  protected final String TEXT_134 = ".getImage(semanticElement.eClass());" + NL + "\t\t}";
  protected final String TEXT_135 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_136 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_137 = ") ? (";
  protected final String TEXT_138 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_139 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_140 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_141 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_142 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_143 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_144 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_145 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_146 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_147 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_148 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_149 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_150 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_151 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_152 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_153 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_154 = NL + "\t\t\tupdatableParent.addExternalRefresher(getLabelRefresher());" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_155 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_156 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_157 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_158 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_159 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_160 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_161 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_162 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_163 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_164 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_165 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_166 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_167 = NL + "\t\t\tupdatableParent.removeExternalRefresher(getLabelRefresher());" + NL + "\t\t}" + NL + "\t}" + NL;
  protected final String TEXT_168 = NL;
  protected final String TEXT_169 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_170 = ".ExternalRefresher labelRefresher;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_171 = ".ExternalRefresher getLabelRefresher() {" + NL + "\t\tif (labelRefresher == null && getDiagramNode() != null) {" + NL + "\t\t\tlabelRefresher = new ";
  protected final String TEXT_172 = ".ExternalRefresherAdapter(this, getDiagramNode().getElement());" + NL + "\t\t}" + NL + "\t\treturn labelRefresher;" + NL + "\t}" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_173 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_174 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_175 = ".Refresher fontRefresher = new ";
  protected final String TEXT_176 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_177 = NL;
  protected final String TEXT_178 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_179 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_180 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_181 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_182 = " createLabel() {";
  protected final String TEXT_183 = NL + "\t\treturn new ";
  protected final String TEXT_184 = "();";
  protected final String TEXT_185 = NL + "\t\treturn ";
  protected final String TEXT_186 = ";";
  protected final String TEXT_187 = NL + "\t\treturn new ";
  protected final String TEXT_188 = "();";
  protected final String TEXT_189 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_190 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_191 = " label = createLabel();";
  protected final String TEXT_192 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_193 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_194 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_195 = NL + NL + "\t/**";
  protected final String TEXT_196 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_197 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_198 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_199 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_200 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_201 = "(";
  protected final String TEXT_202 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_203 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_204 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_205 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_206 = NL;
  protected final String TEXT_207 = NL;
  protected final String TEXT_208 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_209 = NL + "}";
  protected final String TEXT_210 = NL;

  public String generate(Object argument)
  {
    final StringBuffer stringBuffer = new StringBuffer();
    
final GenCommonBase genElement = (GenCommonBase) ((Object[]) argument)[0];
final GenNodeLabel genLabel = (GenNodeLabel) genElement;
final ImportAssistant importManager = (ImportAssistant) ((Object[]) argument)[1];
GenNode genHost = genLabel.getNode();
GenClass underlyingMetaClass = genHost.getDomainMetaClass();
GenDiagram genDiagram = genLabel.getDiagram();
LabelModelFacet labelModelFacet = genLabel.getModelFacet();
final boolean isReadOnly = genLabel.isReadOnly();

    stringBuffer.append(TEXT_1);
    
String copyrightText = genDiagram.getEditorGen().getCopyrightText();
if (copyrightText != null && copyrightText.trim().length() > 0) {

    stringBuffer.append(TEXT_2);
    stringBuffer.append(copyrightText.replaceAll("\n", "\n * "));
    stringBuffer.append(TEXT_3);
    }
    stringBuffer.append(TEXT_4);
    stringBuffer.append(TEXT_5);
    
class FeatureGetAccessorHelper {
	/**
	 * @@param containerName the name of the container
	 * @@param feature the feature whose value is in interest
	 * @@param containerMetaClass the <code>GenClass</code> of the container, or <code>null</code>, if the container is declared as an <code>EObject</code>.
	 * @@param needsCastToResultType whether the cast to the result type is required (this parameter is only used if the <code>EClass</code> this feature belongs to is an external interface). 
	 */
	public void appendFeatureValueGetter(String containerName, GenFeature feature, GenClass containerMetaClass, boolean needsCastToResultType) {
		if (feature.getGenClass().isExternalInterface()) {
			boolean needsCastToEObject = containerMetaClass != null && containerMetaClass.isExternalInterface();
			if (needsCastToResultType) {

    stringBuffer.append(TEXT_6);
    stringBuffer.append(importManager.getImportedName(feature.isListType() ? "java.util.Collection" : feature.getTypeGenClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_7);
    
			}
			if (needsCastToEObject) {

    stringBuffer.append(TEXT_8);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EObject"));
    stringBuffer.append(TEXT_9);
    
			}

    stringBuffer.append(containerName);
    
			if (needsCastToEObject) {

    stringBuffer.append(TEXT_10);
    
			}

    stringBuffer.append(TEXT_11);
    stringBuffer.append(importManager.getImportedName(feature.getGenPackage().getQualifiedPackageInterfaceName()));
    stringBuffer.append(TEXT_12);
    stringBuffer.append(feature.getFeatureAccessorName());
    stringBuffer.append(TEXT_13);
    
			if (needsCastToResultType) {

    stringBuffer.append(TEXT_14);
    
			}
		} else {
			boolean needsCastToFeatureGenType = containerMetaClass == null || containerMetaClass.isExternalInterface();
			if (needsCastToFeatureGenType) {

    stringBuffer.append(TEXT_15);
    stringBuffer.append(importManager.getImportedName(feature.getGenClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_16);
    
			}

    stringBuffer.append(containerName);
    
			if (needsCastToFeatureGenType) {

    stringBuffer.append(TEXT_17);
    
			}

    stringBuffer.append(TEXT_18);
    stringBuffer.append(feature.getGetAccessor());
    stringBuffer.append(TEXT_19);
    
		}
	}
}
final FeatureGetAccessorHelper myFeatureGetAccessorHelper = new FeatureGetAccessorHelper();

    stringBuffer.append(TEXT_20);
    importManager.emitPackageStatement(stringBuffer);
    stringBuffer.append(TEXT_21);
    
importManager.addImport("org.eclipse.gef.EditPart");
importManager.addImport("org.eclipse.gef.EditPolicy");
importManager.addImport("org.eclipse.gmf.runtime.notation.View");
importManager.markImportLocation(stringBuffer);

    stringBuffer.append(TEXT_22);
    
 	boolean isExternal;
 	String baseClass;
 	if (genLabel instanceof GenExternalNodeLabel) {
 		isExternal = true;
 		baseClass = genDiagram.getBaseExternalNodeLabelEditPartQualifiedClassName();
 	} else {
 		isExternal = false;
 		baseClass = "org.eclipse.gef.editparts.AbstractGraphicalEditPart";
 	}
 
    stringBuffer.append(TEXT_23);
    stringBuffer.append(genLabel.getEditPartClassName());
    stringBuffer.append(TEXT_24);
    stringBuffer.append(importManager.getImportedName(baseClass));
    stringBuffer.append(TEXT_25);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.labels.ILabelController"));
    stringBuffer.append(TEXT_26);
    {
GenCommonBase genCommonBase = genLabel;
    stringBuffer.append(TEXT_27);
    stringBuffer.append(TEXT_28);
    stringBuffer.append(genCommonBase.getVisualID());
    stringBuffer.append(TEXT_29);
    }
    stringBuffer.append(TEXT_30);
    
if (!isReadOnly) {

    stringBuffer.append(TEXT_31);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.DirectEditManager"));
    stringBuffer.append(TEXT_32);
    
}

    stringBuffer.append(TEXT_33);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.labels.ILabelTextDisplayer"));
    stringBuffer.append(TEXT_34);
    stringBuffer.append(genLabel.getEditPartClassName());
    stringBuffer.append(TEXT_35);
    
if (isExternal) {

    stringBuffer.append(TEXT_36);
    
} else {

    stringBuffer.append(TEXT_37);
    
}

    stringBuffer.append(TEXT_38);
    
if (!isExternal) {

    stringBuffer.append(TEXT_39);
    
}

    stringBuffer.append(TEXT_40);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.Node"));
    stringBuffer.append(TEXT_41);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.Node"));
    stringBuffer.append(TEXT_42);
    
	final String primaryView = "getUpdatableParent().getDiagramNode()";
	final String resolvedSemanticElement = "resolveSemanticElement()";
	if (!isReadOnly) {

    stringBuffer.append(TEXT_43);
    stringBuffer.append(TEXT_44);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.EditPolicy"));
    stringBuffer.append(TEXT_45);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.policies.LabelDirectEditPolicy"));
    stringBuffer.append(TEXT_46);
    
	}

    {
GenCommonBase genCommonBase = genLabel;
    stringBuffer.append(TEXT_47);
    
for (CustomBehaviour behaviour : genCommonBase.getBehaviour(CustomBehaviour.class)) {

    stringBuffer.append(TEXT_48);
    stringBuffer.append(behaviour.getKey());
    stringBuffer.append(TEXT_49);
    stringBuffer.append(importManager.getImportedName(behaviour.getEditPolicyQualifiedClassName()));
    stringBuffer.append(TEXT_50);
    }
    stringBuffer.append(TEXT_51);
    
{
	List<OpenDiagramBehaviour> behaviours = genCommonBase.getBehaviour(OpenDiagramBehaviour.class);
	for(int i = 0, iMax = behaviours.size(); i < iMax; i++) {
	/*doesn't make sense to install more than one policy for the same role*/ 
		OpenDiagramBehaviour next = behaviours.get(i);

    stringBuffer.append(TEXT_52);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.policies.EditPolicyRoles"));
    stringBuffer.append(TEXT_53);
    if (i > 0) {
    stringBuffer.append(TEXT_54);
    stringBuffer.append(i+1);
    stringBuffer.append(TEXT_55);
    }
    stringBuffer.append(TEXT_56);
    stringBuffer.append(importManager.getImportedName(genCommonBase.getBehaviour(OpenDiagramBehaviour.class).get(0).getEditPolicyQualifiedClassName()));
    stringBuffer.append(TEXT_57);
    
	}
}

    }
    stringBuffer.append(TEXT_58);
    stringBuffer.append(TEXT_59);
    stringBuffer.append(TEXT_60);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.Request"));
    stringBuffer.append(TEXT_61);
    
if (!isReadOnly) {

    stringBuffer.append(TEXT_62);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.RequestConstants"));
    stringBuffer.append(TEXT_63);
    
}

    stringBuffer.append(TEXT_64);
    stringBuffer.append(TEXT_65);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.RequestConstants"));
    stringBuffer.append(TEXT_66);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.Command"));
    stringBuffer.append(TEXT_67);
    
	if (!isReadOnly) {

    stringBuffer.append(TEXT_68);
    stringBuffer.append(TEXT_69);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.DirectEditManager"));
    stringBuffer.append(TEXT_70);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.DirectEditManager"));
    stringBuffer.append(TEXT_71);
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.TextCellEditor"));
    stringBuffer.append(TEXT_72);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.services.LabelCellEditorLocator"));
    stringBuffer.append(TEXT_73);
    stringBuffer.append(primaryView);
    stringBuffer.append(TEXT_74);
    stringBuffer.append(importManager.getImportedName(genDiagram.getDiagramEditorUtilQualifiedClassName()));
    stringBuffer.append(TEXT_75);
    stringBuffer.append(primaryView);
    stringBuffer.append(TEXT_76);
    stringBuffer.append(importManager.getImportedName(genDiagram.getDiagramEditorUtilQualifiedClassName()));
    stringBuffer.append(TEXT_77);
    stringBuffer.append(primaryView);
    stringBuffer.append(TEXT_78);
    
	}

    stringBuffer.append(TEXT_79);
    stringBuffer.append(TEXT_80);
    stringBuffer.append(TEXT_81);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.labels.ILabelTextDisplayer"));
    stringBuffer.append(TEXT_82);
    
if (labelModelFacet instanceof FeatureLabelModelFacet) {
	FeatureLabelModelFacet featureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	String viewPattern = featureLabelModelFacet.getViewPattern();
	if (viewPattern == null || viewPattern.length() == 0) {
		StringBuffer patternBuffer = new StringBuffer();
		for(int i = 0; i < featureLabelModelFacet.getMetaFeatures().size(); i++) {
			patternBuffer.append("{").append(i).append("} ");
		}
		viewPattern = patternBuffer.toString().trim();
	}
	String editPattern = null;
	if (!isReadOnly) {
		editPattern = featureLabelModelFacet.getEditPattern();
		if (editPattern == null || editPattern.length() == 0) {
			StringBuffer patternBuffer = new StringBuffer();
			for(int i = 0; i < featureLabelModelFacet.getMetaFeatures().size(); i++) {
				patternBuffer.append("{").append(i).append("} ");
			}
			editPattern = patternBuffer.toString().trim();
		}
	}

    stringBuffer.append(TEXT_83);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.labels.SimpleLabelTextDisplayer"));
    stringBuffer.append(TEXT_84);
    stringBuffer.append(viewPattern);
    stringBuffer.append(TEXT_85);
    if (!isReadOnly) {
    stringBuffer.append(TEXT_86);
    stringBuffer.append(editPattern);
    stringBuffer.append(TEXT_87);
    }
    stringBuffer.append(TEXT_88);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EStructuralFeature"));
    stringBuffer.append(TEXT_89);
    
	for(Iterator it = featureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
		GenFeature next = (GenFeature) it.next();

    stringBuffer.append(TEXT_90);
    stringBuffer.append(importManager.getImportedName(next.getGenPackage().getQualifiedPackageInterfaceName()));
    stringBuffer.append(TEXT_91);
    stringBuffer.append(next.getFeatureAccessorName());
    stringBuffer.append(TEXT_92);
    if (it.hasNext()) {
    stringBuffer.append(TEXT_93);
    }

    
	}

    stringBuffer.append(TEXT_94);
    
} else {

    stringBuffer.append(TEXT_95);
    
}

    stringBuffer.append(TEXT_96);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.labels.ILabelTextDisplayer"));
    stringBuffer.append(TEXT_97);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EObject"));
    stringBuffer.append(TEXT_98);
    stringBuffer.append(primaryView);
    stringBuffer.append(TEXT_99);
    stringBuffer.append(TEXT_100);
    
boolean isFixedFontSetInFigure;
{
	StyleAttributes styleAttributes = (genElement.getViewmap() == null) ? null : (StyleAttributes)genElement.getViewmap().find(StyleAttributes.class);
	isFixedFontSetInFigure = styleAttributes != null && styleAttributes.isFixedFont();
}

    stringBuffer.append(TEXT_101);
    
if (!isFixedFontSetInFigure) {

    stringBuffer.append(TEXT_102);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
    stringBuffer.append(TEXT_103);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
    stringBuffer.append(TEXT_104);
    stringBuffer.append(primaryView);
    stringBuffer.append(TEXT_105);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_106);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
    stringBuffer.append(TEXT_107);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
    stringBuffer.append(TEXT_108);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
    stringBuffer.append(TEXT_109);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
    stringBuffer.append(TEXT_110);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
    stringBuffer.append(TEXT_111);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.FontData"));
    stringBuffer.append(TEXT_112);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
    stringBuffer.append(TEXT_113);
    
}

    stringBuffer.append(TEXT_114);
    
if (!isFixedFontSetInFigure) {

    stringBuffer.append(TEXT_115);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
    stringBuffer.append(TEXT_116);
    
}

    stringBuffer.append(TEXT_117);
    stringBuffer.append(TEXT_118);
    stringBuffer.append(TEXT_119);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
    stringBuffer.append(TEXT_120);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
    stringBuffer.append(TEXT_121);
    stringBuffer.append(primaryView);
    stringBuffer.append(TEXT_122);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_123);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
    stringBuffer.append(TEXT_124);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
    stringBuffer.append(TEXT_125);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
    stringBuffer.append(TEXT_126);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
    stringBuffer.append(TEXT_127);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Image"));
    stringBuffer.append(TEXT_128);
    
if (genLabel.isElementIcon()) {

    stringBuffer.append(TEXT_129);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EObject"));
    stringBuffer.append(TEXT_130);
    if (genHost.getDomainMetaClass().isExternalInterface()) {
    stringBuffer.append(TEXT_131);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EObject"));
    stringBuffer.append(TEXT_132);
    }
    stringBuffer.append(TEXT_133);
    stringBuffer.append(importManager.getImportedName(genDiagram.getElementTypesQualifiedClassName()));
    stringBuffer.append(TEXT_134);
    
}

    stringBuffer.append(TEXT_135);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_136);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_137);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_138);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
    stringBuffer.append(TEXT_139);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
    stringBuffer.append(TEXT_140);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
    stringBuffer.append(TEXT_141);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
    stringBuffer.append(TEXT_142);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_143);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_144);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_145);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_146);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_147);
    
if (isExternal) {

    stringBuffer.append(TEXT_148);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_149);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_150);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_151);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_152);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_153);
    
}

    stringBuffer.append(TEXT_154);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
    stringBuffer.append(TEXT_155);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_156);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_157);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_158);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_159);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_160);
    
if (isExternal) {

    stringBuffer.append(TEXT_161);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_162);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_163);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_164);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_165);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_166);
    
}

    stringBuffer.append(TEXT_167);
    stringBuffer.append(TEXT_168);
    stringBuffer.append(TEXT_169);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IExternallyUpdatableEditPart"));
    stringBuffer.append(TEXT_170);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IExternallyUpdatableEditPart"));
    stringBuffer.append(TEXT_171);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.labels.ILabelController"));
    stringBuffer.append(TEXT_172);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_173);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_174);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_175);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_176);
    
final Viewmap viewmap = genLabel.getViewmap();

    stringBuffer.append(TEXT_177);
    
final String figureQualifiedClassName;
if (viewmap instanceof ParentAssignedViewmap) {
	ParentAssignedViewmap parentAssignedViewmap = (ParentAssignedViewmap) viewmap;
	figureQualifiedClassName = parentAssignedViewmap.getFigureQualifiedClassName() == null ? "org.eclipse.draw2d.IFigure" : parentAssignedViewmap.getFigureQualifiedClassName();
} else if (viewmap instanceof FigureViewmap) {
	String figureQualifiedClassNameCandidate = ((FigureViewmap) viewmap).getFigureQualifiedClassName();
	if (figureQualifiedClassNameCandidate == null || figureQualifiedClassNameCandidate.trim().length() == 0) {
		figureQualifiedClassName = "org.eclipse.draw2d.Label";
	} else {
		figureQualifiedClassName = figureQualifiedClassNameCandidate;
	}
} else if (viewmap instanceof SnippetViewmap) {
	figureQualifiedClassName = "org.eclipse.draw2d.IFigure";
} else if (viewmap instanceof InnerClassViewmap) {
	figureQualifiedClassName = ((InnerClassViewmap) viewmap).getClassName();
} else {
	figureQualifiedClassName = "org.eclipse.draw2d.IFigure";
}
final String figureImportedName;
if (viewmap instanceof InnerClassViewmap) {
	figureImportedName = figureQualifiedClassName;	//do not import inner class
} else {
	figureImportedName = importManager.getImportedName(figureQualifiedClassName);
}
if (viewmap instanceof ParentAssignedViewmap) {
	final ParentAssignedViewmap parentAssignedViewmap = (ParentAssignedViewmap) viewmap;

    stringBuffer.append(TEXT_178);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.IFigure"));
    stringBuffer.append(TEXT_179);
    stringBuffer.append((parentAssignedViewmap.getSetterName() == null ? "setLabel" : parentAssignedViewmap.getSetterName()));
    stringBuffer.append(TEXT_180);
    } else { 
    stringBuffer.append(TEXT_181);
    stringBuffer.append(figureImportedName);
    stringBuffer.append(TEXT_182);
    
if (viewmap instanceof FigureViewmap) {

    stringBuffer.append(TEXT_183);
    stringBuffer.append(figureImportedName);
    stringBuffer.append(TEXT_184);
    } // instanceof FigureViewmap
 else if (viewmap instanceof SnippetViewmap) {
    stringBuffer.append(TEXT_185);
    stringBuffer.append(((SnippetViewmap) viewmap).getBody());
    stringBuffer.append(TEXT_186);
    } // instanceof SnippetViewmap; FIXME : obtain figure class name to generate getter
 else if (viewmap instanceof InnerClassViewmap) {

    stringBuffer.append(TEXT_187);
    stringBuffer.append(figureImportedName);
    stringBuffer.append(TEXT_188);
    }
    stringBuffer.append(TEXT_189);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.IFigure"));
    stringBuffer.append(TEXT_190);
    stringBuffer.append(figureImportedName);
    stringBuffer.append(TEXT_191);
    
if ("org.eclipse.draw2d.Label".equals(figureQualifiedClassName) || viewmap instanceof InnerClassViewmap) {

    stringBuffer.append(TEXT_192);
    
} else {

    stringBuffer.append(TEXT_193);
    
}

    stringBuffer.append(TEXT_194);
    }	/*not parent-assigned*/
    stringBuffer.append(TEXT_195);
    
if (!"org.eclipse.draw2d.Label".equals(figureQualifiedClassName) && viewmap instanceof InnerClassViewmap==false) {

    stringBuffer.append(TEXT_196);
    
}

    stringBuffer.append(TEXT_197);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.Label"));
    stringBuffer.append(TEXT_198);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.Label"));
    stringBuffer.append(TEXT_199);
    
String labelSetterName = "setLabel"; // same assumption in NodeEditPart
String labelFigureClassName = "org.eclipse.draw2d.IFigure";
if (viewmap instanceof ParentAssignedViewmap) {
	ParentAssignedViewmap parentAssignedViewmap = (ParentAssignedViewmap) viewmap;
	if (parentAssignedViewmap.getSetterName() != null) {
		labelSetterName = parentAssignedViewmap.getSetterName();
	}
	if (parentAssignedViewmap.getFigureQualifiedClassName() != null) {
		labelFigureClassName = parentAssignedViewmap.getFigureQualifiedClassName();
	}
} // FIXME perhaps, there's no sense to have setLabel for any other viewmap than ParentAssigned?

    stringBuffer.append(TEXT_200);
    stringBuffer.append(labelSetterName);
    stringBuffer.append(TEXT_201);
    stringBuffer.append(importManager.getImportedName(labelFigureClassName));
    stringBuffer.append(TEXT_202);
    
if ("org.eclipse.draw2d.Label".equals(labelFigureClassName)) {

    stringBuffer.append(TEXT_203);
    
} else {

    stringBuffer.append(TEXT_204);
    
}

    stringBuffer.append(TEXT_205);
    
if (viewmap instanceof InnerClassViewmap) {
	String classBody = ((InnerClassViewmap) viewmap).getClassBody();

    stringBuffer.append(TEXT_206);
    stringBuffer.append(classBody);
    stringBuffer.append(TEXT_207);
    
if (classBody.indexOf("DPtoLP") != -1) {

    stringBuffer.append(TEXT_208);
    
}

    
}

    stringBuffer.append(TEXT_209);
    importManager.emitSortedImports();
    stringBuffer.append(TEXT_210);
    return stringBuffer.toString();
  }
}
@


1.23
log
@[164018] Command generation seperated from Parts for commands that operate with labels;
API to display label text, apply modifications and update after (external) modifications isolated from generated code;
Moved as much common generated code as possible to BaseTreeEditPart;
[165700] Support diagrams in read-only mode: all EMF commands that are not composed of standard EMF commands, but modify EMF models directly should query the editing domain for read-onliness of the resource they operate on.
@
text
@@


1.22
log
@Images should be reused across the editparts that represent same model element types (prevent SWTErrors when opening huge diagrams)
@
text
@d45 186
a230 245
  protected final String TEXT_25 = " {";
  protected final String TEXT_26 = NL;
  protected final String TEXT_27 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final int VISUAL_ID = ";
  protected final String TEXT_28 = ";";
  protected final String TEXT_29 = NL;
  protected final String TEXT_30 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_31 = " manager;" + NL;
  protected final String TEXT_32 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate String defaultText;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_33 = "(View view) {";
  protected final String TEXT_34 = NL + "\t\tsuper(view);";
  protected final String TEXT_35 = NL + "\t\tsetModel(view);";
  protected final String TEXT_36 = NL + "\t}" + NL;
  protected final String TEXT_37 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic boolean isSelectable() {" + NL + "\t\treturn false;" + NL + "\t}";
  protected final String TEXT_38 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void createEditPolicies() {";
  protected final String TEXT_39 = NL;
  protected final String TEXT_40 = "\t\tinstallEditPolicy(";
  protected final String TEXT_41 = ".DIRECT_EDIT_ROLE," + NL + "\t\t\t\tnew ";
  protected final String TEXT_42 = "() {" + NL + "\t\t\t\t\tprotected void showCurrentEditValue(";
  protected final String TEXT_43 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tgetLabel().setText(value);" + NL + "\t\t\t\t\t}";
  protected final String TEXT_44 = NL;
  protected final String TEXT_45 = "\t\t\t\t\tprotected ";
  protected final String TEXT_46 = " getDirectEditCommand(";
  protected final String TEXT_47 = " request) {";
  protected final String TEXT_48 = NL + "\t\t\t\t\t\treturn ";
  protected final String TEXT_49 = ".INSTANCE;";
  protected final String TEXT_50 = NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_51 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;";
  protected final String TEXT_52 = NL + "\t\t\t\t\t\tif (value.length() == 0) {" + NL + "\t\t\t\t\t\t\tparseResult = new Object[] { null };" + NL + "\t\t\t\t\t\t} else {";
  protected final String TEXT_53 = NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_54 = "(";
  protected final String TEXT_55 = ").parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_56 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_57 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_58 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_59 = NL + "\t\t\t\t\t\t}";
  protected final String TEXT_60 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_61 = " editingDomain = ";
  protected final String TEXT_62 = ".getEditingDomain(";
  protected final String TEXT_63 = ".getDiagram().getElement());" + NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_64 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_65 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_66 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_67 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_68 = " createDomainModelCommand(";
  protected final String TEXT_69 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_70 = " element = ";
  protected final String TEXT_71 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_72 = " result = new ";
  protected final String TEXT_73 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_74 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_75 = " ";
  protected final String TEXT_76 = "feature = (";
  protected final String TEXT_77 = ") ";
  protected final String TEXT_78 = ".eINSTANCE.get";
  protected final String TEXT_79 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_80 = ".parseValue(feature, values[";
  protected final String TEXT_81 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_82 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_83 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_84 = " ";
  protected final String TEXT_85 = "values = new ";
  protected final String TEXT_86 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_87 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_88 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tif (valueToSet != null) {" + NL + "\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_89 = ".create(editingDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_90 = NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_91 = ".create(editingDomain, element, feature, valueToSet == null ? ";
  protected final String TEXT_92 = ".UNSET_VALUE : valueToSet));";
  protected final String TEXT_93 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_94 = NL + "\t\t\t\t});";
  protected final String TEXT_95 = NL;
  protected final String TEXT_96 = NL + "\t\tinstallEditPolicy(\"";
  protected final String TEXT_97 = "\", new ";
  protected final String TEXT_98 = "()); //$NON-NLS-1$";
  protected final String TEXT_99 = NL;
  protected final String TEXT_100 = NL + "\t\tinstallEditPolicy(";
  protected final String TEXT_101 = ".OPEN_ROLE";
  protected final String TEXT_102 = " + \"";
  protected final String TEXT_103 = "\" ";
  protected final String TEXT_104 = ", new ";
  protected final String TEXT_105 = "());";
  protected final String TEXT_106 = NL + "\t}" + NL;
  protected final String TEXT_107 = NL;
  protected final String TEXT_108 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_109 = " req) {";
  protected final String TEXT_110 = NL + "\t\tif (";
  protected final String TEXT_111 = ".REQ_DIRECT_EDIT.equals(req.getType())) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t\treturn;" + NL + "\t\t}";
  protected final String TEXT_112 = NL;
  protected final String TEXT_113 = "if (";
  protected final String TEXT_114 = ".REQ_OPEN.equals(req.getType())) {" + NL + "\t";
  protected final String TEXT_115 = " command = getCommand(req);" + NL + "\tif (command != null && command.canExecute()) {" + NL + "\t\tgetViewer().getEditDomain().getCommandStack().execute(command);" + NL + "\t}" + NL + "\treturn;" + NL + "}" + NL + "\t\tsuper.performRequest(req);" + NL + "\t}";
  protected final String TEXT_116 = NL;
  protected final String TEXT_117 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_118 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_119 = "(this, ";
  protected final String TEXT_120 = ".class, new ";
  protected final String TEXT_121 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_122 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_123 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\t";
  protected final String TEXT_124 = " zoomManager = (";
  protected final String TEXT_125 = ") getViewer().getProperty(";
  protected final String TEXT_126 = ".class.toString());" + NL + "\t\t\t\t\tdouble zoomLevel = zoomManager == null ? 1.0 : zoomManager.getZoom();" + NL + "\t\t\t\t\tif (zoomLevel > 1.0 && getLabel().getFont() != null) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_127 = "[] datas = getLabel().getFont().getFontData();" + NL + "\t\t\t\t\t\tfor(int i = 0; i < datas.length; i++) {" + NL + "\t\t\t\t\t\t\tdatas[i].height *= zoomLevel;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal ";
  protected final String TEXT_128 = " font = new ";
  protected final String TEXT_129 = "(getLabel().getFont().getDevice(), datas);" + NL + "\t\t\t\t\t\tcelleditor.getControl().setFont(font);" + NL + "\t\t\t\t\t\tcelleditor.getControl().addDisposeListener(new ";
  protected final String TEXT_130 = "() {" + NL + "\t\t\t\t\t\t\tpublic void widgetDisposed(";
  protected final String TEXT_131 = " e) {" + NL + "\t\t\t\t\t\t\t\tfont.dispose();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t});" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tint avr = ";
  protected final String TEXT_132 = ".getFontMetrics(celleditor.getControl().getFont()).getAverageCharWidth();" + NL + "\t\t\t\t\trect.setSize(new ";
  protected final String TEXT_133 = "(celleditor.getControl().computeSize(";
  protected final String TEXT_134 = ".DEFAULT, ";
  protected final String TEXT_135 = ".DEFAULT)).expand(avr * 2, 0));" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_136 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_137 = NL;
  protected final String TEXT_138 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String VIEW_PATTERN = \"";
  protected final String TEXT_139 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String EDIT_PATTERN = \"";
  protected final String TEXT_140 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_141 = " element = ";
  protected final String TEXT_142 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\tString result = buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t\tif (result == null || result.length() == 0) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn result;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_143 = " element = ";
  protected final String TEXT_144 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn \"\";\t//$NON-NLS-1$" + NL + "\t\t}" + NL + "\t\tString result = buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t\tif (result == null) {" + NL + "\t\t\treturn \"\";\t//$NON-NLS-1$" + NL + "\t\t}" + NL + "\t\treturn result;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static String buildTextByPattern(";
  protected final String TEXT_145 = " element, String pattern) {";
  protected final String TEXT_146 = NL + "\t\treturn ";
  protected final String TEXT_147 = ".format(pattern, new Object[] {";
  protected final String TEXT_148 = NL + "\t\t\tnew ";
  protected final String TEXT_149 = "(";
  protected final String TEXT_150 = ")";
  protected final String TEXT_151 = " == null ? \"\" : ";
  protected final String TEXT_152 = ",";
  protected final String TEXT_153 = NL + "\t\t});";
  protected final String TEXT_154 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn null;";
  protected final String TEXT_155 = NL + "\t}";
  protected final String TEXT_156 = NL;
  protected final String TEXT_157 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_158 = NL + "\t\t";
  protected final String TEXT_159 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_160 = ") ";
  protected final String TEXT_161 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_162 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_163 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_164 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_165 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_166 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_167 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_168 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_169 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_170 = "\t" + NL + "\t}";
  protected final String TEXT_171 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_172 = " createdFont;";
  protected final String TEXT_173 = "\t";
  protected final String TEXT_174 = NL;
  protected final String TEXT_175 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_176 = " style = (";
  protected final String TEXT_177 = ")  ";
  protected final String TEXT_178 = ".getStyle(";
  protected final String TEXT_179 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_180 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_181 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_182 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_183 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_184 = " getLabelIcon() {";
  protected final String TEXT_185 = NL + "\t\t";
  protected final String TEXT_186 = " semanticElement = ";
  protected final String TEXT_187 = "(";
  protected final String TEXT_188 = ") ";
  protected final String TEXT_189 = "resolveSemanticElement();" + NL + "\t\tif (semanticElement != null) {" + NL + "\t\t\treturn ";
  protected final String TEXT_190 = ".getImage(semanticElement.eClass());" + NL + "\t\t}";
  protected final String TEXT_191 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_192 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_193 = ") ? (";
  protected final String TEXT_194 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_195 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_196 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_197 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_198 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_199 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_200 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_201 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_202 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_203 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_204 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_205 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_206 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_207 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_208 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_209 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_210 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_211 = ".eINSTANCE.get";
  protected final String TEXT_212 = "(), labelRefresher);";
  protected final String TEXT_213 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_214 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_215 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_216 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_217 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_218 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_219 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_220 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_221 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_222 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_223 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_224 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_225 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_226 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_227 = ".eINSTANCE.get";
  protected final String TEXT_228 = "(), labelRefresher);";
  protected final String TEXT_229 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_230 = ".Refresher labelRefresher = new ";
  protected final String TEXT_231 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_232 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_233 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_234 = ".Refresher fontRefresher = new ";
  protected final String TEXT_235 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_236 = NL;
  protected final String TEXT_237 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_238 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_239 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_240 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_241 = " createLabel() {";
  protected final String TEXT_242 = NL + "\t\treturn new ";
  protected final String TEXT_243 = "();";
  protected final String TEXT_244 = NL + "\t\treturn ";
  protected final String TEXT_245 = ";";
  protected final String TEXT_246 = NL + "\t\treturn new ";
  protected final String TEXT_247 = "();";
  protected final String TEXT_248 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_249 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_250 = " label = createLabel();";
  protected final String TEXT_251 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_252 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_253 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_254 = NL + NL + "\t/**";
  protected final String TEXT_255 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_256 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_257 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_258 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_259 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_260 = "(";
  protected final String TEXT_261 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_262 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_263 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_264 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_265 = NL;
  protected final String TEXT_266 = NL;
  protected final String TEXT_267 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_268 = NL + "}";
  protected final String TEXT_269 = NL;
d354 2
a357 1
    stringBuffer.append(TEXT_26);
d359 1
d361 1
a361 1
    stringBuffer.append(TEXT_28);
d363 1
a363 1
    stringBuffer.append(TEXT_29);
d367 1
a367 1
    stringBuffer.append(TEXT_30);
d369 1
a369 1
    stringBuffer.append(TEXT_31);
d373 3
a375 1
    stringBuffer.append(TEXT_32);
d377 1
a377 1
    stringBuffer.append(TEXT_33);
d381 1
a381 1
    stringBuffer.append(TEXT_34);
d385 1
a385 1
    stringBuffer.append(TEXT_35);
d389 1
a389 1
    stringBuffer.append(TEXT_36);
d393 1
a393 1
    stringBuffer.append(TEXT_37);
d397 5
a401 1
    stringBuffer.append(TEXT_38);
a405 1
		String editPatternCode = "EDIT_PATTERN";	//declared in labelText.javajetinc, used in directEditCommand.jetinc.
a406 7
    stringBuffer.append(TEXT_39);
    stringBuffer.append(TEXT_40);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.EditPolicy"));
    stringBuffer.append(TEXT_41);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editpolicies.DirectEditPolicy"));
    stringBuffer.append(TEXT_42);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.requests.DirectEditRequest"));
d409 1
d411 1
a411 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.Command"));
a412 128
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.requests.DirectEditRequest"));
    stringBuffer.append(TEXT_47);
    
if (labelModelFacet instanceof FeatureLabelModelFacet == false) {

    stringBuffer.append(TEXT_48);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
    stringBuffer.append(TEXT_49);
    
} else {
	FeatureLabelModelFacet featureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	List metaFeatures = featureLabelModelFacet.getMetaFeatures();

    stringBuffer.append(TEXT_50);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
    stringBuffer.append(TEXT_51);
    
	if (metaFeatures.size() == 1 && String.class.equals(((GenFeature) metaFeatures.get(0)).getEcoreFeature().getEType().getInstanceClass())) {

    stringBuffer.append(TEXT_52);
    
	}

    stringBuffer.append(TEXT_53);
    stringBuffer.append(importManager.getImportedName("java.text.MessageFormat"));
    stringBuffer.append(TEXT_54);
    stringBuffer.append(editPatternCode);
    stringBuffer.append(TEXT_55);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
    stringBuffer.append(TEXT_56);
    stringBuffer.append(importManager.getImportedName("java.text.ParseException"));
    stringBuffer.append(TEXT_57);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
    stringBuffer.append(TEXT_58);
    
	if (metaFeatures.size() == 1 && String.class.equals(((GenFeature) metaFeatures.get(0)).getEcoreFeature().getEType().getInstanceClass())) {

    stringBuffer.append(TEXT_59);
    
	}

    stringBuffer.append(TEXT_60);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.transaction.TransactionalEditingDomain"));
    stringBuffer.append(TEXT_61);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.transaction.util.TransactionUtil"));
    stringBuffer.append(TEXT_62);
    stringBuffer.append(primaryView);
    stringBuffer.append(TEXT_63);
    stringBuffer.append(metaFeatures.size());
    stringBuffer.append(TEXT_64);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
    stringBuffer.append(TEXT_65);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
    stringBuffer.append(TEXT_66);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.commands.WrappingCommand"));
    stringBuffer.append(TEXT_67);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
    stringBuffer.append(TEXT_68);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.transaction.TransactionalEditingDomain"));
    stringBuffer.append(TEXT_69);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_70);
    stringBuffer.append(resolvedSemanticElement);
    stringBuffer.append(TEXT_71);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_72);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_73);
    
	boolean haveDeclaredValues = false;
	for(int i = 0; i < metaFeatures.size(); i++) {
		GenFeature nextFeatureToSet = (GenFeature) metaFeatures.get(i);
		EStructuralFeature nextEcoreFeature = nextFeatureToSet.getEcoreFeature();

    stringBuffer.append(TEXT_74);
    if (i == 0) {
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EAttribute"));
    stringBuffer.append(TEXT_75);
    }
    stringBuffer.append(TEXT_76);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EAttribute"));
    stringBuffer.append(TEXT_77);
    stringBuffer.append(importManager.getImportedName(nextFeatureToSet.getGenPackage().getQualifiedPackageInterfaceName()));
    stringBuffer.append(TEXT_78);
    stringBuffer.append(nextFeatureToSet.getFeatureAccessorName());
    stringBuffer.append(TEXT_79);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.services.ParserUtil"));
    stringBuffer.append(TEXT_80);
    stringBuffer.append(i);
    stringBuffer.append(TEXT_81);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.UnexecutableCommand"));
    stringBuffer.append(TEXT_82);
    
		if (nextEcoreFeature.isMany()) {

    stringBuffer.append(TEXT_83);
    if (!haveDeclaredValues) { haveDeclaredValues = true;
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.util.EList"));
    stringBuffer.append(TEXT_84);
    }
    stringBuffer.append(TEXT_85);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.util.BasicEList"));
    stringBuffer.append(TEXT_86);
    stringBuffer.append(nextFeatureToSet.getAccessorName());
    stringBuffer.append(TEXT_87);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.command.RemoveCommand"));
    stringBuffer.append(TEXT_88);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.command.AddCommand"));
    stringBuffer.append(TEXT_89);
    
		} else {

    stringBuffer.append(TEXT_90);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.command.SetCommand"));
    stringBuffer.append(TEXT_91);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.command.SetCommand"));
    stringBuffer.append(TEXT_92);
    
		}

    
	}

    stringBuffer.append(TEXT_93);
    
}

    stringBuffer.append(TEXT_94);
d418 1
a418 1
    stringBuffer.append(TEXT_95);
d422 1
a422 1
    stringBuffer.append(TEXT_96);
d424 1
a424 1
    stringBuffer.append(TEXT_97);
d426 1
a426 1
    stringBuffer.append(TEXT_98);
d428 1
a428 1
    stringBuffer.append(TEXT_99);
d436 1
a436 1
    stringBuffer.append(TEXT_100);
d438 1
a438 1
    stringBuffer.append(TEXT_101);
d440 1
a440 1
    stringBuffer.append(TEXT_102);
d442 1
a442 1
    stringBuffer.append(TEXT_103);
d444 1
a444 1
    stringBuffer.append(TEXT_104);
d446 1
a446 1
    stringBuffer.append(TEXT_105);
d452 3
a454 3
    stringBuffer.append(TEXT_106);
    stringBuffer.append(TEXT_107);
    stringBuffer.append(TEXT_108);
d456 1
a456 1
    stringBuffer.append(TEXT_109);
d460 1
a460 1
    stringBuffer.append(TEXT_110);
d462 1
a462 1
    stringBuffer.append(TEXT_111);
d466 2
a467 2
    stringBuffer.append(TEXT_112);
    stringBuffer.append(TEXT_113);
d469 1
a469 1
    stringBuffer.append(TEXT_114);
d471 1
a471 1
    stringBuffer.append(TEXT_115);
d475 2
a476 2
    stringBuffer.append(TEXT_116);
    stringBuffer.append(TEXT_117);
d478 1
a478 1
    stringBuffer.append(TEXT_118);
d480 1
a480 1
    stringBuffer.append(TEXT_119);
d482 13
a494 31
    stringBuffer.append(TEXT_120);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.CellEditorLocator"));
    stringBuffer.append(TEXT_121);
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.CellEditor"));
    stringBuffer.append(TEXT_122);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.geometry.Rectangle"));
    stringBuffer.append(TEXT_123);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editparts.ZoomManager"));
    stringBuffer.append(TEXT_124);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editparts.ZoomManager"));
    stringBuffer.append(TEXT_125);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editparts.ZoomManager"));
    stringBuffer.append(TEXT_126);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.FontData"));
    stringBuffer.append(TEXT_127);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
    stringBuffer.append(TEXT_128);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
    stringBuffer.append(TEXT_129);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.events.DisposeListener"));
    stringBuffer.append(TEXT_130);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.events.DisposeEvent"));
    stringBuffer.append(TEXT_131);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.FigureUtilities"));
    stringBuffer.append(TEXT_132);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.geometry.Dimension"));
    stringBuffer.append(TEXT_133);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
    stringBuffer.append(TEXT_134);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
    stringBuffer.append(TEXT_135);
d498 5
a502 2
    stringBuffer.append(TEXT_136);
    stringBuffer.append(TEXT_137);
a503 12
/*genFeature.getObjectType() throws NPE on primitive types. This is a workaround. */
HashMap primitiveTypeToWrapperClassName = new HashMap();
primitiveTypeToWrapperClassName.put(Boolean.TYPE, "Boolean");
primitiveTypeToWrapperClassName.put(Byte.TYPE, "Byte");
primitiveTypeToWrapperClassName.put(Character.TYPE, "Character");
primitiveTypeToWrapperClassName.put(Double.TYPE, "Double");
primitiveTypeToWrapperClassName.put(Float.TYPE, "Float");
primitiveTypeToWrapperClassName.put(Integer.TYPE, "Integer");
primitiveTypeToWrapperClassName.put(Long.TYPE, "Long");
primitiveTypeToWrapperClassName.put(Short.TYPE, "Short");
String viewPattern = null;
String editPattern = null;
d506 1
a506 1
	viewPattern = featureLabelModelFacet.getViewPattern();
d514 9
a522 5
	editPattern = featureLabelModelFacet.getEditPattern();
	if (editPattern == null || editPattern.length() == 0) {
		StringBuffer patternBuffer = new StringBuffer();
		for(int i = 0; i < featureLabelModelFacet.getMetaFeatures().size(); i++) {
			patternBuffer.append("{").append(i).append("} ");
a523 1
		editPattern = patternBuffer.toString().trim();
a524 1
}
d526 3
a528 1
    stringBuffer.append(TEXT_138);
d530 3
a532 1
    stringBuffer.append(TEXT_139);
d534 5
a538 18
    stringBuffer.append(TEXT_140);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_141);
    stringBuffer.append(resolvedSemanticElement);
    stringBuffer.append(TEXT_142);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_143);
    stringBuffer.append(resolvedSemanticElement);
    stringBuffer.append(TEXT_144);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_145);
    
if (labelModelFacet instanceof FeatureLabelModelFacet) {
	FeatureLabelModelFacet featureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;

    stringBuffer.append(TEXT_146);
    stringBuffer.append(importManager.getImportedName("java.text.MessageFormat"));
    stringBuffer.append(TEXT_147);
a541 1
		if (next.isPrimitiveType()) {
d543 8
a550 7
    stringBuffer.append(TEXT_148);
    stringBuffer.append(primitiveTypeToWrapperClassName.get(next.getTypeGenClassifier().getEcoreClassifier().getInstanceClass()));
    stringBuffer.append(TEXT_149);
    
		}
		myFeatureGetAccessorHelper.appendFeatureValueGetter("element", next, underlyingMetaClass, false);
		if (next.isPrimitiveType()) {
a551 13
    stringBuffer.append(TEXT_150);
    
		} else {
			if (String.class.equals(next.getEcoreFeature().getEType().getInstanceClass())) {

    stringBuffer.append(TEXT_151);
    
				myFeatureGetAccessorHelper.appendFeatureValueGetter("element", next, underlyingMetaClass, false);
			}
		}
		if (it.hasNext()) {
    stringBuffer.append(TEXT_152);
    }
d555 1
a555 1
    stringBuffer.append(TEXT_153);
d559 1
a559 1
    stringBuffer.append(TEXT_154);
d563 8
a570 2
    stringBuffer.append(TEXT_155);
    stringBuffer.append(TEXT_156);
d578 1
a578 1
    stringBuffer.append(TEXT_157);
d582 1
a582 1
    stringBuffer.append(TEXT_158);
d584 1
a584 1
    stringBuffer.append(TEXT_159);
d586 1
a586 1
    stringBuffer.append(TEXT_160);
d588 1
a588 1
    stringBuffer.append(TEXT_161);
d590 1
a590 1
    stringBuffer.append(TEXT_162);
d592 1
a592 1
    stringBuffer.append(TEXT_163);
d594 1
a594 1
    stringBuffer.append(TEXT_164);
d596 1
a596 1
    stringBuffer.append(TEXT_165);
d598 1
a598 1
    stringBuffer.append(TEXT_166);
d600 1
a600 1
    stringBuffer.append(TEXT_167);
d602 1
a602 1
    stringBuffer.append(TEXT_168);
d604 1
a604 1
    stringBuffer.append(TEXT_169);
d608 1
a608 1
    stringBuffer.append(TEXT_170);
d612 1
a612 1
    stringBuffer.append(TEXT_171);
d614 1
a614 1
    stringBuffer.append(TEXT_172);
d618 3
a620 3
    stringBuffer.append(TEXT_173);
    stringBuffer.append(TEXT_174);
    stringBuffer.append(TEXT_175);
d622 1
a622 1
    stringBuffer.append(TEXT_176);
d624 1
a624 1
    stringBuffer.append(TEXT_177);
d626 1
a626 1
    stringBuffer.append(TEXT_178);
d628 1
a628 1
    stringBuffer.append(TEXT_179);
d630 1
a630 1
    stringBuffer.append(TEXT_180);
d632 1
a632 1
    stringBuffer.append(TEXT_181);
d634 1
a634 1
    stringBuffer.append(TEXT_182);
d636 1
a636 1
    stringBuffer.append(TEXT_183);
d638 1
a638 1
    stringBuffer.append(TEXT_184);
d642 1
a642 1
    stringBuffer.append(TEXT_185);
d644 1
a644 1
    stringBuffer.append(TEXT_186);
d646 1
a646 1
    stringBuffer.append(TEXT_187);
d648 1
a648 1
    stringBuffer.append(TEXT_188);
d650 1
a650 1
    stringBuffer.append(TEXT_189);
d652 1
a652 1
    stringBuffer.append(TEXT_190);
d656 1
a656 1
    stringBuffer.append(TEXT_191);
d658 1
a658 1
    stringBuffer.append(TEXT_192);
d660 1
a660 1
    stringBuffer.append(TEXT_193);
d662 1
a662 1
    stringBuffer.append(TEXT_194);
d664 1
a664 1
    stringBuffer.append(TEXT_195);
d666 1
a666 1
    stringBuffer.append(TEXT_196);
d668 1
a668 1
    stringBuffer.append(TEXT_197);
d670 1
a670 1
    stringBuffer.append(TEXT_198);
d672 1
a672 1
    stringBuffer.append(TEXT_199);
d674 1
a674 1
    stringBuffer.append(TEXT_200);
d676 1
a676 1
    stringBuffer.append(TEXT_201);
d678 1
a678 1
    stringBuffer.append(TEXT_202);
d680 1
a680 1
    stringBuffer.append(TEXT_203);
d684 1
a684 1
    stringBuffer.append(TEXT_204);
d686 1
a686 1
    stringBuffer.append(TEXT_205);
d688 1
a688 1
    stringBuffer.append(TEXT_206);
d690 1
a690 1
    stringBuffer.append(TEXT_207);
d692 1
a692 1
    stringBuffer.append(TEXT_208);
d694 1
a694 1
    stringBuffer.append(TEXT_209);
a696 4
if (labelModelFacet instanceof FeatureLabelModelFacet) {
	FeatureLabelModelFacet featureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	for(Iterator it = featureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
		GenFeature next = (GenFeature) it.next();
d698 1
a698 10
    stringBuffer.append(TEXT_210);
    stringBuffer.append(importManager.getImportedName(next.getGenPackage().getQualifiedPackageInterfaceName()));
    stringBuffer.append(TEXT_211);
    stringBuffer.append(next.getFeatureAccessorName());
    stringBuffer.append(TEXT_212);
    
	}
}

    stringBuffer.append(TEXT_213);
d700 1
a700 1
    stringBuffer.append(TEXT_214);
d702 1
a702 1
    stringBuffer.append(TEXT_215);
d704 1
a704 1
    stringBuffer.append(TEXT_216);
d706 1
a706 1
    stringBuffer.append(TEXT_217);
d708 1
a708 1
    stringBuffer.append(TEXT_218);
d710 1
a710 1
    stringBuffer.append(TEXT_219);
d714 1
a714 1
    stringBuffer.append(TEXT_220);
d716 1
a716 1
    stringBuffer.append(TEXT_221);
d718 1
a718 1
    stringBuffer.append(TEXT_222);
d720 1
a720 1
    stringBuffer.append(TEXT_223);
d722 1
a722 1
    stringBuffer.append(TEXT_224);
d724 1
a724 1
    stringBuffer.append(TEXT_225);
a726 4
if (labelModelFacet instanceof FeatureLabelModelFacet) {
	FeatureLabelModelFacet featureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	for(Iterator it = featureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
		GenFeature next = (GenFeature) it.next();
d728 9
a736 10
    stringBuffer.append(TEXT_226);
    stringBuffer.append(importManager.getImportedName(next.getGenPackage().getQualifiedPackageInterfaceName()));
    stringBuffer.append(TEXT_227);
    stringBuffer.append(next.getFeatureAccessorName());
    stringBuffer.append(TEXT_228);
    
	}
}

    stringBuffer.append(TEXT_229);
d738 1
a738 1
    stringBuffer.append(TEXT_230);
d740 1
a740 1
    stringBuffer.append(TEXT_231);
d742 1
a742 1
    stringBuffer.append(TEXT_232);
d744 1
a744 5
    stringBuffer.append(TEXT_233);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_234);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_235);
d748 1
a748 1
    stringBuffer.append(TEXT_236);
d777 1
a777 1
    stringBuffer.append(TEXT_237);
d779 1
a779 1
    stringBuffer.append(TEXT_238);
d781 1
a781 1
    stringBuffer.append(TEXT_239);
d783 1
a783 1
    stringBuffer.append(TEXT_240);
d785 1
a785 1
    stringBuffer.append(TEXT_241);
d789 1
a789 1
    stringBuffer.append(TEXT_242);
d791 1
a791 1
    stringBuffer.append(TEXT_243);
d794 1
a794 1
    stringBuffer.append(TEXT_244);
d796 1
a796 1
    stringBuffer.append(TEXT_245);
d800 1
a800 1
    stringBuffer.append(TEXT_246);
d802 1
a802 1
    stringBuffer.append(TEXT_247);
d804 1
a804 1
    stringBuffer.append(TEXT_248);
d806 1
a806 1
    stringBuffer.append(TEXT_249);
d808 1
a808 1
    stringBuffer.append(TEXT_250);
d812 1
a812 1
    stringBuffer.append(TEXT_251);
d816 1
a816 1
    stringBuffer.append(TEXT_252);
d820 1
a820 1
    stringBuffer.append(TEXT_253);
d822 1
a822 1
    stringBuffer.append(TEXT_254);
d826 1
a826 1
    stringBuffer.append(TEXT_255);
d830 1
a830 1
    stringBuffer.append(TEXT_256);
d832 1
a832 1
    stringBuffer.append(TEXT_257);
d834 1
a834 1
    stringBuffer.append(TEXT_258);
d848 1
a848 1
    stringBuffer.append(TEXT_259);
d850 1
a850 1
    stringBuffer.append(TEXT_260);
d852 1
a852 1
    stringBuffer.append(TEXT_261);
d856 1
a856 1
    stringBuffer.append(TEXT_262);
d860 1
a860 1
    stringBuffer.append(TEXT_263);
d864 1
a864 1
    stringBuffer.append(TEXT_264);
d869 1
a869 1
    stringBuffer.append(TEXT_265);
d871 1
a871 1
    stringBuffer.append(TEXT_266);
d875 1
a875 1
    stringBuffer.append(TEXT_267);
d882 1
a882 1
    stringBuffer.append(TEXT_268);
d884 1
a884 1
    stringBuffer.append(TEXT_269);
@


1.21
log
@Ensure unselectability of the inner auxiliary edit parts by more standard GEF means (isSelectable() returns false instead of using EditPolicy with getHost() delegation)
@
text
@d206 84
a289 82
  protected final String TEXT_186 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_187 = " imageDescriptor = ";
  protected final String TEXT_188 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_189 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_190 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_191 = ") ? (";
  protected final String TEXT_192 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_193 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_194 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_195 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_196 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_197 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_198 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_199 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_200 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_201 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_202 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_203 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_204 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_205 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_206 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_207 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_208 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_209 = ".eINSTANCE.get";
  protected final String TEXT_210 = "(), labelRefresher);";
  protected final String TEXT_211 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_212 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_213 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_214 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_215 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_216 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_217 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_218 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_219 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_220 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_221 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_222 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_223 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_224 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_225 = ".eINSTANCE.get";
  protected final String TEXT_226 = "(), labelRefresher);";
  protected final String TEXT_227 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_228 = ".Refresher labelRefresher = new ";
  protected final String TEXT_229 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_230 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_231 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_232 = ".Refresher fontRefresher = new ";
  protected final String TEXT_233 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_234 = NL;
  protected final String TEXT_235 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_236 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_237 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_238 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_239 = " createLabel() {";
  protected final String TEXT_240 = NL + "\t\treturn new ";
  protected final String TEXT_241 = "();";
  protected final String TEXT_242 = NL + "\t\treturn ";
  protected final String TEXT_243 = ";";
  protected final String TEXT_244 = NL + "\t\treturn new ";
  protected final String TEXT_245 = "();";
  protected final String TEXT_246 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_247 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_248 = " label = createLabel();";
  protected final String TEXT_249 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_250 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_251 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_252 = NL + NL + "\t/**";
  protected final String TEXT_253 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_254 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_255 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_256 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_257 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_258 = "(";
  protected final String TEXT_259 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_260 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_261 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_262 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_263 = NL;
  protected final String TEXT_264 = NL;
  protected final String TEXT_265 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_266 = NL + "}";
  protected final String TEXT_267 = NL;
d870 1
a870 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d872 1
a872 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.resource.ImageDescriptor"));
d874 1
a874 1
    stringBuffer.append(importManager.getImportedName(genDiagram.getEditorGen().getPlugin().getActivatorQualifiedClassName()));
d876 4
a882 4
    stringBuffer.append(TEXT_189);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_190);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d886 1
a886 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d888 1
a888 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d894 1
a894 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d896 1
a896 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d904 4
a910 4
    stringBuffer.append(TEXT_202);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_203);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d918 4
d929 1
a929 1
    stringBuffer.append(TEXT_208);
d931 1
a931 1
    stringBuffer.append(TEXT_209);
d933 1
a933 1
    stringBuffer.append(TEXT_210);
d938 1
a938 1
    stringBuffer.append(TEXT_211);
a939 4
    stringBuffer.append(TEXT_212);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_213);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d947 4
a953 4
    stringBuffer.append(TEXT_218);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_219);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d961 4
d972 1
a972 1
    stringBuffer.append(TEXT_224);
d974 1
a974 1
    stringBuffer.append(TEXT_225);
d976 1
a976 1
    stringBuffer.append(TEXT_226);
a980 4
    stringBuffer.append(TEXT_227);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_228);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
d990 4
d997 1
a997 1
    stringBuffer.append(TEXT_234);
d1026 1
a1026 1
    stringBuffer.append(TEXT_235);
d1028 1
a1028 1
    stringBuffer.append(TEXT_236);
d1030 1
a1030 1
    stringBuffer.append(TEXT_237);
d1032 1
a1032 1
    stringBuffer.append(TEXT_238);
d1034 1
a1034 1
    stringBuffer.append(TEXT_239);
d1038 1
a1038 1
    stringBuffer.append(TEXT_240);
d1040 1
a1040 1
    stringBuffer.append(TEXT_241);
d1043 1
a1043 1
    stringBuffer.append(TEXT_242);
d1045 1
a1045 1
    stringBuffer.append(TEXT_243);
d1049 1
a1049 1
    stringBuffer.append(TEXT_244);
d1051 1
a1051 1
    stringBuffer.append(TEXT_245);
d1053 1
a1053 1
    stringBuffer.append(TEXT_246);
d1055 1
a1055 1
    stringBuffer.append(TEXT_247);
d1057 1
a1057 1
    stringBuffer.append(TEXT_248);
d1061 1
a1061 1
    stringBuffer.append(TEXT_249);
d1065 1
a1065 1
    stringBuffer.append(TEXT_250);
d1069 1
a1069 1
    stringBuffer.append(TEXT_251);
d1071 1
a1071 1
    stringBuffer.append(TEXT_252);
d1075 1
a1075 1
    stringBuffer.append(TEXT_253);
d1079 1
a1079 1
    stringBuffer.append(TEXT_254);
d1081 1
a1081 1
    stringBuffer.append(TEXT_255);
d1083 1
a1083 1
    stringBuffer.append(TEXT_256);
d1097 1
a1097 1
    stringBuffer.append(TEXT_257);
d1099 1
a1099 1
    stringBuffer.append(TEXT_258);
d1101 1
a1101 1
    stringBuffer.append(TEXT_259);
d1105 1
a1105 1
    stringBuffer.append(TEXT_260);
d1109 1
a1109 1
    stringBuffer.append(TEXT_261);
d1113 1
a1113 1
    stringBuffer.append(TEXT_262);
d1118 1
a1118 1
    stringBuffer.append(TEXT_263);
d1120 1
a1120 1
    stringBuffer.append(TEXT_264);
d1124 1
a1124 1
    stringBuffer.append(TEXT_265);
d1131 1
a1131 1
    stringBuffer.append(TEXT_266);
d1133 1
a1133 1
    stringBuffer.append(TEXT_267);
@


1.20
log
@Default label text should be displayed instead of the "null" string when the corresponding feature is not set;
It should be possible to unset the value of a feature using a diagram label;
Fixed compilation errors when a label is not feature-based
@
text
@d56 105
a160 105
  protected final String TEXT_36 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void createEditPolicies() {";
  protected final String TEXT_37 = NL;
  protected final String TEXT_38 = "\t\tinstallEditPolicy(";
  protected final String TEXT_39 = ".DIRECT_EDIT_ROLE," + NL + "\t\t\t\tnew ";
  protected final String TEXT_40 = "() {" + NL + "\t\t\t\t\tprotected void showCurrentEditValue(";
  protected final String TEXT_41 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tgetLabel().setText(value);" + NL + "\t\t\t\t\t}";
  protected final String TEXT_42 = NL;
  protected final String TEXT_43 = "\t\t\t\t\tprotected ";
  protected final String TEXT_44 = " getDirectEditCommand(";
  protected final String TEXT_45 = " request) {";
  protected final String TEXT_46 = NL + "\t\t\t\t\t\treturn ";
  protected final String TEXT_47 = ".INSTANCE;";
  protected final String TEXT_48 = NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_49 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;";
  protected final String TEXT_50 = NL + "\t\t\t\t\t\tif (value.length() == 0) {" + NL + "\t\t\t\t\t\t\tparseResult = new Object[] { null };" + NL + "\t\t\t\t\t\t} else {";
  protected final String TEXT_51 = NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_52 = "(";
  protected final String TEXT_53 = ").parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_54 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_55 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_56 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_57 = NL + "\t\t\t\t\t\t}";
  protected final String TEXT_58 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_59 = " editingDomain = ";
  protected final String TEXT_60 = ".getEditingDomain(";
  protected final String TEXT_61 = ".getDiagram().getElement());" + NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_62 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_63 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_64 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_65 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_66 = " createDomainModelCommand(";
  protected final String TEXT_67 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_68 = " element = ";
  protected final String TEXT_69 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_70 = " result = new ";
  protected final String TEXT_71 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_72 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_73 = " ";
  protected final String TEXT_74 = "feature = (";
  protected final String TEXT_75 = ") ";
  protected final String TEXT_76 = ".eINSTANCE.get";
  protected final String TEXT_77 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_78 = ".parseValue(feature, values[";
  protected final String TEXT_79 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_80 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_81 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_82 = " ";
  protected final String TEXT_83 = "values = new ";
  protected final String TEXT_84 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_85 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_86 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tif (valueToSet != null) {" + NL + "\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_87 = ".create(editingDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_88 = NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_89 = ".create(editingDomain, element, feature, valueToSet == null ? ";
  protected final String TEXT_90 = ".UNSET_VALUE : valueToSet));";
  protected final String TEXT_91 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_92 = NL + "\t\t\t\t});";
  protected final String TEXT_93 = NL;
  protected final String TEXT_94 = NL + "\t\tinstallEditPolicy(\"";
  protected final String TEXT_95 = "\", new ";
  protected final String TEXT_96 = "()); //$NON-NLS-1$";
  protected final String TEXT_97 = NL;
  protected final String TEXT_98 = NL + "\t\tinstallEditPolicy(";
  protected final String TEXT_99 = ".OPEN_ROLE";
  protected final String TEXT_100 = " + \"";
  protected final String TEXT_101 = "\" ";
  protected final String TEXT_102 = ", new ";
  protected final String TEXT_103 = "());";
  protected final String TEXT_104 = NL + "\t}" + NL;
  protected final String TEXT_105 = NL;
  protected final String TEXT_106 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_107 = " req) {";
  protected final String TEXT_108 = NL + "\t\tif (";
  protected final String TEXT_109 = ".REQ_DIRECT_EDIT.equals(req.getType())) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t\treturn;" + NL + "\t\t}";
  protected final String TEXT_110 = NL;
  protected final String TEXT_111 = "if (";
  protected final String TEXT_112 = ".REQ_OPEN.equals(req.getType())) {" + NL + "\t";
  protected final String TEXT_113 = " command = getCommand(req);" + NL + "\tif (command != null && command.canExecute()) {" + NL + "\t\tgetViewer().getEditDomain().getCommandStack().execute(command);" + NL + "\t}" + NL + "\treturn;" + NL + "}" + NL + "\t\tsuper.performRequest(req);" + NL + "\t}";
  protected final String TEXT_114 = NL;
  protected final String TEXT_115 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_116 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_117 = "(this, ";
  protected final String TEXT_118 = ".class, new ";
  protected final String TEXT_119 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_120 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_121 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\t";
  protected final String TEXT_122 = " zoomManager = (";
  protected final String TEXT_123 = ") getViewer().getProperty(";
  protected final String TEXT_124 = ".class.toString());" + NL + "\t\t\t\t\tdouble zoomLevel = zoomManager == null ? 1.0 : zoomManager.getZoom();" + NL + "\t\t\t\t\tif (zoomLevel > 1.0 && getLabel().getFont() != null) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_125 = "[] datas = getLabel().getFont().getFontData();" + NL + "\t\t\t\t\t\tfor(int i = 0; i < datas.length; i++) {" + NL + "\t\t\t\t\t\t\tdatas[i].height *= zoomLevel;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal ";
  protected final String TEXT_126 = " font = new ";
  protected final String TEXT_127 = "(getLabel().getFont().getDevice(), datas);" + NL + "\t\t\t\t\t\tcelleditor.getControl().setFont(font);" + NL + "\t\t\t\t\t\tcelleditor.getControl().addDisposeListener(new ";
  protected final String TEXT_128 = "() {" + NL + "\t\t\t\t\t\t\tpublic void widgetDisposed(";
  protected final String TEXT_129 = " e) {" + NL + "\t\t\t\t\t\t\t\tfont.dispose();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t});" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tint avr = ";
  protected final String TEXT_130 = ".getFontMetrics(celleditor.getControl().getFont()).getAverageCharWidth();" + NL + "\t\t\t\t\trect.setSize(new ";
  protected final String TEXT_131 = "(celleditor.getControl().computeSize(";
  protected final String TEXT_132 = ".DEFAULT, ";
  protected final String TEXT_133 = ".DEFAULT)).expand(avr * 2, 0));" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_134 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_135 = NL;
  protected final String TEXT_136 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String VIEW_PATTERN = \"";
  protected final String TEXT_137 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String EDIT_PATTERN = \"";
  protected final String TEXT_138 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_139 = " element = ";
  protected final String TEXT_140 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\tString result = buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t\tif (result == null || result.length() == 0) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn result;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
d162 126
a287 124
  protected final String TEXT_142 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn \"\";\t//$NON-NLS-1$" + NL + "\t\t}" + NL + "\t\tString result = buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t\tif (result == null) {" + NL + "\t\t\treturn \"\";\t//$NON-NLS-1$" + NL + "\t\t}" + NL + "\t\treturn result;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static String buildTextByPattern(";
  protected final String TEXT_143 = " element, String pattern) {";
  protected final String TEXT_144 = NL + "\t\treturn ";
  protected final String TEXT_145 = ".format(pattern, new Object[] {";
  protected final String TEXT_146 = NL + "\t\t\tnew ";
  protected final String TEXT_147 = "(";
  protected final String TEXT_148 = ")";
  protected final String TEXT_149 = " == null ? \"\" : ";
  protected final String TEXT_150 = ",";
  protected final String TEXT_151 = NL + "\t\t});";
  protected final String TEXT_152 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn null;";
  protected final String TEXT_153 = NL + "\t}";
  protected final String TEXT_154 = NL;
  protected final String TEXT_155 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_156 = NL + "\t\t";
  protected final String TEXT_157 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_158 = ") ";
  protected final String TEXT_159 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_160 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_161 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_162 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_163 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_164 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_165 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_166 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_167 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_168 = "\t" + NL + "\t}";
  protected final String TEXT_169 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_170 = " createdFont;";
  protected final String TEXT_171 = "\t";
  protected final String TEXT_172 = NL;
  protected final String TEXT_173 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_174 = " style = (";
  protected final String TEXT_175 = ")  ";
  protected final String TEXT_176 = ".getStyle(";
  protected final String TEXT_177 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_178 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_179 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_180 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_181 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_182 = " getLabelIcon() {";
  protected final String TEXT_183 = NL + "\t\t";
  protected final String TEXT_184 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_185 = " imageDescriptor = ";
  protected final String TEXT_186 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_187 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_188 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_189 = ") ? (";
  protected final String TEXT_190 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_191 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_192 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_193 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_194 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_195 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_196 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_197 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_198 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_199 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_200 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_201 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_202 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_203 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_204 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_205 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_206 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_207 = ".eINSTANCE.get";
  protected final String TEXT_208 = "(), labelRefresher);";
  protected final String TEXT_209 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_210 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_211 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_212 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_213 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_214 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_215 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_216 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_217 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_218 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_219 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_220 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_221 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_222 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_223 = ".eINSTANCE.get";
  protected final String TEXT_224 = "(), labelRefresher);";
  protected final String TEXT_225 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_226 = ".Refresher labelRefresher = new ";
  protected final String TEXT_227 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_228 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_229 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_230 = ".Refresher fontRefresher = new ";
  protected final String TEXT_231 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_232 = NL;
  protected final String TEXT_233 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_234 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_235 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_236 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_237 = " createLabel() {";
  protected final String TEXT_238 = NL + "\t\treturn new ";
  protected final String TEXT_239 = "();";
  protected final String TEXT_240 = NL + "\t\treturn ";
  protected final String TEXT_241 = ";";
  protected final String TEXT_242 = NL + "\t\treturn new ";
  protected final String TEXT_243 = "();";
  protected final String TEXT_244 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_245 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_246 = " label = createLabel();";
  protected final String TEXT_247 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_248 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_249 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_250 = NL + NL + "\t/**";
  protected final String TEXT_251 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_252 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_253 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_254 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_255 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_256 = "(";
  protected final String TEXT_257 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_258 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_259 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_260 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_261 = NL;
  protected final String TEXT_262 = NL;
  protected final String TEXT_263 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_264 = NL + "}";
  protected final String TEXT_265 = NL;
d444 8
a456 3
    stringBuffer.append(TEXT_37);
    stringBuffer.append(TEXT_38);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.EditPolicy"));
a457 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editpolicies.DirectEditPolicy"));
d459 1
a459 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.requests.DirectEditRequest"));
d461 1
d463 1
d465 2
d468 1
a468 1
    stringBuffer.append(TEXT_44);
d470 1
a470 1
    stringBuffer.append(TEXT_45);
d474 1
a474 1
    stringBuffer.append(TEXT_46);
d476 1
a476 1
    stringBuffer.append(TEXT_47);
d482 1
a482 1
    stringBuffer.append(TEXT_48);
d484 1
a484 1
    stringBuffer.append(TEXT_49);
d488 1
a488 1
    stringBuffer.append(TEXT_50);
d492 1
a492 1
    stringBuffer.append(TEXT_51);
d494 1
a494 1
    stringBuffer.append(TEXT_52);
d496 1
a496 1
    stringBuffer.append(TEXT_53);
d498 1
a498 1
    stringBuffer.append(TEXT_54);
d500 1
a500 1
    stringBuffer.append(TEXT_55);
d502 1
a502 1
    stringBuffer.append(TEXT_56);
d506 1
a506 1
    stringBuffer.append(TEXT_57);
d510 1
a510 1
    stringBuffer.append(TEXT_58);
d512 1
a512 1
    stringBuffer.append(TEXT_59);
d514 1
a514 1
    stringBuffer.append(TEXT_60);
d516 1
a516 1
    stringBuffer.append(TEXT_61);
d518 1
a518 1
    stringBuffer.append(TEXT_62);
d520 1
a520 1
    stringBuffer.append(TEXT_63);
d522 1
a522 1
    stringBuffer.append(TEXT_64);
d524 1
a524 1
    stringBuffer.append(TEXT_65);
d526 1
a526 1
    stringBuffer.append(TEXT_66);
d528 1
a528 1
    stringBuffer.append(TEXT_67);
d530 1
a530 1
    stringBuffer.append(TEXT_68);
d532 1
a532 1
    stringBuffer.append(TEXT_69);
d534 1
a534 1
    stringBuffer.append(TEXT_70);
d536 1
a536 1
    stringBuffer.append(TEXT_71);
d543 1
a543 1
    stringBuffer.append(TEXT_72);
d546 1
a546 1
    stringBuffer.append(TEXT_73);
d548 1
a548 1
    stringBuffer.append(TEXT_74);
d550 1
a550 1
    stringBuffer.append(TEXT_75);
d552 1
a552 1
    stringBuffer.append(TEXT_76);
d554 1
a554 1
    stringBuffer.append(TEXT_77);
d556 1
a556 1
    stringBuffer.append(TEXT_78);
d558 1
a558 1
    stringBuffer.append(TEXT_79);
d560 1
a560 1
    stringBuffer.append(TEXT_80);
d564 1
a564 1
    stringBuffer.append(TEXT_81);
d567 1
a567 1
    stringBuffer.append(TEXT_82);
d569 1
a569 1
    stringBuffer.append(TEXT_83);
d571 1
a571 1
    stringBuffer.append(TEXT_84);
d573 1
a573 1
    stringBuffer.append(TEXT_85);
d575 1
a575 1
    stringBuffer.append(TEXT_86);
d577 1
a577 1
    stringBuffer.append(TEXT_87);
d581 1
a581 1
    stringBuffer.append(TEXT_88);
d583 1
a583 1
    stringBuffer.append(TEXT_89);
d585 1
a585 1
    stringBuffer.append(TEXT_90);
d592 1
a592 1
    stringBuffer.append(TEXT_91);
d596 1
a596 1
    stringBuffer.append(TEXT_92);
d602 1
a602 1
    stringBuffer.append(TEXT_93);
d606 1
a606 1
    stringBuffer.append(TEXT_94);
d608 1
a608 1
    stringBuffer.append(TEXT_95);
d610 1
a610 1
    stringBuffer.append(TEXT_96);
d612 1
a612 1
    stringBuffer.append(TEXT_97);
d620 1
a620 1
    stringBuffer.append(TEXT_98);
d622 1
a622 1
    stringBuffer.append(TEXT_99);
d624 1
a624 1
    stringBuffer.append(TEXT_100);
d626 1
a626 1
    stringBuffer.append(TEXT_101);
d628 1
a628 1
    stringBuffer.append(TEXT_102);
d630 1
a630 1
    stringBuffer.append(TEXT_103);
a635 2
    stringBuffer.append(TEXT_104);
    stringBuffer.append(TEXT_105);
d637 2
d640 1
a640 1
    stringBuffer.append(TEXT_107);
d644 1
a644 1
    stringBuffer.append(TEXT_108);
d646 1
a646 1
    stringBuffer.append(TEXT_109);
d650 2
a651 2
    stringBuffer.append(TEXT_110);
    stringBuffer.append(TEXT_111);
d653 1
a653 1
    stringBuffer.append(TEXT_112);
d655 1
a655 1
    stringBuffer.append(TEXT_113);
a658 3
    stringBuffer.append(TEXT_114);
    stringBuffer.append(TEXT_115);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.DirectEditManager"));
d660 1
a661 2
    stringBuffer.append(TEXT_117);
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.TextCellEditor"));
d663 1
a663 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.CellEditorLocator"));
d665 1
a665 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.CellEditor"));
d667 1
a667 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.geometry.Rectangle"));
d669 1
a669 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editparts.ZoomManager"));
d671 1
a671 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editparts.ZoomManager"));
d675 4
d680 1
a680 1
    stringBuffer.append(TEXT_125);
d682 1
a682 1
    stringBuffer.append(TEXT_126);
d684 1
a684 1
    stringBuffer.append(TEXT_127);
d686 1
a686 1
    stringBuffer.append(TEXT_128);
d688 1
a688 1
    stringBuffer.append(TEXT_129);
d690 1
a690 1
    stringBuffer.append(TEXT_130);
d692 1
a692 1
    stringBuffer.append(TEXT_131);
d694 1
a694 1
    stringBuffer.append(TEXT_132);
d696 1
a696 1
    stringBuffer.append(TEXT_133);
d700 2
a701 2
    stringBuffer.append(TEXT_134);
    stringBuffer.append(TEXT_135);
d735 1
a735 1
    stringBuffer.append(TEXT_136);
d737 1
a737 1
    stringBuffer.append(TEXT_137);
a738 4
    stringBuffer.append(TEXT_138);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_139);
    stringBuffer.append(resolvedSemanticElement);
d746 4
d754 1
a754 1
    stringBuffer.append(TEXT_144);
d756 1
a756 1
    stringBuffer.append(TEXT_145);
d762 1
a762 1
    stringBuffer.append(TEXT_146);
d764 1
a764 1
    stringBuffer.append(TEXT_147);
d770 1
a770 1
    stringBuffer.append(TEXT_148);
d775 1
a775 1
    stringBuffer.append(TEXT_149);
d781 1
a781 1
    stringBuffer.append(TEXT_150);
d786 1
a786 1
    stringBuffer.append(TEXT_151);
d790 1
a790 1
    stringBuffer.append(TEXT_152);
d794 2
a795 2
    stringBuffer.append(TEXT_153);
    stringBuffer.append(TEXT_154);
d803 1
a803 1
    stringBuffer.append(TEXT_155);
d807 1
a807 1
    stringBuffer.append(TEXT_156);
d809 1
a809 1
    stringBuffer.append(TEXT_157);
d811 1
a811 1
    stringBuffer.append(TEXT_158);
d813 1
a813 1
    stringBuffer.append(TEXT_159);
d815 1
a815 1
    stringBuffer.append(TEXT_160);
a816 4
    stringBuffer.append(TEXT_161);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
    stringBuffer.append(TEXT_162);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
d820 1
a820 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
d822 1
a822 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.FontData"));
d826 4
d833 1
a833 1
    stringBuffer.append(TEXT_168);
d837 1
a837 1
    stringBuffer.append(TEXT_169);
d839 1
a839 1
    stringBuffer.append(TEXT_170);
a842 2
    stringBuffer.append(TEXT_171);
    stringBuffer.append(TEXT_172);
a843 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
d845 1
a846 2
    stringBuffer.append(TEXT_175);
    stringBuffer.append(primaryView);
d848 1
a848 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d850 1
a850 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d852 1
a852 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d858 4
d863 1
a863 1
    stringBuffer.append(TEXT_182);
d867 1
a867 1
    stringBuffer.append(TEXT_183);
d869 1
a869 1
    stringBuffer.append(TEXT_184);
d871 1
a871 1
    stringBuffer.append(TEXT_185);
d873 1
a873 1
    stringBuffer.append(TEXT_186);
a876 4
    stringBuffer.append(TEXT_187);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_188);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d880 1
a880 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d882 1
a882 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d888 1
a888 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d890 1
a890 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d898 4
a904 4
    stringBuffer.append(TEXT_200);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_201);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d912 4
d923 1
a923 1
    stringBuffer.append(TEXT_206);
d925 1
a925 1
    stringBuffer.append(TEXT_207);
d927 1
a927 1
    stringBuffer.append(TEXT_208);
d932 1
a932 1
    stringBuffer.append(TEXT_209);
a933 4
    stringBuffer.append(TEXT_210);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_211);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d941 4
a947 4
    stringBuffer.append(TEXT_216);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_217);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d955 4
d966 1
a966 1
    stringBuffer.append(TEXT_222);
d968 1
a968 1
    stringBuffer.append(TEXT_223);
d970 1
a970 1
    stringBuffer.append(TEXT_224);
a974 4
    stringBuffer.append(TEXT_225);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_226);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
d984 4
d991 1
a991 1
    stringBuffer.append(TEXT_232);
d1020 1
a1020 1
    stringBuffer.append(TEXT_233);
d1022 1
a1022 1
    stringBuffer.append(TEXT_234);
d1024 1
a1024 1
    stringBuffer.append(TEXT_235);
d1026 1
a1026 1
    stringBuffer.append(TEXT_236);
d1028 1
a1028 1
    stringBuffer.append(TEXT_237);
d1032 1
a1032 1
    stringBuffer.append(TEXT_238);
d1034 1
a1034 1
    stringBuffer.append(TEXT_239);
d1037 1
a1037 1
    stringBuffer.append(TEXT_240);
d1039 1
a1039 1
    stringBuffer.append(TEXT_241);
d1043 1
a1043 1
    stringBuffer.append(TEXT_242);
d1045 1
a1045 1
    stringBuffer.append(TEXT_243);
d1047 1
a1047 1
    stringBuffer.append(TEXT_244);
d1049 1
a1049 1
    stringBuffer.append(TEXT_245);
d1051 1
a1051 1
    stringBuffer.append(TEXT_246);
d1055 1
a1055 1
    stringBuffer.append(TEXT_247);
d1059 1
a1059 1
    stringBuffer.append(TEXT_248);
d1063 1
a1063 1
    stringBuffer.append(TEXT_249);
d1065 1
a1065 1
    stringBuffer.append(TEXT_250);
d1069 1
a1069 1
    stringBuffer.append(TEXT_251);
d1073 1
a1073 1
    stringBuffer.append(TEXT_252);
d1075 1
a1075 1
    stringBuffer.append(TEXT_253);
d1077 1
a1077 1
    stringBuffer.append(TEXT_254);
d1091 1
a1091 1
    stringBuffer.append(TEXT_255);
d1093 1
a1093 1
    stringBuffer.append(TEXT_256);
d1095 1
a1095 1
    stringBuffer.append(TEXT_257);
d1099 1
a1099 1
    stringBuffer.append(TEXT_258);
d1103 1
a1103 1
    stringBuffer.append(TEXT_259);
d1107 1
a1107 1
    stringBuffer.append(TEXT_260);
d1112 1
a1112 1
    stringBuffer.append(TEXT_261);
d1114 1
a1114 1
    stringBuffer.append(TEXT_262);
d1118 1
a1118 1
    stringBuffer.append(TEXT_263);
d1125 1
a1125 1
    stringBuffer.append(TEXT_264);
d1127 1
a1127 1
    stringBuffer.append(TEXT_265);
@


1.19
log
@Generate support for Navigator
@
text
@d65 221
a285 213
  protected final String TEXT_45 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_46 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_47 = "(";
  protected final String TEXT_48 = ").parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_49 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_50 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_51 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_52 = " editingDomain = ";
  protected final String TEXT_53 = ".getEditingDomain(";
  protected final String TEXT_54 = ".getDiagram().getElement());";
  protected final String TEXT_55 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_56 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_57 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_58 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_59 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_60 = " createDomainModelCommand(";
  protected final String TEXT_61 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_62 = " element = ";
  protected final String TEXT_63 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_64 = " result = new ";
  protected final String TEXT_65 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_66 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_67 = " ";
  protected final String TEXT_68 = "feature = (";
  protected final String TEXT_69 = ") ";
  protected final String TEXT_70 = ".eINSTANCE.get";
  protected final String TEXT_71 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_72 = ".parseValue(feature, values[";
  protected final String TEXT_73 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_74 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_75 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_76 = " ";
  protected final String TEXT_77 = "values = new ";
  protected final String TEXT_78 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_79 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_80 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_81 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_82 = NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_83 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_84 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_85 = NL + "\t\t\t\t});";
  protected final String TEXT_86 = NL;
  protected final String TEXT_87 = NL + "\t\tinstallEditPolicy(\"";
  protected final String TEXT_88 = "\", new ";
  protected final String TEXT_89 = "()); //$NON-NLS-1$";
  protected final String TEXT_90 = NL;
  protected final String TEXT_91 = NL + "\t\tinstallEditPolicy(";
  protected final String TEXT_92 = ".OPEN_ROLE";
  protected final String TEXT_93 = " + \"";
  protected final String TEXT_94 = "\" ";
  protected final String TEXT_95 = ", new ";
  protected final String TEXT_96 = "());";
  protected final String TEXT_97 = NL + "\t}" + NL;
  protected final String TEXT_98 = NL;
  protected final String TEXT_99 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_100 = " req) {";
  protected final String TEXT_101 = NL + "\t\tif (";
  protected final String TEXT_102 = ".REQ_DIRECT_EDIT.equals(req.getType())) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t\treturn;" + NL + "\t\t}";
  protected final String TEXT_103 = NL;
  protected final String TEXT_104 = "if (";
  protected final String TEXT_105 = ".REQ_OPEN.equals(req.getType())) {" + NL + "\t";
  protected final String TEXT_106 = " command = getCommand(req);" + NL + "\tif (command != null && command.canExecute()) {" + NL + "\t\tgetViewer().getEditDomain().getCommandStack().execute(command);" + NL + "\t}" + NL + "\treturn;" + NL + "}" + NL + "\t\tsuper.performRequest(req);" + NL + "\t}";
  protected final String TEXT_107 = NL;
  protected final String TEXT_108 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_109 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_110 = "(this, ";
  protected final String TEXT_111 = ".class, new ";
  protected final String TEXT_112 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_113 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_114 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\t";
  protected final String TEXT_115 = " zoomManager = (";
  protected final String TEXT_116 = ") getViewer().getProperty(";
  protected final String TEXT_117 = ".class.toString());" + NL + "\t\t\t\t\tdouble zoomLevel = zoomManager == null ? 1.0 : zoomManager.getZoom();" + NL + "\t\t\t\t\tif (zoomLevel > 1.0 && getLabel().getFont() != null) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_118 = "[] datas = getLabel().getFont().getFontData();" + NL + "\t\t\t\t\t\tfor(int i = 0; i < datas.length; i++) {" + NL + "\t\t\t\t\t\t\tdatas[i].height *= zoomLevel;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal ";
  protected final String TEXT_119 = " font = new ";
  protected final String TEXT_120 = "(getLabel().getFont().getDevice(), datas);" + NL + "\t\t\t\t\t\tcelleditor.getControl().setFont(font);" + NL + "\t\t\t\t\t\tcelleditor.getControl().addDisposeListener(new ";
  protected final String TEXT_121 = "() {" + NL + "\t\t\t\t\t\t\tpublic void widgetDisposed(";
  protected final String TEXT_122 = " e) {" + NL + "\t\t\t\t\t\t\t\tfont.dispose();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t});" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tint avr = ";
  protected final String TEXT_123 = ".getFontMetrics(celleditor.getControl().getFont()).getAverageCharWidth();" + NL + "\t\t\t\t\trect.setSize(new ";
  protected final String TEXT_124 = "(celleditor.getControl().computeSize(";
  protected final String TEXT_125 = ".DEFAULT, ";
  protected final String TEXT_126 = ".DEFAULT)).expand(avr * 2, 0));" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_127 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_128 = NL;
  protected final String TEXT_129 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String VIEW_PATTERN = \"";
  protected final String TEXT_130 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String EDIT_PATTERN = \"";
  protected final String TEXT_131 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_132 = " element = ";
  protected final String TEXT_133 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\tString result = buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t\tif (result == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn result;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_134 = " element = ";
  protected final String TEXT_135 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\tString result = buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t\tif (result == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn result;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static String buildTextByPattern(";
  protected final String TEXT_136 = " element, String pattern) {";
  protected final String TEXT_137 = NL + "\t\treturn ";
  protected final String TEXT_138 = ".format(pattern, new Object[] {";
  protected final String TEXT_139 = NL + "\t\t\tnew ";
  protected final String TEXT_140 = "(";
  protected final String TEXT_141 = ")";
  protected final String TEXT_142 = ",";
  protected final String TEXT_143 = NL + "\t\t});";
  protected final String TEXT_144 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn null;";
  protected final String TEXT_145 = NL + "\t}";
  protected final String TEXT_146 = NL;
  protected final String TEXT_147 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_148 = NL + "\t\t";
  protected final String TEXT_149 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_150 = ") ";
  protected final String TEXT_151 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_152 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_153 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_154 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_155 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_156 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_157 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_158 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_159 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_160 = "\t" + NL + "\t}";
  protected final String TEXT_161 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_162 = " createdFont;";
  protected final String TEXT_163 = "\t";
  protected final String TEXT_164 = NL;
  protected final String TEXT_165 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_166 = " style = (";
  protected final String TEXT_167 = ")  ";
  protected final String TEXT_168 = ".getStyle(";
  protected final String TEXT_169 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_170 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_171 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_172 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_173 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_174 = " getLabelIcon() {";
  protected final String TEXT_175 = NL + "\t\t";
  protected final String TEXT_176 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_177 = " imageDescriptor = ";
  protected final String TEXT_178 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_179 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_180 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_181 = ") ? (";
  protected final String TEXT_182 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_183 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_184 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_185 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_186 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_187 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_188 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_189 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_190 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_191 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_192 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_193 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_194 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_195 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_196 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_197 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_198 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_199 = ".eINSTANCE.get";
  protected final String TEXT_200 = "(), labelRefresher);";
  protected final String TEXT_201 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_202 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_203 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_204 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_205 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_206 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_207 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_208 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_209 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_210 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_211 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_212 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_213 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_214 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_215 = ".eINSTANCE.get";
  protected final String TEXT_216 = "(), labelRefresher);";
  protected final String TEXT_217 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_218 = ".Refresher labelRefresher = new ";
  protected final String TEXT_219 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_220 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_221 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_222 = ".Refresher fontRefresher = new ";
  protected final String TEXT_223 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_224 = NL;
  protected final String TEXT_225 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_226 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_227 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_228 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_229 = " createLabel() {";
  protected final String TEXT_230 = NL + "\t\treturn new ";
  protected final String TEXT_231 = "();";
  protected final String TEXT_232 = NL + "\t\treturn ";
  protected final String TEXT_233 = ";";
  protected final String TEXT_234 = NL + "\t\treturn new ";
  protected final String TEXT_235 = "();";
  protected final String TEXT_236 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_237 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_238 = " label = createLabel();";
  protected final String TEXT_239 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_240 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_241 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_242 = NL + NL + "\t/**";
  protected final String TEXT_243 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_244 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_245 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_246 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_247 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_248 = "(";
  protected final String TEXT_249 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_250 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_251 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_252 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_253 = NL;
  protected final String TEXT_254 = NL;
  protected final String TEXT_255 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_256 = NL + "}";
  protected final String TEXT_257 = NL;
d461 4
a465 2
    stringBuffer.append(TEXT_46);
    stringBuffer.append(importManager.getImportedName("java.text.MessageFormat"));
d467 5
a471 1
    stringBuffer.append(editPatternCode);
d475 3
a477 1
    stringBuffer.append(importManager.getImportedName("java.text.ParseException"));
d479 3
a481 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
d483 1
a483 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.transaction.TransactionalEditingDomain"));
d485 1
a485 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.transaction.util.TransactionUtil"));
d487 1
a487 1
    stringBuffer.append(primaryView);
d489 4
d494 5
a498 3
if (labelModelFacet instanceof FeatureLabelModelFacet) {
	FeatureLabelModelFacet featureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	List metaFeatures = featureLabelModelFacet.getMetaFeatures();
d500 7
a506 1
    stringBuffer.append(TEXT_55);
d508 1
a508 1
    stringBuffer.append(TEXT_56);
d510 1
a510 1
    stringBuffer.append(TEXT_57);
d512 1
a512 1
    stringBuffer.append(TEXT_58);
d514 1
a514 1
    stringBuffer.append(TEXT_59);
d516 1
a516 1
    stringBuffer.append(TEXT_60);
d518 1
a518 1
    stringBuffer.append(TEXT_61);
d520 1
a520 1
    stringBuffer.append(TEXT_62);
d522 1
a522 1
    stringBuffer.append(TEXT_63);
d524 1
a524 1
    stringBuffer.append(TEXT_64);
d526 1
a526 1
    stringBuffer.append(TEXT_65);
d533 1
a533 1
    stringBuffer.append(TEXT_66);
d536 1
a536 1
    stringBuffer.append(TEXT_67);
d538 1
a538 1
    stringBuffer.append(TEXT_68);
d540 1
a540 1
    stringBuffer.append(TEXT_69);
d542 1
a542 1
    stringBuffer.append(TEXT_70);
d544 1
a544 1
    stringBuffer.append(TEXT_71);
d546 1
a546 1
    stringBuffer.append(TEXT_72);
d548 1
a548 1
    stringBuffer.append(TEXT_73);
d550 1
a550 1
    stringBuffer.append(TEXT_74);
d554 1
a554 1
    stringBuffer.append(TEXT_75);
d557 1
a557 1
    stringBuffer.append(TEXT_76);
d559 1
a559 1
    stringBuffer.append(TEXT_77);
d561 1
a561 1
    stringBuffer.append(TEXT_78);
d563 1
a563 1
    stringBuffer.append(TEXT_79);
d565 1
a565 1
    stringBuffer.append(TEXT_80);
d567 1
a567 1
    stringBuffer.append(TEXT_81);
d571 3
a573 1
    stringBuffer.append(TEXT_82);
d575 1
a575 1
    stringBuffer.append(TEXT_83);
d582 1
a582 1
    stringBuffer.append(TEXT_84);
d586 1
a586 1
    stringBuffer.append(TEXT_85);
d592 1
a592 1
    stringBuffer.append(TEXT_86);
d596 1
a596 1
    stringBuffer.append(TEXT_87);
d598 1
a598 1
    stringBuffer.append(TEXT_88);
d600 1
a600 1
    stringBuffer.append(TEXT_89);
d602 1
a602 1
    stringBuffer.append(TEXT_90);
d610 1
a610 1
    stringBuffer.append(TEXT_91);
d612 1
a612 1
    stringBuffer.append(TEXT_92);
d614 1
a614 1
    stringBuffer.append(TEXT_93);
d616 1
a616 1
    stringBuffer.append(TEXT_94);
d618 1
a618 1
    stringBuffer.append(TEXT_95);
d620 1
a620 1
    stringBuffer.append(TEXT_96);
d626 3
a628 3
    stringBuffer.append(TEXT_97);
    stringBuffer.append(TEXT_98);
    stringBuffer.append(TEXT_99);
d630 1
a630 1
    stringBuffer.append(TEXT_100);
d634 1
a634 1
    stringBuffer.append(TEXT_101);
d636 1
a636 1
    stringBuffer.append(TEXT_102);
d640 2
a641 2
    stringBuffer.append(TEXT_103);
    stringBuffer.append(TEXT_104);
d643 1
a643 1
    stringBuffer.append(TEXT_105);
d645 1
a645 1
    stringBuffer.append(TEXT_106);
d649 2
a650 2
    stringBuffer.append(TEXT_107);
    stringBuffer.append(TEXT_108);
d652 1
a652 1
    stringBuffer.append(TEXT_109);
d654 1
a654 1
    stringBuffer.append(TEXT_110);
d656 1
a656 1
    stringBuffer.append(TEXT_111);
d658 1
a658 1
    stringBuffer.append(TEXT_112);
d660 1
a660 1
    stringBuffer.append(TEXT_113);
d662 1
a662 1
    stringBuffer.append(TEXT_114);
d664 1
a664 1
    stringBuffer.append(TEXT_115);
d666 1
a666 1
    stringBuffer.append(TEXT_116);
d668 1
a668 1
    stringBuffer.append(TEXT_117);
d670 1
a670 1
    stringBuffer.append(TEXT_118);
d672 1
a672 1
    stringBuffer.append(TEXT_119);
d674 1
a674 1
    stringBuffer.append(TEXT_120);
d676 1
a676 1
    stringBuffer.append(TEXT_121);
d678 1
a678 1
    stringBuffer.append(TEXT_122);
d680 1
a680 1
    stringBuffer.append(TEXT_123);
d682 1
a682 1
    stringBuffer.append(TEXT_124);
d684 1
a684 1
    stringBuffer.append(TEXT_125);
d686 1
a686 1
    stringBuffer.append(TEXT_126);
d690 2
a691 2
    stringBuffer.append(TEXT_127);
    stringBuffer.append(TEXT_128);
d725 1
a725 1
    stringBuffer.append(TEXT_129);
d727 1
a727 1
    stringBuffer.append(TEXT_130);
d729 1
a729 1
    stringBuffer.append(TEXT_131);
d731 1
a731 1
    stringBuffer.append(TEXT_132);
d733 1
a733 1
    stringBuffer.append(TEXT_133);
d735 1
a735 1
    stringBuffer.append(TEXT_134);
d737 1
a737 1
    stringBuffer.append(TEXT_135);
d739 1
a739 1
    stringBuffer.append(TEXT_136);
d744 1
a744 1
    stringBuffer.append(TEXT_137);
d746 1
a746 1
    stringBuffer.append(TEXT_138);
d752 1
a752 1
    stringBuffer.append(TEXT_139);
d754 1
a754 1
    stringBuffer.append(TEXT_140);
d760 6
a765 1
    stringBuffer.append(TEXT_141);
d767 2
d771 1
a771 1
    stringBuffer.append(TEXT_142);
d776 1
a776 1
    stringBuffer.append(TEXT_143);
d780 1
a780 1
    stringBuffer.append(TEXT_144);
d784 2
a785 2
    stringBuffer.append(TEXT_145);
    stringBuffer.append(TEXT_146);
d793 1
a793 1
    stringBuffer.append(TEXT_147);
d797 1
a797 1
    stringBuffer.append(TEXT_148);
d799 1
a799 1
    stringBuffer.append(TEXT_149);
d801 1
a801 1
    stringBuffer.append(TEXT_150);
d803 1
a803 1
    stringBuffer.append(TEXT_151);
d805 1
a805 1
    stringBuffer.append(TEXT_152);
d807 1
a807 1
    stringBuffer.append(TEXT_153);
d809 1
a809 1
    stringBuffer.append(TEXT_154);
d811 1
a811 1
    stringBuffer.append(TEXT_155);
d813 1
a813 1
    stringBuffer.append(TEXT_156);
d815 1
a815 1
    stringBuffer.append(TEXT_157);
d817 1
a817 1
    stringBuffer.append(TEXT_158);
d819 1
a819 1
    stringBuffer.append(TEXT_159);
d823 1
a823 1
    stringBuffer.append(TEXT_160);
d827 1
a827 1
    stringBuffer.append(TEXT_161);
d829 1
a829 1
    stringBuffer.append(TEXT_162);
d833 3
a835 3
    stringBuffer.append(TEXT_163);
    stringBuffer.append(TEXT_164);
    stringBuffer.append(TEXT_165);
d837 1
a837 1
    stringBuffer.append(TEXT_166);
d839 1
a839 1
    stringBuffer.append(TEXT_167);
d841 1
a841 1
    stringBuffer.append(TEXT_168);
d843 1
a843 1
    stringBuffer.append(TEXT_169);
d845 1
a845 1
    stringBuffer.append(TEXT_170);
d847 1
a847 1
    stringBuffer.append(TEXT_171);
d849 1
a849 1
    stringBuffer.append(TEXT_172);
d851 1
a851 1
    stringBuffer.append(TEXT_173);
d853 1
a853 1
    stringBuffer.append(TEXT_174);
d857 1
a857 1
    stringBuffer.append(TEXT_175);
d859 1
a859 1
    stringBuffer.append(TEXT_176);
d861 1
a861 1
    stringBuffer.append(TEXT_177);
d863 1
a863 1
    stringBuffer.append(TEXT_178);
d867 1
a867 1
    stringBuffer.append(TEXT_179);
d869 1
a869 1
    stringBuffer.append(TEXT_180);
d871 1
a871 1
    stringBuffer.append(TEXT_181);
d873 1
a873 1
    stringBuffer.append(TEXT_182);
d875 1
a875 1
    stringBuffer.append(TEXT_183);
d877 1
a877 1
    stringBuffer.append(TEXT_184);
d879 1
a879 1
    stringBuffer.append(TEXT_185);
d881 1
a881 1
    stringBuffer.append(TEXT_186);
d883 1
a883 1
    stringBuffer.append(TEXT_187);
d885 1
a885 1
    stringBuffer.append(TEXT_188);
d887 1
a887 1
    stringBuffer.append(TEXT_189);
d889 1
a889 1
    stringBuffer.append(TEXT_190);
d891 1
a891 1
    stringBuffer.append(TEXT_191);
d895 1
a895 1
    stringBuffer.append(TEXT_192);
d897 1
a897 1
    stringBuffer.append(TEXT_193);
d899 1
a899 1
    stringBuffer.append(TEXT_194);
d901 1
a901 1
    stringBuffer.append(TEXT_195);
d903 1
a903 1
    stringBuffer.append(TEXT_196);
d905 1
a905 1
    stringBuffer.append(TEXT_197);
d913 1
a913 1
    stringBuffer.append(TEXT_198);
d915 1
a915 1
    stringBuffer.append(TEXT_199);
d917 1
a917 1
    stringBuffer.append(TEXT_200);
d922 1
a922 1
    stringBuffer.append(TEXT_201);
d924 1
a924 1
    stringBuffer.append(TEXT_202);
d926 1
a926 1
    stringBuffer.append(TEXT_203);
d928 1
a928 1
    stringBuffer.append(TEXT_204);
d930 1
a930 1
    stringBuffer.append(TEXT_205);
d932 1
a932 1
    stringBuffer.append(TEXT_206);
d934 1
a934 1
    stringBuffer.append(TEXT_207);
d938 1
a938 1
    stringBuffer.append(TEXT_208);
d940 1
a940 1
    stringBuffer.append(TEXT_209);
d942 1
a942 1
    stringBuffer.append(TEXT_210);
d944 1
a944 1
    stringBuffer.append(TEXT_211);
d946 1
a946 1
    stringBuffer.append(TEXT_212);
d948 1
a948 1
    stringBuffer.append(TEXT_213);
d956 1
a956 1
    stringBuffer.append(TEXT_214);
d958 1
a958 1
    stringBuffer.append(TEXT_215);
d960 1
a960 1
    stringBuffer.append(TEXT_216);
d965 1
a965 1
    stringBuffer.append(TEXT_217);
d967 1
a967 1
    stringBuffer.append(TEXT_218);
d969 1
a969 1
    stringBuffer.append(TEXT_219);
d971 1
a971 1
    stringBuffer.append(TEXT_220);
d973 1
a973 1
    stringBuffer.append(TEXT_221);
d975 1
a975 1
    stringBuffer.append(TEXT_222);
d977 1
a977 1
    stringBuffer.append(TEXT_223);
d981 1
a981 1
    stringBuffer.append(TEXT_224);
d1010 1
a1010 1
    stringBuffer.append(TEXT_225);
d1012 1
a1012 1
    stringBuffer.append(TEXT_226);
d1014 1
a1014 1
    stringBuffer.append(TEXT_227);
d1016 1
a1016 1
    stringBuffer.append(TEXT_228);
d1018 1
a1018 1
    stringBuffer.append(TEXT_229);
d1022 1
a1022 1
    stringBuffer.append(TEXT_230);
d1024 1
a1024 1
    stringBuffer.append(TEXT_231);
d1027 1
a1027 1
    stringBuffer.append(TEXT_232);
d1029 1
a1029 1
    stringBuffer.append(TEXT_233);
d1033 1
a1033 1
    stringBuffer.append(TEXT_234);
d1035 1
a1035 1
    stringBuffer.append(TEXT_235);
d1037 1
a1037 1
    stringBuffer.append(TEXT_236);
d1039 1
a1039 1
    stringBuffer.append(TEXT_237);
d1041 1
a1041 1
    stringBuffer.append(TEXT_238);
d1045 1
a1045 1
    stringBuffer.append(TEXT_239);
d1049 1
a1049 1
    stringBuffer.append(TEXT_240);
d1053 1
a1053 1
    stringBuffer.append(TEXT_241);
d1055 1
a1055 1
    stringBuffer.append(TEXT_242);
d1059 1
a1059 1
    stringBuffer.append(TEXT_243);
d1063 1
a1063 1
    stringBuffer.append(TEXT_244);
d1065 1
a1065 1
    stringBuffer.append(TEXT_245);
d1067 1
a1067 1
    stringBuffer.append(TEXT_246);
d1081 1
a1081 1
    stringBuffer.append(TEXT_247);
d1083 1
a1083 1
    stringBuffer.append(TEXT_248);
d1085 1
a1085 1
    stringBuffer.append(TEXT_249);
d1089 1
a1089 1
    stringBuffer.append(TEXT_250);
d1093 1
a1093 1
    stringBuffer.append(TEXT_251);
d1097 1
a1097 1
    stringBuffer.append(TEXT_252);
d1102 1
a1102 1
    stringBuffer.append(TEXT_253);
d1104 1
a1104 1
    stringBuffer.append(TEXT_254);
d1108 1
a1108 1
    stringBuffer.append(TEXT_255);
d1115 1
a1115 1
    stringBuffer.append(TEXT_256);
d1117 1
a1117 1
    stringBuffer.append(TEXT_257);
@


1.18
log
@[162579] Support diagram partitioning
+
1. CustomBehaviours;
2. LayoutDiagramAction: execute the command through the command stack;
3. WrappingCommand: Workaround for a problem with StrictCompoundCommand.canExecute() in transactional editing domains
@
text
@d149 1
a149 1
  protected final String TEXT_129 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
d153 1
a153 1
  protected final String TEXT_133 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
d155 1
a155 1
  protected final String TEXT_135 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
d164 1
a164 1
  protected final String TEXT_144 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
@


1.17
log
@When zoom level is > 100%, font height of the inplace editor should be adjusted to match the font height of the label (when zoom level is < 100%, no scaling is performed, otherwise the text is not readable)
@
text
@d106 42
a147 42
  protected final String TEXT_86 = NL + "\t}" + NL;
  protected final String TEXT_87 = NL;
  protected final String TEXT_88 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_89 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_90 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_91 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_92 = "(this, ";
  protected final String TEXT_93 = ".class, new ";
  protected final String TEXT_94 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_95 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_96 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\t";
  protected final String TEXT_97 = " zoomManager = (";
  protected final String TEXT_98 = ") getViewer().getProperty(";
  protected final String TEXT_99 = ".class.toString());" + NL + "\t\t\t\t\tdouble zoomLevel = zoomManager == null ? 1.0 : zoomManager.getZoom();" + NL + "\t\t\t\t\tif (zoomLevel > 1.0 && getLabel().getFont() != null) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_100 = "[] datas = getLabel().getFont().getFontData();" + NL + "\t\t\t\t\t\tfor(int i = 0; i < datas.length; i++) {" + NL + "\t\t\t\t\t\t\tdatas[i].height *= zoomLevel;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal ";
  protected final String TEXT_101 = " font = new ";
  protected final String TEXT_102 = "(getLabel().getFont().getDevice(), datas);" + NL + "\t\t\t\t\t\tcelleditor.getControl().setFont(font);" + NL + "\t\t\t\t\t\tcelleditor.getControl().addDisposeListener(new ";
  protected final String TEXT_103 = "() {" + NL + "\t\t\t\t\t\t\tpublic void widgetDisposed(";
  protected final String TEXT_104 = " e) {" + NL + "\t\t\t\t\t\t\t\tfont.dispose();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t});" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tint avr = ";
  protected final String TEXT_105 = ".getFontMetrics(celleditor.getControl().getFont()).getAverageCharWidth();" + NL + "\t\t\t\t\trect.setSize(new ";
  protected final String TEXT_106 = "(celleditor.getControl().computeSize(";
  protected final String TEXT_107 = ".DEFAULT, ";
  protected final String TEXT_108 = ".DEFAULT)).expand(avr * 2, 0));" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_109 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_110 = NL;
  protected final String TEXT_111 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_112 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String EDIT_PATTERN = \"";
  protected final String TEXT_113 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_114 = " element = ";
  protected final String TEXT_115 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_116 = " element = ";
  protected final String TEXT_117 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_118 = " element, String pattern) {";
  protected final String TEXT_119 = NL + "\t\treturn ";
  protected final String TEXT_120 = ".format(pattern, new Object[] {";
  protected final String TEXT_121 = NL + "\t\t\tnew ";
  protected final String TEXT_122 = "(";
  protected final String TEXT_123 = ")";
  protected final String TEXT_124 = ",";
  protected final String TEXT_125 = NL + "\t\t});";
  protected final String TEXT_126 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_127 = NL + "\t}";
d149 17
a165 17
  protected final String TEXT_129 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_130 = NL + "\t\t";
  protected final String TEXT_131 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_132 = ") ";
  protected final String TEXT_133 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_134 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_135 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_136 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_137 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_138 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_139 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_140 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_141 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_142 = "\t" + NL + "\t}";
  protected final String TEXT_143 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_144 = " createdFont;";
  protected final String TEXT_145 = "\t";
d167 111
a277 93
  protected final String TEXT_147 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_148 = " style = (";
  protected final String TEXT_149 = ")  ";
  protected final String TEXT_150 = ".getStyle(";
  protected final String TEXT_151 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_152 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_153 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_154 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_155 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_156 = " getLabelIcon() {";
  protected final String TEXT_157 = NL + "\t\t";
  protected final String TEXT_158 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_159 = " imageDescriptor = ";
  protected final String TEXT_160 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_161 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_162 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_163 = ") ? (";
  protected final String TEXT_164 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_165 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_166 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_167 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_168 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_169 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_170 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_171 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_172 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_173 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_174 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_175 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_176 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_177 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_178 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_179 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_180 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_181 = ".eINSTANCE.get";
  protected final String TEXT_182 = "(), labelRefresher);";
  protected final String TEXT_183 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_184 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_185 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_186 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_187 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_188 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_189 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_190 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_191 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_192 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_193 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_194 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_195 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_196 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_197 = ".eINSTANCE.get";
  protected final String TEXT_198 = "(), labelRefresher);";
  protected final String TEXT_199 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_200 = ".Refresher labelRefresher = new ";
  protected final String TEXT_201 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_202 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_203 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_204 = ".Refresher fontRefresher = new ";
  protected final String TEXT_205 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_206 = NL;
  protected final String TEXT_207 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_208 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_209 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_210 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_211 = " createLabel() {";
  protected final String TEXT_212 = NL + "\t\treturn new ";
  protected final String TEXT_213 = "();";
  protected final String TEXT_214 = NL + "\t\treturn ";
  protected final String TEXT_215 = ";";
  protected final String TEXT_216 = NL + "\t\treturn new ";
  protected final String TEXT_217 = "();";
  protected final String TEXT_218 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_219 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_220 = " label = createLabel();";
  protected final String TEXT_221 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_222 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_223 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_224 = NL + NL + "\t/**";
  protected final String TEXT_225 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_226 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_227 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_228 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_229 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_230 = "(";
  protected final String TEXT_231 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_232 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_233 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_234 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_235 = NL;
  protected final String TEXT_236 = NL;
  protected final String TEXT_237 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_238 = NL + "}";
  protected final String TEXT_239 = NL;
d558 2
d562 1
a562 1
	if (!isReadOnly) {
d565 1
d567 30
d598 12
a609 1
    stringBuffer.append(TEXT_89);
d611 8
a618 1
    stringBuffer.append(TEXT_90);
d620 1
a620 1
    stringBuffer.append(TEXT_91);
d622 1
a622 1
    stringBuffer.append(TEXT_92);
d624 1
a624 1
    stringBuffer.append(TEXT_93);
d626 1
a626 1
    stringBuffer.append(TEXT_94);
d628 1
a628 1
    stringBuffer.append(TEXT_95);
d630 1
a630 1
    stringBuffer.append(TEXT_96);
d632 1
a632 1
    stringBuffer.append(TEXT_97);
d634 1
a634 1
    stringBuffer.append(TEXT_98);
d636 1
a636 1
    stringBuffer.append(TEXT_99);
d638 1
a638 1
    stringBuffer.append(TEXT_100);
d640 1
a640 1
    stringBuffer.append(TEXT_101);
d642 1
a642 1
    stringBuffer.append(TEXT_102);
d644 1
a644 1
    stringBuffer.append(TEXT_103);
d646 1
a646 1
    stringBuffer.append(TEXT_104);
d648 1
a648 1
    stringBuffer.append(TEXT_105);
d650 1
a650 1
    stringBuffer.append(TEXT_106);
d652 1
a652 1
    stringBuffer.append(TEXT_107);
d654 1
a654 1
    stringBuffer.append(TEXT_108);
d658 2
a659 2
    stringBuffer.append(TEXT_109);
    stringBuffer.append(TEXT_110);
d693 1
a693 1
    stringBuffer.append(TEXT_111);
d695 1
a695 1
    stringBuffer.append(TEXT_112);
d697 1
a697 1
    stringBuffer.append(TEXT_113);
d699 1
a699 1
    stringBuffer.append(TEXT_114);
d701 1
a701 1
    stringBuffer.append(TEXT_115);
d703 1
a703 1
    stringBuffer.append(TEXT_116);
d705 1
a705 1
    stringBuffer.append(TEXT_117);
d707 1
a707 1
    stringBuffer.append(TEXT_118);
d712 1
a712 1
    stringBuffer.append(TEXT_119);
d714 1
a714 1
    stringBuffer.append(TEXT_120);
d720 1
a720 1
    stringBuffer.append(TEXT_121);
d722 1
a722 1
    stringBuffer.append(TEXT_122);
d728 1
a728 1
    stringBuffer.append(TEXT_123);
d732 1
a732 1
    stringBuffer.append(TEXT_124);
d737 1
a737 1
    stringBuffer.append(TEXT_125);
d741 1
a741 1
    stringBuffer.append(TEXT_126);
d745 2
a746 2
    stringBuffer.append(TEXT_127);
    stringBuffer.append(TEXT_128);
d754 1
a754 1
    stringBuffer.append(TEXT_129);
d758 1
a758 1
    stringBuffer.append(TEXT_130);
d760 1
a760 1
    stringBuffer.append(TEXT_131);
d762 1
a762 1
    stringBuffer.append(TEXT_132);
d764 1
a764 1
    stringBuffer.append(TEXT_133);
d766 1
a766 1
    stringBuffer.append(TEXT_134);
d768 1
a768 1
    stringBuffer.append(TEXT_135);
d770 1
a770 1
    stringBuffer.append(TEXT_136);
d772 1
a772 1
    stringBuffer.append(TEXT_137);
d774 1
a774 1
    stringBuffer.append(TEXT_138);
d776 1
a776 1
    stringBuffer.append(TEXT_139);
d778 1
a778 1
    stringBuffer.append(TEXT_140);
d780 1
a780 1
    stringBuffer.append(TEXT_141);
d784 1
a784 1
    stringBuffer.append(TEXT_142);
d788 1
a788 1
    stringBuffer.append(TEXT_143);
d790 1
a790 1
    stringBuffer.append(TEXT_144);
d794 3
a796 3
    stringBuffer.append(TEXT_145);
    stringBuffer.append(TEXT_146);
    stringBuffer.append(TEXT_147);
d798 1
a798 1
    stringBuffer.append(TEXT_148);
d800 1
a800 1
    stringBuffer.append(TEXT_149);
d802 1
a802 1
    stringBuffer.append(TEXT_150);
d804 1
a804 1
    stringBuffer.append(TEXT_151);
d806 1
a806 1
    stringBuffer.append(TEXT_152);
d808 1
a808 1
    stringBuffer.append(TEXT_153);
d810 1
a810 1
    stringBuffer.append(TEXT_154);
d812 1
a812 1
    stringBuffer.append(TEXT_155);
d814 1
a814 1
    stringBuffer.append(TEXT_156);
d818 1
a818 1
    stringBuffer.append(TEXT_157);
d820 1
a820 1
    stringBuffer.append(TEXT_158);
d822 1
a822 1
    stringBuffer.append(TEXT_159);
d824 1
a824 1
    stringBuffer.append(TEXT_160);
d828 1
a828 1
    stringBuffer.append(TEXT_161);
d830 1
a830 1
    stringBuffer.append(TEXT_162);
d832 1
a832 1
    stringBuffer.append(TEXT_163);
d834 1
a834 1
    stringBuffer.append(TEXT_164);
d836 1
a836 1
    stringBuffer.append(TEXT_165);
d838 1
a838 1
    stringBuffer.append(TEXT_166);
d840 1
a840 1
    stringBuffer.append(TEXT_167);
d842 1
a842 1
    stringBuffer.append(TEXT_168);
d844 1
a844 1
    stringBuffer.append(TEXT_169);
d846 1
a846 1
    stringBuffer.append(TEXT_170);
d848 1
a848 1
    stringBuffer.append(TEXT_171);
d850 1
a850 1
    stringBuffer.append(TEXT_172);
d852 1
a852 1
    stringBuffer.append(TEXT_173);
d856 1
a856 1
    stringBuffer.append(TEXT_174);
d858 1
a858 1
    stringBuffer.append(TEXT_175);
d860 1
a860 1
    stringBuffer.append(TEXT_176);
d862 1
a862 1
    stringBuffer.append(TEXT_177);
d864 1
a864 1
    stringBuffer.append(TEXT_178);
d866 1
a866 1
    stringBuffer.append(TEXT_179);
d874 1
a874 1
    stringBuffer.append(TEXT_180);
d876 1
a876 1
    stringBuffer.append(TEXT_181);
d878 1
a878 1
    stringBuffer.append(TEXT_182);
d883 1
a883 1
    stringBuffer.append(TEXT_183);
d885 1
a885 1
    stringBuffer.append(TEXT_184);
d887 1
a887 1
    stringBuffer.append(TEXT_185);
d889 1
a889 1
    stringBuffer.append(TEXT_186);
d891 1
a891 1
    stringBuffer.append(TEXT_187);
d893 1
a893 1
    stringBuffer.append(TEXT_188);
d895 1
a895 1
    stringBuffer.append(TEXT_189);
d899 1
a899 1
    stringBuffer.append(TEXT_190);
d901 1
a901 1
    stringBuffer.append(TEXT_191);
d903 1
a903 1
    stringBuffer.append(TEXT_192);
d905 1
a905 1
    stringBuffer.append(TEXT_193);
d907 1
a907 1
    stringBuffer.append(TEXT_194);
d909 1
a909 1
    stringBuffer.append(TEXT_195);
d917 1
a917 1
    stringBuffer.append(TEXT_196);
d919 1
a919 1
    stringBuffer.append(TEXT_197);
d921 1
a921 1
    stringBuffer.append(TEXT_198);
d926 1
a926 1
    stringBuffer.append(TEXT_199);
d928 1
a928 1
    stringBuffer.append(TEXT_200);
d930 1
a930 1
    stringBuffer.append(TEXT_201);
d932 1
a932 1
    stringBuffer.append(TEXT_202);
d934 1
a934 1
    stringBuffer.append(TEXT_203);
d936 1
a936 1
    stringBuffer.append(TEXT_204);
d938 1
a938 1
    stringBuffer.append(TEXT_205);
d942 1
a942 1
    stringBuffer.append(TEXT_206);
d971 1
a971 1
    stringBuffer.append(TEXT_207);
d973 1
a973 1
    stringBuffer.append(TEXT_208);
d975 1
a975 1
    stringBuffer.append(TEXT_209);
d977 1
a977 1
    stringBuffer.append(TEXT_210);
d979 1
a979 1
    stringBuffer.append(TEXT_211);
d983 1
a983 1
    stringBuffer.append(TEXT_212);
d985 1
a985 1
    stringBuffer.append(TEXT_213);
d988 1
a988 1
    stringBuffer.append(TEXT_214);
d990 1
a990 1
    stringBuffer.append(TEXT_215);
d994 1
a994 1
    stringBuffer.append(TEXT_216);
d996 1
a996 1
    stringBuffer.append(TEXT_217);
d998 1
a998 1
    stringBuffer.append(TEXT_218);
d1000 1
a1000 1
    stringBuffer.append(TEXT_219);
d1002 1
a1002 1
    stringBuffer.append(TEXT_220);
d1006 1
a1006 1
    stringBuffer.append(TEXT_221);
d1010 1
a1010 1
    stringBuffer.append(TEXT_222);
d1014 1
a1014 1
    stringBuffer.append(TEXT_223);
d1016 1
a1016 1
    stringBuffer.append(TEXT_224);
d1020 1
a1020 1
    stringBuffer.append(TEXT_225);
d1024 1
a1024 1
    stringBuffer.append(TEXT_226);
d1026 1
a1026 1
    stringBuffer.append(TEXT_227);
d1028 1
a1028 1
    stringBuffer.append(TEXT_228);
d1042 1
a1042 1
    stringBuffer.append(TEXT_229);
d1044 1
a1044 1
    stringBuffer.append(TEXT_230);
d1046 1
a1046 1
    stringBuffer.append(TEXT_231);
d1050 1
a1050 1
    stringBuffer.append(TEXT_232);
d1054 1
a1054 1
    stringBuffer.append(TEXT_233);
d1058 1
a1058 1
    stringBuffer.append(TEXT_234);
d1063 1
a1063 1
    stringBuffer.append(TEXT_235);
d1065 1
a1065 1
    stringBuffer.append(TEXT_236);
d1069 1
a1069 1
    stringBuffer.append(TEXT_237);
d1076 1
a1076 1
    stringBuffer.append(TEXT_238);
d1078 1
a1078 1
    stringBuffer.append(TEXT_239);
@


1.16
log
@#161253: External node labels should be attached to nodes correctly
Generate 2 icons if myDiagram.getCreationWizardIconPathX() and myEditorGen.getEditor().getIconPathX() specify different absolute paths
@
text
@d116 144
a259 132
  protected final String TEXT_96 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_97 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_98 = NL;
  protected final String TEXT_99 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_100 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String EDIT_PATTERN = \"";
  protected final String TEXT_101 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_102 = " element = ";
  protected final String TEXT_103 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_104 = " element = ";
  protected final String TEXT_105 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_106 = " element, String pattern) {";
  protected final String TEXT_107 = NL + "\t\treturn ";
  protected final String TEXT_108 = ".format(pattern, new Object[] {";
  protected final String TEXT_109 = NL + "\t\t\tnew ";
  protected final String TEXT_110 = "(";
  protected final String TEXT_111 = ")";
  protected final String TEXT_112 = ",";
  protected final String TEXT_113 = NL + "\t\t});";
  protected final String TEXT_114 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_115 = NL + "\t}";
  protected final String TEXT_116 = NL;
  protected final String TEXT_117 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_118 = NL + "\t\t";
  protected final String TEXT_119 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_120 = ") ";
  protected final String TEXT_121 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_122 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_123 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_124 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_125 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_126 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_127 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_128 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_129 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_130 = "\t" + NL + "\t}";
  protected final String TEXT_131 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_132 = " createdFont;";
  protected final String TEXT_133 = "\t";
  protected final String TEXT_134 = NL;
  protected final String TEXT_135 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_136 = " style = (";
  protected final String TEXT_137 = ")  ";
  protected final String TEXT_138 = ".getStyle(";
  protected final String TEXT_139 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_140 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_141 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_142 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_143 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_144 = " getLabelIcon() {";
  protected final String TEXT_145 = NL + "\t\t";
  protected final String TEXT_146 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_147 = " imageDescriptor = ";
  protected final String TEXT_148 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_149 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_150 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_151 = ") ? (";
  protected final String TEXT_152 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_153 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_154 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_155 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_156 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_157 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_158 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_159 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_160 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_161 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_162 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_163 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_164 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_165 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_166 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_167 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_168 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_169 = ".eINSTANCE.get";
  protected final String TEXT_170 = "(), labelRefresher);";
  protected final String TEXT_171 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_172 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_173 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_174 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_175 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_176 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_177 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_178 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_179 = ".eINSTANCE.getLocation_X(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_180 = ".eINSTANCE.getLocation_Y(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_181 = ".eINSTANCE.getSize_Width(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_182 = ".eINSTANCE.getSize_Height(), boundsRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_183 = ".eINSTANCE.getNode_LayoutConstraint(), boundsRefresher);";
  protected final String TEXT_184 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_185 = ".eINSTANCE.get";
  protected final String TEXT_186 = "(), labelRefresher);";
  protected final String TEXT_187 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_188 = ".Refresher labelRefresher = new ";
  protected final String TEXT_189 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_190 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_191 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_192 = ".Refresher fontRefresher = new ";
  protected final String TEXT_193 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_194 = NL;
  protected final String TEXT_195 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_196 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_197 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_198 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_199 = " createLabel() {";
  protected final String TEXT_200 = NL + "\t\treturn new ";
  protected final String TEXT_201 = "();";
  protected final String TEXT_202 = NL + "\t\treturn ";
  protected final String TEXT_203 = ";";
  protected final String TEXT_204 = NL + "\t\treturn new ";
  protected final String TEXT_205 = "();";
  protected final String TEXT_206 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_207 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_208 = " label = createLabel();";
  protected final String TEXT_209 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_210 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_211 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_212 = NL + NL + "\t/**";
  protected final String TEXT_213 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_214 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_215 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_216 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_217 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_218 = "(";
  protected final String TEXT_219 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_220 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_221 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_222 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_223 = NL;
  protected final String TEXT_224 = NL;
  protected final String TEXT_225 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_226 = NL + "}";
  protected final String TEXT_227 = NL;
d562 24
d589 2
a590 2
    stringBuffer.append(TEXT_97);
    stringBuffer.append(TEXT_98);
d624 1
a624 1
    stringBuffer.append(TEXT_99);
d626 1
a626 1
    stringBuffer.append(TEXT_100);
d628 1
a628 1
    stringBuffer.append(TEXT_101);
d630 1
a630 1
    stringBuffer.append(TEXT_102);
d632 1
a632 1
    stringBuffer.append(TEXT_103);
d634 1
a634 1
    stringBuffer.append(TEXT_104);
d636 1
a636 1
    stringBuffer.append(TEXT_105);
d638 1
a638 1
    stringBuffer.append(TEXT_106);
d643 1
a643 1
    stringBuffer.append(TEXT_107);
d645 1
a645 1
    stringBuffer.append(TEXT_108);
d651 1
a651 1
    stringBuffer.append(TEXT_109);
d653 1
a653 1
    stringBuffer.append(TEXT_110);
d659 1
a659 1
    stringBuffer.append(TEXT_111);
d663 1
a663 1
    stringBuffer.append(TEXT_112);
d668 1
a668 1
    stringBuffer.append(TEXT_113);
d672 1
a672 1
    stringBuffer.append(TEXT_114);
d676 2
a677 2
    stringBuffer.append(TEXT_115);
    stringBuffer.append(TEXT_116);
d685 1
a685 1
    stringBuffer.append(TEXT_117);
d689 1
a689 1
    stringBuffer.append(TEXT_118);
d691 1
a691 1
    stringBuffer.append(TEXT_119);
d693 1
a693 1
    stringBuffer.append(TEXT_120);
d695 1
a695 1
    stringBuffer.append(TEXT_121);
d697 1
a697 1
    stringBuffer.append(TEXT_122);
d699 1
a699 1
    stringBuffer.append(TEXT_123);
d701 1
a701 1
    stringBuffer.append(TEXT_124);
d703 1
a703 1
    stringBuffer.append(TEXT_125);
d705 1
a705 1
    stringBuffer.append(TEXT_126);
d707 1
a707 1
    stringBuffer.append(TEXT_127);
d709 1
a709 1
    stringBuffer.append(TEXT_128);
d711 1
a711 1
    stringBuffer.append(TEXT_129);
d715 1
a715 1
    stringBuffer.append(TEXT_130);
d719 1
a719 1
    stringBuffer.append(TEXT_131);
d721 1
a721 1
    stringBuffer.append(TEXT_132);
d725 3
a727 3
    stringBuffer.append(TEXT_133);
    stringBuffer.append(TEXT_134);
    stringBuffer.append(TEXT_135);
d729 1
a729 1
    stringBuffer.append(TEXT_136);
d731 1
a731 1
    stringBuffer.append(TEXT_137);
d733 1
a733 1
    stringBuffer.append(TEXT_138);
d735 1
a735 1
    stringBuffer.append(TEXT_139);
d737 1
a737 1
    stringBuffer.append(TEXT_140);
d739 1
a739 1
    stringBuffer.append(TEXT_141);
d741 1
a741 1
    stringBuffer.append(TEXT_142);
d743 1
a743 1
    stringBuffer.append(TEXT_143);
d745 1
a745 1
    stringBuffer.append(TEXT_144);
d749 1
a749 1
    stringBuffer.append(TEXT_145);
d751 1
a751 1
    stringBuffer.append(TEXT_146);
d753 1
a753 1
    stringBuffer.append(TEXT_147);
d755 1
a755 1
    stringBuffer.append(TEXT_148);
d759 1
a759 1
    stringBuffer.append(TEXT_149);
d761 1
a761 1
    stringBuffer.append(TEXT_150);
d763 1
a763 1
    stringBuffer.append(TEXT_151);
d765 1
a765 1
    stringBuffer.append(TEXT_152);
d767 1
a767 1
    stringBuffer.append(TEXT_153);
d769 1
a769 1
    stringBuffer.append(TEXT_154);
d771 1
a771 1
    stringBuffer.append(TEXT_155);
d773 1
a773 1
    stringBuffer.append(TEXT_156);
d775 1
a775 1
    stringBuffer.append(TEXT_157);
d777 1
a777 1
    stringBuffer.append(TEXT_158);
d779 1
a779 1
    stringBuffer.append(TEXT_159);
d781 1
a781 1
    stringBuffer.append(TEXT_160);
d783 1
a783 1
    stringBuffer.append(TEXT_161);
d787 1
a787 1
    stringBuffer.append(TEXT_162);
d789 1
a789 1
    stringBuffer.append(TEXT_163);
d791 1
a791 1
    stringBuffer.append(TEXT_164);
d793 1
a793 1
    stringBuffer.append(TEXT_165);
d795 1
a795 1
    stringBuffer.append(TEXT_166);
d797 1
a797 1
    stringBuffer.append(TEXT_167);
d805 1
a805 1
    stringBuffer.append(TEXT_168);
d807 1
a807 1
    stringBuffer.append(TEXT_169);
d809 1
a809 1
    stringBuffer.append(TEXT_170);
d814 1
a814 1
    stringBuffer.append(TEXT_171);
d816 1
a816 1
    stringBuffer.append(TEXT_172);
d818 1
a818 1
    stringBuffer.append(TEXT_173);
d820 1
a820 1
    stringBuffer.append(TEXT_174);
d822 1
a822 1
    stringBuffer.append(TEXT_175);
d824 1
a824 1
    stringBuffer.append(TEXT_176);
d826 1
a826 1
    stringBuffer.append(TEXT_177);
d830 1
a830 1
    stringBuffer.append(TEXT_178);
d832 1
a832 1
    stringBuffer.append(TEXT_179);
d834 1
a834 1
    stringBuffer.append(TEXT_180);
d836 1
a836 1
    stringBuffer.append(TEXT_181);
d838 1
a838 1
    stringBuffer.append(TEXT_182);
d840 1
a840 1
    stringBuffer.append(TEXT_183);
d848 1
a848 1
    stringBuffer.append(TEXT_184);
d850 1
a850 1
    stringBuffer.append(TEXT_185);
d852 1
a852 1
    stringBuffer.append(TEXT_186);
d857 1
a857 1
    stringBuffer.append(TEXT_187);
d859 1
a859 1
    stringBuffer.append(TEXT_188);
d861 1
a861 1
    stringBuffer.append(TEXT_189);
d863 1
a863 1
    stringBuffer.append(TEXT_190);
d865 1
a865 1
    stringBuffer.append(TEXT_191);
d867 1
a867 1
    stringBuffer.append(TEXT_192);
d869 1
a869 1
    stringBuffer.append(TEXT_193);
d873 1
a873 1
    stringBuffer.append(TEXT_194);
d902 1
a902 1
    stringBuffer.append(TEXT_195);
d904 1
a904 1
    stringBuffer.append(TEXT_196);
d906 1
a906 1
    stringBuffer.append(TEXT_197);
d908 1
a908 1
    stringBuffer.append(TEXT_198);
d910 1
a910 1
    stringBuffer.append(TEXT_199);
d914 1
a914 1
    stringBuffer.append(TEXT_200);
d916 1
a916 1
    stringBuffer.append(TEXT_201);
d919 1
a919 1
    stringBuffer.append(TEXT_202);
d921 1
a921 1
    stringBuffer.append(TEXT_203);
d925 1
a925 1
    stringBuffer.append(TEXT_204);
d927 1
a927 1
    stringBuffer.append(TEXT_205);
d929 1
a929 1
    stringBuffer.append(TEXT_206);
d931 1
a931 1
    stringBuffer.append(TEXT_207);
d933 1
a933 1
    stringBuffer.append(TEXT_208);
d937 1
a937 1
    stringBuffer.append(TEXT_209);
d941 1
a941 1
    stringBuffer.append(TEXT_210);
d945 1
a945 1
    stringBuffer.append(TEXT_211);
d947 1
a947 1
    stringBuffer.append(TEXT_212);
d951 1
a951 1
    stringBuffer.append(TEXT_213);
d955 1
a955 1
    stringBuffer.append(TEXT_214);
d957 1
a957 1
    stringBuffer.append(TEXT_215);
d959 1
a959 1
    stringBuffer.append(TEXT_216);
d973 1
a973 1
    stringBuffer.append(TEXT_217);
d975 1
a975 1
    stringBuffer.append(TEXT_218);
d977 1
a977 1
    stringBuffer.append(TEXT_219);
d981 1
a981 1
    stringBuffer.append(TEXT_220);
d985 1
a985 1
    stringBuffer.append(TEXT_221);
d989 1
a989 1
    stringBuffer.append(TEXT_222);
d994 1
a994 1
    stringBuffer.append(TEXT_223);
d996 1
a996 1
    stringBuffer.append(TEXT_224);
d1000 1
a1000 1
    stringBuffer.append(TEXT_225);
d1007 1
a1007 1
    stringBuffer.append(TEXT_226);
d1009 1
a1009 1
    stringBuffer.append(TEXT_227);
@


1.15
log
@Fix compilation problems introduced by recent fix of https://bugs.eclipse.org/bugs/show_bug.cgi?id=161380
@
text
@d42 147
a188 147
  protected final String TEXT_22 = NL + NL + "/**" + NL + " * @@generated" + NL + " */" + NL + "public class ";
  protected final String TEXT_23 = " extends ";
  protected final String TEXT_24 = " {";
  protected final String TEXT_25 = NL;
  protected final String TEXT_26 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final int VISUAL_ID = ";
  protected final String TEXT_27 = ";";
  protected final String TEXT_28 = NL;
  protected final String TEXT_29 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_30 = " manager;" + NL;
  protected final String TEXT_31 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate String defaultText;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_32 = "(View view) {" + NL + "\t\tsetModel(view);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void createEditPolicies() {";
  protected final String TEXT_33 = NL;
  protected final String TEXT_34 = "\t\tinstallEditPolicy(";
  protected final String TEXT_35 = ".DIRECT_EDIT_ROLE," + NL + "\t\t\t\tnew ";
  protected final String TEXT_36 = "() {" + NL + "\t\t\t\t\tprotected void showCurrentEditValue(";
  protected final String TEXT_37 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tgetLabel().setText(value);" + NL + "\t\t\t\t\t}";
  protected final String TEXT_38 = NL;
  protected final String TEXT_39 = "\t\t\t\t\tprotected ";
  protected final String TEXT_40 = " getDirectEditCommand(";
  protected final String TEXT_41 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_42 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_43 = "(";
  protected final String TEXT_44 = ").parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_45 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_46 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_47 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_48 = " editingDomain = ";
  protected final String TEXT_49 = ".getEditingDomain(";
  protected final String TEXT_50 = ".getDiagram().getElement());";
  protected final String TEXT_51 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_52 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_53 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_54 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_55 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_56 = " createDomainModelCommand(";
  protected final String TEXT_57 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_58 = " element = ";
  protected final String TEXT_59 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_60 = " result = new ";
  protected final String TEXT_61 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_62 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_63 = " ";
  protected final String TEXT_64 = "feature = (";
  protected final String TEXT_65 = ") ";
  protected final String TEXT_66 = ".eINSTANCE.get";
  protected final String TEXT_67 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_68 = ".parseValue(feature, values[";
  protected final String TEXT_69 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_70 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_71 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_72 = " ";
  protected final String TEXT_73 = "values = new ";
  protected final String TEXT_74 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_75 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_76 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_77 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_78 = NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_79 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_80 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_81 = NL + "\t\t\t\t});";
  protected final String TEXT_82 = NL + "\t}" + NL;
  protected final String TEXT_83 = NL;
  protected final String TEXT_84 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_85 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_86 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_87 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_88 = "(this, ";
  protected final String TEXT_89 = ".class, new ";
  protected final String TEXT_90 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_91 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_92 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_93 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_94 = NL;
  protected final String TEXT_95 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_96 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String EDIT_PATTERN = \"";
  protected final String TEXT_97 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_98 = " element = ";
  protected final String TEXT_99 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_100 = " element = ";
  protected final String TEXT_101 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_102 = " element, String pattern) {";
  protected final String TEXT_103 = NL + "\t\treturn ";
  protected final String TEXT_104 = ".format(pattern, new Object[] {";
  protected final String TEXT_105 = NL + "\t\t\tnew ";
  protected final String TEXT_106 = "(";
  protected final String TEXT_107 = ")";
  protected final String TEXT_108 = ",";
  protected final String TEXT_109 = NL + "\t\t});";
  protected final String TEXT_110 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_111 = NL + "\t}";
  protected final String TEXT_112 = NL;
  protected final String TEXT_113 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_114 = NL + "\t\t";
  protected final String TEXT_115 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_116 = ") ";
  protected final String TEXT_117 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_118 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_119 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_120 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_121 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_122 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_123 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_124 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_125 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_126 = "\t" + NL + "\t}";
  protected final String TEXT_127 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_128 = " createdFont;";
  protected final String TEXT_129 = "\t";
  protected final String TEXT_130 = NL;
  protected final String TEXT_131 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_132 = " style = (";
  protected final String TEXT_133 = ")  ";
  protected final String TEXT_134 = ".getStyle(";
  protected final String TEXT_135 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_136 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_137 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_138 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_139 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_140 = " getLabelIcon() {";
  protected final String TEXT_141 = NL + "\t\t";
  protected final String TEXT_142 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_143 = " imageDescriptor = ";
  protected final String TEXT_144 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_145 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_146 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_147 = ") ? (";
  protected final String TEXT_148 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_149 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_150 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_151 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_152 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_153 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_154 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_155 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_156 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_157 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_158 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_159 = ".eINSTANCE.get";
  protected final String TEXT_160 = "(), labelRefresher);";
  protected final String TEXT_161 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_162 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_163 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_164 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_165 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_166 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_167 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_168 = NL + "\t\t\tupdatableParent.removeRefresher(";
d191 57
a247 41
  protected final String TEXT_171 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_172 = ".Refresher labelRefresher = new ";
  protected final String TEXT_173 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_174 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_175 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_176 = ".Refresher fontRefresher = new ";
  protected final String TEXT_177 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_178 = NL;
  protected final String TEXT_179 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_180 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_181 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_182 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_183 = " createLabel() {";
  protected final String TEXT_184 = NL + "\t\treturn new ";
  protected final String TEXT_185 = "();";
  protected final String TEXT_186 = NL + "\t\treturn ";
  protected final String TEXT_187 = ";";
  protected final String TEXT_188 = NL + "\t\treturn new ";
  protected final String TEXT_189 = "();";
  protected final String TEXT_190 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_191 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_192 = " label = createLabel();";
  protected final String TEXT_193 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_194 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_195 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_196 = NL + NL + "\t/**";
  protected final String TEXT_197 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_198 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_199 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_200 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_201 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_202 = "(";
  protected final String TEXT_203 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_204 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_205 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_206 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_207 = NL;
  protected final String TEXT_208 = NL;
  protected final String TEXT_209 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_210 = NL + "}";
  protected final String TEXT_211 = NL;
d355 12
a367 2
    stringBuffer.append(TEXT_23);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editparts.AbstractGraphicalEditPart"));
d369 2
a372 1
    stringBuffer.append(TEXT_25);
d374 1
d376 1
a376 1
    stringBuffer.append(TEXT_27);
d378 1
a378 1
    stringBuffer.append(TEXT_28);
d382 1
a382 1
    stringBuffer.append(TEXT_29);
d384 1
a384 1
    stringBuffer.append(TEXT_30);
d388 1
a388 1
    stringBuffer.append(TEXT_31);
d390 13
a402 1
    stringBuffer.append(TEXT_32);
a408 7
    stringBuffer.append(TEXT_33);
    stringBuffer.append(TEXT_34);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.EditPolicy"));
    stringBuffer.append(TEXT_35);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.editpolicies.DirectEditPolicy"));
    stringBuffer.append(TEXT_36);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.requests.DirectEditRequest"));
d411 1
d413 1
a413 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.Command"));
d417 6
d424 1
a424 1
    stringBuffer.append(TEXT_42);
d426 1
a426 1
    stringBuffer.append(TEXT_43);
d428 1
a428 1
    stringBuffer.append(TEXT_44);
d430 1
a430 1
    stringBuffer.append(TEXT_45);
d432 1
a432 1
    stringBuffer.append(TEXT_46);
d434 1
a434 1
    stringBuffer.append(TEXT_47);
d436 1
a436 1
    stringBuffer.append(TEXT_48);
d438 1
a438 1
    stringBuffer.append(TEXT_49);
d440 1
a440 1
    stringBuffer.append(TEXT_50);
d446 1
a446 1
    stringBuffer.append(TEXT_51);
d448 1
a448 1
    stringBuffer.append(TEXT_52);
d450 1
a450 1
    stringBuffer.append(TEXT_53);
d452 1
a452 1
    stringBuffer.append(TEXT_54);
d454 1
a454 1
    stringBuffer.append(TEXT_55);
d456 1
a456 1
    stringBuffer.append(TEXT_56);
d458 1
a458 1
    stringBuffer.append(TEXT_57);
d460 1
a460 1
    stringBuffer.append(TEXT_58);
d462 1
a462 1
    stringBuffer.append(TEXT_59);
d464 1
a464 1
    stringBuffer.append(TEXT_60);
d466 1
a466 1
    stringBuffer.append(TEXT_61);
d473 1
a473 1
    stringBuffer.append(TEXT_62);
d476 1
a476 1
    stringBuffer.append(TEXT_63);
d478 1
a478 1
    stringBuffer.append(TEXT_64);
d480 1
a480 1
    stringBuffer.append(TEXT_65);
d482 1
a482 1
    stringBuffer.append(TEXT_66);
d484 1
a484 1
    stringBuffer.append(TEXT_67);
d486 1
a486 1
    stringBuffer.append(TEXT_68);
d488 1
a488 1
    stringBuffer.append(TEXT_69);
d490 1
a490 1
    stringBuffer.append(TEXT_70);
d494 1
a494 1
    stringBuffer.append(TEXT_71);
d497 1
a497 1
    stringBuffer.append(TEXT_72);
d499 1
a499 1
    stringBuffer.append(TEXT_73);
d501 1
a501 1
    stringBuffer.append(TEXT_74);
d503 1
a503 1
    stringBuffer.append(TEXT_75);
d505 1
a505 1
    stringBuffer.append(TEXT_76);
d507 1
a507 1
    stringBuffer.append(TEXT_77);
d511 1
a511 1
    stringBuffer.append(TEXT_78);
d513 1
a513 1
    stringBuffer.append(TEXT_79);
d520 1
a520 1
    stringBuffer.append(TEXT_80);
d524 1
a524 1
    stringBuffer.append(TEXT_81);
d528 1
a528 1
    stringBuffer.append(TEXT_82);
d532 2
a533 2
    stringBuffer.append(TEXT_83);
    stringBuffer.append(TEXT_84);
d535 1
a535 1
    stringBuffer.append(TEXT_85);
d537 1
a537 1
    stringBuffer.append(TEXT_86);
d539 1
a539 1
    stringBuffer.append(TEXT_87);
d541 1
a541 1
    stringBuffer.append(TEXT_88);
d543 1
a543 1
    stringBuffer.append(TEXT_89);
d545 1
a545 1
    stringBuffer.append(TEXT_90);
d547 1
a547 1
    stringBuffer.append(TEXT_91);
d549 1
a549 1
    stringBuffer.append(TEXT_92);
d553 2
a554 2
    stringBuffer.append(TEXT_93);
    stringBuffer.append(TEXT_94);
d588 1
a588 1
    stringBuffer.append(TEXT_95);
d590 1
a590 1
    stringBuffer.append(TEXT_96);
d592 1
a592 1
    stringBuffer.append(TEXT_97);
d594 1
a594 1
    stringBuffer.append(TEXT_98);
d596 1
a596 1
    stringBuffer.append(TEXT_99);
d598 1
a598 1
    stringBuffer.append(TEXT_100);
d600 1
a600 1
    stringBuffer.append(TEXT_101);
d602 1
a602 1
    stringBuffer.append(TEXT_102);
d607 1
a607 1
    stringBuffer.append(TEXT_103);
d609 1
a609 1
    stringBuffer.append(TEXT_104);
d615 1
a615 1
    stringBuffer.append(TEXT_105);
d617 1
a617 1
    stringBuffer.append(TEXT_106);
d623 1
a623 1
    stringBuffer.append(TEXT_107);
d627 1
a627 1
    stringBuffer.append(TEXT_108);
d632 1
a632 1
    stringBuffer.append(TEXT_109);
d636 1
a636 1
    stringBuffer.append(TEXT_110);
d640 2
a641 2
    stringBuffer.append(TEXT_111);
    stringBuffer.append(TEXT_112);
d649 1
a649 1
    stringBuffer.append(TEXT_113);
d653 1
a653 1
    stringBuffer.append(TEXT_114);
d655 1
a655 1
    stringBuffer.append(TEXT_115);
d657 1
a657 1
    stringBuffer.append(TEXT_116);
d659 1
a659 1
    stringBuffer.append(TEXT_117);
d661 1
a661 1
    stringBuffer.append(TEXT_118);
d663 1
a663 1
    stringBuffer.append(TEXT_119);
d665 1
a665 1
    stringBuffer.append(TEXT_120);
d667 1
a667 1
    stringBuffer.append(TEXT_121);
d669 1
a669 1
    stringBuffer.append(TEXT_122);
d671 1
a671 1
    stringBuffer.append(TEXT_123);
d673 1
a673 1
    stringBuffer.append(TEXT_124);
d675 1
a675 1
    stringBuffer.append(TEXT_125);
d679 1
a679 1
    stringBuffer.append(TEXT_126);
d683 1
a683 1
    stringBuffer.append(TEXT_127);
d685 1
a685 1
    stringBuffer.append(TEXT_128);
a688 6
    stringBuffer.append(TEXT_129);
    stringBuffer.append(TEXT_130);
    stringBuffer.append(TEXT_131);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
    stringBuffer.append(TEXT_132);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a689 1
    stringBuffer.append(primaryView);
a690 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d692 1
a692 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d694 1
a694 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d696 1
a696 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d698 2
a700 2
    stringBuffer.append(TEXT_139);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Image"));
d702 1
a702 3
    
if (genLabel.isElementIcon()) {

d704 1
a704 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d706 1
a706 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.resource.ImageDescriptor"));
d708 1
a708 1
    stringBuffer.append(importManager.getImportedName(genDiagram.getEditorGen().getPlugin().getActivatorQualifiedClassName()));
d711 1
a711 1
}
d716 1
a716 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d718 1
a718 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d720 3
a722 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d724 1
a724 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d726 1
a726 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d728 2
a730 2
    stringBuffer.append(TEXT_152);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d732 1
a732 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d734 1
a734 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d736 1
a736 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d740 1
a740 6
    
if (labelModelFacet instanceof FeatureLabelModelFacet) {
	FeatureLabelModelFacet featureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	for(Iterator it = featureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
		GenFeature next = (GenFeature) it.next();

d742 1
a742 1
    stringBuffer.append(importManager.getImportedName(next.getGenPackage().getQualifiedPackageInterfaceName()));
d744 1
a744 1
    stringBuffer.append(next.getFeatureAccessorName());
d746 2
d749 1
a749 2
	}
}
a750 2
    stringBuffer.append(TEXT_161);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d763 1
d779 43
d823 1
a823 1
    stringBuffer.append(TEXT_172);
d825 1
a825 1
    stringBuffer.append(TEXT_173);
d827 1
a827 1
    stringBuffer.append(TEXT_174);
d829 1
a829 1
    stringBuffer.append(TEXT_175);
d831 1
a831 1
    stringBuffer.append(TEXT_176);
d833 1
a833 1
    stringBuffer.append(TEXT_177);
d837 1
a837 1
    stringBuffer.append(TEXT_178);
d866 1
a866 1
    stringBuffer.append(TEXT_179);
d868 1
a868 1
    stringBuffer.append(TEXT_180);
d870 1
a870 1
    stringBuffer.append(TEXT_181);
d872 1
a872 1
    stringBuffer.append(TEXT_182);
d874 1
a874 1
    stringBuffer.append(TEXT_183);
d878 1
a878 1
    stringBuffer.append(TEXT_184);
d880 1
a880 1
    stringBuffer.append(TEXT_185);
d883 1
a883 1
    stringBuffer.append(TEXT_186);
d885 1
a885 1
    stringBuffer.append(TEXT_187);
d889 1
a889 1
    stringBuffer.append(TEXT_188);
d891 1
a891 1
    stringBuffer.append(TEXT_189);
d893 1
a893 1
    stringBuffer.append(TEXT_190);
d895 1
a895 1
    stringBuffer.append(TEXT_191);
d897 1
a897 1
    stringBuffer.append(TEXT_192);
d901 1
a901 1
    stringBuffer.append(TEXT_193);
d905 1
a905 1
    stringBuffer.append(TEXT_194);
d909 1
a909 1
    stringBuffer.append(TEXT_195);
d911 1
a911 1
    stringBuffer.append(TEXT_196);
d915 1
a915 1
    stringBuffer.append(TEXT_197);
d919 1
a919 1
    stringBuffer.append(TEXT_198);
d921 1
a921 1
    stringBuffer.append(TEXT_199);
d923 1
a923 1
    stringBuffer.append(TEXT_200);
d937 1
a937 1
    stringBuffer.append(TEXT_201);
d939 1
a939 1
    stringBuffer.append(TEXT_202);
d941 1
a941 1
    stringBuffer.append(TEXT_203);
d945 1
a945 1
    stringBuffer.append(TEXT_204);
d949 1
a949 1
    stringBuffer.append(TEXT_205);
d953 1
a953 1
    stringBuffer.append(TEXT_206);
d958 1
a958 1
    stringBuffer.append(TEXT_207);
d960 1
a960 1
    stringBuffer.append(TEXT_208);
d964 1
a964 1
    stringBuffer.append(TEXT_209);
d971 1
a971 1
    stringBuffer.append(TEXT_210);
d973 1
a973 1
    stringBuffer.append(TEXT_211);
@


1.14
log
@#161380 simplify feature model facets
@
text
@d71 160
a230 160
  protected final String TEXT_51 = NL + "\t\t\t\t\t\tif (parseResult.length != 1) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_52 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_53 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult[0]);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_54 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_55 = " createDomainModelCommand(";
  protected final String TEXT_56 = " editingDomain, Object value) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_57 = " element = ";
  protected final String TEXT_58 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_59 = " feature = (";
  protected final String TEXT_60 = ") ";
  protected final String TEXT_61 = ".eINSTANCE.get";
  protected final String TEXT_62 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_63 = ".parseValue(feature, value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_64 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_65 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_66 = " result = new ";
  protected final String TEXT_67 = "();" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_68 = " values = new ";
  protected final String TEXT_69 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_70 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_71 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_72 = ".create(editingDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\treturn result;";
  protected final String TEXT_73 = NL + "\t\t\t\t\t\treturn ";
  protected final String TEXT_74 = ".create(editingDomain, element, feature, valueToSet);";
  protected final String TEXT_75 = NL + "\t\t\t\t\t}";
  protected final String TEXT_76 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_77 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_78 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_79 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_80 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_81 = " createDomainModelCommand(";
  protected final String TEXT_82 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_83 = " element = ";
  protected final String TEXT_84 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_85 = " result = new ";
  protected final String TEXT_86 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_87 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_88 = " ";
  protected final String TEXT_89 = "feature = (";
  protected final String TEXT_90 = ") ";
  protected final String TEXT_91 = ".eINSTANCE.get";
  protected final String TEXT_92 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_93 = ".parseValue(feature, values[";
  protected final String TEXT_94 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_95 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_96 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_97 = " ";
  protected final String TEXT_98 = "values = new ";
  protected final String TEXT_99 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_100 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_101 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_102 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_103 = NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_104 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_105 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_106 = NL + "\t\t\t\t});";
  protected final String TEXT_107 = NL + "\t}" + NL;
  protected final String TEXT_108 = NL;
  protected final String TEXT_109 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_110 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_111 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_112 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_113 = "(this, ";
  protected final String TEXT_114 = ".class, new ";
  protected final String TEXT_115 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_116 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_117 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_118 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_119 = NL;
  protected final String TEXT_120 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_121 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final String EDIT_PATTERN = \"";
  protected final String TEXT_122 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_123 = " element = ";
  protected final String TEXT_124 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_125 = " element = ";
  protected final String TEXT_126 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_127 = " element, String pattern) {";
  protected final String TEXT_128 = NL + "\t\tif (";
  protected final String TEXT_129 = " == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}";
  protected final String TEXT_130 = NL + "\t\treturn ";
  protected final String TEXT_131 = ".format(pattern, new Object[] {";
  protected final String TEXT_132 = NL + "\t\t\tnew ";
  protected final String TEXT_133 = "(";
  protected final String TEXT_134 = ")";
  protected final String TEXT_135 = NL + "\t\t});";
  protected final String TEXT_136 = NL + "\t\treturn ";
  protected final String TEXT_137 = ".format(pattern, new Object[] {";
  protected final String TEXT_138 = NL + "\t\t\tnew ";
  protected final String TEXT_139 = "(";
  protected final String TEXT_140 = ")";
  protected final String TEXT_141 = ",";
  protected final String TEXT_142 = NL + "\t\t});";
  protected final String TEXT_143 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_144 = NL + "\t}";
  protected final String TEXT_145 = NL;
  protected final String TEXT_146 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_147 = NL + "\t\t";
  protected final String TEXT_148 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_149 = ") ";
  protected final String TEXT_150 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_151 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_152 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_153 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_154 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_155 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_156 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_157 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_158 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_159 = "\t" + NL + "\t}";
  protected final String TEXT_160 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_161 = " createdFont;";
  protected final String TEXT_162 = "\t";
  protected final String TEXT_163 = NL;
  protected final String TEXT_164 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_165 = " style = (";
  protected final String TEXT_166 = ")  ";
  protected final String TEXT_167 = ".getStyle(";
  protected final String TEXT_168 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_169 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_170 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_171 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_172 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_173 = " getLabelIcon() {";
  protected final String TEXT_174 = NL + "\t\t";
  protected final String TEXT_175 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_176 = " imageDescriptor = ";
  protected final String TEXT_177 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_178 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_179 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_180 = ") ? (";
  protected final String TEXT_181 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_182 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_183 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_184 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_185 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_186 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_187 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_188 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_189 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_190 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_191 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_192 = ".eINSTANCE.get";
  protected final String TEXT_193 = "(), labelRefresher);";
  protected final String TEXT_194 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_195 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_196 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_197 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_198 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_199 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_200 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_201 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_202 = ".eINSTANCE.get";
  protected final String TEXT_203 = "(), labelRefresher);";
  protected final String TEXT_204 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_205 = ".Refresher labelRefresher = new ";
  protected final String TEXT_206 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_207 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_208 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_209 = ".Refresher fontRefresher = new ";
  protected final String TEXT_210 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
a231 33
  protected final String TEXT_212 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_213 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_214 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_215 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_216 = " createLabel() {";
  protected final String TEXT_217 = NL + "\t\treturn new ";
  protected final String TEXT_218 = "();";
  protected final String TEXT_219 = NL + "\t\treturn ";
  protected final String TEXT_220 = ";";
  protected final String TEXT_221 = NL + "\t\treturn new ";
  protected final String TEXT_222 = "();";
  protected final String TEXT_223 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_224 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_225 = " label = createLabel();";
  protected final String TEXT_226 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_227 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_228 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_229 = NL + NL + "\t/**";
  protected final String TEXT_230 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_231 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_232 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_233 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_234 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_235 = "(";
  protected final String TEXT_236 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_237 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_238 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_239 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_240 = NL;
  protected final String TEXT_241 = NL;
  protected final String TEXT_242 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_243 = NL + "}";
  protected final String TEXT_244 = NL;
d403 2
a404 2
	GenFeature featureToSet = ((FeatureLabelModelFacet)labelModelFacet).getMetaFeature();
	EStructuralFeature ecoreFeature = featureToSet.getEcoreFeature();
d407 2
d410 1
a410 1
    stringBuffer.append(TEXT_52);
d412 1
a412 1
    stringBuffer.append(TEXT_53);
d414 1
a414 1
    stringBuffer.append(TEXT_54);
d416 1
a416 1
    stringBuffer.append(TEXT_55);
d418 1
a418 1
    stringBuffer.append(TEXT_56);
d420 1
a420 1
    stringBuffer.append(TEXT_57);
a421 2
    stringBuffer.append(TEXT_58);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EAttribute"));
d423 1
a423 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EAttribute"));
d425 1
a425 1
    stringBuffer.append(importManager.getImportedName(featureToSet.getGenPackage().getQualifiedPackageInterfaceName()));
a426 60
    stringBuffer.append(featureToSet.getFeatureAccessorName());
    stringBuffer.append(TEXT_62);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.services.ParserUtil"));
    stringBuffer.append(TEXT_63);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.UnexecutableCommand"));
    stringBuffer.append(TEXT_64);
    
	if (ecoreFeature.isMany()) {

    stringBuffer.append(TEXT_65);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_66);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_67);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.util.EList"));
    stringBuffer.append(TEXT_68);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.util.BasicEList"));
    stringBuffer.append(TEXT_69);
    stringBuffer.append(featureToSet.getAccessorName());
    stringBuffer.append(TEXT_70);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.command.RemoveCommand"));
    stringBuffer.append(TEXT_71);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.command.AddCommand"));
    stringBuffer.append(TEXT_72);
    
	} else {

    stringBuffer.append(TEXT_73);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.command.SetCommand"));
    stringBuffer.append(TEXT_74);
    
	}

    stringBuffer.append(TEXT_75);
    
} else if (labelModelFacet instanceof CompositeFeatureLabelModelFacet) {
	CompositeFeatureLabelModelFacet compositeFeatureLabelModelFacet = (CompositeFeatureLabelModelFacet) labelModelFacet;
	List metaFeatures = compositeFeatureLabelModelFacet.getMetaFeatures();

    stringBuffer.append(TEXT_76);
    stringBuffer.append(metaFeatures.size());
    stringBuffer.append(TEXT_77);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
    stringBuffer.append(TEXT_78);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
    stringBuffer.append(TEXT_79);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.commands.WrappingCommand"));
    stringBuffer.append(TEXT_80);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
    stringBuffer.append(TEXT_81);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.transaction.TransactionalEditingDomain"));
    stringBuffer.append(TEXT_82);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_83);
    stringBuffer.append(resolvedSemanticElement);
    stringBuffer.append(TEXT_84);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_85);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_86);
d433 1
a433 1
    stringBuffer.append(TEXT_87);
d436 1
a436 1
    stringBuffer.append(TEXT_88);
d438 1
a438 1
    stringBuffer.append(TEXT_89);
d440 1
a440 1
    stringBuffer.append(TEXT_90);
d442 1
a442 1
    stringBuffer.append(TEXT_91);
d444 1
a444 1
    stringBuffer.append(TEXT_92);
d446 1
a446 1
    stringBuffer.append(TEXT_93);
d448 1
a448 1
    stringBuffer.append(TEXT_94);
d450 1
a450 1
    stringBuffer.append(TEXT_95);
d454 1
a454 1
    stringBuffer.append(TEXT_96);
d457 1
a457 1
    stringBuffer.append(TEXT_97);
d459 1
a459 1
    stringBuffer.append(TEXT_98);
d461 1
a461 1
    stringBuffer.append(TEXT_99);
d463 1
a463 1
    stringBuffer.append(TEXT_100);
d465 1
a465 1
    stringBuffer.append(TEXT_101);
d467 1
a467 1
    stringBuffer.append(TEXT_102);
d471 1
a471 1
    stringBuffer.append(TEXT_103);
d473 1
a473 1
    stringBuffer.append(TEXT_104);
d480 1
a480 1
    stringBuffer.append(TEXT_105);
d484 1
a484 1
    stringBuffer.append(TEXT_106);
d488 1
a488 1
    stringBuffer.append(TEXT_107);
d492 2
a493 2
    stringBuffer.append(TEXT_108);
    stringBuffer.append(TEXT_109);
d495 1
a495 1
    stringBuffer.append(TEXT_110);
d497 1
a497 1
    stringBuffer.append(TEXT_111);
d499 1
a499 1
    stringBuffer.append(TEXT_112);
d501 1
a501 1
    stringBuffer.append(TEXT_113);
d503 1
a503 1
    stringBuffer.append(TEXT_114);
d505 1
a505 1
    stringBuffer.append(TEXT_115);
d507 1
a507 1
    stringBuffer.append(TEXT_116);
d509 1
a509 1
    stringBuffer.append(TEXT_117);
d513 2
a514 2
    stringBuffer.append(TEXT_118);
    stringBuffer.append(TEXT_119);
a531 10
		viewPattern = "{0}";
	}
	editPattern = featureLabelModelFacet.getEditPattern();
	if (editPattern == null || editPattern.length() == 0) {
		editPattern = "{0}";
	}
} else if (labelModelFacet instanceof CompositeFeatureLabelModelFacet) {
	CompositeFeatureLabelModelFacet compositeFeatureLabelModelFacet = (CompositeFeatureLabelModelFacet) labelModelFacet;
	viewPattern = compositeFeatureLabelModelFacet.getViewPattern();
	if (viewPattern == null || viewPattern.length() == 0) {
d533 1
a533 1
		for(int i = 0; i < compositeFeatureLabelModelFacet.getMetaFeatures().size(); i++) {
d538 1
a538 1
	editPattern = compositeFeatureLabelModelFacet.getEditPattern();
d541 1
a541 1
		for(int i = 0; i < compositeFeatureLabelModelFacet.getMetaFeatures().size(); i++) {
d548 1
a548 1
    stringBuffer.append(TEXT_120);
d550 1
a550 1
    stringBuffer.append(TEXT_121);
d552 1
a552 1
    stringBuffer.append(TEXT_122);
d554 1
a554 1
    stringBuffer.append(TEXT_123);
d556 1
a556 1
    stringBuffer.append(TEXT_124);
d558 1
a558 1
    stringBuffer.append(TEXT_125);
d560 1
a560 1
    stringBuffer.append(TEXT_126);
d562 1
a562 1
    stringBuffer.append(TEXT_127);
a565 2
	GenFeature feature = featureLabelModelFacet.getMetaFeature();
	if (!feature.isPrimitiveType()) {
d567 1
a567 7
    stringBuffer.append(TEXT_128);
    myFeatureGetAccessorHelper.appendFeatureValueGetter("element", feature, underlyingMetaClass, false);
    stringBuffer.append(TEXT_129);
    
	}

    stringBuffer.append(TEXT_130);
d569 1
a569 7
    stringBuffer.append(TEXT_131);
    
		if (feature.isPrimitiveType()) {

    stringBuffer.append(TEXT_132);
    stringBuffer.append(primitiveTypeToWrapperClassName.get(feature.getTypeGenClassifier().getEcoreClassifier().getInstanceClass()));
    stringBuffer.append(TEXT_133);
d571 1
a571 18
		}
		myFeatureGetAccessorHelper.appendFeatureValueGetter("element", feature, underlyingMetaClass, false);
		if (feature.isPrimitiveType()) {

    stringBuffer.append(TEXT_134);
    
		}

    stringBuffer.append(TEXT_135);
    
} else if (labelModelFacet instanceof CompositeFeatureLabelModelFacet) {
	CompositeFeatureLabelModelFacet compositeFeatureLabelModelFacet = (CompositeFeatureLabelModelFacet) labelModelFacet;

    stringBuffer.append(TEXT_136);
    stringBuffer.append(importManager.getImportedName("java.text.MessageFormat"));
    stringBuffer.append(TEXT_137);
    
	for(Iterator it = compositeFeatureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
d575 1
a575 1
    stringBuffer.append(TEXT_138);
d577 1
a577 1
    stringBuffer.append(TEXT_139);
d583 1
a583 1
    stringBuffer.append(TEXT_140);
d587 1
a587 1
    stringBuffer.append(TEXT_141);
d592 1
a592 1
    stringBuffer.append(TEXT_142);
d596 1
a596 1
    stringBuffer.append(TEXT_143);
d600 2
a601 2
    stringBuffer.append(TEXT_144);
    stringBuffer.append(TEXT_145);
d609 1
a609 1
    stringBuffer.append(TEXT_146);
d613 1
a613 1
    stringBuffer.append(TEXT_147);
d615 1
a615 1
    stringBuffer.append(TEXT_148);
d617 1
a617 1
    stringBuffer.append(TEXT_149);
d619 1
a619 1
    stringBuffer.append(TEXT_150);
d621 1
a621 1
    stringBuffer.append(TEXT_151);
d623 1
a623 1
    stringBuffer.append(TEXT_152);
d625 1
a625 1
    stringBuffer.append(TEXT_153);
d627 1
a627 1
    stringBuffer.append(TEXT_154);
d629 1
a629 1
    stringBuffer.append(TEXT_155);
d631 1
a631 1
    stringBuffer.append(TEXT_156);
d633 1
a633 1
    stringBuffer.append(TEXT_157);
d635 1
a635 1
    stringBuffer.append(TEXT_158);
d639 1
a639 1
    stringBuffer.append(TEXT_159);
d643 1
a643 1
    stringBuffer.append(TEXT_160);
d645 1
a645 1
    stringBuffer.append(TEXT_161);
d649 3
a651 3
    stringBuffer.append(TEXT_162);
    stringBuffer.append(TEXT_163);
    stringBuffer.append(TEXT_164);
d653 1
a653 1
    stringBuffer.append(TEXT_165);
d655 1
a655 1
    stringBuffer.append(TEXT_166);
d657 1
a657 1
    stringBuffer.append(TEXT_167);
d659 1
a659 1
    stringBuffer.append(TEXT_168);
d661 1
a661 1
    stringBuffer.append(TEXT_169);
d663 1
a663 1
    stringBuffer.append(TEXT_170);
d665 1
a665 1
    stringBuffer.append(TEXT_171);
d667 1
a667 1
    stringBuffer.append(TEXT_172);
d669 1
a669 1
    stringBuffer.append(TEXT_173);
d673 1
a673 1
    stringBuffer.append(TEXT_174);
d675 1
a675 1
    stringBuffer.append(TEXT_175);
d677 1
a677 1
    stringBuffer.append(TEXT_176);
d679 1
a679 1
    stringBuffer.append(TEXT_177);
d683 1
a683 1
    stringBuffer.append(TEXT_178);
d685 1
a685 1
    stringBuffer.append(TEXT_179);
d687 1
a687 1
    stringBuffer.append(TEXT_180);
d689 1
a689 1
    stringBuffer.append(TEXT_181);
d691 1
a691 1
    stringBuffer.append(TEXT_182);
d693 1
a693 1
    stringBuffer.append(TEXT_183);
d695 1
a695 1
    stringBuffer.append(TEXT_184);
d697 1
a697 1
    stringBuffer.append(TEXT_185);
d699 1
a699 1
    stringBuffer.append(TEXT_186);
d701 1
a701 1
    stringBuffer.append(TEXT_187);
d703 1
a703 1
    stringBuffer.append(TEXT_188);
d705 1
a705 1
    stringBuffer.append(TEXT_189);
d707 1
a707 1
    stringBuffer.append(TEXT_190);
d710 2
a711 2
	FeatureLabelModelFacet compositeFeatureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	for(Iterator it = compositeFeatureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
d714 1
a714 1
    stringBuffer.append(TEXT_191);
d716 1
a716 1
    stringBuffer.append(TEXT_192);
d718 1
a718 1
    stringBuffer.append(TEXT_193);
d723 1
a723 1
    stringBuffer.append(TEXT_194);
d725 1
a725 1
    stringBuffer.append(TEXT_195);
d727 1
a727 1
    stringBuffer.append(TEXT_196);
d729 1
a729 1
    stringBuffer.append(TEXT_197);
d731 1
a731 1
    stringBuffer.append(TEXT_198);
d733 1
a733 1
    stringBuffer.append(TEXT_199);
d735 1
a735 1
    stringBuffer.append(TEXT_200);
d738 2
a739 2
	FeatureLabelModelFacet compositeFeatureLabelModelFacet = (FeatureLabelModelFacet) labelModelFacet;
	for(Iterator it = compositeFeatureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
d742 1
a742 1
    stringBuffer.append(TEXT_201);
d744 1
a744 1
    stringBuffer.append(TEXT_202);
d746 1
a746 1
    stringBuffer.append(TEXT_203);
d751 1
a751 1
    stringBuffer.append(TEXT_204);
d753 1
a753 1
    stringBuffer.append(TEXT_205);
d755 1
a755 1
    stringBuffer.append(TEXT_206);
d757 1
a757 1
    stringBuffer.append(TEXT_207);
d759 1
a759 1
    stringBuffer.append(TEXT_208);
d761 1
a761 1
    stringBuffer.append(TEXT_209);
d763 1
a763 1
    stringBuffer.append(TEXT_210);
d767 1
a767 1
    stringBuffer.append(TEXT_211);
d796 1
a796 1
    stringBuffer.append(TEXT_212);
d798 1
a798 1
    stringBuffer.append(TEXT_213);
d800 1
a800 1
    stringBuffer.append(TEXT_214);
d802 1
a802 1
    stringBuffer.append(TEXT_215);
d804 1
a804 1
    stringBuffer.append(TEXT_216);
d808 1
a808 1
    stringBuffer.append(TEXT_217);
d810 1
a810 1
    stringBuffer.append(TEXT_218);
d813 1
a813 1
    stringBuffer.append(TEXT_219);
d815 1
a815 1
    stringBuffer.append(TEXT_220);
d819 1
a819 1
    stringBuffer.append(TEXT_221);
d821 1
a821 1
    stringBuffer.append(TEXT_222);
d823 1
a823 1
    stringBuffer.append(TEXT_223);
d825 1
a825 1
    stringBuffer.append(TEXT_224);
d827 1
a827 1
    stringBuffer.append(TEXT_225);
d831 1
a831 1
    stringBuffer.append(TEXT_226);
d835 1
a835 1
    stringBuffer.append(TEXT_227);
d839 1
a839 1
    stringBuffer.append(TEXT_228);
d841 1
a841 1
    stringBuffer.append(TEXT_229);
d845 1
a845 1
    stringBuffer.append(TEXT_230);
d849 1
a849 1
    stringBuffer.append(TEXT_231);
d851 1
a851 1
    stringBuffer.append(TEXT_232);
d853 1
a853 1
    stringBuffer.append(TEXT_233);
d867 1
a867 1
    stringBuffer.append(TEXT_234);
d869 1
a869 1
    stringBuffer.append(TEXT_235);
d871 1
a871 1
    stringBuffer.append(TEXT_236);
d875 1
a875 1
    stringBuffer.append(TEXT_237);
d879 1
a879 1
    stringBuffer.append(TEXT_238);
d883 1
a883 1
    stringBuffer.append(TEXT_239);
d888 1
a888 1
    stringBuffer.append(TEXT_240);
d890 1
a890 1
    stringBuffer.append(TEXT_241);
d894 1
a894 1
    stringBuffer.append(TEXT_242);
d901 1
a901 1
    stringBuffer.append(TEXT_243);
d903 1
a903 1
    stringBuffer.append(TEXT_244);
@


1.13
log
@#161380 move readOnly back to GenLabel
@
text
@d214 51
a264 57
  protected final String TEXT_194 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_195 = ".eINSTANCE.get";
  protected final String TEXT_196 = "(), labelRefresher);";
  protected final String TEXT_197 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_198 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_199 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_200 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_201 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_202 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_203 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_204 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_205 = ".eINSTANCE.get";
  protected final String TEXT_206 = "(), labelRefresher);";
  protected final String TEXT_207 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_208 = ".eINSTANCE.get";
  protected final String TEXT_209 = "(), labelRefresher);";
  protected final String TEXT_210 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_211 = ".Refresher labelRefresher = new ";
  protected final String TEXT_212 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_213 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_214 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_215 = ".Refresher fontRefresher = new ";
  protected final String TEXT_216 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_217 = NL;
  protected final String TEXT_218 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_219 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_220 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_221 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_222 = " createLabel() {";
  protected final String TEXT_223 = NL + "\t\treturn new ";
  protected final String TEXT_224 = "();";
  protected final String TEXT_225 = NL + "\t\treturn ";
  protected final String TEXT_226 = ";";
  protected final String TEXT_227 = NL + "\t\treturn new ";
  protected final String TEXT_228 = "();";
  protected final String TEXT_229 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_230 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_231 = " label = createLabel();";
  protected final String TEXT_232 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_233 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_234 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_235 = NL + NL + "\t/**";
  protected final String TEXT_236 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_237 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_238 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_239 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_240 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_241 = "(";
  protected final String TEXT_242 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_243 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_244 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_245 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_246 = NL;
  protected final String TEXT_247 = NL;
  protected final String TEXT_248 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_249 = NL + "}";
  protected final String TEXT_250 = NL;
d844 3
a846 1
	GenFeature feature = ((FeatureLabelModelFacet)labelModelFacet).getMetaFeature();
d849 1
a849 1
    stringBuffer.append(importManager.getImportedName(feature.getGenPackage().getQualifiedPackageInterfaceName()));
d851 1
a851 1
    stringBuffer.append(feature.getFeatureAccessorName());
d854 2
a855 4
} else if (labelModelFacet instanceof CompositeFeatureLabelModelFacet) {
	CompositeFeatureLabelModelFacet compositeFeatureLabelModelFacet = (CompositeFeatureLabelModelFacet) labelModelFacet;
	for(Iterator it = compositeFeatureLabelModelFacet.getMetaFeatures().iterator(); it.hasNext(); ) {
		GenFeature next = (GenFeature) it.next();
d858 1
a858 1
    stringBuffer.append(importManager.getImportedName(next.getGenPackage().getQualifiedPackageInterfaceName()));
d860 1
a860 1
    stringBuffer.append(next.getFeatureAccessorName());
d862 1
a862 4
    
	}
}

d864 1
a864 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
a869 6
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_201);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_202);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_203);
d872 1
a872 10
	GenFeature feature = ((FeatureLabelModelFacet)labelModelFacet).getMetaFeature();

    stringBuffer.append(TEXT_204);
    stringBuffer.append(importManager.getImportedName(feature.getGenPackage().getQualifiedPackageInterfaceName()));
    stringBuffer.append(TEXT_205);
    stringBuffer.append(feature.getFeatureAccessorName());
    stringBuffer.append(TEXT_206);
    
} else if (labelModelFacet instanceof CompositeFeatureLabelModelFacet) {
	CompositeFeatureLabelModelFacet compositeFeatureLabelModelFacet = (CompositeFeatureLabelModelFacet) labelModelFacet;
d876 1
a876 1
    stringBuffer.append(TEXT_207);
d878 1
a878 1
    stringBuffer.append(TEXT_208);
d880 1
a880 1
    stringBuffer.append(TEXT_209);
d885 1
a885 1
    stringBuffer.append(TEXT_210);
d887 1
a887 1
    stringBuffer.append(TEXT_211);
d889 1
a889 1
    stringBuffer.append(TEXT_212);
d891 1
a891 1
    stringBuffer.append(TEXT_213);
d893 1
a893 1
    stringBuffer.append(TEXT_214);
d895 1
a895 1
    stringBuffer.append(TEXT_215);
d897 1
a897 1
    stringBuffer.append(TEXT_216);
d901 1
a901 1
    stringBuffer.append(TEXT_217);
d930 1
a930 1
    stringBuffer.append(TEXT_218);
d932 1
a932 1
    stringBuffer.append(TEXT_219);
d934 1
a934 1
    stringBuffer.append(TEXT_220);
d936 1
a936 1
    stringBuffer.append(TEXT_221);
d938 1
a938 1
    stringBuffer.append(TEXT_222);
d942 1
a942 1
    stringBuffer.append(TEXT_223);
d944 1
a944 1
    stringBuffer.append(TEXT_224);
d947 1
a947 1
    stringBuffer.append(TEXT_225);
d949 1
a949 1
    stringBuffer.append(TEXT_226);
d953 1
a953 1
    stringBuffer.append(TEXT_227);
d955 1
a955 1
    stringBuffer.append(TEXT_228);
d957 1
a957 1
    stringBuffer.append(TEXT_229);
d959 1
a959 1
    stringBuffer.append(TEXT_230);
d961 1
a961 1
    stringBuffer.append(TEXT_231);
d965 1
a965 1
    stringBuffer.append(TEXT_232);
d969 1
a969 1
    stringBuffer.append(TEXT_233);
d973 1
a973 1
    stringBuffer.append(TEXT_234);
d975 1
a975 1
    stringBuffer.append(TEXT_235);
d979 1
a979 1
    stringBuffer.append(TEXT_236);
d983 1
a983 1
    stringBuffer.append(TEXT_237);
d985 1
a985 1
    stringBuffer.append(TEXT_238);
d987 1
a987 1
    stringBuffer.append(TEXT_239);
d1001 1
a1001 1
    stringBuffer.append(TEXT_240);
d1003 1
a1003 1
    stringBuffer.append(TEXT_241);
d1005 1
a1005 1
    stringBuffer.append(TEXT_242);
d1009 1
a1009 1
    stringBuffer.append(TEXT_243);
d1013 1
a1013 1
    stringBuffer.append(TEXT_244);
d1017 1
a1017 1
    stringBuffer.append(TEXT_245);
d1022 1
a1022 1
    stringBuffer.append(TEXT_246);
d1024 1
a1024 1
    stringBuffer.append(TEXT_247);
d1028 1
a1028 1
    stringBuffer.append(TEXT_248);
d1035 1
a1035 1
    stringBuffer.append(TEXT_249);
d1037 1
a1037 1
    stringBuffer.append(TEXT_250);
@


1.12
log
@#160894 Move readOnly property from GenLabel to LabelFeatureModelFacet
@
text
@d283 1
a283 1
final boolean isReadOnly = genLabel.getModelFacet() != null && genLabel.getModelFacet().isReadOnly();
@


1.11
log
@[156358] bblajer - Diagram overview with Lite runtime
@
text
@d283 1
a283 1
final boolean isReadOnly = genLabel.isReadOnly();
@


1.10
log
@[155040] bblajer - Common Lite runtime functionality moved to dedicated plugin
@
text
@d57 154
a210 154
  protected final String TEXT_37 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tgetLabel().setText(value);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tprotected ";
  protected final String TEXT_38 = " getDirectEditCommand(";
  protected final String TEXT_39 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_40 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_41 = "(EDIT_PATTERN).parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_42 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_43 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_44 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_45 = " editingDomain = ";
  protected final String TEXT_46 = ".getEditingDomain(";
  protected final String TEXT_47 = ".getDiagram().getElement());";
  protected final String TEXT_48 = NL + "\t\t\t\t\t\tif (parseResult.length != 1) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_49 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_50 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult[0]);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_51 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_52 = " createDomainModelCommand(";
  protected final String TEXT_53 = " editingDomain, Object value) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_54 = " element = ";
  protected final String TEXT_55 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_56 = " feature = (";
  protected final String TEXT_57 = ") ";
  protected final String TEXT_58 = ".eINSTANCE.get";
  protected final String TEXT_59 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_60 = ".parseValue(feature, value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_61 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_62 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_63 = " result = new ";
  protected final String TEXT_64 = "();" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_65 = " values = new ";
  protected final String TEXT_66 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_67 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_68 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_69 = ".create(editingDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\treturn result;";
  protected final String TEXT_70 = NL + "\t\t\t\t\t\treturn ";
  protected final String TEXT_71 = ".create(editingDomain, element, feature, valueToSet);";
  protected final String TEXT_72 = NL + "\t\t\t\t\t}";
  protected final String TEXT_73 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_74 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_75 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_76 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_77 = "(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_78 = " createDomainModelCommand(";
  protected final String TEXT_79 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_80 = " element = ";
  protected final String TEXT_81 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_82 = " result = new ";
  protected final String TEXT_83 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_84 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_85 = " ";
  protected final String TEXT_86 = "feature = (";
  protected final String TEXT_87 = ") ";
  protected final String TEXT_88 = ".eINSTANCE.get";
  protected final String TEXT_89 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_90 = ".parseValue(feature, values[";
  protected final String TEXT_91 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_92 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_93 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_94 = " ";
  protected final String TEXT_95 = "values = new ";
  protected final String TEXT_96 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_97 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_98 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_99 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_100 = NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_101 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_102 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_103 = NL + "\t\t\t\t});";
  protected final String TEXT_104 = NL + "\t}" + NL;
  protected final String TEXT_105 = NL;
  protected final String TEXT_106 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_107 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_108 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_109 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_110 = "(this, ";
  protected final String TEXT_111 = ".class, new ";
  protected final String TEXT_112 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_113 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_114 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_115 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_116 = NL;
  protected final String TEXT_117 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_118 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String EDIT_PATTERN = \"";
  protected final String TEXT_119 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_120 = " element = ";
  protected final String TEXT_121 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_122 = " element = ";
  protected final String TEXT_123 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_124 = " element, String pattern) {";
  protected final String TEXT_125 = NL + "\t\tif (";
  protected final String TEXT_126 = " == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}";
  protected final String TEXT_127 = NL + "\t\treturn ";
  protected final String TEXT_128 = ".format(pattern, new Object[] {";
  protected final String TEXT_129 = NL + "\t\t\tnew ";
  protected final String TEXT_130 = "(";
  protected final String TEXT_131 = ")";
  protected final String TEXT_132 = NL + "\t\t});";
  protected final String TEXT_133 = NL + "\t\treturn ";
  protected final String TEXT_134 = ".format(pattern, new Object[] {";
  protected final String TEXT_135 = NL + "\t\t\tnew ";
  protected final String TEXT_136 = "(";
  protected final String TEXT_137 = ")";
  protected final String TEXT_138 = ",";
  protected final String TEXT_139 = NL + "\t\t});";
  protected final String TEXT_140 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_141 = NL + "\t}";
  protected final String TEXT_142 = NL;
  protected final String TEXT_143 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_144 = NL + "\t\t";
  protected final String TEXT_145 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_146 = ") ";
  protected final String TEXT_147 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_148 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_149 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_150 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_151 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_152 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_153 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_154 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_155 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_156 = "\t" + NL + "\t}";
  protected final String TEXT_157 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_158 = " createdFont;";
  protected final String TEXT_159 = "\t";
  protected final String TEXT_160 = NL;
  protected final String TEXT_161 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_162 = " style = (";
  protected final String TEXT_163 = ")  ";
  protected final String TEXT_164 = ".getStyle(";
  protected final String TEXT_165 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_166 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_167 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_168 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_169 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_170 = " getLabelIcon() {";
  protected final String TEXT_171 = NL + "\t\t";
  protected final String TEXT_172 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_173 = " imageDescriptor = ";
  protected final String TEXT_174 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_175 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_176 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_177 = ") ? (";
  protected final String TEXT_178 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_179 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_180 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_181 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_182 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_183 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_184 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_185 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_186 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_187 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_188 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_189 = ".eINSTANCE.get";
  protected final String TEXT_190 = "(), labelRefresher);";
d214 10
a223 10
  protected final String TEXT_194 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_195 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_196 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_197 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_198 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_199 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_200 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_201 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_202 = ".eINSTANCE.get";
  protected final String TEXT_203 = "(), labelRefresher);";
d227 40
a266 40
  protected final String TEXT_207 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_208 = ".Refresher labelRefresher = new ";
  protected final String TEXT_209 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_210 = ".Refresher fontColorRefresher = new ";
  protected final String TEXT_211 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_212 = ".Refresher fontRefresher = new ";
  protected final String TEXT_213 = ".Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_214 = NL;
  protected final String TEXT_215 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_216 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_217 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_218 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_219 = " createLabel() {";
  protected final String TEXT_220 = NL + "\t\treturn new ";
  protected final String TEXT_221 = "();";
  protected final String TEXT_222 = NL + "\t\treturn ";
  protected final String TEXT_223 = ";";
  protected final String TEXT_224 = NL + "\t\treturn new ";
  protected final String TEXT_225 = "();";
  protected final String TEXT_226 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_227 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_228 = " label = createLabel();";
  protected final String TEXT_229 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_230 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_231 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_232 = NL + NL + "\t/**";
  protected final String TEXT_233 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_234 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_235 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_236 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_237 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_238 = "(";
  protected final String TEXT_239 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_240 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_241 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_242 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_243 = NL;
  protected final String TEXT_244 = NL;
  protected final String TEXT_245 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_246 = NL + "}";
d268 3
d406 1
a415 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.Command"));
a416 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.requests.DirectEditRequest"));
d418 1
a418 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.UnexecutableCommand"));
d420 1
a420 1
    stringBuffer.append(importManager.getImportedName("java.text.MessageFormat"));
d424 6
d431 1
a431 1
    stringBuffer.append(TEXT_43);
d433 1
a433 1
    stringBuffer.append(TEXT_44);
d435 1
a435 1
    stringBuffer.append(TEXT_45);
d437 1
a437 1
    stringBuffer.append(TEXT_46);
d439 1
a439 1
    stringBuffer.append(TEXT_47);
d445 1
a445 1
    stringBuffer.append(TEXT_48);
d447 1
a447 1
    stringBuffer.append(TEXT_49);
d449 1
a449 1
    stringBuffer.append(TEXT_50);
d451 1
a451 1
    stringBuffer.append(TEXT_51);
d453 1
a453 1
    stringBuffer.append(TEXT_52);
d455 1
a455 1
    stringBuffer.append(TEXT_53);
d457 1
a457 1
    stringBuffer.append(TEXT_54);
d459 1
a459 1
    stringBuffer.append(TEXT_55);
d461 1
a461 1
    stringBuffer.append(TEXT_56);
d463 1
a463 1
    stringBuffer.append(TEXT_57);
d465 1
a465 1
    stringBuffer.append(TEXT_58);
d467 1
a467 1
    stringBuffer.append(TEXT_59);
d469 1
a469 1
    stringBuffer.append(TEXT_60);
d471 1
a471 1
    stringBuffer.append(TEXT_61);
d475 1
a475 1
    stringBuffer.append(TEXT_62);
d477 1
a477 1
    stringBuffer.append(TEXT_63);
d479 1
a479 1
    stringBuffer.append(TEXT_64);
d481 1
a481 1
    stringBuffer.append(TEXT_65);
d483 1
a483 1
    stringBuffer.append(TEXT_66);
d485 1
a485 1
    stringBuffer.append(TEXT_67);
d487 1
a487 1
    stringBuffer.append(TEXT_68);
d489 1
a489 1
    stringBuffer.append(TEXT_69);
d493 1
a493 1
    stringBuffer.append(TEXT_70);
d495 1
a495 1
    stringBuffer.append(TEXT_71);
d499 1
a499 1
    stringBuffer.append(TEXT_72);
d505 1
a505 1
    stringBuffer.append(TEXT_73);
d507 1
a507 1
    stringBuffer.append(TEXT_74);
d509 1
a509 1
    stringBuffer.append(TEXT_75);
d511 1
a511 1
    stringBuffer.append(TEXT_76);
d513 1
a513 1
    stringBuffer.append(TEXT_77);
d515 1
a515 1
    stringBuffer.append(TEXT_78);
d517 1
a517 1
    stringBuffer.append(TEXT_79);
d519 1
a519 1
    stringBuffer.append(TEXT_80);
d521 1
a521 1
    stringBuffer.append(TEXT_81);
d523 1
a523 1
    stringBuffer.append(TEXT_82);
d525 1
a525 1
    stringBuffer.append(TEXT_83);
d532 1
a532 1
    stringBuffer.append(TEXT_84);
d535 1
a535 1
    stringBuffer.append(TEXT_85);
d537 1
a537 1
    stringBuffer.append(TEXT_86);
d539 1
a539 1
    stringBuffer.append(TEXT_87);
d541 1
a541 1
    stringBuffer.append(TEXT_88);
d543 1
a543 1
    stringBuffer.append(TEXT_89);
d545 1
a545 1
    stringBuffer.append(TEXT_90);
d547 1
a547 1
    stringBuffer.append(TEXT_91);
d549 1
a549 1
    stringBuffer.append(TEXT_92);
d553 1
a553 1
    stringBuffer.append(TEXT_93);
d556 1
a556 1
    stringBuffer.append(TEXT_94);
d558 1
a558 1
    stringBuffer.append(TEXT_95);
d560 1
a560 1
    stringBuffer.append(TEXT_96);
d562 1
a562 1
    stringBuffer.append(TEXT_97);
d564 1
a564 1
    stringBuffer.append(TEXT_98);
d566 1
a566 1
    stringBuffer.append(TEXT_99);
d570 1
a570 1
    stringBuffer.append(TEXT_100);
d572 1
a572 1
    stringBuffer.append(TEXT_101);
d579 1
a579 1
    stringBuffer.append(TEXT_102);
d583 1
a583 1
    stringBuffer.append(TEXT_103);
d587 1
a587 1
    stringBuffer.append(TEXT_104);
d591 2
a592 2
    stringBuffer.append(TEXT_105);
    stringBuffer.append(TEXT_106);
d594 1
a594 1
    stringBuffer.append(TEXT_107);
d596 1
a596 1
    stringBuffer.append(TEXT_108);
d598 1
a598 1
    stringBuffer.append(TEXT_109);
d600 1
a600 1
    stringBuffer.append(TEXT_110);
d602 1
a602 1
    stringBuffer.append(TEXT_111);
d604 1
a604 1
    stringBuffer.append(TEXT_112);
d606 1
a606 1
    stringBuffer.append(TEXT_113);
d608 1
a608 1
    stringBuffer.append(TEXT_114);
d612 2
a613 2
    stringBuffer.append(TEXT_115);
    stringBuffer.append(TEXT_116);
d657 1
a657 1
    stringBuffer.append(TEXT_117);
d659 1
a659 1
    stringBuffer.append(TEXT_118);
d661 1
a661 1
    stringBuffer.append(TEXT_119);
d663 1
a663 1
    stringBuffer.append(TEXT_120);
d665 1
a665 1
    stringBuffer.append(TEXT_121);
d667 1
a667 1
    stringBuffer.append(TEXT_122);
d669 1
a669 1
    stringBuffer.append(TEXT_123);
d671 1
a671 1
    stringBuffer.append(TEXT_124);
d678 1
a678 1
    stringBuffer.append(TEXT_125);
d680 1
a680 1
    stringBuffer.append(TEXT_126);
d684 1
a684 1
    stringBuffer.append(TEXT_127);
d686 1
a686 1
    stringBuffer.append(TEXT_128);
d690 1
a690 1
    stringBuffer.append(TEXT_129);
d692 1
a692 1
    stringBuffer.append(TEXT_130);
d698 1
a698 1
    stringBuffer.append(TEXT_131);
d702 1
a702 1
    stringBuffer.append(TEXT_132);
d707 1
a707 1
    stringBuffer.append(TEXT_133);
d709 1
a709 1
    stringBuffer.append(TEXT_134);
d715 1
a715 1
    stringBuffer.append(TEXT_135);
d717 1
a717 1
    stringBuffer.append(TEXT_136);
d723 1
a723 1
    stringBuffer.append(TEXT_137);
d727 1
a727 1
    stringBuffer.append(TEXT_138);
d732 1
a732 1
    stringBuffer.append(TEXT_139);
d736 1
a736 1
    stringBuffer.append(TEXT_140);
d740 2
a741 2
    stringBuffer.append(TEXT_141);
    stringBuffer.append(TEXT_142);
d749 1
a749 1
    stringBuffer.append(TEXT_143);
d753 1
a753 1
    stringBuffer.append(TEXT_144);
d755 1
a755 1
    stringBuffer.append(TEXT_145);
d757 1
a757 1
    stringBuffer.append(TEXT_146);
d759 1
a759 1
    stringBuffer.append(TEXT_147);
d761 1
a761 1
    stringBuffer.append(TEXT_148);
d763 1
a763 1
    stringBuffer.append(TEXT_149);
d765 1
a765 1
    stringBuffer.append(TEXT_150);
d767 1
a767 1
    stringBuffer.append(TEXT_151);
d769 1
a769 1
    stringBuffer.append(TEXT_152);
d771 1
a771 1
    stringBuffer.append(TEXT_153);
d773 1
a773 1
    stringBuffer.append(TEXT_154);
d775 1
a775 1
    stringBuffer.append(TEXT_155);
d779 1
a779 1
    stringBuffer.append(TEXT_156);
d783 1
a783 1
    stringBuffer.append(TEXT_157);
d785 1
a785 1
    stringBuffer.append(TEXT_158);
a788 4
    stringBuffer.append(TEXT_159);
    stringBuffer.append(TEXT_160);
    stringBuffer.append(TEXT_161);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a789 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a790 1
    stringBuffer.append(primaryView);
d792 1
a792 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d794 1
a794 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d796 1
a796 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d798 1
a798 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d802 6
d809 1
a809 1
    stringBuffer.append(TEXT_170);
d813 1
a813 1
    stringBuffer.append(TEXT_171);
d815 1
a815 1
    stringBuffer.append(TEXT_172);
d817 1
a817 1
    stringBuffer.append(TEXT_173);
d819 1
a819 1
    stringBuffer.append(TEXT_174);
d823 1
a823 1
    stringBuffer.append(TEXT_175);
d825 1
a825 1
    stringBuffer.append(TEXT_176);
d827 1
a827 1
    stringBuffer.append(TEXT_177);
a828 6
    stringBuffer.append(TEXT_178);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
    stringBuffer.append(TEXT_179);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
    stringBuffer.append(TEXT_180);
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d832 1
a832 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d834 1
a834 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d836 1
a836 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d842 6
d852 1
a852 1
    stringBuffer.append(TEXT_188);
d854 1
a854 1
    stringBuffer.append(TEXT_189);
d856 1
a856 1
    stringBuffer.append(TEXT_190);
d863 1
a863 1
    stringBuffer.append(TEXT_191);
d865 1
a865 1
    stringBuffer.append(TEXT_192);
d867 1
a867 1
    stringBuffer.append(TEXT_193);
d872 1
a872 1
    stringBuffer.append(TEXT_194);
d874 1
a874 1
    stringBuffer.append(TEXT_195);
d876 1
a876 1
    stringBuffer.append(TEXT_196);
d878 1
a878 1
    stringBuffer.append(TEXT_197);
d880 1
a880 1
    stringBuffer.append(TEXT_198);
d882 1
a882 1
    stringBuffer.append(TEXT_199);
d884 1
a884 1
    stringBuffer.append(TEXT_200);
d889 1
a889 1
    stringBuffer.append(TEXT_201);
d891 1
a891 1
    stringBuffer.append(TEXT_202);
d893 1
a893 1
    stringBuffer.append(TEXT_203);
d900 1
a900 1
    stringBuffer.append(TEXT_204);
d902 1
a902 1
    stringBuffer.append(TEXT_205);
d904 1
a904 1
    stringBuffer.append(TEXT_206);
a908 6
    stringBuffer.append(TEXT_207);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_208);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
    stringBuffer.append(TEXT_209);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart"));
d916 6
d925 1
a925 1
    stringBuffer.append(TEXT_214);
d954 1
a954 1
    stringBuffer.append(TEXT_215);
d956 1
a956 1
    stringBuffer.append(TEXT_216);
d958 1
a958 1
    stringBuffer.append(TEXT_217);
d960 1
a960 1
    stringBuffer.append(TEXT_218);
d962 1
a962 1
    stringBuffer.append(TEXT_219);
d966 1
a966 1
    stringBuffer.append(TEXT_220);
d968 1
a968 1
    stringBuffer.append(TEXT_221);
d971 1
a971 1
    stringBuffer.append(TEXT_222);
d973 1
a973 1
    stringBuffer.append(TEXT_223);
d977 1
a977 1
    stringBuffer.append(TEXT_224);
d979 1
a979 1
    stringBuffer.append(TEXT_225);
d981 1
a981 1
    stringBuffer.append(TEXT_226);
d983 1
a983 1
    stringBuffer.append(TEXT_227);
d985 1
a985 1
    stringBuffer.append(TEXT_228);
d989 1
a989 1
    stringBuffer.append(TEXT_229);
d993 1
a993 1
    stringBuffer.append(TEXT_230);
d997 1
a997 1
    stringBuffer.append(TEXT_231);
d999 1
a999 1
    stringBuffer.append(TEXT_232);
d1003 1
a1003 1
    stringBuffer.append(TEXT_233);
d1007 1
a1007 1
    stringBuffer.append(TEXT_234);
d1009 1
a1009 1
    stringBuffer.append(TEXT_235);
d1011 1
a1011 1
    stringBuffer.append(TEXT_236);
d1025 1
a1025 1
    stringBuffer.append(TEXT_237);
d1027 1
a1027 1
    stringBuffer.append(TEXT_238);
d1029 1
a1029 1
    stringBuffer.append(TEXT_239);
d1033 1
a1033 1
    stringBuffer.append(TEXT_240);
d1037 1
a1037 1
    stringBuffer.append(TEXT_241);
d1041 1
a1041 1
    stringBuffer.append(TEXT_242);
d1046 1
a1046 1
    stringBuffer.append(TEXT_243);
d1048 1
a1048 1
    stringBuffer.append(TEXT_244);
d1052 1
a1052 1
    stringBuffer.append(TEXT_245);
d1059 1
a1059 1
    stringBuffer.append(TEXT_246);
d1061 1
a1061 1
    stringBuffer.append(TEXT_247);
@


1.9
log
@[bblajer] #152774 Compilable code when EClass has instance class attribute set
@
text
@d70 49
a118 49
  protected final String TEXT_50 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult[0]);" + NL + "\t\t\t\t\t\treturn new WrappingCommand(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_51 = " createDomainModelCommand(";
  protected final String TEXT_52 = " editingDomain, Object value) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_53 = " element = ";
  protected final String TEXT_54 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_55 = " feature = (";
  protected final String TEXT_56 = ") ";
  protected final String TEXT_57 = ".eINSTANCE.get";
  protected final String TEXT_58 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_59 = ".parseValue(feature, value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_60 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_61 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_62 = " result = new ";
  protected final String TEXT_63 = "();" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_64 = " values = new ";
  protected final String TEXT_65 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_66 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_67 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_68 = ".create(editingDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\treturn result;";
  protected final String TEXT_69 = NL + "\t\t\t\t\t\treturn ";
  protected final String TEXT_70 = ".create(editingDomain, element, feature, valueToSet);";
  protected final String TEXT_71 = NL + "\t\t\t\t\t}";
  protected final String TEXT_72 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_73 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_74 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_75 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new WrappingCommand(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_76 = " createDomainModelCommand(";
  protected final String TEXT_77 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_78 = " element = ";
  protected final String TEXT_79 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_80 = " result = new ";
  protected final String TEXT_81 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_82 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_83 = " ";
  protected final String TEXT_84 = "feature = (";
  protected final String TEXT_85 = ") ";
  protected final String TEXT_86 = ".eINSTANCE.get";
  protected final String TEXT_87 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_88 = ".parseValue(feature, values[";
  protected final String TEXT_89 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_90 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_91 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_92 = " ";
  protected final String TEXT_93 = "values = new ";
  protected final String TEXT_94 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_95 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_96 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_97 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_98 = NL + "\t\t\t\t\t\tresult.append(";
d120 20
a139 20
  protected final String TEXT_100 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_101 = NL + "\t\t\t\t});";
  protected final String TEXT_102 = NL + "\t}" + NL;
  protected final String TEXT_103 = NL;
  protected final String TEXT_104 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_105 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_106 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_107 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_108 = "(this, ";
  protected final String TEXT_109 = ".class, new ";
  protected final String TEXT_110 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_111 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_112 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_113 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_114 = NL;
  protected final String TEXT_115 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_116 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String EDIT_PATTERN = \"";
  protected final String TEXT_117 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_118 = " element = ";
  protected final String TEXT_119 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
d141 127
a267 119
  protected final String TEXT_121 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_122 = " element, String pattern) {";
  protected final String TEXT_123 = NL + "\t\tif (";
  protected final String TEXT_124 = " == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}";
  protected final String TEXT_125 = NL + "\t\treturn ";
  protected final String TEXT_126 = ".format(pattern, new Object[] {";
  protected final String TEXT_127 = NL + "\t\t\tnew ";
  protected final String TEXT_128 = "(";
  protected final String TEXT_129 = ")";
  protected final String TEXT_130 = NL + "\t\t});";
  protected final String TEXT_131 = NL + "\t\treturn ";
  protected final String TEXT_132 = ".format(pattern, new Object[] {";
  protected final String TEXT_133 = NL + "\t\t\tnew ";
  protected final String TEXT_134 = "(";
  protected final String TEXT_135 = ")";
  protected final String TEXT_136 = ",";
  protected final String TEXT_137 = NL + "\t\t});";
  protected final String TEXT_138 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_139 = NL + "\t}";
  protected final String TEXT_140 = NL;
  protected final String TEXT_141 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_142 = NL + "\t\t";
  protected final String TEXT_143 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_144 = ") ";
  protected final String TEXT_145 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_146 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_147 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_148 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_149 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_150 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_151 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_152 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_153 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_154 = "\t" + NL + "\t}";
  protected final String TEXT_155 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_156 = " createdFont;";
  protected final String TEXT_157 = "\t";
  protected final String TEXT_158 = NL;
  protected final String TEXT_159 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_160 = " style = (";
  protected final String TEXT_161 = ")  ";
  protected final String TEXT_162 = ".getStyle(";
  protected final String TEXT_163 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_164 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_165 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_166 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_167 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_168 = " getLabelIcon() {";
  protected final String TEXT_169 = NL + "\t\t";
  protected final String TEXT_170 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_171 = " imageDescriptor = ";
  protected final String TEXT_172 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_173 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_174 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_175 = ") ? (";
  protected final String TEXT_176 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_177 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_178 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_179 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_180 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_181 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_182 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_183 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_184 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_185 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_186 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_187 = ".eINSTANCE.get";
  protected final String TEXT_188 = "(), labelRefresher);";
  protected final String TEXT_189 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_190 = ".eINSTANCE.get";
  protected final String TEXT_191 = "(), labelRefresher);";
  protected final String TEXT_192 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_193 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_194 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_195 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_196 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_197 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_198 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_199 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_200 = ".eINSTANCE.get";
  protected final String TEXT_201 = "(), labelRefresher);";
  protected final String TEXT_202 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_203 = ".eINSTANCE.get";
  protected final String TEXT_204 = "(), labelRefresher);";
  protected final String TEXT_205 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher labelRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontColorRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_206 = NL;
  protected final String TEXT_207 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_208 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_209 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_210 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_211 = " createLabel() {";
  protected final String TEXT_212 = NL + "\t\treturn new ";
  protected final String TEXT_213 = "();";
  protected final String TEXT_214 = NL + "\t\treturn ";
  protected final String TEXT_215 = ";";
  protected final String TEXT_216 = NL + "\t\treturn new ";
  protected final String TEXT_217 = "();";
  protected final String TEXT_218 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_219 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_220 = " label = createLabel();";
  protected final String TEXT_221 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_222 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_223 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_224 = NL + NL + "\t/**";
  protected final String TEXT_225 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_226 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_227 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_228 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_229 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_230 = "(";
  protected final String TEXT_231 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_232 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_233 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_234 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_235 = NL;
  protected final String TEXT_236 = NL;
  protected final String TEXT_237 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_238 = NL + "}";
  protected final String TEXT_239 = NL;
d442 2
d445 1
a445 1
    stringBuffer.append(TEXT_51);
d447 1
a447 1
    stringBuffer.append(TEXT_52);
d449 1
a449 1
    stringBuffer.append(TEXT_53);
a450 2
    stringBuffer.append(TEXT_54);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EAttribute"));
d454 2
d457 1
a457 1
    stringBuffer.append(TEXT_57);
a458 2
    stringBuffer.append(TEXT_58);
    stringBuffer.append(importManager.getImportedName(genDiagram.getAbstractParserQualifiedClassName()));
d460 2
d463 1
a463 1
    stringBuffer.append(TEXT_60);
a466 2
    stringBuffer.append(TEXT_61);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
d470 2
d473 1
a473 1
    stringBuffer.append(TEXT_64);
d475 1
a475 1
    stringBuffer.append(TEXT_65);
d477 1
a477 1
    stringBuffer.append(TEXT_66);
d479 1
a479 1
    stringBuffer.append(TEXT_67);
d481 1
a481 1
    stringBuffer.append(TEXT_68);
d485 1
a485 1
    stringBuffer.append(TEXT_69);
d487 1
a487 1
    stringBuffer.append(TEXT_70);
d491 1
a491 1
    stringBuffer.append(TEXT_71);
d497 1
a497 1
    stringBuffer.append(TEXT_72);
d499 1
a499 1
    stringBuffer.append(TEXT_73);
a500 2
    stringBuffer.append(TEXT_74);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
d504 4
d509 1
a509 1
    stringBuffer.append(TEXT_77);
d511 1
a511 1
    stringBuffer.append(TEXT_78);
d513 1
a513 1
    stringBuffer.append(TEXT_79);
d515 1
a515 1
    stringBuffer.append(TEXT_80);
d517 1
a517 1
    stringBuffer.append(TEXT_81);
d524 1
a524 1
    stringBuffer.append(TEXT_82);
d527 1
a527 1
    stringBuffer.append(TEXT_83);
d529 1
a529 1
    stringBuffer.append(TEXT_84);
d531 1
a531 1
    stringBuffer.append(TEXT_85);
d533 1
a533 1
    stringBuffer.append(TEXT_86);
d535 3
a537 3
    stringBuffer.append(TEXT_87);
    stringBuffer.append(importManager.getImportedName(genDiagram.getAbstractParserQualifiedClassName()));
    stringBuffer.append(TEXT_88);
d539 1
a539 1
    stringBuffer.append(TEXT_89);
d541 1
a541 1
    stringBuffer.append(TEXT_90);
d545 1
a545 1
    stringBuffer.append(TEXT_91);
d548 1
a548 1
    stringBuffer.append(TEXT_92);
d550 1
a550 1
    stringBuffer.append(TEXT_93);
d552 1
a552 1
    stringBuffer.append(TEXT_94);
d554 1
a554 1
    stringBuffer.append(TEXT_95);
d556 1
a556 1
    stringBuffer.append(TEXT_96);
d558 1
a558 1
    stringBuffer.append(TEXT_97);
d562 1
a562 1
    stringBuffer.append(TEXT_98);
d564 1
a564 1
    stringBuffer.append(TEXT_99);
d571 1
a571 1
    stringBuffer.append(TEXT_100);
d575 1
a575 1
    stringBuffer.append(TEXT_101);
d579 1
a579 1
    stringBuffer.append(TEXT_102);
d583 2
a584 2
    stringBuffer.append(TEXT_103);
    stringBuffer.append(TEXT_104);
d586 1
a586 1
    stringBuffer.append(TEXT_105);
d588 1
a588 1
    stringBuffer.append(TEXT_106);
d590 1
a590 1
    stringBuffer.append(TEXT_107);
d592 1
a592 1
    stringBuffer.append(TEXT_108);
d594 1
a594 1
    stringBuffer.append(TEXT_109);
d596 1
a596 1
    stringBuffer.append(TEXT_110);
d598 1
a598 1
    stringBuffer.append(TEXT_111);
d600 1
a600 1
    stringBuffer.append(TEXT_112);
d604 2
a605 2
    stringBuffer.append(TEXT_113);
    stringBuffer.append(TEXT_114);
d649 1
a649 1
    stringBuffer.append(TEXT_115);
d651 1
a651 1
    stringBuffer.append(TEXT_116);
a652 4
    stringBuffer.append(TEXT_117);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_118);
    stringBuffer.append(resolvedSemanticElement);
d660 4
d670 1
a670 1
    stringBuffer.append(TEXT_123);
d672 1
a672 1
    stringBuffer.append(TEXT_124);
d676 1
a676 1
    stringBuffer.append(TEXT_125);
d678 1
a678 1
    stringBuffer.append(TEXT_126);
d682 1
a682 1
    stringBuffer.append(TEXT_127);
d684 1
a684 1
    stringBuffer.append(TEXT_128);
d690 1
a690 1
    stringBuffer.append(TEXT_129);
d694 1
a694 1
    stringBuffer.append(TEXT_130);
d699 1
a699 1
    stringBuffer.append(TEXT_131);
d701 1
a701 1
    stringBuffer.append(TEXT_132);
d707 1
a707 1
    stringBuffer.append(TEXT_133);
d709 1
a709 1
    stringBuffer.append(TEXT_134);
d715 1
a715 1
    stringBuffer.append(TEXT_135);
d719 1
a719 1
    stringBuffer.append(TEXT_136);
d724 1
a724 1
    stringBuffer.append(TEXT_137);
d728 1
a728 1
    stringBuffer.append(TEXT_138);
d732 2
a733 2
    stringBuffer.append(TEXT_139);
    stringBuffer.append(TEXT_140);
d741 1
a741 1
    stringBuffer.append(TEXT_141);
d745 1
a745 1
    stringBuffer.append(TEXT_142);
d747 1
a747 1
    stringBuffer.append(TEXT_143);
d749 1
a749 1
    stringBuffer.append(TEXT_144);
d751 1
a751 1
    stringBuffer.append(TEXT_145);
d753 1
a753 1
    stringBuffer.append(TEXT_146);
a754 4
    stringBuffer.append(TEXT_147);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
    stringBuffer.append(TEXT_148);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
d758 1
a758 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
d760 1
a760 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.FontData"));
d764 4
d771 1
a771 1
    stringBuffer.append(TEXT_154);
d775 1
a775 1
    stringBuffer.append(TEXT_155);
d777 1
a777 1
    stringBuffer.append(TEXT_156);
a780 2
    stringBuffer.append(TEXT_157);
    stringBuffer.append(TEXT_158);
a781 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
d783 1
a784 2
    stringBuffer.append(TEXT_161);
    stringBuffer.append(primaryView);
d786 1
a786 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d788 1
a788 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d790 1
a790 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d796 4
d801 1
a801 1
    stringBuffer.append(TEXT_168);
d805 1
a805 1
    stringBuffer.append(TEXT_169);
d807 1
a807 1
    stringBuffer.append(TEXT_170);
d809 1
a809 1
    stringBuffer.append(TEXT_171);
d811 1
a811 1
    stringBuffer.append(TEXT_172);
a814 4
    stringBuffer.append(TEXT_173);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_174);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d818 1
a818 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d820 1
a820 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d826 1
a826 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d828 1
a828 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d836 4
d844 1
a844 1
    stringBuffer.append(TEXT_186);
d846 1
a846 1
    stringBuffer.append(TEXT_187);
d848 1
a848 1
    stringBuffer.append(TEXT_188);
d855 1
a855 1
    stringBuffer.append(TEXT_189);
d857 1
a857 1
    stringBuffer.append(TEXT_190);
d859 1
a859 1
    stringBuffer.append(TEXT_191);
d864 1
a864 1
    stringBuffer.append(TEXT_192);
a865 4
    stringBuffer.append(TEXT_193);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
    stringBuffer.append(TEXT_194);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d873 4
d881 1
a881 1
    stringBuffer.append(TEXT_199);
d883 1
a883 1
    stringBuffer.append(TEXT_200);
d885 1
a885 1
    stringBuffer.append(TEXT_201);
d892 1
a892 1
    stringBuffer.append(TEXT_202);
d894 1
a894 1
    stringBuffer.append(TEXT_203);
d896 1
a896 1
    stringBuffer.append(TEXT_204);
d901 13
a913 1
    stringBuffer.append(TEXT_205);
d917 1
a917 1
    stringBuffer.append(TEXT_206);
d946 1
a946 1
    stringBuffer.append(TEXT_207);
d948 1
a948 1
    stringBuffer.append(TEXT_208);
d950 1
a950 1
    stringBuffer.append(TEXT_209);
d952 1
a952 1
    stringBuffer.append(TEXT_210);
d954 1
a954 1
    stringBuffer.append(TEXT_211);
d958 1
a958 1
    stringBuffer.append(TEXT_212);
d960 1
a960 1
    stringBuffer.append(TEXT_213);
d963 1
a963 1
    stringBuffer.append(TEXT_214);
d965 1
a965 1
    stringBuffer.append(TEXT_215);
d969 1
a969 1
    stringBuffer.append(TEXT_216);
d971 1
a971 1
    stringBuffer.append(TEXT_217);
d973 1
a973 1
    stringBuffer.append(TEXT_218);
d975 1
a975 1
    stringBuffer.append(TEXT_219);
d977 1
a977 1
    stringBuffer.append(TEXT_220);
d981 1
a981 1
    stringBuffer.append(TEXT_221);
d985 1
a985 1
    stringBuffer.append(TEXT_222);
d989 1
a989 1
    stringBuffer.append(TEXT_223);
d991 1
a991 1
    stringBuffer.append(TEXT_224);
d995 1
a995 1
    stringBuffer.append(TEXT_225);
d999 1
a999 1
    stringBuffer.append(TEXT_226);
d1001 1
a1001 1
    stringBuffer.append(TEXT_227);
d1003 1
a1003 1
    stringBuffer.append(TEXT_228);
d1017 1
a1017 1
    stringBuffer.append(TEXT_229);
d1019 1
a1019 1
    stringBuffer.append(TEXT_230);
d1021 1
a1021 1
    stringBuffer.append(TEXT_231);
d1025 1
a1025 1
    stringBuffer.append(TEXT_232);
d1029 1
a1029 1
    stringBuffer.append(TEXT_233);
d1033 1
a1033 1
    stringBuffer.append(TEXT_234);
d1038 1
a1038 1
    stringBuffer.append(TEXT_235);
d1040 1
a1040 1
    stringBuffer.append(TEXT_236);
d1044 1
a1044 1
    stringBuffer.append(TEXT_237);
d1051 1
a1051 1
    stringBuffer.append(TEXT_238);
d1053 1
a1053 1
    stringBuffer.append(TEXT_239);
@


1.8
log
@[bblajer] #146009 Reflect changes in domain model links
@
text
@d25 235
a259 214
  protected final String TEXT_5 = NL + NL + "/**" + NL + " * @@generated" + NL + " */" + NL + "public class ";
  protected final String TEXT_6 = " extends ";
  protected final String TEXT_7 = " {";
  protected final String TEXT_8 = NL;
  protected final String TEXT_9 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic static final int VISUAL_ID = ";
  protected final String TEXT_10 = ";";
  protected final String TEXT_11 = NL;
  protected final String TEXT_12 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_13 = " manager;" + NL;
  protected final String TEXT_14 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate String defaultText;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_15 = "(View view) {" + NL + "\t\tsetModel(view);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void createEditPolicies() {";
  protected final String TEXT_16 = NL;
  protected final String TEXT_17 = "\t\tinstallEditPolicy(";
  protected final String TEXT_18 = ".DIRECT_EDIT_ROLE," + NL + "\t\t\t\tnew ";
  protected final String TEXT_19 = "() {" + NL + "\t\t\t\t\tprotected void showCurrentEditValue(";
  protected final String TEXT_20 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tgetLabel().setText(value);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tprotected ";
  protected final String TEXT_21 = " getDirectEditCommand(";
  protected final String TEXT_22 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_23 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_24 = "(EDIT_PATTERN).parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_25 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_26 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_27 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_28 = " editingDomain = ";
  protected final String TEXT_29 = ".getEditingDomain(";
  protected final String TEXT_30 = ".getDiagram().getElement());";
  protected final String TEXT_31 = NL + "\t\t\t\t\t\tif (parseResult.length != 1) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_32 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_33 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult[0]);" + NL + "\t\t\t\t\t\treturn new WrappingCommand(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_34 = " createDomainModelCommand(";
  protected final String TEXT_35 = " editingDomain, Object value) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_36 = " element = ";
  protected final String TEXT_37 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_38 = " feature = (";
  protected final String TEXT_39 = ") ";
  protected final String TEXT_40 = ".eINSTANCE.get";
  protected final String TEXT_41 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_42 = ".parseValue(feature, value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_43 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_44 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_45 = " result = new ";
  protected final String TEXT_46 = "();" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_47 = " values = new ";
  protected final String TEXT_48 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_49 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_50 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_51 = ".create(editingDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\treturn result;";
  protected final String TEXT_52 = NL + "\t\t\t\t\t\treturn ";
  protected final String TEXT_53 = ".create(editingDomain, element, feature, valueToSet);";
  protected final String TEXT_54 = NL + "\t\t\t\t\t}";
  protected final String TEXT_55 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_56 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_57 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_58 = " domainModelCommand = createDomainModelCommand(editingDomain, parseResult);" + NL + "\t\t\t\t\t\treturn new WrappingCommand(editingDomain, domainModelCommand);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\t";
  protected final String TEXT_59 = " createDomainModelCommand(";
  protected final String TEXT_60 = " editingDomain, Object[] values) {" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_61 = " element = ";
  protected final String TEXT_62 = ";" + NL + "\t\t\t\t\t\t";
  protected final String TEXT_63 = " result = new ";
  protected final String TEXT_64 = "();" + NL + "\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_65 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_66 = " ";
  protected final String TEXT_67 = "feature = (";
  protected final String TEXT_68 = ") ";
  protected final String TEXT_69 = ".eINSTANCE.get";
  protected final String TEXT_70 = "();" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_71 = ".parseValue(feature, values[";
  protected final String TEXT_72 = "]);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_73 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_74 = NL + "\t\t\t\t\t\t";
  protected final String TEXT_75 = " ";
  protected final String TEXT_76 = "values = new ";
  protected final String TEXT_77 = "();" + NL + "\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_78 = "());" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_79 = ".create(editingDomain, element, feature, values));" + NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_80 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_81 = NL + "\t\t\t\t\t\tresult.append(";
  protected final String TEXT_82 = ".create(editingDomain, element, feature, valueToSet));";
  protected final String TEXT_83 = NL + "\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t}";
  protected final String TEXT_84 = NL + "\t\t\t\t});";
  protected final String TEXT_85 = NL + "\t}" + NL;
  protected final String TEXT_86 = NL;
  protected final String TEXT_87 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_88 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_89 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_90 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_91 = "(this, ";
  protected final String TEXT_92 = ".class, new ";
  protected final String TEXT_93 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_94 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_95 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL;
  protected final String TEXT_96 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_97 = NL;
  protected final String TEXT_98 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_99 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String EDIT_PATTERN = \"";
  protected final String TEXT_100 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_101 = " element = ";
  protected final String TEXT_102 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_103 = " element = ";
  protected final String TEXT_104 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_105 = " element, String pattern) {";
  protected final String TEXT_106 = NL + "\t\tif (element.get";
  protected final String TEXT_107 = "() == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}";
  protected final String TEXT_108 = NL + "\t\treturn ";
  protected final String TEXT_109 = ".format(pattern, new Object[] {";
  protected final String TEXT_110 = NL + "\t\t\t";
  protected final String TEXT_111 = NL + "\t\t});";
  protected final String TEXT_112 = NL + "\t\treturn ";
  protected final String TEXT_113 = ".format(pattern, new Object[] {";
  protected final String TEXT_114 = NL + "\t\t";
  protected final String TEXT_115 = ",";
  protected final String TEXT_116 = NL + "\t\t});";
  protected final String TEXT_117 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_118 = NL + "\t}";
  protected final String TEXT_119 = NL;
  protected final String TEXT_120 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {";
  protected final String TEXT_121 = NL + "\t\t";
  protected final String TEXT_122 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_123 = ") ";
  protected final String TEXT_124 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_125 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_126 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_127 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_128 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_129 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_130 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_131 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_132 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}";
  protected final String TEXT_133 = "\t" + NL + "\t}";
  protected final String TEXT_134 = NL + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_135 = " createdFont;";
  protected final String TEXT_136 = "\t";
  protected final String TEXT_137 = NL;
  protected final String TEXT_138 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_139 = " style = (";
  protected final String TEXT_140 = ")  ";
  protected final String TEXT_141 = ".getStyle(";
  protected final String TEXT_142 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_143 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_144 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_145 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_146 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_147 = " getLabelIcon() {";
  protected final String TEXT_148 = NL + "\t\t";
  protected final String TEXT_149 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_150 = " imageDescriptor = ";
  protected final String TEXT_151 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}";
  protected final String TEXT_152 = NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_153 = " resolveSemanticElement() {" + NL + "\t\tView view = (View) getModel();" + NL + "\t\treturn (view.getElement() instanceof ";
  protected final String TEXT_154 = ") ? (";
  protected final String TEXT_155 = ") view.getElement() : null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_156 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_157 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_158 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_159 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_160 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_161 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_162 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_163 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_164 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_165 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_166 = ".eINSTANCE.get";
  protected final String TEXT_167 = "(), labelRefresher);";
  protected final String TEXT_168 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_169 = ".eINSTANCE.get";
  protected final String TEXT_170 = "(), labelRefresher);";
  protected final String TEXT_171 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_172 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_173 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_174 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_175 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_176 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_177 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_178 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_179 = ".eINSTANCE.get";
  protected final String TEXT_180 = "(), labelRefresher);";
  protected final String TEXT_181 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_182 = ".eINSTANCE.get";
  protected final String TEXT_183 = "(), labelRefresher);";
  protected final String TEXT_184 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher labelRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontColorRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_185 = NL;
  protected final String TEXT_186 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_187 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_188 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_189 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_190 = " createLabel() {";
  protected final String TEXT_191 = NL + "\t\treturn new ";
  protected final String TEXT_192 = "();";
  protected final String TEXT_193 = NL + "\t\treturn ";
  protected final String TEXT_194 = ";";
  protected final String TEXT_195 = NL + "\t\treturn new ";
  protected final String TEXT_196 = "();";
  protected final String TEXT_197 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_198 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_199 = " label = createLabel();";
  protected final String TEXT_200 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_201 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_202 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_203 = NL + NL + "\t/**";
  protected final String TEXT_204 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_205 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_206 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_207 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_208 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_209 = "(";
  protected final String TEXT_210 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_211 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_212 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_213 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_214 = NL;
  protected final String TEXT_215 = NL;
  protected final String TEXT_216 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_217 = NL + "}";
  protected final String TEXT_218 = NL;
d267 1
a267 1
ImportAssistant importManager = (ImportAssistant) ((Object[]) argument)[1];
d283 75
d359 1
a359 1
    stringBuffer.append(TEXT_4);
d366 1
a366 1
    stringBuffer.append(TEXT_5);
d368 1
a368 1
    stringBuffer.append(TEXT_6);
d370 1
a370 1
    stringBuffer.append(TEXT_7);
d373 2
a374 2
    stringBuffer.append(TEXT_8);
    stringBuffer.append(TEXT_9);
d376 1
a376 1
    stringBuffer.append(TEXT_10);
d378 1
a378 1
    stringBuffer.append(TEXT_11);
d382 1
a382 1
    stringBuffer.append(TEXT_12);
d384 1
a384 1
    stringBuffer.append(TEXT_13);
d388 1
a388 1
    stringBuffer.append(TEXT_14);
d390 1
a390 1
    stringBuffer.append(TEXT_15);
d396 2
a397 2
    stringBuffer.append(TEXT_16);
    stringBuffer.append(TEXT_17);
d399 1
a399 1
    stringBuffer.append(TEXT_18);
d401 1
a401 1
    stringBuffer.append(TEXT_19);
d403 1
a403 1
    stringBuffer.append(TEXT_20);
d405 1
a405 1
    stringBuffer.append(TEXT_21);
d407 1
a407 1
    stringBuffer.append(TEXT_22);
d409 1
a409 1
    stringBuffer.append(TEXT_23);
d411 1
a411 1
    stringBuffer.append(TEXT_24);
d413 1
a413 1
    stringBuffer.append(TEXT_25);
d415 1
a415 1
    stringBuffer.append(TEXT_26);
d417 1
a417 1
    stringBuffer.append(TEXT_27);
d419 1
a419 1
    stringBuffer.append(TEXT_28);
d421 1
a421 1
    stringBuffer.append(TEXT_29);
d423 1
a423 1
    stringBuffer.append(TEXT_30);
d429 1
a429 1
    stringBuffer.append(TEXT_31);
d431 1
a431 1
    stringBuffer.append(TEXT_32);
d433 1
a433 1
    stringBuffer.append(TEXT_33);
d435 1
a435 1
    stringBuffer.append(TEXT_34);
d437 1
a437 1
    stringBuffer.append(TEXT_35);
d439 1
a439 1
    stringBuffer.append(TEXT_36);
d441 1
a441 1
    stringBuffer.append(TEXT_37);
d443 1
a443 1
    stringBuffer.append(TEXT_38);
d445 1
a445 1
    stringBuffer.append(TEXT_39);
d447 1
a447 1
    stringBuffer.append(TEXT_40);
d449 1
a449 1
    stringBuffer.append(TEXT_41);
d451 1
a451 1
    stringBuffer.append(TEXT_42);
d453 1
a453 1
    stringBuffer.append(TEXT_43);
d457 1
a457 1
    stringBuffer.append(TEXT_44);
d459 1
a459 1
    stringBuffer.append(TEXT_45);
d461 1
a461 1
    stringBuffer.append(TEXT_46);
d463 1
a463 1
    stringBuffer.append(TEXT_47);
d465 1
a465 1
    stringBuffer.append(TEXT_48);
d467 1
a467 1
    stringBuffer.append(TEXT_49);
d469 1
a469 1
    stringBuffer.append(TEXT_50);
d471 1
a471 1
    stringBuffer.append(TEXT_51);
d475 1
a475 1
    stringBuffer.append(TEXT_52);
d477 1
a477 1
    stringBuffer.append(TEXT_53);
d481 1
a481 1
    stringBuffer.append(TEXT_54);
d487 1
a487 1
    stringBuffer.append(TEXT_55);
d489 1
a489 1
    stringBuffer.append(TEXT_56);
d491 1
a491 1
    stringBuffer.append(TEXT_57);
d493 1
a493 1
    stringBuffer.append(TEXT_58);
d495 1
a495 1
    stringBuffer.append(TEXT_59);
d497 1
a497 1
    stringBuffer.append(TEXT_60);
d499 1
a499 1
    stringBuffer.append(TEXT_61);
d501 1
a501 1
    stringBuffer.append(TEXT_62);
d503 1
a503 1
    stringBuffer.append(TEXT_63);
d505 1
a505 1
    stringBuffer.append(TEXT_64);
d512 1
a512 1
    stringBuffer.append(TEXT_65);
d515 1
a515 1
    stringBuffer.append(TEXT_66);
d517 1
a517 1
    stringBuffer.append(TEXT_67);
d519 1
a519 1
    stringBuffer.append(TEXT_68);
d521 1
a521 1
    stringBuffer.append(TEXT_69);
d523 1
a523 1
    stringBuffer.append(TEXT_70);
d525 1
a525 1
    stringBuffer.append(TEXT_71);
d527 1
a527 1
    stringBuffer.append(TEXT_72);
d529 1
a529 1
    stringBuffer.append(TEXT_73);
d533 1
a533 1
    stringBuffer.append(TEXT_74);
d536 1
a536 1
    stringBuffer.append(TEXT_75);
d538 1
a538 1
    stringBuffer.append(TEXT_76);
d540 1
a540 1
    stringBuffer.append(TEXT_77);
d542 1
a542 1
    stringBuffer.append(TEXT_78);
d544 1
a544 1
    stringBuffer.append(TEXT_79);
d546 1
a546 1
    stringBuffer.append(TEXT_80);
d550 1
a550 1
    stringBuffer.append(TEXT_81);
d552 1
a552 1
    stringBuffer.append(TEXT_82);
d559 1
a559 1
    stringBuffer.append(TEXT_83);
d563 1
a563 1
    stringBuffer.append(TEXT_84);
d567 1
a567 1
    stringBuffer.append(TEXT_85);
d571 2
a572 2
    stringBuffer.append(TEXT_86);
    stringBuffer.append(TEXT_87);
d574 1
a574 1
    stringBuffer.append(TEXT_88);
d576 1
a576 1
    stringBuffer.append(TEXT_89);
d578 1
a578 1
    stringBuffer.append(TEXT_90);
d580 1
a580 1
    stringBuffer.append(TEXT_91);
d582 1
a582 1
    stringBuffer.append(TEXT_92);
d584 1
a584 1
    stringBuffer.append(TEXT_93);
d586 1
a586 1
    stringBuffer.append(TEXT_94);
d588 1
a588 1
    stringBuffer.append(TEXT_95);
d592 2
a593 2
    stringBuffer.append(TEXT_96);
    stringBuffer.append(TEXT_97);
d637 1
a637 1
    stringBuffer.append(TEXT_98);
d639 1
a639 1
    stringBuffer.append(TEXT_99);
d641 1
a641 1
    stringBuffer.append(TEXT_100);
d643 1
a643 1
    stringBuffer.append(TEXT_101);
d645 1
a645 1
    stringBuffer.append(TEXT_102);
d647 1
a647 1
    stringBuffer.append(TEXT_103);
d649 1
a649 1
    stringBuffer.append(TEXT_104);
d651 1
a651 1
    stringBuffer.append(TEXT_105);
d658 3
a660 3
    stringBuffer.append(TEXT_106);
    stringBuffer.append(feature.getCapName());
    stringBuffer.append(TEXT_107);
d664 1
a664 1
    stringBuffer.append(TEXT_108);
d666 1
a666 1
    stringBuffer.append(TEXT_109);
a667 1
		String value = "element.get" + feature.getCapName() + "()";	/*XXX: getTypedKey is not a part of public API!*/
d669 5
a673 1
			value = "new " + primitiveTypeToWrapperClassName.get(feature.getTypeGenClassifier().getEcoreClassifier().getInstanceClass()) + "(" + value + ")";
d675 2
d678 5
a682 3
    stringBuffer.append(TEXT_110);
    stringBuffer.append(value);
    stringBuffer.append(TEXT_111);
d687 1
a687 1
    stringBuffer.append(TEXT_112);
d689 1
a689 1
    stringBuffer.append(TEXT_113);
a692 1
		String value = "element.get" + next.getCapName() + "()";	/*XXX: getTypedKey is not a part of public API!*/
d694 5
a698 1
			value = "new " + primitiveTypeToWrapperClassName.get(next.getTypeGenClassifier().getEcoreClassifier().getInstanceClass()) + "(" + value + ")";
d700 2
d703 5
a707 4
    stringBuffer.append(TEXT_114);
    stringBuffer.append(value);
    if (it.hasNext()) {
    stringBuffer.append(TEXT_115);
d712 1
a712 1
    stringBuffer.append(TEXT_116);
d716 1
a716 1
    stringBuffer.append(TEXT_117);
d720 2
a721 2
    stringBuffer.append(TEXT_118);
    stringBuffer.append(TEXT_119);
d729 1
a729 1
    stringBuffer.append(TEXT_120);
d733 1
a733 1
    stringBuffer.append(TEXT_121);
d735 1
a735 1
    stringBuffer.append(TEXT_122);
d737 1
a737 1
    stringBuffer.append(TEXT_123);
d739 1
a739 1
    stringBuffer.append(TEXT_124);
d741 1
a741 1
    stringBuffer.append(TEXT_125);
d743 1
a743 1
    stringBuffer.append(TEXT_126);
d745 1
a745 1
    stringBuffer.append(TEXT_127);
d747 1
a747 1
    stringBuffer.append(TEXT_128);
d749 1
a749 1
    stringBuffer.append(TEXT_129);
d751 1
a751 1
    stringBuffer.append(TEXT_130);
d753 1
a753 1
    stringBuffer.append(TEXT_131);
d755 1
a755 1
    stringBuffer.append(TEXT_132);
d759 1
a759 1
    stringBuffer.append(TEXT_133);
d763 1
a763 1
    stringBuffer.append(TEXT_134);
d765 1
a765 1
    stringBuffer.append(TEXT_135);
d769 3
a771 3
    stringBuffer.append(TEXT_136);
    stringBuffer.append(TEXT_137);
    stringBuffer.append(TEXT_138);
d773 1
a773 1
    stringBuffer.append(TEXT_139);
d775 1
a775 1
    stringBuffer.append(TEXT_140);
d777 1
a777 1
    stringBuffer.append(TEXT_141);
d779 1
a779 1
    stringBuffer.append(TEXT_142);
d781 1
a781 1
    stringBuffer.append(TEXT_143);
d783 1
a783 1
    stringBuffer.append(TEXT_144);
d785 1
a785 1
    stringBuffer.append(TEXT_145);
d787 1
a787 1
    stringBuffer.append(TEXT_146);
d789 1
a789 1
    stringBuffer.append(TEXT_147);
d793 1
a793 1
    stringBuffer.append(TEXT_148);
d795 1
a795 1
    stringBuffer.append(TEXT_149);
d797 1
a797 1
    stringBuffer.append(TEXT_150);
d799 1
a799 1
    stringBuffer.append(TEXT_151);
d803 1
a803 1
    stringBuffer.append(TEXT_152);
d805 1
a805 1
    stringBuffer.append(TEXT_153);
d807 1
a807 1
    stringBuffer.append(TEXT_154);
d809 1
a809 1
    stringBuffer.append(TEXT_155);
d811 1
a811 1
    stringBuffer.append(TEXT_156);
d813 1
a813 1
    stringBuffer.append(TEXT_157);
d815 1
a815 1
    stringBuffer.append(TEXT_158);
d817 1
a817 1
    stringBuffer.append(TEXT_159);
d819 1
a819 1
    stringBuffer.append(TEXT_160);
d821 1
a821 1
    stringBuffer.append(TEXT_161);
d823 1
a823 1
    stringBuffer.append(TEXT_162);
d825 1
a825 1
    stringBuffer.append(TEXT_163);
d827 1
a827 1
    stringBuffer.append(TEXT_164);
d832 1
a832 1
    stringBuffer.append(TEXT_165);
d834 1
a834 1
    stringBuffer.append(TEXT_166);
d836 1
a836 1
    stringBuffer.append(TEXT_167);
d843 1
a843 1
    stringBuffer.append(TEXT_168);
d845 1
a845 1
    stringBuffer.append(TEXT_169);
d847 1
a847 1
    stringBuffer.append(TEXT_170);
d852 1
a852 1
    stringBuffer.append(TEXT_171);
d854 1
a854 1
    stringBuffer.append(TEXT_172);
d856 1
a856 1
    stringBuffer.append(TEXT_173);
d858 1
a858 1
    stringBuffer.append(TEXT_174);
d860 1
a860 1
    stringBuffer.append(TEXT_175);
d862 1
a862 1
    stringBuffer.append(TEXT_176);
d864 1
a864 1
    stringBuffer.append(TEXT_177);
d869 1
a869 1
    stringBuffer.append(TEXT_178);
d871 1
a871 1
    stringBuffer.append(TEXT_179);
d873 1
a873 1
    stringBuffer.append(TEXT_180);
d880 1
a880 1
    stringBuffer.append(TEXT_181);
d882 1
a882 1
    stringBuffer.append(TEXT_182);
d884 1
a884 1
    stringBuffer.append(TEXT_183);
d889 1
a889 1
    stringBuffer.append(TEXT_184);
d893 1
a893 1
    stringBuffer.append(TEXT_185);
d922 1
a922 1
    stringBuffer.append(TEXT_186);
d924 1
a924 1
    stringBuffer.append(TEXT_187);
d926 1
a926 1
    stringBuffer.append(TEXT_188);
d928 1
a928 1
    stringBuffer.append(TEXT_189);
d930 1
a930 1
    stringBuffer.append(TEXT_190);
d934 1
a934 1
    stringBuffer.append(TEXT_191);
d936 1
a936 1
    stringBuffer.append(TEXT_192);
d939 1
a939 1
    stringBuffer.append(TEXT_193);
d941 1
a941 1
    stringBuffer.append(TEXT_194);
d945 1
a945 1
    stringBuffer.append(TEXT_195);
d947 1
a947 1
    stringBuffer.append(TEXT_196);
d949 1
a949 1
    stringBuffer.append(TEXT_197);
d951 1
a951 1
    stringBuffer.append(TEXT_198);
d953 1
a953 1
    stringBuffer.append(TEXT_199);
d957 1
a957 1
    stringBuffer.append(TEXT_200);
d961 1
a961 1
    stringBuffer.append(TEXT_201);
d965 1
a965 1
    stringBuffer.append(TEXT_202);
d967 1
a967 1
    stringBuffer.append(TEXT_203);
d971 1
a971 1
    stringBuffer.append(TEXT_204);
d975 1
a975 1
    stringBuffer.append(TEXT_205);
d977 1
a977 1
    stringBuffer.append(TEXT_206);
d979 1
a979 1
    stringBuffer.append(TEXT_207);
d993 1
a993 1
    stringBuffer.append(TEXT_208);
d995 1
a995 1
    stringBuffer.append(TEXT_209);
d997 1
a997 1
    stringBuffer.append(TEXT_210);
d1001 1
a1001 1
    stringBuffer.append(TEXT_211);
d1005 1
a1005 1
    stringBuffer.append(TEXT_212);
d1009 1
a1009 1
    stringBuffer.append(TEXT_213);
d1014 1
a1014 1
    stringBuffer.append(TEXT_214);
d1016 1
a1016 1
    stringBuffer.append(TEXT_215);
d1020 1
a1020 1
    stringBuffer.append(TEXT_216);
d1027 1
a1027 1
    stringBuffer.append(TEXT_217);
d1029 1
a1029 1
    stringBuffer.append(TEXT_218);
@


1.7
log
@#149455 Lite Generation: Respect option for labels to display node icon
@
text
@d173 61
a233 61
  protected final String TEXT_153 = " resolveSemanticElement() {" + NL + "\t\tfor(EditPart editPart = this; editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tView view = (View)editPart.getModel();" + NL + "\t\t\tif (view != null && view.getElement() != null) {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_154 = ") view.getElement();" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_155 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_156 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_157 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_158 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_159 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_160 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_161 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_162 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_163 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_164 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_165 = ".eINSTANCE.get";
  protected final String TEXT_166 = "(), labelRefresher);";
  protected final String TEXT_167 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_168 = ".eINSTANCE.get";
  protected final String TEXT_169 = "(), labelRefresher);";
  protected final String TEXT_170 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_171 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_172 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_173 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_174 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_175 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_176 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_177 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_178 = ".eINSTANCE.get";
  protected final String TEXT_179 = "(), labelRefresher);";
  protected final String TEXT_180 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_181 = ".eINSTANCE.get";
  protected final String TEXT_182 = "(), labelRefresher);";
  protected final String TEXT_183 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher labelRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontColorRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_184 = NL;
  protected final String TEXT_185 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_186 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_187 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_188 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_189 = " createLabel() {";
  protected final String TEXT_190 = NL + "\t\treturn new ";
  protected final String TEXT_191 = "();";
  protected final String TEXT_192 = NL + "\t\treturn ";
  protected final String TEXT_193 = ";";
  protected final String TEXT_194 = NL + "\t\treturn new ";
  protected final String TEXT_195 = "();";
  protected final String TEXT_196 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_197 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_198 = " label = createLabel();";
  protected final String TEXT_199 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_200 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_201 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_202 = NL + NL + "\t/**";
  protected final String TEXT_203 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_204 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_205 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_206 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_207 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_208 = "(";
  protected final String TEXT_209 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_210 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_211 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_212 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_213 = NL;
d235 4
a238 3
  protected final String TEXT_215 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_216 = NL + "}";
  protected final String TEXT_217 = NL;
d699 1
a699 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d707 1
a707 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d717 2
d723 1
a723 1
    stringBuffer.append(TEXT_164);
d725 1
a725 1
    stringBuffer.append(TEXT_165);
d727 1
a727 1
    stringBuffer.append(TEXT_166);
d734 1
a734 1
    stringBuffer.append(TEXT_167);
d736 1
a736 1
    stringBuffer.append(TEXT_168);
d738 1
a738 1
    stringBuffer.append(TEXT_169);
d743 1
a743 1
    stringBuffer.append(TEXT_170);
a744 2
    stringBuffer.append(TEXT_171);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d754 2
d760 1
a760 1
    stringBuffer.append(TEXT_177);
d762 1
a762 1
    stringBuffer.append(TEXT_178);
d764 1
a764 1
    stringBuffer.append(TEXT_179);
d771 1
a771 1
    stringBuffer.append(TEXT_180);
d773 1
a773 1
    stringBuffer.append(TEXT_181);
d775 1
a775 1
    stringBuffer.append(TEXT_182);
d780 1
a780 1
    stringBuffer.append(TEXT_183);
d784 1
a784 1
    stringBuffer.append(TEXT_184);
d813 1
a813 1
    stringBuffer.append(TEXT_185);
d815 1
a815 1
    stringBuffer.append(TEXT_186);
d817 1
a817 1
    stringBuffer.append(TEXT_187);
d819 1
a819 1
    stringBuffer.append(TEXT_188);
d821 1
a821 1
    stringBuffer.append(TEXT_189);
d825 1
a825 1
    stringBuffer.append(TEXT_190);
d827 1
a827 1
    stringBuffer.append(TEXT_191);
d830 1
a830 1
    stringBuffer.append(TEXT_192);
d832 1
a832 1
    stringBuffer.append(TEXT_193);
d836 1
a836 1
    stringBuffer.append(TEXT_194);
d838 1
a838 1
    stringBuffer.append(TEXT_195);
d840 1
a840 1
    stringBuffer.append(TEXT_196);
d842 1
a842 1
    stringBuffer.append(TEXT_197);
d844 1
a844 1
    stringBuffer.append(TEXT_198);
d848 1
a848 1
    stringBuffer.append(TEXT_199);
d852 1
a852 1
    stringBuffer.append(TEXT_200);
d856 1
a856 1
    stringBuffer.append(TEXT_201);
d858 1
a858 1
    stringBuffer.append(TEXT_202);
d862 1
a862 1
    stringBuffer.append(TEXT_203);
a865 2
    stringBuffer.append(TEXT_204);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.Label"));
d869 2
d884 1
a884 1
    stringBuffer.append(TEXT_207);
d886 1
a886 1
    stringBuffer.append(TEXT_208);
d888 1
a888 1
    stringBuffer.append(TEXT_209);
d892 1
a892 1
    stringBuffer.append(TEXT_210);
d896 1
a896 1
    stringBuffer.append(TEXT_211);
d900 1
a900 1
    stringBuffer.append(TEXT_212);
d905 1
a905 1
    stringBuffer.append(TEXT_213);
d907 1
a907 1
    stringBuffer.append(TEXT_214);
d911 1
a911 1
    stringBuffer.append(TEXT_215);
d918 1
a918 1
    stringBuffer.append(TEXT_216);
d920 1
a920 1
    stringBuffer.append(TEXT_217);
@


1.6
log
@[mgolubev] #147853 Fonts defined in the gmfgraph model should be used by the generated labels
@
text
@d167 66
a232 66
  protected final String TEXT_147 = " getLabelIcon() {" + NL + "\t\t";
  protected final String TEXT_148 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_149 = " imageDescriptor = ";
  protected final String TEXT_150 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}" + NL + "\t\treturn ";
  protected final String TEXT_151 = ".getMissingImageDescriptor().createImage();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_152 = " resolveSemanticElement() {" + NL + "\t\tfor(EditPart editPart = this; editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tView view = (View)editPart.getModel();" + NL + "\t\t\tif (view != null && view.getElement() != null) {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_153 = ") view.getElement();" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_154 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_155 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_156 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_157 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_158 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_159 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_160 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_161 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_162 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_163 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_164 = ".eINSTANCE.get";
  protected final String TEXT_165 = "(), labelRefresher);";
  protected final String TEXT_166 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_167 = ".eINSTANCE.get";
  protected final String TEXT_168 = "(), labelRefresher);";
  protected final String TEXT_169 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_170 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_171 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_172 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_173 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_174 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_175 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_176 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_177 = ".eINSTANCE.get";
  protected final String TEXT_178 = "(), labelRefresher);";
  protected final String TEXT_179 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_180 = ".eINSTANCE.get";
  protected final String TEXT_181 = "(), labelRefresher);";
  protected final String TEXT_182 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher labelRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontColorRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_183 = NL;
  protected final String TEXT_184 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_185 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_186 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_187 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_188 = " createLabel() {";
  protected final String TEXT_189 = NL + "\t\treturn new ";
  protected final String TEXT_190 = "();";
  protected final String TEXT_191 = NL + "\t\treturn ";
  protected final String TEXT_192 = ";";
  protected final String TEXT_193 = NL + "\t\treturn new ";
  protected final String TEXT_194 = "();";
  protected final String TEXT_195 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_196 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_197 = " label = createLabel();";
  protected final String TEXT_198 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_199 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_200 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_201 = NL + NL + "\t/**";
  protected final String TEXT_202 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_203 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_204 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_205 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_206 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_207 = "(";
  protected final String TEXT_208 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_209 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_210 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_211 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_212 = NL;
d234 4
a237 3
  protected final String TEXT_214 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_215 = NL + "}";
  protected final String TEXT_216 = NL;
d680 4
d685 1
a685 1
    stringBuffer.append(TEXT_148);
d687 1
a687 1
    stringBuffer.append(TEXT_149);
a688 2
    stringBuffer.append(TEXT_150);
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.resource.ImageDescriptor"));
d690 3
a692 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d696 1
a696 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d704 1
a704 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d714 2
d720 1
a720 1
    stringBuffer.append(TEXT_163);
d722 1
a722 1
    stringBuffer.append(TEXT_164);
d724 1
a724 1
    stringBuffer.append(TEXT_165);
d731 1
a731 1
    stringBuffer.append(TEXT_166);
d733 1
a733 1
    stringBuffer.append(TEXT_167);
d735 1
a735 1
    stringBuffer.append(TEXT_168);
d740 1
a740 1
    stringBuffer.append(TEXT_169);
a741 2
    stringBuffer.append(TEXT_170);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d751 2
d757 1
a757 1
    stringBuffer.append(TEXT_176);
d759 1
a759 1
    stringBuffer.append(TEXT_177);
d761 1
a761 1
    stringBuffer.append(TEXT_178);
d768 1
a768 1
    stringBuffer.append(TEXT_179);
d770 1
a770 1
    stringBuffer.append(TEXT_180);
d772 1
a772 1
    stringBuffer.append(TEXT_181);
d777 1
a777 1
    stringBuffer.append(TEXT_182);
d781 1
a781 1
    stringBuffer.append(TEXT_183);
d810 1
a810 1
    stringBuffer.append(TEXT_184);
d812 1
a812 1
    stringBuffer.append(TEXT_185);
d814 1
a814 1
    stringBuffer.append(TEXT_186);
d816 1
a816 1
    stringBuffer.append(TEXT_187);
d818 1
a818 1
    stringBuffer.append(TEXT_188);
d822 1
a822 1
    stringBuffer.append(TEXT_189);
d824 1
a824 1
    stringBuffer.append(TEXT_190);
d827 1
a827 1
    stringBuffer.append(TEXT_191);
d829 1
a829 1
    stringBuffer.append(TEXT_192);
d833 1
a833 1
    stringBuffer.append(TEXT_193);
d835 1
a835 1
    stringBuffer.append(TEXT_194);
d837 1
a837 1
    stringBuffer.append(TEXT_195);
d839 1
a839 1
    stringBuffer.append(TEXT_196);
d841 1
a841 1
    stringBuffer.append(TEXT_197);
d845 1
a845 1
    stringBuffer.append(TEXT_198);
d849 1
a849 1
    stringBuffer.append(TEXT_199);
d853 1
a853 1
    stringBuffer.append(TEXT_200);
d855 1
a855 1
    stringBuffer.append(TEXT_201);
d859 1
a859 1
    stringBuffer.append(TEXT_202);
a862 2
    stringBuffer.append(TEXT_203);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.Label"));
d866 2
d881 1
a881 1
    stringBuffer.append(TEXT_206);
d883 1
a883 1
    stringBuffer.append(TEXT_207);
d885 1
a885 1
    stringBuffer.append(TEXT_208);
d889 1
a889 1
    stringBuffer.append(TEXT_209);
d893 1
a893 1
    stringBuffer.append(TEXT_210);
d897 1
a897 1
    stringBuffer.append(TEXT_211);
d902 1
a902 1
    stringBuffer.append(TEXT_212);
d904 1
a904 1
    stringBuffer.append(TEXT_213);
d908 1
a908 1
    stringBuffer.append(TEXT_214);
d915 1
a915 1
    stringBuffer.append(TEXT_215);
d917 1
a917 1
    stringBuffer.append(TEXT_216);
@


1.5
log
@[bblajer] #147076 Lite generator: Support ParentAssignedViewmap for labels and compartments
@
text
@d140 69
a208 69
  protected final String TEXT_120 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {" + NL + "\t\t";
  protected final String TEXT_121 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_122 = ") ";
  protected final String TEXT_123 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_124 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_125 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_126 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_127 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_128 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_129 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_130 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_131 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_132 = " createdFont;";
  protected final String TEXT_133 = NL;
  protected final String TEXT_134 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_135 = " style = (";
  protected final String TEXT_136 = ")  ";
  protected final String TEXT_137 = ".getStyle(";
  protected final String TEXT_138 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_139 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_140 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_141 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_142 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_143 = " getLabelIcon() {" + NL + "\t\t";
  protected final String TEXT_144 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_145 = " imageDescriptor = ";
  protected final String TEXT_146 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}" + NL + "\t\treturn ";
  protected final String TEXT_147 = ".getMissingImageDescriptor().createImage();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_148 = " resolveSemanticElement() {" + NL + "\t\tfor(EditPart editPart = this; editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tView view = (View)editPart.getModel();" + NL + "\t\t\tif (view != null && view.getElement() != null) {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_149 = ") view.getElement();" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_150 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_151 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_152 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_153 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_154 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_155 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_156 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_157 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_158 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_159 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_160 = ".eINSTANCE.get";
  protected final String TEXT_161 = "(), labelRefresher);";
  protected final String TEXT_162 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_163 = ".eINSTANCE.get";
  protected final String TEXT_164 = "(), labelRefresher);";
  protected final String TEXT_165 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_166 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_167 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_168 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_169 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_170 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_171 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_172 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_173 = ".eINSTANCE.get";
  protected final String TEXT_174 = "(), labelRefresher);";
  protected final String TEXT_175 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_176 = ".eINSTANCE.get";
  protected final String TEXT_177 = "(), labelRefresher);";
  protected final String TEXT_178 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher labelRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontColorRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_179 = NL;
  protected final String TEXT_180 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_181 = " createFigure() {" + NL + "\t\t// Parent should assign one using ";
  protected final String TEXT_182 = " method" + NL + "\t\treturn null;" + NL + "\t}";
  protected final String TEXT_183 = NL + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_184 = " createLabel() {";
  protected final String TEXT_185 = NL + "\t\treturn new ";
  protected final String TEXT_186 = "();";
  protected final String TEXT_187 = NL + "\t\treturn ";
  protected final String TEXT_188 = ";";
d211 21
a231 21
  protected final String TEXT_191 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_192 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_193 = " label = createLabel();";
  protected final String TEXT_194 = NL + "\t\tdefaultText = label.getText();";
  protected final String TEXT_195 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_196 = NL + "\t\treturn label;" + NL + "\t}";
  protected final String TEXT_197 = NL + NL + "\t/**";
  protected final String TEXT_198 = NL + "\t * TODO: reimplement, since the figure used by this editpart is not a Label.";
  protected final String TEXT_199 = NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_200 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_201 = ") getFigure();" + NL + "\t}" + NL;
  protected final String TEXT_202 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void ";
  protected final String TEXT_203 = "(";
  protected final String TEXT_204 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);";
  protected final String TEXT_205 = NL + "\t\tdefaultText = figure.getText();";
  protected final String TEXT_206 = NL + "\t\tdefaultText = \"\";\t//$NON-NLS-1$";
  protected final String TEXT_207 = NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_208 = NL;
  protected final String TEXT_209 = NL;
  protected final String TEXT_210 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_211 = NL + "}";
d233 4
d242 2
a243 1
GenNodeLabel genLabel = (GenNodeLabel) ((Object[]) argument)[0];
d611 7
d619 3
a621 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
d625 2
d628 1
a628 1
    stringBuffer.append(TEXT_123);
d630 1
a630 1
    stringBuffer.append(TEXT_124);
a631 2
    stringBuffer.append(TEXT_125);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
d637 2
d640 1
a640 1
    stringBuffer.append(TEXT_129);
a641 2
    stringBuffer.append(TEXT_130);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
d645 3
d649 3
d653 1
a653 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
d655 3
a657 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a658 1
    stringBuffer.append(primaryView);
a659 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d661 1
a661 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d663 1
a663 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d665 1
a665 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d667 2
a669 2
    stringBuffer.append(TEXT_142);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Image"));
d671 1
a671 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d673 1
a673 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.resource.ImageDescriptor"));
d675 1
a675 1
    stringBuffer.append(importManager.getImportedName(genDiagram.getEditorGen().getPlugin().getActivatorQualifiedClassName()));
d677 1
a677 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.resource.ImageDescriptor"));
d681 1
a681 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d683 1
a683 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d685 1
a685 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d687 1
a687 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d689 2
a691 2
    stringBuffer.append(TEXT_153);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d693 1
a693 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d695 1
a695 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d697 1
a697 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d701 8
d713 1
a713 1
    stringBuffer.append(TEXT_159);
d715 1
a715 1
    stringBuffer.append(TEXT_160);
d717 1
a717 1
    stringBuffer.append(TEXT_161);
d724 1
a724 1
    stringBuffer.append(TEXT_162);
d726 1
a726 1
    stringBuffer.append(TEXT_163);
d728 1
a728 1
    stringBuffer.append(TEXT_164);
d733 1
a733 1
    stringBuffer.append(TEXT_165);
d735 1
a735 1
    stringBuffer.append(TEXT_166);
d737 1
a737 1
    stringBuffer.append(TEXT_167);
d739 1
a739 1
    stringBuffer.append(TEXT_168);
d741 1
a741 1
    stringBuffer.append(TEXT_169);
d743 1
a743 1
    stringBuffer.append(TEXT_170);
d745 1
a745 1
    stringBuffer.append(TEXT_171);
d750 1
a750 1
    stringBuffer.append(TEXT_172);
d752 1
a752 1
    stringBuffer.append(TEXT_173);
d754 1
a754 1
    stringBuffer.append(TEXT_174);
d761 1
a761 1
    stringBuffer.append(TEXT_175);
d763 1
a763 1
    stringBuffer.append(TEXT_176);
d765 1
a765 1
    stringBuffer.append(TEXT_177);
d770 1
a770 1
    stringBuffer.append(TEXT_178);
d774 1
a774 1
    stringBuffer.append(TEXT_179);
d803 1
a803 1
    stringBuffer.append(TEXT_180);
d805 1
a805 1
    stringBuffer.append(TEXT_181);
d807 1
a807 1
    stringBuffer.append(TEXT_182);
d809 1
a809 1
    stringBuffer.append(TEXT_183);
d811 1
a811 1
    stringBuffer.append(TEXT_184);
d815 1
a815 1
    stringBuffer.append(TEXT_185);
d817 1
a817 1
    stringBuffer.append(TEXT_186);
d820 1
a820 1
    stringBuffer.append(TEXT_187);
d822 1
a822 1
    stringBuffer.append(TEXT_188);
d826 1
a826 1
    stringBuffer.append(TEXT_189);
d828 1
a828 1
    stringBuffer.append(TEXT_190);
d830 1
a830 1
    stringBuffer.append(TEXT_191);
d832 1
a832 1
    stringBuffer.append(TEXT_192);
d834 1
a834 1
    stringBuffer.append(TEXT_193);
d838 1
a838 1
    stringBuffer.append(TEXT_194);
d842 1
a842 1
    stringBuffer.append(TEXT_195);
d846 1
a846 1
    stringBuffer.append(TEXT_196);
d848 1
a848 1
    stringBuffer.append(TEXT_197);
d852 1
a852 1
    stringBuffer.append(TEXT_198);
d856 1
a856 1
    stringBuffer.append(TEXT_199);
d858 1
a858 1
    stringBuffer.append(TEXT_200);
d860 1
a860 1
    stringBuffer.append(TEXT_201);
d874 1
a874 1
    stringBuffer.append(TEXT_202);
d876 1
a876 1
    stringBuffer.append(TEXT_203);
d878 1
a878 1
    stringBuffer.append(TEXT_204);
d882 1
a882 1
    stringBuffer.append(TEXT_205);
d886 1
a886 1
    stringBuffer.append(TEXT_206);
d890 1
a890 1
    stringBuffer.append(TEXT_207);
d895 1
a895 1
    stringBuffer.append(TEXT_208);
d897 1
a897 1
    stringBuffer.append(TEXT_209);
d901 1
a901 1
    stringBuffer.append(TEXT_210);
d908 1
a908 1
    stringBuffer.append(TEXT_211);
d910 1
a910 1
    stringBuffer.append(TEXT_212);
@


1.4
log
@[bblajer] #138430 Lite Generator: Generated code should make use of emf.transaction API
@
text
@d201 32
a232 18
  protected final String TEXT_181 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_182 = " label = createLabel();" + NL + "\t\tdefaultText = label.getText();" + NL + "\t\treturn label;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_183 = " createLabel() {";
  protected final String TEXT_184 = NL + "\t\treturn new ";
  protected final String TEXT_185 = "();";
  protected final String TEXT_186 = NL + "\t\treturn ";
  protected final String TEXT_187 = ";";
  protected final String TEXT_188 = NL + "\t\treturn new ";
  protected final String TEXT_189 = "();";
  protected final String TEXT_190 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_191 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_192 = ") getFigure();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void setLabel(";
  protected final String TEXT_193 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);" + NL + "\t\tdefaultText = figure.getText();" + NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_194 = NL;
  protected final String TEXT_195 = NL;
  protected final String TEXT_196 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_197 = NL + "}";
  protected final String TEXT_198 = NL;
d747 28
d778 1
a778 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.Label"));
d780 1
a780 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.Label"));
d782 2
a784 1
String figureQualifiedClassName = null;
a785 4
	figureQualifiedClassName = ((FigureViewmap) viewmap).getFigureQualifiedClassName();
	if (figureQualifiedClassName == null || figureQualifiedClassName.trim().length() == 0) {
		figureQualifiedClassName = "org.eclipse.draw2d.Label";
	}
a786 2
    stringBuffer.append(TEXT_184);
    stringBuffer.append(importManager.getImportedName(figureQualifiedClassName));
d788 2
d792 1
a792 1
    stringBuffer.append(TEXT_186);
d794 1
a794 1
    stringBuffer.append(TEXT_187);
a796 1
 	figureQualifiedClassName = ((InnerClassViewmap) viewmap).getClassName();
a797 2
    stringBuffer.append(TEXT_188);
    stringBuffer.append(figureQualifiedClassName);
d799 2
a801 2
    stringBuffer.append(TEXT_190);
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.Label"));
d803 26
d830 1
a830 1
    stringBuffer.append(TEXT_192);
d832 31
a862 1
    stringBuffer.append(TEXT_193);
d867 1
a867 1
    stringBuffer.append(TEXT_194);
d869 1
a869 1
    stringBuffer.append(TEXT_195);
d873 1
a873 1
    stringBuffer.append(TEXT_196);
d880 1
a880 1
    stringBuffer.append(TEXT_197);
d882 1
a882 1
    stringBuffer.append(TEXT_198);
@


1.3
log
@[bblajer] #141280 Support child nodes without label
@
text
@d33 84
a116 84
  protected final String TEXT_13 = " manager;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate String defaultText;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_14 = "(View view) {" + NL + "\t\tsetModel(view);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void createEditPolicies() {";
  protected final String TEXT_15 = NL;
  protected final String TEXT_16 = "\t\tinstallEditPolicy(";
  protected final String TEXT_17 = ".DIRECT_EDIT_ROLE," + NL + "\t\t\t\tnew ";
  protected final String TEXT_18 = "() {" + NL + "\t\t\t\t\tprotected void showCurrentEditValue(";
  protected final String TEXT_19 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tgetLabel().setText(value);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tprotected ";
  protected final String TEXT_20 = " getDirectEditCommand(";
  protected final String TEXT_21 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_22 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_23 = "(EDIT_PATTERN).parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_24 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_25 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_26 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_27 = NL + "\t\t\t\t\t\tif (parseResult.length != 1) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_28 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_29 = "() {" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_30 = " element = ";
  protected final String TEXT_31 = ";" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_32 = " domainModelCommand = createDomainModelCommand();" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_33 = " createDomainModelCommand() {" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_34 = " domainModelEditDomain = ";
  protected final String TEXT_35 = ".getEditingDomainFor(";
  protected final String TEXT_36 = ".getDiagram().getElement());" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_37 = " feature = (";
  protected final String TEXT_38 = ") ";
  protected final String TEXT_39 = ".eINSTANCE.get";
  protected final String TEXT_40 = "();" + NL + "\t\t\t\t\t\t\t\tObject valueToSet;" + NL + "\t\t\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_41 = ".parseValue(feature, parseResult[0]);" + NL + "\t\t\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\t\t\treturn ";
  protected final String TEXT_42 = ".INSTANCE;" + NL + "\t\t\t\t\t\t\t\t}";
  protected final String TEXT_43 = NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_44 = " result = new ";
  protected final String TEXT_45 = "();" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_46 = " values = new ";
  protected final String TEXT_47 = "();" + NL + "\t\t\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_48 = "());" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_49 = ".create(domainModelEditDomain, element, feature, values));" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_50 = ".create(domainModelEditDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\t\t\treturn result;";
  protected final String TEXT_51 = NL + "\t\t\t\t\t\t\t\treturn ";
  protected final String TEXT_52 = ".create(domainModelEditDomain, element, feature, valueToSet);";
  protected final String TEXT_53 = NL + "\t\t\t\t\t\t\t}";
  protected final String TEXT_54 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_55 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_56 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_57 = "() {" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_58 = " element = ";
  protected final String TEXT_59 = ";" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_60 = " domainModelCommand = createDomainModelCommand();" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_61 = " createDomainModelCommand() {" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_62 = " domainModelEditDomain = ";
  protected final String TEXT_63 = ".getEditingDomainFor(";
  protected final String TEXT_64 = ".getDiagram().getElement());" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_65 = " result = new ";
  protected final String TEXT_66 = "();" + NL + "\t\t\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_67 = NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_68 = " ";
  protected final String TEXT_69 = "feature = (";
  protected final String TEXT_70 = ") ";
  protected final String TEXT_71 = ".eINSTANCE.get";
  protected final String TEXT_72 = "();" + NL + "\t\t\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_73 = ".parseValue(feature, parseResult[";
  protected final String TEXT_74 = "]);" + NL + "\t\t\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\t\t\treturn ";
  protected final String TEXT_75 = ".INSTANCE;" + NL + "\t\t\t\t\t\t\t\t}";
  protected final String TEXT_76 = NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_77 = " ";
  protected final String TEXT_78 = "values = new ";
  protected final String TEXT_79 = "();" + NL + "\t\t\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_80 = "());" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_81 = ".create(domainModelEditDomain, element, feature, values));" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_82 = ".create(domainModelEditDomain, element, feature, valueToSet));";
  protected final String TEXT_83 = NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_84 = ".create(domainModelEditDomain, element, feature, valueToSet));";
  protected final String TEXT_85 = NL + "\t\t\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t\t\t}";
  protected final String TEXT_86 = NL + "\t\t\t\t\t\t\tpublic void undo() {" + NL + "\t\t\t\t\t\t\t\tdomainModelCommand.undo();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t\tpublic void execute() {" + NL + "\t\t\t\t\t\t\t\tdomainModelCommand.execute();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t\tpublic boolean canUndo() {" + NL + "\t\t\t\t\t\t\t\treturn element != null && domainModelCommand != null && domainModelCommand.canUndo();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t\tpublic boolean canExecute() {" + NL + "\t\t\t\t\t\t\t\treturn element != null && domainModelCommand != null && domainModelCommand.canExecute();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t};" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t});" + NL + "\t}" + NL;
  protected final String TEXT_87 = NL;
  protected final String TEXT_88 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_89 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_90 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_91 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_92 = "(this, ";
  protected final String TEXT_93 = ".class, new ";
  protected final String TEXT_94 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_95 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_96 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
d230 1
d262 3
d268 4
d273 1
a273 1
    stringBuffer.append(TEXT_14);
d277 1
a277 1
	final boolean isReadOnly = genLabel.isReadOnly();
a278 1
    stringBuffer.append(TEXT_15);
d280 1
d282 1
a282 1
    stringBuffer.append(TEXT_17);
d284 1
a284 1
    stringBuffer.append(TEXT_18);
d286 1
a286 1
    stringBuffer.append(TEXT_19);
d288 1
a288 1
    stringBuffer.append(TEXT_20);
d290 1
a290 1
    stringBuffer.append(TEXT_21);
d292 1
a292 1
    stringBuffer.append(TEXT_22);
d294 1
a294 1
    stringBuffer.append(TEXT_23);
d296 1
a296 1
    stringBuffer.append(TEXT_24);
d298 1
a298 1
    stringBuffer.append(TEXT_25);
d300 7
a306 1
    stringBuffer.append(TEXT_26);
d308 1
a308 1
if (labelModelFacet instanceof FeatureLabelModelFacet && !isReadOnly) {
d312 1
a312 1
    stringBuffer.append(TEXT_27);
a313 8
    stringBuffer.append(TEXT_28);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.Command"));
    stringBuffer.append(TEXT_29);
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
    stringBuffer.append(TEXT_30);
    stringBuffer.append(resolvedSemanticElement);
    stringBuffer.append(TEXT_31);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
d317 1
a317 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.domain.EditingDomain"));
d319 1
a319 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.domain.AdapterFactoryEditingDomain"));
d321 1
a321 1
    stringBuffer.append(primaryView);
d323 1
a323 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.ecore.EAttribute"));
d327 2
d330 1
a330 1
    stringBuffer.append(TEXT_39);
d332 1
a332 1
    stringBuffer.append(TEXT_40);
d334 1
a334 1
    stringBuffer.append(TEXT_41);
d336 1
a336 1
    stringBuffer.append(TEXT_42);
a339 2
    stringBuffer.append(TEXT_43);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
d343 2
d346 1
a346 1
    stringBuffer.append(TEXT_46);
d348 1
a348 1
    stringBuffer.append(TEXT_47);
d350 1
a350 1
    stringBuffer.append(TEXT_48);
d352 1
a352 1
    stringBuffer.append(TEXT_49);
d354 1
a354 1
    stringBuffer.append(TEXT_50);
d358 1
a358 1
    stringBuffer.append(TEXT_51);
d360 1
a360 1
    stringBuffer.append(TEXT_52);
d364 1
a364 1
    stringBuffer.append(TEXT_53);
d370 1
a370 1
    stringBuffer.append(TEXT_54);
d372 1
a372 1
    stringBuffer.append(TEXT_55);
a373 2
    stringBuffer.append(TEXT_56);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.commands.Command"));
d375 1
a375 1
    stringBuffer.append(importManager.getImportedName(underlyingMetaClass.getQualifiedInterfaceName()));
d377 1
a377 1
    stringBuffer.append(resolvedSemanticElement);
d379 1
a379 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
d381 1
a381 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.Command"));
d383 1
a383 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.domain.EditingDomain"));
d385 1
a385 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.edit.domain.AdapterFactoryEditingDomain"));
d387 1
a387 1
    stringBuffer.append(primaryView);
a388 4
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_65);
    stringBuffer.append(importManager.getImportedName("org.eclipse.emf.common.command.CompoundCommand"));
    stringBuffer.append(TEXT_66);
d395 1
a395 1
    stringBuffer.append(TEXT_67);
d398 1
a398 1
    stringBuffer.append(TEXT_68);
d400 1
a400 1
    stringBuffer.append(TEXT_69);
d402 1
a402 1
    stringBuffer.append(TEXT_70);
d404 1
a404 1
    stringBuffer.append(TEXT_71);
d406 1
a406 1
    stringBuffer.append(TEXT_72);
d408 1
a408 1
    stringBuffer.append(TEXT_73);
d410 1
a410 1
    stringBuffer.append(TEXT_74);
d412 1
a412 1
    stringBuffer.append(TEXT_75);
d416 1
a416 1
    stringBuffer.append(TEXT_76);
d419 1
a419 1
    stringBuffer.append(TEXT_77);
d421 1
a421 1
    stringBuffer.append(TEXT_78);
d423 1
a423 1
    stringBuffer.append(TEXT_79);
d425 1
a425 1
    stringBuffer.append(TEXT_80);
d427 1
a427 1
    stringBuffer.append(TEXT_81);
d429 1
a429 1
    stringBuffer.append(TEXT_82);
d433 1
a433 1
    stringBuffer.append(TEXT_83);
d435 1
a435 1
    stringBuffer.append(TEXT_84);
d442 8
d452 1
a452 1
}
d456 1
d458 1
a458 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.Request"));
d460 1
a460 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.RequestConstants"));
d464 1
a464 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.DirectEditManager"));
d466 1
a466 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.TextCellEditor"));
d468 1
a468 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.CellEditorLocator"));
d470 1
a470 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.CellEditor"));
d472 3
a474 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.geometry.Rectangle"));
@


1.2
log
@[bblajer] #138415 Update Lite generator to use VISUAL_ID as view type scheme instead of annotations
@
text
@d269 1
d294 1
a294 1
if (labelModelFacet instanceof FeatureLabelModelFacet && !genLabel.isReadOnly()) {
d716 3
a728 1
Viewmap viewmap = genLabel.getViewmap();
d759 2
a760 2
if (genLabel.getViewmap() instanceof InnerClassViewmap) {
	String classBody = ((InnerClassViewmap) genLabel.getViewmap()).getClassBody();
@


1.1
log
@[bblajer] #136702 Code generation targeting pure-GEF runtime
@
text
@d29 150
a178 150
  protected final String TEXT_9 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_10 = " manager;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate String defaultText;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_11 = "(View view) {" + NL + "\t\tsetModel(view);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void createEditPolicies() {";
  protected final String TEXT_12 = NL;
  protected final String TEXT_13 = "\t\tinstallEditPolicy(";
  protected final String TEXT_14 = ".DIRECT_EDIT_ROLE," + NL + "\t\t\t\tnew ";
  protected final String TEXT_15 = "() {" + NL + "\t\t\t\t\tprotected void showCurrentEditValue(";
  protected final String TEXT_16 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tgetLabel().setText(value);" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t\tprotected ";
  protected final String TEXT_17 = " getDirectEditCommand(";
  protected final String TEXT_18 = " request) {" + NL + "\t\t\t\t\t\tString value = (String) request.getCellEditor().getValue();" + NL + "\t\t\t\t\t\tif (value == null) {" + NL + "\t\t\t\t\t\t\t//Invalid value is transformed into a null by the validator." + NL + "\t\t\t\t\t\t\t//XXX: implement validator" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_19 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\tfinal Object[] parseResult;" + NL + "\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\tparseResult = new ";
  protected final String TEXT_20 = "(EDIT_PATTERN).parse(value);" + NL + "\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_21 = ".INSTANCE;" + NL + "\t\t\t\t\t\t} catch (";
  protected final String TEXT_22 = " e) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_23 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}";
  protected final String TEXT_24 = NL + "\t\t\t\t\t\tif (parseResult.length != 1) {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_25 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_26 = "() {" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_27 = " element = ";
  protected final String TEXT_28 = ";" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_29 = " domainModelCommand = createDomainModelCommand();" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_30 = " createDomainModelCommand() {" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_31 = " domainModelEditDomain = ";
  protected final String TEXT_32 = ".getEditingDomainFor(";
  protected final String TEXT_33 = ".getDiagram().getElement());" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_34 = " feature = (";
  protected final String TEXT_35 = ") ";
  protected final String TEXT_36 = ".eINSTANCE.get";
  protected final String TEXT_37 = "();" + NL + "\t\t\t\t\t\t\t\tObject valueToSet;" + NL + "\t\t\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_38 = ".parseValue(feature, parseResult[0]);" + NL + "\t\t\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\t\t\treturn ";
  protected final String TEXT_39 = ".INSTANCE;" + NL + "\t\t\t\t\t\t\t\t}";
  protected final String TEXT_40 = NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_41 = " result = new ";
  protected final String TEXT_42 = "();" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_43 = " values = new ";
  protected final String TEXT_44 = "();" + NL + "\t\t\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_45 = "());" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_46 = ".create(domainModelEditDomain, element, feature, values));" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_47 = ".create(domainModelEditDomain, element, feature, valueToSet));" + NL + "\t\t\t\t\t\t\t\treturn result;";
  protected final String TEXT_48 = NL + "\t\t\t\t\t\t\t\treturn ";
  protected final String TEXT_49 = ".create(domainModelEditDomain, element, feature, valueToSet);";
  protected final String TEXT_50 = NL + "\t\t\t\t\t\t\t}";
  protected final String TEXT_51 = NL + "\t\t\t\t\t\tif (parseResult.length != ";
  protected final String TEXT_52 = ") {" + NL + "\t\t\t\t\t\t\treturn ";
  protected final String TEXT_53 = ".INSTANCE;" + NL + "\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\treturn new ";
  protected final String TEXT_54 = "() {" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_55 = " element = ";
  protected final String TEXT_56 = ";" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_57 = " domainModelCommand = createDomainModelCommand();" + NL + "\t\t\t\t\t\t\tprivate ";
  protected final String TEXT_58 = " createDomainModelCommand() {" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_59 = " domainModelEditDomain = ";
  protected final String TEXT_60 = ".getEditingDomainFor(";
  protected final String TEXT_61 = ".getDiagram().getElement());" + NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_62 = " result = new ";
  protected final String TEXT_63 = "();" + NL + "\t\t\t\t\t\t\t\tObject valueToSet;";
  protected final String TEXT_64 = NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_65 = " ";
  protected final String TEXT_66 = "feature = (";
  protected final String TEXT_67 = ") ";
  protected final String TEXT_68 = ".eINSTANCE.get";
  protected final String TEXT_69 = "();" + NL + "\t\t\t\t\t\t\t\ttry {" + NL + "\t\t\t\t\t\t\t\t\tvalueToSet = ";
  protected final String TEXT_70 = ".parseValue(feature, parseResult[";
  protected final String TEXT_71 = "]);" + NL + "\t\t\t\t\t\t\t\t} catch (IllegalArgumentException e) {" + NL + "\t\t\t\t\t\t\t\t\treturn ";
  protected final String TEXT_72 = ".INSTANCE;" + NL + "\t\t\t\t\t\t\t\t}";
  protected final String TEXT_73 = NL + "\t\t\t\t\t\t\t\t";
  protected final String TEXT_74 = " ";
  protected final String TEXT_75 = "values = new ";
  protected final String TEXT_76 = "();" + NL + "\t\t\t\t\t\t\t\tvalues.addAll(element.get";
  protected final String TEXT_77 = "());" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_78 = ".create(domainModelEditDomain, element, feature, values));" + NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_79 = ".create(domainModelEditDomain, element, feature, valueToSet));";
  protected final String TEXT_80 = NL + "\t\t\t\t\t\t\t\tresult.append(";
  protected final String TEXT_81 = ".create(domainModelEditDomain, element, feature, valueToSet));";
  protected final String TEXT_82 = NL + "\t\t\t\t\t\t\t\treturn result;" + NL + "\t\t\t\t\t\t\t}";
  protected final String TEXT_83 = NL + "\t\t\t\t\t\t\tpublic void undo() {" + NL + "\t\t\t\t\t\t\t\tdomainModelCommand.undo();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t\tpublic void execute() {" + NL + "\t\t\t\t\t\t\t\tdomainModelCommand.execute();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t\tpublic boolean canUndo() {" + NL + "\t\t\t\t\t\t\t\treturn element != null && domainModelCommand != null && domainModelCommand.canUndo();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t\tpublic boolean canExecute() {" + NL + "\t\t\t\t\t\t\t\treturn element != null && domainModelCommand != null && domainModelCommand.canExecute();" + NL + "\t\t\t\t\t\t\t}" + NL + "\t\t\t\t\t\t};" + NL + "\t\t\t\t\t}" + NL + "\t\t\t\t});" + NL + "\t}" + NL;
  protected final String TEXT_84 = NL;
  protected final String TEXT_85 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void performRequest(";
  protected final String TEXT_86 = " req) {" + NL + "\t\tif (";
  protected final String TEXT_87 = ".REQ_DIRECT_EDIT == req.getType()) {" + NL + "\t\t\tperformDirectEdit();" + NL + "\t\t} else {" + NL + "\t\t\tsuper.performRequest(req);" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_88 = " getManager() {" + NL + "\t\tif (manager == null) {" + NL + "\t\t\tmanager = new ";
  protected final String TEXT_89 = "(this, ";
  protected final String TEXT_90 = ".class, new ";
  protected final String TEXT_91 = "() {" + NL + "\t\t\t\tpublic void relocate(";
  protected final String TEXT_92 = " celleditor) {" + NL + "\t\t\t\t\t";
  protected final String TEXT_93 = " rect = getLabel().getTextBounds();" + NL + "\t\t\t\t\tgetLabel().translateToAbsolute(rect);" + NL + "\t\t\t\t\tcelleditor.getControl().setBounds(rect.x, rect.y, rect.width, rect.height);" + NL + "\t\t\t\t}" + NL + "\t\t\t}) {" + NL + "\t\t\t\tprotected void initCellEditor() {" + NL + "\t\t\t\t\tgetCellEditor().setValue(getLabelEditText());" + NL + "\t\t\t\t}" + NL + "\t\t\t};" + NL + "\t\t}" + NL + "\t\treturn manager;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void performDirectEdit() {" + NL + "\t\tgetManager().show();" + NL + "\t}" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshVisuals() {" + NL + "\t\tsuper.refreshVisuals();" + NL + "\t\trefreshLabel();" + NL + "\t\trefreshFont();" + NL + "\t\trefreshFontColor();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshLabel() {" + NL + "\t\tgetLabel().setText(getLabelText());" + NL + "\t\tgetLabel().setIcon(getLabelIcon());" + NL + "\t}" + NL;
  protected final String TEXT_94 = NL;
  protected final String TEXT_95 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String VIEW_PATTERN = \"";
  protected final String TEXT_96 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static final String EDIT_PATTERN = \"";
  protected final String TEXT_97 = "\";" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelText() {" + NL + "\t\t";
  protected final String TEXT_98 = " element = ";
  protected final String TEXT_99 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, VIEW_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String getLabelEditText() {" + NL + "\t\t";
  protected final String TEXT_100 = " element = ";
  protected final String TEXT_101 = ";" + NL + "\t\tif (element == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}" + NL + "\t\treturn buildTextByPattern(element, EDIT_PATTERN);" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected String buildTextByPattern(";
  protected final String TEXT_102 = " element, String pattern) {";
  protected final String TEXT_103 = NL + "\t\tif (element.get";
  protected final String TEXT_104 = "() == null) {" + NL + "\t\t\treturn defaultText;" + NL + "\t\t}";
  protected final String TEXT_105 = NL + "\t\treturn ";
  protected final String TEXT_106 = ".format(pattern, new Object[] {";
  protected final String TEXT_107 = NL + "\t\t\t";
  protected final String TEXT_108 = NL + "\t\t});";
  protected final String TEXT_109 = NL + "\t\treturn ";
  protected final String TEXT_110 = ".format(pattern, new Object[] {";
  protected final String TEXT_111 = NL + "\t\t";
  protected final String TEXT_112 = ",";
  protected final String TEXT_113 = NL + "\t\t});";
  protected final String TEXT_114 = NL + "\t\t//XXX: unexpected model facet." + NL + "\t\treturn defaultText;";
  protected final String TEXT_115 = NL + "\t}";
  protected final String TEXT_116 = NL;
  protected final String TEXT_117 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFont() {" + NL + "\t\t";
  protected final String TEXT_118 = " style =" + NL + "\t\t\t(";
  protected final String TEXT_119 = ") ";
  protected final String TEXT_120 = ".getStyle(" + NL + "\t\t\t\t";
  protected final String TEXT_121 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_122 = " toDispose = createdFont;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tString fontName = style.getFontName();" + NL + "\t\t\tint fontHeight = style.getFontHeight();" + NL + "\t\t\tint fontStyle = ";
  protected final String TEXT_123 = ".NORMAL;" + NL + "\t\t\tif (style.isBold()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_124 = ".BOLD;" + NL + "\t\t\t}" + NL + "\t\t\tif (style.isItalic()) {" + NL + "\t\t\t\tfontStyle |= ";
  protected final String TEXT_125 = ".ITALIC;" + NL + "\t\t\t}" + NL + "\t\t\t";
  protected final String TEXT_126 = " currentFont = getFigure().getFont();" + NL + "\t\t\tif (currentFont != null) {" + NL + "\t\t\t\t";
  protected final String TEXT_127 = " currentFontData = currentFont.getFontData()[0];" + NL + "\t\t\t\tif (currentFontData.getName().equals(fontName) && currentFontData.getHeight() == fontHeight && currentFontData.getStyle() == fontStyle) {" + NL + "\t\t\t\t\treturn;" + NL + "\t\t\t\t}" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFont = new ";
  protected final String TEXT_128 = "(null, fontName, fontHeight, fontStyle);" + NL + "\t\t\tgetFigure().setFont(createdFont);" + NL + "\t\t} else {" + NL + "\t\t\t//revert to the default font" + NL + "\t\t\tgetFigure().setFont(getViewer().getControl().getFont());" + NL + "\t\t\tcreatedFont = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The font (created by {@@link #refreshFont()}) currently assigned to the label (unless the default font is assigned)." + NL + "\t * Whenever another non-default font is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_129 = " createdFont;";
  protected final String TEXT_130 = NL;
  protected final String TEXT_131 = "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected void refreshFontColor() {" + NL + "\t\t";
  protected final String TEXT_132 = " style = (";
  protected final String TEXT_133 = ")  ";
  protected final String TEXT_134 = ".getStyle(";
  protected final String TEXT_135 = ".eINSTANCE.getFontStyle());" + NL + "\t\t";
  protected final String TEXT_136 = " toDispose = createdFontColor;" + NL + "\t\tif (style != null) {" + NL + "\t\t\tint fontColor = style.getFontColor();" + NL + "\t\t\tint red = fontColor & 0x000000FF;" + NL + "\t\t\tint green = (fontColor & 0x0000FF00) >> 8;" + NL + "\t\t\tint blue = (fontColor & 0x00FF0000) >> 16;" + NL + "\t\t\t";
  protected final String TEXT_137 = " currentColor = getLabel().getForegroundColor();" + NL + "\t\t\tif (currentColor != null && currentColor.getRed() == red && currentColor.getGreen() == green && currentColor.getBlue() == blue) {" + NL + "\t\t\t\treturn;" + NL + "\t\t\t}" + NL + "\t\t\tcreatedFontColor = new ";
  protected final String TEXT_138 = "(null, red, green, blue);" + NL + "\t\t\tgetFigure().setForegroundColor(createdFontColor);" + NL + "\t\t} else {" + NL + "\t\t\tgetFigure().setForegroundColor(getViewer().getControl().getForeground());" + NL + "\t\t\tcreatedFontColor = null;" + NL + "\t\t}" + NL + "\t\tif (toDispose != null) {" + NL + "\t\t\ttoDispose.dispose();" + NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * The color (created by {@@link #refreshFontColor()}) currently assigned to the label." + NL + "\t * Whenever another color is assigned to it, it is safe to dispose the previous one." + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_139 = " createdFontColor;" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_140 = " getLabelIcon() {" + NL + "\t\t";
  protected final String TEXT_141 = " element = resolveSemanticElement();" + NL + "\t\t";
  protected final String TEXT_142 = " imageDescriptor = ";
  protected final String TEXT_143 = ".getInstance().getItemImageDescriptor(element);" + NL + "\t\tif (imageDescriptor != null) {" + NL + "\t\t\treturn imageDescriptor.createImage();" + NL + "\t\t}" + NL + "\t\treturn ";
  protected final String TEXT_144 = ".getMissingImageDescriptor().createImage();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_145 = " resolveSemanticElement() {" + NL + "\t\tfor(EditPart editPart = this; editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tView view = (View)editPart.getModel();" + NL + "\t\t\tif (view != null && view.getElement() != null) {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_146 = ") view.getElement();" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate ";
  protected final String TEXT_147 = " getUpdatableParent() {" + NL + "\t\tfor(EditPart editPart = getParent(); editPart != null; editPart = editPart.getParent()) {" + NL + "\t\t\tif (editPart instanceof ";
  protected final String TEXT_148 = ") {" + NL + "\t\t\t\treturn (";
  protected final String TEXT_149 = ") editPart;" + NL + "\t\t\t}" + NL + "\t\t}" + NL + "\t\treturn null;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void activate() {" + NL + "\t\tsuper.activate();" + NL + "\t\t";
  protected final String TEXT_150 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_151 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_152 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_153 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_154 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_155 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_156 = NL + "\t\t\tupdatableParent.addRefresher(";
  protected final String TEXT_157 = ".eINSTANCE.get";
  protected final String TEXT_158 = "(), labelRefresher);";
d182 10
a191 10
  protected final String TEXT_162 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void deactivate() {" + NL + "\t\tsuper.deactivate();" + NL + "\t\t";
  protected final String TEXT_163 = " updatableParent = getUpdatableParent();" + NL + "\t\tif (updatableParent != null) {" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_164 = ".eINSTANCE.getFontStyle_FontColor(), fontColorRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_165 = ".eINSTANCE.getFontStyle_FontHeight(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_166 = ".eINSTANCE.getFontStyle_FontName(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_167 = ".eINSTANCE.getFontStyle_Bold(), fontRefresher);" + NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_168 = ".eINSTANCE.getFontStyle_Italic(), fontRefresher);";
  protected final String TEXT_169 = NL + "\t\t\tupdatableParent.removeRefresher(";
  protected final String TEXT_170 = ".eINSTANCE.get";
  protected final String TEXT_171 = "(), labelRefresher);";
d195 20
a214 20
  protected final String TEXT_175 = NL + "\t\t}" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher labelRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshLabel();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontColorRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFontColor();" + NL + "\t\t}" + NL + "\t};" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate IUpdatableEditPart.Refresher fontRefresher = new IUpdatableEditPart.Refresher() {" + NL + "\t\tpublic void refresh() {" + NL + "\t\t\trefreshFont();" + NL + "\t\t}" + NL + "\t};";
  protected final String TEXT_176 = NL;
  protected final String TEXT_177 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_178 = " createFigure() {" + NL + "\t\t";
  protected final String TEXT_179 = " label = createLabel();" + NL + "\t\tdefaultText = label.getText();" + NL + "\t\treturn label;" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprotected ";
  protected final String TEXT_180 = " createLabel() {";
  protected final String TEXT_181 = NL + "\t\treturn new ";
  protected final String TEXT_182 = "();";
  protected final String TEXT_183 = NL + "\t\treturn ";
  protected final String TEXT_184 = ";";
  protected final String TEXT_185 = NL + "\t\treturn new ";
  protected final String TEXT_186 = "();";
  protected final String TEXT_187 = NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic ";
  protected final String TEXT_188 = " getLabel() {" + NL + "\t\treturn (";
  protected final String TEXT_189 = ") getFigure();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tpublic void setLabel(";
  protected final String TEXT_190 = " figure) {" + NL + "\t\tunregisterVisuals();" + NL + "\t\tsetFigure(figure);" + NL + "\t\tdefaultText = figure.getText();" + NL + "\t\tregisterVisuals();" + NL + "\t\trefreshVisuals();" + NL + "\t}" + NL;
  protected final String TEXT_191 = NL;
  protected final String TEXT_192 = NL;
  protected final String TEXT_193 = NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate static class MapModeWorkaround {" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic int DPtoLP(int dp) {" + NL + "\t\t\treturn dp;" + NL + "\t\t}" + NL + "\t\t/**" + NL + "\t\t * @@generated" + NL + "\t\t */" + NL + "\t\tpublic static MapModeWorkaround INSTANCE = new MapModeWorkaround();" + NL + "\t}" + NL + "" + NL + "\t/**" + NL + "\t * @@generated" + NL + "\t */" + NL + "\tprivate MapModeWorkaround getMapMode() {" + NL + "\t\treturn MapModeWorkaround.INSTANCE;" + NL + "\t}";
  protected final String TEXT_194 = NL + "}";
d216 3
d253 2
d257 5
d263 1
a263 1
    stringBuffer.append(TEXT_10);
d265 1
a265 1
    stringBuffer.append(TEXT_11);
d270 2
a271 2
    stringBuffer.append(TEXT_12);
    stringBuffer.append(TEXT_13);
d273 1
a273 1
    stringBuffer.append(TEXT_14);
d275 1
a275 1
    stringBuffer.append(TEXT_15);
d277 1
a277 1
    stringBuffer.append(TEXT_16);
d279 1
a279 1
    stringBuffer.append(TEXT_17);
d281 1
a281 1
    stringBuffer.append(TEXT_18);
d283 1
a283 1
    stringBuffer.append(TEXT_19);
d285 1
a285 1
    stringBuffer.append(TEXT_20);
d287 1
a287 1
    stringBuffer.append(TEXT_21);
d289 1
a289 1
    stringBuffer.append(TEXT_22);
d291 1
a291 1
    stringBuffer.append(TEXT_23);
d297 1
a297 1
    stringBuffer.append(TEXT_24);
d299 1
a299 1
    stringBuffer.append(TEXT_25);
d301 1
a301 1
    stringBuffer.append(TEXT_26);
d303 1
a303 1
    stringBuffer.append(TEXT_27);
d305 1
a305 1
    stringBuffer.append(TEXT_28);
d307 1
a307 1
    stringBuffer.append(TEXT_29);
d309 1
a309 1
    stringBuffer.append(TEXT_30);
d311 1
a311 1
    stringBuffer.append(TEXT_31);
d313 1
a313 1
    stringBuffer.append(TEXT_32);
d315 1
a315 1
    stringBuffer.append(TEXT_33);
d317 1
a317 1
    stringBuffer.append(TEXT_34);
d319 1
a319 1
    stringBuffer.append(TEXT_35);
d321 1
a321 1
    stringBuffer.append(TEXT_36);
d323 1
a323 1
    stringBuffer.append(TEXT_37);
d325 1
a325 1
    stringBuffer.append(TEXT_38);
d327 1
a327 1
    stringBuffer.append(TEXT_39);
d331 1
a331 1
    stringBuffer.append(TEXT_40);
d333 1
a333 1
    stringBuffer.append(TEXT_41);
d335 1
a335 1
    stringBuffer.append(TEXT_42);
d337 1
a337 1
    stringBuffer.append(TEXT_43);
d339 1
a339 1
    stringBuffer.append(TEXT_44);
d341 1
a341 1
    stringBuffer.append(TEXT_45);
d343 1
a343 1
    stringBuffer.append(TEXT_46);
d345 1
a345 1
    stringBuffer.append(TEXT_47);
d349 1
a349 1
    stringBuffer.append(TEXT_48);
d351 1
a351 1
    stringBuffer.append(TEXT_49);
d355 1
a355 1
    stringBuffer.append(TEXT_50);
d361 1
a361 1
    stringBuffer.append(TEXT_51);
d363 1
a363 1
    stringBuffer.append(TEXT_52);
d365 1
a365 1
    stringBuffer.append(TEXT_53);
d367 1
a367 1
    stringBuffer.append(TEXT_54);
d369 1
a369 1
    stringBuffer.append(TEXT_55);
d371 1
a371 1
    stringBuffer.append(TEXT_56);
d373 1
a373 1
    stringBuffer.append(TEXT_57);
d375 1
a375 1
    stringBuffer.append(TEXT_58);
d377 1
a377 1
    stringBuffer.append(TEXT_59);
d379 1
a379 1
    stringBuffer.append(TEXT_60);
d381 1
a381 1
    stringBuffer.append(TEXT_61);
d383 1
a383 1
    stringBuffer.append(TEXT_62);
d385 1
a385 1
    stringBuffer.append(TEXT_63);
d392 1
a392 1
    stringBuffer.append(TEXT_64);
d395 1
a395 1
    stringBuffer.append(TEXT_65);
d397 1
a397 1
    stringBuffer.append(TEXT_66);
d399 1
a399 1
    stringBuffer.append(TEXT_67);
d401 1
a401 1
    stringBuffer.append(TEXT_68);
d403 1
a403 1
    stringBuffer.append(TEXT_69);
d405 1
a405 1
    stringBuffer.append(TEXT_70);
d407 1
a407 1
    stringBuffer.append(TEXT_71);
d409 1
a409 1
    stringBuffer.append(TEXT_72);
d413 1
a413 1
    stringBuffer.append(TEXT_73);
d416 1
a416 1
    stringBuffer.append(TEXT_74);
d418 1
a418 1
    stringBuffer.append(TEXT_75);
d420 1
a420 1
    stringBuffer.append(TEXT_76);
d422 1
a422 1
    stringBuffer.append(TEXT_77);
d424 1
a424 1
    stringBuffer.append(TEXT_78);
d426 1
a426 1
    stringBuffer.append(TEXT_79);
d430 1
a430 1
    stringBuffer.append(TEXT_80);
d432 1
a432 1
    stringBuffer.append(TEXT_81);
d439 1
a439 1
    stringBuffer.append(TEXT_82);
a442 4
    stringBuffer.append(TEXT_83);
    stringBuffer.append(TEXT_84);
    stringBuffer.append(TEXT_85);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.Request"));
a443 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.RequestConstants"));
a444 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.DirectEditManager"));
d446 1
a446 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.DirectEditManager"));
d448 1
a448 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.TextCellEditor"));
d450 1
a450 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gef.tools.CellEditorLocator"));
d452 1
a452 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.viewers.CellEditor"));
d454 1
a454 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.draw2d.geometry.Rectangle"));
d456 1
d458 5
d506 1
a506 1
    stringBuffer.append(TEXT_95);
d508 1
a508 1
    stringBuffer.append(TEXT_96);
d510 1
a510 1
    stringBuffer.append(TEXT_97);
d512 1
a512 1
    stringBuffer.append(TEXT_98);
d514 1
a514 1
    stringBuffer.append(TEXT_99);
d516 1
a516 1
    stringBuffer.append(TEXT_100);
d518 1
a518 1
    stringBuffer.append(TEXT_101);
d520 1
a520 1
    stringBuffer.append(TEXT_102);
d527 1
a527 1
    stringBuffer.append(TEXT_103);
d529 1
a529 1
    stringBuffer.append(TEXT_104);
d533 1
a533 1
    stringBuffer.append(TEXT_105);
d535 1
a535 1
    stringBuffer.append(TEXT_106);
d542 1
a542 1
    stringBuffer.append(TEXT_107);
d544 1
a544 1
    stringBuffer.append(TEXT_108);
d549 1
a549 1
    stringBuffer.append(TEXT_109);
d551 1
a551 1
    stringBuffer.append(TEXT_110);
d560 1
a560 1
    stringBuffer.append(TEXT_111);
d563 1
a563 1
    stringBuffer.append(TEXT_112);
d568 1
a568 1
    stringBuffer.append(TEXT_113);
d572 1
a572 1
    stringBuffer.append(TEXT_114);
a575 4
    stringBuffer.append(TEXT_115);
    stringBuffer.append(TEXT_116);
    stringBuffer.append(TEXT_117);
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a576 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a577 1
    stringBuffer.append(primaryView);
d579 1
a579 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d581 1
a581 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
d583 1
a583 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
d585 1
a585 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.SWT"));
d587 2
a589 2
    stringBuffer.append(TEXT_125);
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
d591 1
a591 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.FontData"));
d593 1
a593 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Font"));
d597 1
d599 1
d601 1
a601 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a602 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.FontStyle"));
a603 1
    stringBuffer.append(primaryView);
d605 1
a605 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d607 1
a607 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d609 1
a609 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d611 1
a611 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Color"));
d615 1
a615 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.swt.graphics.Image"));
d617 1
a617 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d619 1
a619 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.jface.resource.ImageDescriptor"));
d621 1
a621 1
    stringBuffer.append(importManager.getImportedName(genDiagram.getEditorGen().getPlugin().getActivatorQualifiedClassName()));
d623 2
a625 2
    stringBuffer.append(TEXT_144);
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d627 1
a627 1
    stringBuffer.append(importManager.getImportedName(genHost.getDomainMetaClass().getQualifiedInterfaceName()));
d629 1
a629 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d631 1
a631 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d633 1
a633 1
    stringBuffer.append(importManager.getImportedName(genHost.getEditPartQualifiedClassName()));
d637 1
a637 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d639 1
a639 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d641 1
a641 1
    stringBuffer.append(importManager.getImportedName("org.eclipse.gmf.runtime.notation.NotationPackage"));
d647 6
d657 1
a657 1
    stringBuffer.append(TEXT_156);
d659 1
a659 1
    stringBuffer.append(TEXT_157);
d661 1
a661 1
    stringBuffer.append(TEXT_158);
d668 1
a668 1
    stringBuffer.append(TEXT_159);
d670 1
a670 1
    stringBuffer.append(TEXT_160);
d672 1
a672 1
    stringBuffer.append(TEXT_161);
d677 1
a677 1
    stringBuffer.append(TEXT_162);
d679 1
a679 1
    stringBuffer.append(TEXT_163);
d681 1
a681 1
    stringBuffer.append(TEXT_164);
d683 1
a683 1
    stringBuffer.append(TEXT_165);
d685 1
a685 1
    stringBuffer.append(TEXT_166);
d687 1
a687 1
    stringBuffer.append(TEXT_167);
d689 1
a689 1
    stringBuffer.append(TEXT_168);
d694 1
a694 1
    stringBuffer.append(TEXT_169);
d696 1
a696 1
    stringBuffer.append(TEXT_170);
d698 1
a698 1
    stringBuffer.append(TEXT_171);
d705 1
a705 1
    stringBuffer.append(TEXT_172);
d707 1
a707 1
    stringBuffer.append(TEXT_173);
d709 1
a709 1
    stringBuffer.append(TEXT_174);
d714 3
a716 3
    stringBuffer.append(TEXT_175);
    stringBuffer.append(TEXT_176);
    stringBuffer.append(TEXT_177);
d718 1
a718 1
    stringBuffer.append(TEXT_178);
d720 1
a720 1
    stringBuffer.append(TEXT_179);
d722 1
a722 1
    stringBuffer.append(TEXT_180);
d732 1
a732 1
    stringBuffer.append(TEXT_181);
d734 1
a734 1
    stringBuffer.append(TEXT_182);
d737 1
a737 1
    stringBuffer.append(TEXT_183);
d739 1
a739 1
    stringBuffer.append(TEXT_184);
d744 1
a744 1
    stringBuffer.append(TEXT_185);
d746 1
a746 1
    stringBuffer.append(TEXT_186);
d748 1
a748 1
    stringBuffer.append(TEXT_187);
d750 1
a750 1
    stringBuffer.append(TEXT_188);
d752 1
a752 1
    stringBuffer.append(TEXT_189);
d754 1
a754 1
    stringBuffer.append(TEXT_190);
d759 1
a759 1
    stringBuffer.append(TEXT_191);
d761 1
a761 1
    stringBuffer.append(TEXT_192);
d765 1
a765 1
    stringBuffer.append(TEXT_193);
d772 1
a772 1
    stringBuffer.append(TEXT_194);
d774 1
a774 1
    stringBuffer.append(TEXT_195);
@

