2,2c2,2
<  * Copyright (c) 2002, 2005 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2005 - 2006 IBM Corporation and others.
9a10,10
>  *    Dmitri Stadnik (Borland) - remove dependency to TextCompartmentEditPart
21,21c22,22
< import org.eclipse.gmf.runtime.diagram.ui.editparts.TextCompartmentEditPart;
---
> import org.eclipse.gmf.runtime.diagram.ui.editparts.ITextAwareEditPart;
77a79,80
> 		ITextAwareEditPart compartment = (ITextAwareEditPart) getHost();
> 		EObject model = (EObject)compartment.getModel();
78,79d78
< 		TextCompartmentEditPart compartment = (TextCompartmentEditPart) getHost();
< 		View view = compartment.getNotationView();
80a82,83
> 		if (model instanceof View) {
>             View view = (View)model;
81,81d81
< 		if (view !=null)
83a86,86
>         }
85,85c88,88
< 			elementAdapter = new EObjectAdapterEx((EObject)compartment.getModel(),
---
> 			elementAdapter = new EObjectAdapterEx(model, null);
86,86d88
< 				null);
103a106,106
> 		((ITextAwareEditPart) getHost()).setLabelText(value);
104,104d105
< 		((TextCompartmentEditPart) getHost()).getLabel().setText(value);
