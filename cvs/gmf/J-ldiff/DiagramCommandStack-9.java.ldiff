49,49d48
< import org.eclipse.swt.widgets.Display;
191,195d189
<             DiagramGraphicalViewer viewer = getDiagramGraphicalViewer();
< 
<             if (viewer != null && Display.getCurrent() == null)
<                 viewer.enableUpdates(false);
< 
206,208d199
<             } finally {
<                 if (viewer != null)
<                     viewer.enableUpdates(true);
227,242d217
<     private DiagramGraphicalViewer getDiagramGraphicalViewer() {
<         IDiagramEditDomain ded = getDiagramEditDomain();
<         DiagramGraphicalViewer viewer = null;
< 
<         if (ded instanceof DiagramEditDomain) {
<             IDiagramWorkbenchPart dgrmWP = ((DiagramEditDomain) ded)
<                 .getDiagramEditorPart();
<             if (dgrmWP != null) {
<                 IDiagramGraphicalViewer dgv = ((DiagramEditDomain) ded)
<                     .getDiagramEditorPart().getDiagramGraphicalViewer();
<                 if (dgv instanceof DiagramGraphicalViewer)
<                     viewer = (DiagramGraphicalViewer) dgv;
<             }
<         }
<         return viewer;
<     }
