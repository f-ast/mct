20,20d19
< import java.util.ArrayList;
34,34d32
< 		final ArrayList<ParserException.ErrorLocationInfo> errors = new ArrayList<ParserException.ErrorLocationInfo>();
36a35,35
> 			scanner = new XpandLexer(buffer, qualifiedTemplateName);
37,44d34
< 			scanner = new XpandLexer(buffer, qualifiedTemplateName) {
<         		// FIXME move to XpandLexer.g template
<             	@Override
<             	public void reportError(int left_loc, int right_loc) {
<                     errors.add(XtendResourceParser.createError(this, left_loc, right_loc));
<             		super.reportError(left_loc, right_loc);
<             	}
< 			};
49a41,42
> 			ParserException.ErrorLocationInfo[] errors = scanner.getErrors();
>         	if (errors.length == 0) {
50,50d40
<         	if (errors.isEmpty()) {
62a55,57
> 		ParserException.ErrorLocationInfo[] errors = scanner.getErrors();
> 		assert errors.length > 0 : "otherwise, no reason not to get template";
> 		throw new ParserException(errors);
63,63d54
< 		return null;
