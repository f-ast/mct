2,2c2,2
<  * Copyright (c) 2002, 2005 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
13a14,14
> 
42a44,44
> import org.eclipse.gmf.runtime.diagram.ui.l10n.DiagramColorRegistry;
47,47c51,51
< import org.eclipse.gmf.runtime.draw2d.ui.figures.FigureUtilities;
---
> import org.eclipse.gmf.runtime.draw2d.ui.internal.mapmode.IMapModeHolder;
80,80c82,82
< 	private class WrapperMapMode implements IMapMode {
---
> 	private class WrapperMapMode implements IMapModeHolder {
118a121,124
> 		public IMapMode getMapMode() {
> 			return containedMM;
> 		}
> 		
392,392c398,398
< 		gridLayer.setForegroundColor(FigureUtilities.integerToColor(rgbValue));
---
> 		gridLayer.setForegroundColor(DiagramColorRegistry.getInstance().getColor(rgbValue));
601,601c607,607
< 		if (layers instanceof org.eclipse.gmf.runtime.draw2d.ui.internal.graphics.ScalableFreeformLayeredPane)
---
> 		if (getLayers() instanceof org.eclipse.gmf.runtime.draw2d.ui.internal.graphics.ScalableFreeformLayeredPane)
659a666,667
> 			} else {
> 				moveGridLayer(wsPrefStore.getBoolean(WorkspaceViewerProperties.GRIDORDER));
