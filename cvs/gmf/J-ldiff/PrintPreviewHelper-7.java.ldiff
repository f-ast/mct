27a28,28
> import org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramRootEditPart;
33a35,35
> import org.eclipse.gmf.runtime.diagram.ui.parts.IDiagramGraphicalViewer;
352a355,356
> 		initializeMapMode();
> 
679,686d682
< 	 * @param mm <code>IMapMode</code> to do the coordinate mapping
< 	 */
< 	public PrintPreviewHelper(IMapMode mm) {
< 		this.mm = mm;
< 	}
< 
< 	/**
< 	 * The constructor.
688a685,685
> 		//do nothing
689,689d684
< 		this(MapModeUtil.getMapMode());
699a696,718
> 	 * Initialize the map mode variable
> 	 */
> 	private void initializeMapMode() {
> 		DiagramEditor diagramEditor = getDiagramEditorPart();
> 		
> 		assert diagramEditor != null;
> 		
> 		IDiagramGraphicalViewer viewer = diagramEditor.getDiagramGraphicalViewer();
> 		
> 		if (viewer != null) {
> 			RootEditPart rootEP = viewer.getRootEditPart();
> 			
> 			if (rootEP instanceof DiagramRootEditPart) {
> 				this.mm = ((DiagramRootEditPart) rootEP).getMapMode();;
> 				return;
> 				
> 			}
> 		}
> 		
> 		this.mm = MapModeUtil.getMapMode();
> 	}
> 	
> 	/**
