21a22,22
> import org.eclipse.gmf.mappings.LabelNodeMapping;
26a28,28
> import org.eclipse.gmf.mappings.ShapeNodeMapping;
152a155,155
> 					if (next.getChild() instanceof ShapeNodeMapping && ((ShapeNodeMapping) next.getChild()).getDiagramNode() != null) {
153,153d154
< 					if (next.getChild().getDiagramNode() != null) {
154,154c156,156
< 						sb.append(next.getChild().getDiagramNode().getName());
---
> 						sb.append(((ShapeNodeMapping) next.getChild()).getDiagramNode().getName());
154a157,161
> 						if (next.getContainmentFeature() != null) {
> 							sb.append(";  ");
> 						}
> 					} else if (next.getChild() instanceof LabelNodeMapping && ((LabelNodeMapping) next.getChild()).getDiagramLabel() != null) {
> 						sb.append(((LabelNodeMapping) next.getChild()).getDiagramLabel().getName());
359,359c366,366
< 					NodeMapping nm = GMFMapFactory.eINSTANCE.createNodeMapping();
---
> 					ShapeNodeMapping nm = GMFMapFactory.eINSTANCE.createShapeNodeMapping();
558a566,566
> 			if (m instanceof ShapeNodeMapping && ((ShapeNodeMapping) m).getDiagramNode() != null) {
559,559d565
< 			if (m.getDiagramNode() != null) {
560,560c567,567
< 				diagramElementLabel.setText(m.getDiagramNode().getName());
---
> 				diagramElementLabel.setText(((ShapeNodeMapping) m).getDiagramNode().getName());
