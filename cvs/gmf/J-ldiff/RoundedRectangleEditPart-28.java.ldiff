28,28c25,25
< import org.eclipse.gmf.gmfgraph.Shape;
---
> import org.eclipse.emf.ecore.EObject;
31,31c31,31
< import org.eclipse.gmf.graphdef.editor.edit.polocies.DomainBasedXYLayoutEditPolicy;
---
> import org.eclipse.gmf.graphdef.editor.edit.polocies.FigureContainerXYLayoutEditPolicy;
88,88c88,88
< 		return new DomainBasedXYLayoutEditPolicy(getMapMode());
---
> 		return new FigureContainerXYLayoutEditPolicy(getMapMode());
222a223,229
> 	private org.eclipse.gmf.gmfgraph.RoundedRectangle getGmfgraphElement() {
> 		View view = getNotationView();
> 		if (view == null) {
> 			return null;
> 		}
> 		EObject element = view.getElement();
> 		if (element instanceof org.eclipse.gmf.gmfgraph.RoundedRectangle) {
223,225d222
< 	private org.eclipse.gmf.gmfgraph.RoundedRectangle getModelFigureElement() {
< 		Shape shape = getShape();
< 		if (shape instanceof org.eclipse.gmf.gmfgraph.RoundedRectangle) {
226,226c230,230
< 			org.eclipse.gmf.gmfgraph.RoundedRectangle modelFigureElement = (org.eclipse.gmf.gmfgraph.RoundedRectangle) shape;
---
> 			org.eclipse.gmf.gmfgraph.RoundedRectangle modelFigureElement = (org.eclipse.gmf.gmfgraph.RoundedRectangle) element;
236,236c240,240
< 		org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = (org.eclipse.gmf.gmfgraph.RoundedRectangle) getModelFigureElement();
---
> 		org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = getGmfgraphElement();
249,249c253,253
< 		org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = (org.eclipse.gmf.gmfgraph.RoundedRectangle) getModelFigureElement();
---
> 		org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = getGmfgraphElement();
275,275c279,279
< 		final org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = (org.eclipse.gmf.gmfgraph.RoundedRectangle) getModelFigureElement();
---
> 		final org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = getGmfgraphElement();
424,424c428,428
< 		org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = (org.eclipse.gmf.gmfgraph.RoundedRectangle) getModelFigureElement();
---
> 		org.eclipse.gmf.gmfgraph.RoundedRectangle modelElement = getGmfgraphElement();
