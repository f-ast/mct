269,269c269,269
< 	protected Collection selectionChangedListeners = new ArrayList();
---
> 	protected Collection<ISelectionChangedListener> selectionChangedListeners = new ArrayList<ISelectionChangedListener>();
314a315,315
> 				// Ignore.
316a318,318
> 				// Ignore.
318a321,321
> 				// Ignore.
320a324,324
> 				// Ignore.
328,328c332,332
< 	protected Collection removedResources = new ArrayList();
---
> 	protected Collection<Resource> removedResources = new ArrayList<Resource>();
334,334c338,338
< 	protected Collection changedResources = new ArrayList();
---
> 	protected Collection<Resource> changedResources = new ArrayList<Resource>();
340,340c344,344
< 	protected Collection savedResources = new ArrayList();
---
> 	protected Collection<Resource> savedResources = new ArrayList<Resource>();
348,348c352,352
< 	protected Map resourceToDiagnosticMap = new LinkedHashMap();
---
> 	protected Map<Resource, Diagnostic> resourceToDiagnosticMap = new LinkedHashMap<Resource, Diagnostic>();
365a370,370
> 			@Override
388a394,394
> 							break;
396a403,403
> 			@Override
400a408,408
> 			@Override
422,422c430,430
< 							protected Collection changedResources = new ArrayList();
---
> 							protected Collection<Resource> changedResources = new ArrayList<Resource>();
423,423c431,431
< 							protected Collection removedResources = new ArrayList();
---
> 							protected Collection<Resource> removedResources = new ArrayList<Resource>();
444,444c452,452
< 							public Collection getChangedResources() {
---
> 							public Collection<Resource> getChangedResources() {
448,448c456,456
< 							public Collection getRemovedResources() {
---
> 							public Collection<Resource> getRemovedResources() {
531,531d538
< 			for (Iterator i = changedResources.iterator(); i.hasNext(); ) {
532,532c539,539
< 				Resource resource = (Resource)i.next();
---
> 			for (Resource resource : changedResources) {
565,565d571
< 			for (Iterator i = resourceToDiagnosticMap.values().iterator(); i.hasNext(); ) {
566,566c572,572
< 				Diagnostic childDiagnostic = (Diagnostic)i.next();
---
> 			for (Diagnostic childDiagnostic : resourceToDiagnosticMap.values()) {
631,631c637,637
< 		List factories = new ArrayList();
---
> 		List<AdapterFactory> factories = new ArrayList<AdapterFactory>();
670,670c676,676
< 		editingDomain = new AdapterFactoryEditingDomain(adapterFactory, commandStack, new HashMap());
---
> 		editingDomain = new AdapterFactoryEditingDomain(adapterFactory, commandStack, new HashMap<Resource, Boolean>());
678a685,685
> 	@Override
689,689c696,696
< 	public void setSelectionToViewer(Collection collection) {
---
> 	public void setSelectionToViewer(Collection<?> collection) {
690,690c697,697
< 		final Collection theSelection = collection;
---
> 		final Collection<?> theSelection = collection;
886,886c893,893
< 		URI resourceURI = URI.createPlatformResourceURI(modelFile.getFile().getFullPath().toString());;
---
> 		URI resourceURI = URI.createPlatformResourceURI(modelFile.getFile().getFullPath().toString(), true);
944a952,952
> 	@Override
953,953c961,961
< 		    !((Resource)getEditingDomain().getResourceSet().getResources().get(0)).getContents().isEmpty()) {
---
> 		    !(getEditingDomain().getResourceSet().getResources().get(0)).getContents().isEmpty()) {
958a967,967
> 						@Override
963a973,973
> 						@Override
975a986,986
> 				selectionViewer.setSelection(new StructuredSelection(editingDomain.getResourceSet().getResources().get(0)), true);
989a1001,1001
> 						@Override
994a1007,1007
> 						@Override
1016a1030,1030
> 						@Override
1019a1034,1034
> 						@Override
1039a1055,1055
> 						@Override
1042a1059,1059
> 						@Override
1064a1082,1082
> 						@Override
1067a1086,1086
> 						@Override
1105a1125,1125
> 						@Override
1108a1129,1129
> 						@Override
1150a1172,1172
> 				@Override
1204a1227,1227
> 	@Override
1218a1242,1243
> 	@SuppressWarnings("unchecked")
> 		@Override
1244a1270,1270
> 				@Override
1263,1264d1288
< 					  ArrayList selection = new ArrayList();
< 					  selection.add(editingDomain.getResourceSet().getResources().get(0));
1265,1265c1289,1289
< 					  contentOutlineViewer.setSelection(new StructuredSelection(selection), true);
---
> 					  contentOutlineViewer.setSelection(new StructuredSelection(editingDomain.getResourceSet().getResources().get(0)), true);
1268a1293,1293
> 				@Override
1273a1299,1299
> 				@Override
1306a1333,1333
> 					@Override
1307,1307c1334,1334
< 					public void setSelectionToViewer(List selection) {
---
> 					public void setSelectionToViewer(List<?> selection) {
1311a1339,1339
> 					@Override
1331,1331c1359,1359
< 			Iterator selectedElements = ((IStructuredSelection)selection).iterator();
---
> 			Iterator<?> selectedElements = ((IStructuredSelection)selection).iterator();
1340,1340c1368,1368
< 					ArrayList selectionList = new ArrayList();
---
> 					ArrayList<Object> selectionList = new ArrayList<Object>();
1367a1396,1396
> 	@Override
1377a1407,1407
> 	@Override
1384a1415,1415
> 				@Override
1389,1389c1420,1420
< 					for (Iterator i = editingDomain.getResourceSet().getResources().iterator(); i.hasNext(); ) {
---
> 					for (Resource resource : editingDomain.getResourceSet().getResources()) {
1390,1390d1420
< 						Resource resource = (Resource)i.next();
1441a1472,1472
> 			// Ignore
1451a1483,1483
> 	@Override
1461a1494,1494
> 	@Override
1469,1469c1502,1502
< 				doSaveAs(URI.createPlatformResourceURI(file.getFullPath().toString()), new FileEditorInput(file));
---
> 				doSaveAs(URI.createPlatformResourceURI(file.getFullPath().toString(), true), new FileEditorInput(file));
1480,1480c1513,1513
< 		((Resource)editingDomain.getResourceSet().getResources().get(0)).setURI(uri);
---
> 		(editingDomain.getResourceSet().getResources().get(0)).setURI(uri);
1534a1568,1568
> 	@Override
1548a1583,1583
> 	@Override
1598,1598d1632
< 		for (Iterator listeners = selectionChangedListeners.iterator(); listeners.hasNext(); ) {
1599,1599c1633,1633
< 			ISelectionChangedListener listener = (ISelectionChangedListener)listeners.next();
---
> 		for (ISelectionChangedListener listener : selectionChangedListeners) {
1616,1616c1650,1650
< 				Collection collection = ((IStructuredSelection)selection).toList();
---
> 				Collection<?> collection = ((IStructuredSelection)selection).toList();
1700a1735,1735
> 	@Override
