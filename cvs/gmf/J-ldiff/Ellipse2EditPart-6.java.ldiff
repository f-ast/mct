42,44d41
< import org.eclipse.gmf.gmfgraph.Layout;
< import org.eclipse.gmf.gmfgraph.LayoutData;
< import org.eclipse.gmf.gmfgraph.LineKind;
127,127c124,124
< 		final NotificationListener layoutListener = new NotificationListener() {
---
> 		final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener() {
130,131d126
< 				Layout layout = (Layout) notification.getNotifier();
< 				layoutPropertyChanged(layout);
134,134c150,150
< 		if (modelElement.getLayout() != null) {
---
> 		if (modelElement.getLayout() != null) {
135,135c151,151
< 			addListenerFilter("LayoutPropertiesListener", layoutListener, modelElement.getLayout());
---
> 			addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
137,137c133,133
< 		addListenerFilter("ModelElementLayoutListener", new NotificationListener() {
---
> 		addListenerFilter("Layoutable_LayoutData_Listener", new NotificationListener() {
139a136,138
> 				removeListenerFilter("Layoutable_LayoutData_PropertiesListener");
> 				if (modelElement.getLayoutData() != null) {
> 					addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
140,143d135
< 				Layout newLayout = (Layout) notification.getNewValue();
< 				removeListenerFilter("LayoutPropertiesListener");
< 				if (newLayout != null) {
< 					addListenerFilter("LayoutPropertiesListener", layoutListener, newLayout);
144a140,140
> 				layoutDataChanged(modelElement.getLayoutData());
145,145d139
< 				layoutChanged(newLayout, true);
147,147c162,162
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
---
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
149,149c144,144
< 		final NotificationListener layoutDataListener = new NotificationListener() {
---
> 		final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener() {
152,152d146
< 				layoutDataPropertyChanged();
155,155c130,130
< 		if (modelElement.getLayoutData() != null) {
---
> 		if (modelElement.getLayoutData() != null) {
156,156c131,131
< 			addListenerFilter("LayoutDataPropertiesListener", layoutDataListener, modelElement.getLayoutData());
---
> 			addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
158,158c153,153
< 		addListenerFilter("ModelElementLayoutDataListener", new NotificationListener() {
---
> 		addListenerFilter("Layoutable_Layout_Listener", new NotificationListener() {
160a156,158
> 				removeListenerFilter("Layoutable_Layout_PropertiesListener");
> 				if (modelElement.getLayout() != null) {
> 					addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
161,164d155
< 				LayoutData newLayoutData = (LayoutData) notification.getNewValue();
< 				removeListenerFilter("LayoutDataPropertiesListener");
< 				if (newLayoutData != null) {
< 					addListenerFilter("LayoutDataPropertiesListener", layoutDataListener, newLayoutData);
165a160,160
> 				layoutChanged(modelElement.getLayout());
166,166c127,127
< 				layoutDataChanged();
---
> 				layoutDataChanged(modelElement.getLayoutData());
168,168c142,142
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
---
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
170,170c164,164
< 		addListenerFilter("ModelElementPropertiesListener", new NotificationListener() {
---
> 		addListenerFilter("Shape_Outline_Listener", new NotificationListener() {
173,187d166
< 				switch (notification.getFeatureID(Ellipse.class)) {
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ELLIPSE__OUTLINE: {
< 					boolean value = modelElement.isOutline();
< 					myFigure.setOutline(value);
< 					break;
< 				}
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ELLIPSE__FILL: {
< 					boolean value = modelElement.isFill();
< 					myFigure.setFill(value);
< 					break;
< 				}
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ELLIPSE__LINE_WIDTH: {
< 					int value = modelElement.getLineWidth();
< 					myFigure.setLineWidth(value);
< 					break;
188a169,174
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline());
> 
> 		addListenerFilter("Shape_Fill_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setFill(modelElement.isFill());
189,195d168
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ELLIPSE__LINE_KIND: {
< 					LineKind value = modelElement.getLineKind();
< 					myFigure.setLineStyle("LINE_DASH".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DOT
< 							: "LINE_DASHDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT
< 									: "LINE_DASHDOTDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT
< 											: "LINE_CUSTOM".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
< 					break;
196a176,181
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill());
> 
> 		addListenerFilter("Shape_LineWidth_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setLineWidth(modelElement.getLineWidth());
197,200d175
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ELLIPSE__XOR_FILL: {
< 					boolean value = modelElement.isXorFill();
< 					myFigure.setFillXOR(value);
< 					break;
201a183,188
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth());
> 
> 		addListenerFilter("Shape_LineKind_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setLineStyle(getLineStyle(modelElement.getLineKind()));
202,205d182
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ELLIPSE__XOR_OUTLINE: {
< 					boolean value = modelElement.isXorOutline();
< 					myFigure.setOutlineXOR(value);
< 					break;
206a190,195
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind());
> 
> 		addListenerFilter("Shape_XorFill_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setFillXOR(modelElement.isXorFill());
207a197,202
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill());
> 
> 		addListenerFilter("Shape_XorOutline_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setOutlineXOR(modelElement.isXorOutline());
208,208d196
< 				myFigure.repaint();
209a204,204
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline());
209a464,470
> 				layoutDataChanged(modelElement.getLayoutData());
> 			}
> 			{
> 				layoutChanged(modelElement.getLayout());
> 			}
> 			{
> 				myFigure.setOutline(modelElement.isOutline());
210,210d463
< 		}, modelElement);
470,470c167,167
< 				boolean value = modelElement.isOutline();
---
> 				myFigure.setOutline(modelElement.isOutline());
471,471d167
< 				myFigure.setOutline(value);
474,474c473,473
< 				boolean value = modelElement.isFill();
---
> 				myFigure.setFill(modelElement.isFill());
475,475d473
< 				myFigure.setFill(value);
478,478c476,476
< 				int value = modelElement.getLineWidth();
---
> 				myFigure.setLineWidth(modelElement.getLineWidth());
479,479d476
< 				myFigure.setLineWidth(value);
481a479,479
> 				myFigure.setLineStyle(getLineStyle(modelElement.getLineKind()));
482,485d478
< 				LineKind value = modelElement.getLineKind();
< 				myFigure.setLineStyle("LINE_DASH".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DOT
< 						: "LINE_DASHDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT : "LINE_DASHDOTDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT
< 								: "LINE_CUSTOM".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
488,488c482,482
< 				boolean value = modelElement.isXorFill();
---
> 				myFigure.setFillXOR(modelElement.isXorFill());
489,489d482
< 				myFigure.setFillXOR(value);
492,492c485,485
< 				boolean value = modelElement.isXorOutline();
---
> 				myFigure.setOutlineXOR(modelElement.isXorOutline());
493,493d485
< 				myFigure.setOutlineXOR(value);
495,495c147,147
< 			layoutChanged(modelElement.getLayout(), false);
---
> 				layoutChanged(modelElement.getLayout());
