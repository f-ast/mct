2,2c2,2
<  * Copyright (c) 2002, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2007 IBM Corporation and others.
42a43,43
> import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;
70a72,72
> import org.eclipse.gmf.runtime.notation.Edge;
366,366c368,368
< 		for (Iterator iter = notationViewsToDuplicate.iterator(); iter.hasNext();) {
---
> 		for (Iterator iter = notationViewsToDuplicate.iterator(); iter
366a369,369
> 				.hasNext();) {
371,371c374,374
< 				EObject resolvedElement = EMFCoreUtil
---
> 				EObject resolvedElement = EMFCoreUtil.resolve(editingDomain,
371a375,375
> 						element);
372,372d374
< 					.resolve(editingDomain, element);
378a382,395
> 		/*
> 		 * We must append all inner edges of a node being duplicated. Edges are non-containment
> 		 * references, hence they won't be duplicated for free. Therefore, we add them here to
> 		 * the list views to duplicate.
> 		 * We don't add semantic elements of the edges to the list of semantic elements to duplicate
> 		 * since we assume that their semantic elements are owned by source or target or their semantic
> 		 * containers. 
> 		 */
> 		HashSet<Edge> allInnerEdges = new HashSet<Edge>();
> 		for (Iterator itr = notationViewsToDuplicate.iterator(); itr.hasNext();) {
> 			ViewUtil.getAllRelatedEdgesFromViews(((View)itr.next()).getChildren(), allInnerEdges);
> 		}
> 		notationViewsToDuplicate.addAll(allInnerEdges);
> 		
