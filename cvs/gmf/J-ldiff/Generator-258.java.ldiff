18a19,19
> import java.util.List;
33a35,35
> import org.eclipse.gmf.codegen.gmfgen.GenCustomPreferencePage;
48a51,51
> import org.eclipse.gmf.codegen.gmfgen.GenPreferencePage;
49a53,53
> import org.eclipse.gmf.codegen.gmfgen.GenStandardPreferencePage;
54a59,59
> import org.eclipse.gmf.codegen.gmfgen.StandardPreferencePages;
206a212,212
> 		generatePreferencePages(myDiagram.getPreferencePages());
207,211d211
< 		generateAppearancePreferencePage();
< 		generateConnectionsPreferencePage();
< 		generateGeneralPreferencePage();
< 		generatePrintingPreferencePage();
< 		generateRulersAndGridPreferencePage();
515a517,525
> 	private void generatePreferencePages(List<GenPreferencePage> pages) throws UnexpectedBehaviourException, InterruptedException {
> 		for (GenPreferencePage p : pages) {
> 			if (p instanceof GenCustomPreferencePage) {
> 				if (((GenCustomPreferencePage) p).isGenerateBoilerplate()) {
> 					doGenerateJavaClass(myEmitters.getCustomPreferencePageEmitter(), p.getQualifiedClassName(), p);
> 				}
> 			} else if (p instanceof GenStandardPreferencePage) {
> 				if (((GenStandardPreferencePage) p).getKind() != StandardPreferencePages.PATHMAPS_LITERAL) {
> 					doGenerateJavaClass(myEmitters.getStandardPreferencePageEmitter(), p.getQualifiedClassName(), p);
516,517d516
< 	private void generateAppearancePreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getAppearancePreferencePageEmitter(), myEmitters.getAppearancePreferencePageName(myDiagram), myDiagram);
518a527,528
> 			} else {
> 				throw new UnexpectedBehaviourException("No idea how to handle GenPreferencePage subclass:" + p);
519,525d526
< 
< 	private void generateConnectionsPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getConnectionsPreferencePageEmitter(), myEmitters.getConnectionsPreferencePageName(myDiagram), myDiagram);
< 	}
< 
< 	private void generateGeneralPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getGeneralPreferencePageEmitter(), myEmitters.getGeneralPreferencePageName(myDiagram), myDiagram);
526a530,530
> 			generatePreferencePages(p.getChildren());
527,529d529
< 
< 	private void generatePrintingPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getPrintingPreferencePageEmitter(), myEmitters.getPrintingPreferencePageName(myDiagram), myDiagram);
531,533d531
< 
< 	private void generateRulersAndGridPreferencePage() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getRulersAndGridPreferencePageEmitter(), myEmitters.getRulersAndGridPreferencePageName(myDiagram), myDiagram);
