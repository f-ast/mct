125,125c125,125
< 		return update_diagram(containerEditPart, g, false);
---
> 		Command cmd = update_diagram(containerEditPart, g, false);
125a126,129
> 		
> 		// reset mm mapmode to avoid memory leak
> 		mm = null;
> 		return cmd;
149,149c153,153
< 		return update_diagram(containerEditPart, g, true);
---
> 		Command cmd = update_diagram(containerEditPart, g, true);
150a155,157
> 		// reset mm mapmode to avoid memory leak
> 		mm = null;
> 		return cmd;
