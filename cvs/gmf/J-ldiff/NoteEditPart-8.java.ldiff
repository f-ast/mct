2,2c2,2
<  * Copyright (c) 2002, 2004 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
19a20,20
> import org.eclipse.emf.ecore.EObject;
146a148,148
>         private NoteEditPart editPart= null;
147,147d147
<         private EditPart editPart= null;
148,148c149,149
<         public ResourceListener(Resource resource, EditPart editPart){
---
>         public ResourceListener(Resource resource, NoteEditPart editPart){
158,158c159,159
<             if (editPart ==null || resourceRef.get()==null)
---
>             if (editPart ==null || resourceRef.get()==null) {
158a160,163
>                 if (editPart != null && editPart.listener!=null) {
>                     getEditingDomain().removeResourceSetListener(editPart.listener);
>                     editPart.listener = null;
>                 }
159a165,165
>             }
162a169,172
>                 if (editPart.listener!=null) {
>                     getEditingDomain().removeResourceSetListener(editPart.listener);
>                     editPart.listener = null;
>                 }
206,206c216,216
<         if (listener!=null)
---
>         if (listener!=null) {
207a218,219
>             listener = null;
>         }
210a223,232
>     protected void handleNotificationEvent(Notification notification) {
>         Object feature = notification.getFeature();
>         if (feature == NotationPackage.eINSTANCE.getView_Element() && notification.getEventType() == Notification.RESOLVE
>                  && ((EObject)notification.getNotifier())== getNotationView() && listener != null) {
>             // skipping the resolve event whenever the editpart is already resolved.
>             return;
>         }
>         
>         super.handleNotificationEvent(notification);
>     }
