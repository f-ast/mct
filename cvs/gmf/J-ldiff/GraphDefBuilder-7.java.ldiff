102,102d101
< 	@SuppressWarnings("unchecked")
213a213,220
> 		final RealFigure realFigure = (RealFigure) parent.getFigure().getActualFigure();
> 		if (parent instanceof Node) {
> 			// safety check, not sure whether labels for links are created here or not
> 			if (realFigure.getLayout() == null) {
> 				realFigure.setLayout(GMFGraphFactory.eINSTANCE.createFlowLayout());
> 			}
> 		}
> 		realFigure.getChildren().add(figure);
214,214d212
< 		((RealFigure) parent.getFigure().getActualFigure()).getChildren().add(figure);
