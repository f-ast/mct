13a14,19
> import org.eclipse.draw2d.AbstractLocator;
> import org.eclipse.draw2d.IFigure;
> import org.eclipse.draw2d.PositionConstants;
> import org.eclipse.draw2d.geometry.Point;
> import org.eclipse.emf.common.notify.Notification;
> import org.eclipse.gef.GraphicalEditPart;
17,17c29,29
< 	public BaseExternalNodeLabelEditPart(org.eclipse.gmf.runtime.notation.View view) {
---
> 	public BaseExternalNodeLabelEditPart(View view) {
21a21,23
> import org.eclipse.gmf.runtime.lite.edit.parts.update.IExternallyUpdatableEditPart;
> import org.eclipse.gmf.runtime.lite.edit.parts.update.UpdaterUtil;
> import org.eclipse.gmf.runtime.notation.Location;
21a34,34
> 		Node node = (Node) getModel();
22,22c24,24
< 		org.eclipse.gmf.runtime.notation.Node node = (org.eclipse.gmf.runtime.notation.Node) getModel();
---
> import org.eclipse.gmf.runtime.notation.Node;
22a25,26
> import org.eclipse.gmf.runtime.notation.NotationPackage;
> import org.eclipse.gmf.runtime.notation.View;
25a38,41
> 		assert node.getLayoutConstraint() instanceof Location;
> 		final Location location = (Location) node.getLayoutConstraint();
> 		getFigure().getParent().setConstraint(getFigure(), new AbstractLocator() {
> 			protected Point getReferencePoint() {
26,29d37
< 		assert node.getLayoutConstraint() instanceof org.eclipse.gmf.runtime.notation.Location;
< 		final org.eclipse.gmf.runtime.notation.Location location = (org.eclipse.gmf.runtime.notation.Location) node.getLayoutConstraint();
< 		getFigure().getParent().setConstraint(getFigure(), new org.eclipse.draw2d.AbstractLocator() {
< 			protected org.eclipse.draw2d.geometry.Point getReferencePoint() {
30,30c42,42
< 				return getLabelLocation(((org.eclipse.gef.GraphicalEditPart) getParent()).getFigure()).translate(location.getX(), location.getY());
---
> 				return getLabelLocation(((GraphicalEditPart) getParent()).getFigure()).translate(location.getX(), location.getY());
33,33c45,45
< 				return org.eclipse.draw2d.PositionConstants.SOUTH;
---
> 				return PositionConstants.SOUTH;
42a55,55
> 	protected IExternallyUpdatableEditPart.ExternalRefresher boundsRefresher = new IExternallyUpdatableEditPart.ExternalRefresher() {
43,43d54
< 	protected org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart.Refresher boundsRefresher = new org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart.Refresher() {
46a59,67
> 		public boolean isAffectingEvent(Notification msg) {
> 			if (NotationPackage.eINSTANCE.getLocation().getEStructuralFeatures().contains(msg.getFeature())) {
> 				return true;
> 			}
> 			if (NotationPackage.eINSTANCE.getNode_LayoutConstraint() == msg.getFeature()) {
> 				return UpdaterUtil.affects(msg, NotationPackage.eINSTANCE.getLocation());
> 			}
> 			return false;
> 		}
48a70,70
> 	public Point getReferencePoint() {
49,49d69
< 	public org.eclipse.draw2d.geometry.Point getReferencePoint() {
50,50c71,71
< 		return getLabelLocation(((org.eclipse.gef.GraphicalEditPart) getParent()).getFigure());
---
> 		return getLabelLocation(((GraphicalEditPart) getParent()).getFigure());
52a74,74
> 	protected Point getLabelLocation(IFigure parent) {
53,53d73
< 	protected org.eclipse.draw2d.geometry.Point getLabelLocation(org.eclipse.draw2d.IFigure parent) {
54,54c75,75
< 		org.eclipse.draw2d.geometry.Point result = parent.getBounds().getBottom();
---
> 		Point result = parent.getBounds().getBottom();
