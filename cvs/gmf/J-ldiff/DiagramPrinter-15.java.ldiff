22a24,24
> import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;
29a32,32
> import org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditor;
30a34,34
> import org.eclipse.gmf.runtime.diagram.ui.util.DiagramEditorUtil;
39,39c17,17
< import org.eclipse.jface.util.Assert;
---
> import org.eclipse.core.runtime.Assert;
238a242,242
>                 Diagram diagram = (Diagram)obj;
239,239c243,243
<                 DiagramEditPart dgrmEP = PrintHelper.createDiagramEditPart((Diagram) obj, preferencesHint, shell);
---
>                 DiagramEditor openedDiagramEditor = DiagramEditorUtil
239a244,250
> 						.findOpenedDiagramEditorForID(ViewUtil
> 								.getIdStr(diagram));
> 				DiagramEditPart dgrmEP = openedDiagramEditor == null ? PrintHelper
> 						.createDiagramEditPart(diagram, preferencesHint, shell)
> 						: openedDiagramEditor.getDiagramEditPart();
>                 
>                 boolean loadedPreferences = openedDiagramEditor != null || PrintHelper.initializePreferences(dgrmEP, preferencesHint);
247,247d257
<                 boolean loadedPreferences = PrintHelper.initializePreferences(dgrmEP, preferencesHint);
