2,2c2,2
<  * Copyright (c) 2006 Borland Software Corporation and others.
---
>  *  Copyright (c) 2006, 2007 Borland Software Corporation and others.
16a17,17
> 
18a20,20
> import org.eclipse.emf.ecore.EClassifier;
26,26c23,23
< import org.eclipse.gmf.gmfgraph.GMFGraphPackage;
---
> import org.eclipse.gmf.gmfgraph.GMFGraphPackage;
27,27d23
< 
28,28c24,24
< import org.eclipse.gmf.graphdef.editor.part.GMFGraphDiagramEditorPlugin;
---
> import org.eclipse.gmf.graphdef.editor.part.GMFGraphDiagramEditorPlugin;
33,33c34,34
< public class GMFGraphElementTypes {
---
> public class GMFGraphElementTypes extends ElementInitializers {
72a74,81
> 			EStructuralFeature feature = ((EStructuralFeature) element);
> 			EClass eContainingClass = feature.getEContainingClass();
> 			EClassifier eType = feature.getEType();
> 			if (eContainingClass != null && !eContainingClass.isAbstract()) {
> 				element = eContainingClass;
> 			} else if (eType instanceof EClass && !((EClass) eType).isAbstract()) {
> 				element = eType;
> 			}
73,73d73
< 			element = ((EStructuralFeature) element).getEContainingClass();
148a157,157
> 
150a169,169
> 
151a171,171
> 
152a173,173
> 
153a175,175
> 
154a177,177
> 
155a179,179
> 
156a181,181
> 
157a159,159
> 
157a183,183
> 
158a161,161
> 
158,158c160,160
< 			elements.put(Compartment_2001, GMFGraphPackage.eINSTANCE.getCompartment());
---
> 			elements.put(Compartment_2001, GMFGraphPackage.eINSTANCE.getCompartment());
159a163,163
> 
159,159c162,162
< 			elements.put(Node_2002, GMFGraphPackage.eINSTANCE.getNode());
---
> 			elements.put(Node_2002, GMFGraphPackage.eINSTANCE.getNode());
160,160c164,164
< 			elements.put(Connection_2003, GMFGraphPackage.eINSTANCE.getConnection());
---
> 			elements.put(Connection_2003, GMFGraphPackage.eINSTANCE.getConnection());
160a165,165
> 
161,161c166,166
< 			elements.put(FigureGallery_2004, GMFGraphPackage.eINSTANCE.getFigureGallery());
---
> 			elements.put(FigureGallery_2004, GMFGraphPackage.eINSTANCE.getFigureGallery());
161a167,167
> 
175,175c217,217
< 	public static final IElementType Rectangle_3001 = getElementType("org.eclipse.gmf.graphdef.editor.Rectangle_3001"); //$NON-NLS-1$
---
> 	public static final IElementType Rectangle_3001 = getElementType("org.eclipse.gmf.graphdef.editor.Rectangle_3001"); //$NON-NLS-1$
180,180c222,222
< 	public static final IElementType Rectangle_3002 = getElementType("org.eclipse.gmf.graphdef.editor.Rectangle_3002"); //$NON-NLS-1$
---
> 	public static final IElementType Rectangle_3002 = getElementType("org.eclipse.gmf.graphdef.editor.Rectangle_3002"); //$NON-NLS-1$
185,185c227,227
< 	public static final IElementType Ellipse_3003 = getElementType("org.eclipse.gmf.graphdef.editor.Ellipse_3003"); //$NON-NLS-1$
---
> 	public static final IElementType Ellipse_3003 = getElementType("org.eclipse.gmf.graphdef.editor.Ellipse_3003"); //$NON-NLS-1$
190,190c232,232
< 	public static final IElementType RoundedRectangle_3004 = getElementType("org.eclipse.gmf.graphdef.editor.RoundedRectangle_3004"); //$NON-NLS-1$
---
> 	public static final IElementType RoundedRectangle_3004 = getElementType("org.eclipse.gmf.graphdef.editor.RoundedRectangle_3004"); //$NON-NLS-1$
195,195c237,237
< 	public static final IElementType Polyline_3005 = getElementType("org.eclipse.gmf.graphdef.editor.Polyline_3005"); //$NON-NLS-1$
---
> 	public static final IElementType Polyline_3005 = getElementType("org.eclipse.gmf.graphdef.editor.Polyline_3005"); //$NON-NLS-1$
200,200c242,242
< 	public static final IElementType Ellipse_3006 = getElementType("org.eclipse.gmf.graphdef.editor.Ellipse_3006"); //$NON-NLS-1$
---
> 	public static final IElementType Ellipse_3006 = getElementType("org.eclipse.gmf.graphdef.editor.Ellipse_3006"); //$NON-NLS-1$
205,205c247,247
< 	public static final IElementType RoundedRectangle_3007 = getElementType("org.eclipse.gmf.graphdef.editor.RoundedRectangle_3007"); //$NON-NLS-1$
---
> 	public static final IElementType RoundedRectangle_3007 = getElementType("org.eclipse.gmf.graphdef.editor.RoundedRectangle_3007"); //$NON-NLS-1$
210,210c252,252
< 	public static final IElementType Polyline_3008 = getElementType("org.eclipse.gmf.graphdef.editor.Polyline_3008"); //$NON-NLS-1$
---
> 	public static final IElementType Polyline_3008 = getElementType("org.eclipse.gmf.graphdef.editor.Polyline_3008"); //$NON-NLS-1$
215,215c197,197
< 	public static final IElementType Compartment_2001 = getElementType("org.eclipse.gmf.graphdef.editor.Compartment_2001"); //$NON-NLS-1$
---
> 	public static final IElementType Compartment_2001 = getElementType("org.eclipse.gmf.graphdef.editor.Compartment_2001"); //$NON-NLS-1$
220,220c202,202
< 	public static final IElementType Node_2002 = getElementType("org.eclipse.gmf.graphdef.editor.Node_2002"); //$NON-NLS-1$
---
> 	public static final IElementType Node_2002 = getElementType("org.eclipse.gmf.graphdef.editor.Node_2002"); //$NON-NLS-1$
225,225c207,207
< 	public static final IElementType Connection_2003 = getElementType("org.eclipse.gmf.graphdef.editor.Connection_2003"); //$NON-NLS-1$
---
> 	public static final IElementType Connection_2003 = getElementType("org.eclipse.gmf.graphdef.editor.Connection_2003"); //$NON-NLS-1$
230,230c212,212
< 	public static final IElementType FigureGallery_2004 = getElementType("org.eclipse.gmf.graphdef.editor.FigureGallery_2004"); //$NON-NLS-1$
---
> 	public static final IElementType FigureGallery_2004 = getElementType("org.eclipse.gmf.graphdef.editor.FigureGallery_2004"); //$NON-NLS-1$
264,264c278,278
< 			KNOWN_ELEMENT_TYPES.add(Compartment_2001);
---
> 			KNOWN_ELEMENT_TYPES.add(Compartment_2001);
265,265c279,279
< 			KNOWN_ELEMENT_TYPES.add(Node_2002);
---
> 			KNOWN_ELEMENT_TYPES.add(Node_2002);
266,266c280,280
< 			KNOWN_ELEMENT_TYPES.add(Connection_2003);
---
> 			KNOWN_ELEMENT_TYPES.add(Connection_2003);
267,267c281,281
< 			KNOWN_ELEMENT_TYPES.add(FigureGallery_2004);
---
> 			KNOWN_ELEMENT_TYPES.add(FigureGallery_2004);
