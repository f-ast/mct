26a27,27
> import org.eclipse.draw2d.geometry.Geometry;
28a30,30
> import org.eclipse.draw2d.geometry.PrecisionRectangle;
58,58c61,61
<         		|| super.calculateBendPoints(conn).size() > 2) {
---
>         		|| bends.size() > 2) {
59a63,63
>             return bends;
60,60c59,59
<             return super.calculateBendPoints(conn);
---
>         PointList bends = super.calculateBendPoints(conn);
66a70,70
>         	return bends;
67,67d69
<         	return super.calculateBendPoints(conn);
81a85,88
>         if (bends.size() == 2 && !lineIntersectRectangle(bends.getFirstPoint(), bends.getLastPoint(), sourceParentRect)
>         		&& !lineIntersectRectangle(bends.getFirstPoint(), bends.getLastPoint(), targetParentRect)) {
>         	return bends;
>         }
98a106,106
>             return bends;
99,99d105
<             return super.calculateBendPoints(conn);
376,376c383,383
<         Rectangle rect = parent.getBounds().getCopy();
---
>         Rectangle rect = new PrecisionRectangle(parent.getBounds());
390a398,404
>     
>     private boolean lineIntersectRectangle(Point start, Point end, Rectangle rect) {
>     	return Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x, rect.y, rect.x + rect.width, rect.y)
>     		|| Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x + rect.width, rect.y, rect.x + rect.width, rect.y + rect.height)
>     		|| Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x + rect.width, rect.y + rect.height, rect.x, rect.y + rect.height)
>     		|| Geometry.linesIntersect(start.x, start.y, end.x, end.y, rect.x, rect.y + rect.height, rect.x, rect.y);
>     }
