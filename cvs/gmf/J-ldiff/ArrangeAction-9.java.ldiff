2,2c2,2
<  * Copyright (c) 2002, 2004 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2006 IBM Corporation and others.
41,41c23,23
< import org.eclipse.gmf.runtime.draw2d.ui.internal.figures.AnimationFigureHelper;
---
> import org.eclipse.draw2d.Animation;
277a282,284
> 		if (animatedLayout)
> 			Animation.markBegin();
> 			
278,278c285,285
< 		super.doRun(progressMonitor);
---
> 		super.doRun(progressMonitor);
279,279c286,286
< 		
---
> 		
284a288,291
> 			int durationInc = 800;
> 			int factor = 10;
> 			int size = 0;
> 			
288a296,296
> 					size += element.getFigure().getChildren().size();
289,289d295
< 					AnimationFigureHelper.getInstance().animate(element.getFigure());
293a301,301
> 				size += container.getFigure().getChildren().size();
294,294d300
< 				AnimationFigureHelper.getInstance().animate(container.getFigure());
295a303,307
> 			
> 			int totalDuration = Math.min(durationInc * factor / 2, Math.max(durationInc, (size / 
> 					factor) * durationInc));
> 			
> 			Animation.run(totalDuration);
