25,25c24,24
< import org.eclipse.gmf.internal.bridge.naming.CollectingDispenser;
---
> import org.eclipse.gmf.common.IncrementalNamesDispenser;
25a25,25
> import org.eclipse.gmf.common.NamesDispenser;
27,27d27
< import org.eclipse.gmf.internal.bridge.naming.UniqueValueDispenser;
39a40,40
> 
39,39c39,39
< 	private UniqueValueDispenser myDispenser;
---
> 	private NamesDispenser myDispenser;
40a42,42
> 
41a44,44
> 
42a46,46
> 
43a48,48
> 
44a50,50
> 
48,48c54,54
< 		this(new CollectingDispenser());
---
> 		this(new IncrementalNamesDispenser());
51a58,58
> 		myDispenser = dispenser;
51,51c57,57
< 	public GenModelNamingMediatorImpl(UniqueValueDispenser dispenser) {
---
> 	public GenModelNamingMediatorImpl(NamesDispenser dispenser) {
59,62d65
< 	public UniqueValueDispenser getDispenser() {
< 		return myDispenser;
< 	}
< 
103,103c114,114
< 	public void feed(GenDiagram genDiagram, CanvasMapping cme) {
---
> 	public void feed(GenDiagram genDiagram, CanvasMapping cme) {
104,104c115,115
< 		genDiagram.setNotationViewFactoryClassName(getViewFactory().get(cme));
---
> 		genDiagram.setNotationViewFactoryClassName(getViewFactory().get(cme));
105,105c116,116
< 		genDiagram.setEditPartClassName(getEditPart().get(cme));
---
> 		genDiagram.setEditPartClassName(getEditPart().get(cme));
106,106c117,117
< 		genDiagram.setItemSemanticEditPolicyClassName(getItemSemanticPolicy().get(cme));
---
> 		genDiagram.setItemSemanticEditPolicyClassName(getItemSemanticPolicy().get(cme));
107a119,119
> 		getNodeGraphicalPolicy().getNamesDispenser().add(genDiagram.getBaseGraphicalNodeEditPolicyClassName()); // #127310
107,107c118,118
< 		genDiagram.setCanonicalEditPolicyClassName(getCanonicalPolicy().get(cme));
---
> 		genDiagram.setCanonicalEditPolicyClassName(getCanonicalPolicy().get(cme));
108,108d118
< 		getNodeGraphicalPolicy().getCache().remember(genDiagram.getBaseGraphicalNodeEditPolicyClassName()); // #127310
109,109c120,120
< 	}
---
> 	}
110,110c121,121
< 
---
> 
158a162,167
> 
> 	public void reset() {
> 		if (myDispenser != null) {
> 			myDispenser.clear();
> 		}
> 	}
