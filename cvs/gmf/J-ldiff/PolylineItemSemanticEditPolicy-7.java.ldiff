13,17d12
< import java.util.ArrayList;
< import java.util.Collection;
< import java.util.Collections;
< import java.util.Iterator;
< 
19,19d13
< import org.eclipse.gef.EditPart;
28,28d21
< import org.eclipse.gmf.graphdef.editor.edit.parts.PolylineEditPart;
30,30d22
< import org.eclipse.gmf.runtime.diagram.ui.requests.EditCommandRequestWrapper;
37,38d28
< import org.eclipse.gmf.runtime.notation.Edge;
< import org.eclipse.gmf.runtime.notation.View;
48a39,39
> 		CompoundCommand cc = getDestroyEdgesCommand(req.isConfirmationRequired());
49,60d38
< 		CompoundCommand cc = new CompoundCommand();
< 		Collection allEdges = new ArrayList();
< 		View view = (View) getHost().getModel();
< 		allEdges.addAll(view.getSourceEdges());
< 		allEdges.addAll(view.getTargetEdges());
< 		for (Iterator it = allEdges.iterator(); it.hasNext();) {
< 			Edge nextEdge = (Edge) it.next();
< 			EditPart nextEditPart = (EditPart) getHost().getViewer().getEditPartRegistry().get(nextEdge);
< 			EditCommandRequestWrapper editCommandRequest = new EditCommandRequestWrapper(new DestroyElementRequest(((PolylineEditPart) getHost()).getEditingDomain(), req.isConfirmationRequired()),
< 					Collections.EMPTY_MAP);
< 			cc.add(nextEditPart.getCommand(editCommandRequest));
< 		}
62,62c41,41
< 		return cc;
---
> 		return cc.unwrap();
