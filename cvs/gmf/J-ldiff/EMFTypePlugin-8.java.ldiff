13a14,14
> import org.eclipse.core.runtime.Platform;
26a28,36
> 	 * Flag indicating whether or not the <code>ElementTypeRegistry</code> and
> 	 * the <code>ClientContextManager</code> should add types, contexts and
> 	 * bindings declared in extensions from dynamically loaded plugins.
> 	 * <P>
> 	 * This feature can only be enabled when running JUnit tests.
> 	 */
> 	private static boolean DYNAMIC_AWARE_MODE = false;
> 
> 	/**
54a65,92
> 	/**
> 	 * <B>FOR INTERNAL USE ONLY.  CLIENTS MUST NEVER CALL THIS METHOD.</B>
> 	 */
> 	public static void startDynamicAwareMode() {
> 		// Discourage use of this method by ensuring that it only works when
> 		// JUnits are running.
> 
> 		String[] args = Platform.getCommandLineArgs();
> 		String applicationId = null;
> 
> 		for (int i = 0; i < args.length - 1; i++) {
> 			if (args[i].equalsIgnoreCase("-application")) { //$NON-NLS-1$
> 				applicationId = args[i + 1];
> 			}
> 		}
> 
> 		if (applicationId != null
> 				&& applicationId.startsWith("org.eclipse.pde.junit")) { //$NON-NLS-1$
> 			DYNAMIC_AWARE_MODE = true;
> 		}
> 	}
> 	
> 	/**
> 	 * <B>FOR INTERNAL USE ONLY.  CLIENTS MUST NEVER CALL THIS METHOD.</B>
> 	 */
> 	public static boolean isDynamicAware() {
> 		return DYNAMIC_AWARE_MODE;
> 	}
