24,24d23
< import org.eclipse.emf.ecore.util.EcoreUtil;
25a25,25
> import org.eclipse.gmf.internal.common.migrate.ModelLoadHelper;
69a70,70
> 		ModelLoadHelper loadHelper = MigrationUtil.migrateModel(fileURI);
70,73d69
< 		Resource resource = MigrationUtil.migrateModel(fileURI);
< 		if (resource == null) {
< 			return;
< 		}
74a72,73
> 		if (!loadHelper.isOK()) {
> 			DiagnosticsDialog.openOk(getShell(), action.getText(), Messages.migration_problemsDetectedTitle, loadHelper.getDiagnostics());
75,77d71
< 		if (!resource.getErrors().isEmpty() || !resource.getWarnings().isEmpty()) {
< 			IStatus loadStatus = BasicDiagnostic.toIStatus(EcoreUtil.computeDiagnostic(resource, true));
< 			openErrorDialog(action.getText(), Messages.migration_problemsDetectedTitle, loadStatus);
94a91,92
> 		Resource resource = loadHelper.getLoadedResource();
> 
