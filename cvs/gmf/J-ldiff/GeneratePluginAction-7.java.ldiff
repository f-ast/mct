20a21,21
> import org.eclipse.core.runtime.Platform;
44a46,47
> import org.eclipse.swt.events.SelectionEvent;
> import org.eclipse.swt.events.SelectionListener;
80,80c83,83
< 		StandaloneGenerator.Config config = new StandaloneGenerator.ConfigImpl(pluginId, pluginId, false);
---
> 		StandaloneGenerator.Config config = new StandaloneGenerator.ConfigImpl(pluginId, pluginId, dialog.isUseMapMode());
81,86d83
< 		FigureQualifiedNameSwitch fqnSwitch;
< 		if (dialog.isUseRuntimeFigures()) {
< 			fqnSwitch = new RuntimeFQNSwitch();
< 		} else {
< 			fqnSwitch = new RuntimeLiteFQNSwitch();
< 		}
87,87c84,84
< 		final StandaloneGenerator generator = new StandaloneGenerator(input, config, fqnSwitch);
---
> 		final StandaloneGenerator generator = new StandaloneGenerator(input, config, dialog.getFigureQualifiedNameSwitch());
199,199c196,196
< 	private static class StandaloneGeneratorOptionsDialog extends Dialog {
---
> 	private static class StandaloneGeneratorOptionsDialog extends FigureGeneratorOptionsDialog {
202,204d198
< 	    private Text errorMessageText;
< 	    private Button useRuntimeFiguresButton;
< 
205a200,200
> 		private final boolean shouldWarnLiteVerstionDoesNotSupportMapMode;
206,206d199
< 		private boolean useRuntimeFigures;
208a203,207
> 			this(parentShell, initialPluginId, initialUseRuntimeFigures, false, pluginIdValidator);
> 		}
> 
> 		public StandaloneGeneratorOptionsDialog(Shell parentShell, String initialPluginId, boolean initialUseRuntimeFigures, boolean initialUseMapMode, IInputValidator pluginIdValidator) {
> 			super(parentShell, "Figure Gallery Generator", initialUseRuntimeFigures, initialUseMapMode);
209,209d202
< 			super(parentShell);
214a213,213
> 			shouldWarnLiteVerstionDoesNotSupportMapMode = Platform.getBundle("org.eclipse.gmf.codegen.lite") != null;
215,220d212
< 			useRuntimeFigures = initialUseRuntimeFigures;
< 		}
< 
< 		protected void configureShell(Shell newShell) {
< 			super.configureShell(newShell);
< 			newShell.setText("Figure Gallery Generator");
222a216,216
> 		protected void createControls(Composite result) {
223,224d215
< 		protected Control createDialogArea(Composite parent) {
< 			Composite result = (Composite) super.createDialogArea(parent);
232,232d223
< 	        label.setFont(parent.getFont());
240a232,232
> 			super.createControls(result);
241,249d231
< 	        useRuntimeFiguresButton = new Button(result, SWT.CHECK);
< 	        useRuntimeFiguresButton.setText("Utilize enhanced features of GMF runtime");
< 	        useRuntimeFiguresButton.setSelection(useRuntimeFigures);
< 	        errorMessageText = new Text(result, SWT.READ_ONLY);
< 	        errorMessageText.setLayoutData(new GridData(GridData.GRAB_HORIZONTAL
< 	                | GridData.HORIZONTAL_ALIGN_FILL));
< 	        errorMessageText.setBackground(errorMessageText.getDisplay()
< 	                .getSystemColor(SWT.COLOR_WIDGET_BACKGROUND));
< 			return result;
261a245,247
> 	    protected void warnLiteVerstionDoesNotSupportMapMode() {
> 	    	if (shouldWarnLiteVerstionDoesNotSupportMapMode) {
> 	    		super.warnLiteVerstionDoesNotSupportMapMode();
262,267d244
< 	    public void setErrorMessage(String errorMessage) {
< 	        errorMessageText.setText(errorMessage == null ? "" : errorMessage); //$NON-NLS-1$
< 	        errorMessageText.getParent().update();
< 	        Control button = getButton(IDialogConstants.OK_ID);
< 	        if (button != null) {
< 				button.setEnabled(errorMessage == null);
272,272d251
< 	    	useRuntimeFigures = useRuntimeFiguresButton.getSelection();
280,283d258
< 
< 	    public boolean isUseRuntimeFigures() {
< 	    	return useRuntimeFigures;
< 	    }
