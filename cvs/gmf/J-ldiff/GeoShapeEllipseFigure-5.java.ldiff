2,2c2,2
<  * Copyright (c) 2003, 2004 IBM Corporation and others.
---
>  * Copyright (c) 2003, 2008 IBM Corporation and others.
12,12d11
< 
20a20,20
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapModeUtil;
28,28c28,28
< public class GeoShapeEllipseFigure extends GeoShapeFigure
---
> public class GeoShapeEllipseFigure extends GeoShapeFigure implements
29,29c29,29
< 	implements IOvalAnchorableFigure {
---
> 		IOvalAnchorableFigure {
32a33,34
> 	 * 
> 	 * @param width
33,33c35,35
< 	 * @param width initial width of the figure
---
> 	 *            initial width of the figure
33a36,36
> 	 * @param height
34a38,38
> 	 * @param spacing
34,34c37,37
< 	 * @param height initial height of the figure
---
> 	 *            initial height of the figure
35a40,40
> 	 *            logical units
35,35c39,39
< 	 * @param spacing <code>int</code> that is the margin between children in logical units
---
> 	 *            <code>int</code> that is the margin between children in
40a46,46
> 	/*
41a48,48
> 	 * 
41,41c47,47
< 	/* (non-Javadoc)
---
> 	 * (non-Javadoc)
46,46c53,53
< 		Rectangle r = getBounds();
---
> 		Rectangle r = getOvalBounds().getCopy();
50a58,61
> 		// set the line type and line width
> 		g.setLineStyle(getLineStyle());
> 		g.setLineWidth(getLineWidth());
> 
51a63,68
> 		r.width--;
> 		r.height--;
> 		if (getLineWidth() > 1) {
> 			r.shrink((getLineWidth() - 1) / 2, (getLineWidth() - 1) / 2);
> 		}
> 		g.drawOval(r);
52,52d62
< 		g.drawOval(r.x, r.y, r.width - 1, r.height - 1);
54a71,71
> 	/*
55,55c72,72
< 	/* (non-Javadoc)
---
> 	 * (non-Javadoc)
55a73,73
> 	 * 
58a77,87
> 		Rectangle r = getBounds();
> 
> 		Rectangle ovalRect = new Rectangle(r);
> 
> 		// not using the full bounds of the rectangle to draw
> 		// the oval in as it results in the top and the left
> 		// edge of the oval being chopped off.  That is why 
> 		// we are indenting by 1
> 		ovalRect.setSize(r.width-1, r.height-1);
> 		
> 		return ovalRect;
59,59d76
< 		return getBounds();
61a90,90
> 	/*
62a92,92
> 	 * 
62,62c91,91
< 	/* (non-Javadoc)
---
> 	 * (non-Javadoc)
70a101,101
> 	/*
71,71c102,102
< 	/* (non-Javadoc)
---
> 	 * (non-Javadoc)
71a103,103
> 	 * 
