68a69,69
> import org.eclipse.gmf.graphdef.codegen.templates.TopGenerator;
82a84,85
> 	private static final String ENTRY_POINT = "main";
> 
101a187,196
> 	
> 	private static class ClassesOrStringsKeyMap extends HierarchyKeyMap {
> 		/*
> 		 * Capture knowledge that we use classes and strings as keys
> 		 */
> 		public KeyChain map(Object key) {
> 			if (key instanceof String) {
> 				return super.map(key);
> 			} else {
> 				return super.map(key.getClass());
101a105,105
> 		KeyMap keyMap = new ClassesOrStringsKeyMap();
102,111d186
< 		KeyMap keyMap = new HierarchyKeyMap() {
< 			/*
< 			 * Capture knowledge that we use classes and strings as keys
< 			 */
< 			public KeyChain map(Object key) {
< 				if (key instanceof String) {
< 					return super.map(key);
< 				} else {
< 					return super.map(key.getClass());
< 				}
112,112c197,197
< 			}
---
> 			}
113a199,199
> 	}
113,113c198,198
< 		};
---
> 		}
122a115,115
> 		tr.put(ENTRY_POINT, "/top/Top.javajet", TopGenerator.class);
186a180,180
> 		Object args = new Object[] {fig, myInnerDispatcher, myTopDispatcher, Boolean.valueOf(myIsInnerClassCode)};
187,187d179
< 		Object args = new Object[] {fig, importManager, myTopDispatcher.getFQNSwitch(), myInnerDispatcher, Boolean.valueOf(myIsInnerClassCode)};
188,188c181,181
< 		res = myTopDispatcher.dispatch(fig, args);
---
> 		res = myTopDispatcher.dispatch(ENTRY_POINT, args);
