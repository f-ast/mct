1127,1127c1127,1127
< 						// Save the resource to the file system.
---
> 						// Save the resources to the file system.
1128a1129,1133
> 						boolean first = true;
> 						for (Iterator i = editingDomain.getResourceSet().getResources().iterator(); i.hasNext(); ) {
> 							Resource resource = (Resource)i.next();
> 							if ((first || !resource.getContents().isEmpty()) && !editingDomain.isReadOnly(resource)) {
> 								savedResources.add(resource);
1129,1130d1128
< 						Resource savedResource = (Resource)editingDomain.getResourceSet().getResources().get(0);
< 						savedResources.add(savedResource);
1131a1135,1137
> 							}
> 							first = false;
> 						}
1131,1131c1134,1134
< 						savedResource.save(Collections.EMPTY_MAP);
---
> 								resource.save(Collections.EMPTY_MAP);
