27,27c27,27
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapModeUtil;
110,110c110,110
< 		Point pt = new Point(rBox.getRight().x - MapMode.DPtoLP(alpha_ir.width),
---
> 		Point pt = new Point(rBox.getRight().x - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ir.width),
122,122c122,122
< 		Dimension dim = getRightShadowDimension(rBox);
---
> 		Dimension dim = getRightShadowDimension(figure, rBox);
125a126,126
> 				rBox.getRight().x - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ir.width),
126,126d125
< 				rBox.getRight().x - MapMode.DPtoLP(alpha_ir.width),
127,127c127,127
< 				rBox.getTop().y + MapMode.DPtoLP(alpha_itr.height)) ;
---
> 				rBox.getTop().y + MapModeUtil.getMapMode(figure).DPtoLP(alpha_itr.height)) ;
146a147,147
> 				rBox.getRight().x - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ir.width),
147,147d146
< 				rBox.getRight().x - MapMode.DPtoLP(alpha_ir.width),
148,148c148,148
< 				rBox.getBottom().y - MapMode.DPtoLP(alpha_ib.height) );
---
> 				rBox.getBottom().y - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ib.height) );
160,160c160,160
< 		Dimension dim = getBottomShadowDimension(rBox);
---
> 		Dimension dim = getBottomShadowDimension(figure, rBox);
163a164,164
> 				rBox.getLeft().x + MapModeUtil.getMapMode(figure).DPtoLP(alpha_ilb.width),
164,164d163
< 				rBox.getLeft().x + MapMode.DPtoLP(alpha_ilb.width),
165,165c165,165
< 				rBox.getBottom().y - MapMode.DPtoLP(alpha_ib.height) );
---
> 				rBox.getBottom().y - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ib.height) );
180,180c180,180
< 				rBox.getBottom().y - MapMode.DPtoLP(alpha_ib.height) );
---
> 				rBox.getBottom().y - MapModeUtil.getMapMode(figure).DPtoLP(alpha_ib.height) );
185a186,186
> 	 * @param figure
189,189c190,190
< 	protected Dimension getRightShadowDimension(Rectangle rBox) {
---
> 	protected Dimension getRightShadowDimension(IFigure figure, Rectangle rBox) {
191,191c192,192
< 		int height = Math.max(MapMode.LPtoDP(rBox.height) - alpha_itr.height - alpha_irb.height,
---
> 		int height = Math.max(MapModeUtil.getMapMode(figure).LPtoDP(rBox.height) - alpha_itr.height - alpha_irb.height,
207,207c208,208
< 	protected Dimension getBottomShadowDimension(Rectangle rBox) {
---
> 	protected Dimension getBottomShadowDimension(IFigure figure, Rectangle rBox) {
209,209c210,210
< 		int width = Math.max(MapMode.LPtoDP( rBox.width ) - alpha_ilb.width - alpha_irb.width,
---
> 		int width = Math.max(MapModeUtil.getMapMode(figure).LPtoDP( rBox.width ) - alpha_ilb.width - alpha_irb.width,
