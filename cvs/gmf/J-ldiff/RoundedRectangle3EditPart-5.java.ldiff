12a13,14
> import java.util.ArrayList;
> import java.util.Collection;
31a35,35
> import org.eclipse.emf.common.notify.Adapter;
32a37,37
> import org.eclipse.emf.common.notify.impl.AdapterImpl;
46,46c31,31
< import org.eclipse.gmf.gmfgraph.XYLayout;
---
> import org.eclipse.draw2d.XYLayout;
50a55,57
> import org.eclipse.gmf.graphdef.editor.sheet.AttachAdapter;
> import org.eclipse.gmf.graphdef.editor.sheet.ChangeTracker;
> import org.eclipse.gmf.graphdef.editor.sheet.FeatureTracker;
263,263c270,270
< 			this.setLayoutManager(new org.eclipse.draw2d.XYLayout());
---
> 			this.setLayoutManager(new XYLayout());
292a300,300
> 	// TODO: use myFigure?
300a309,326
> 	private Collection<Adapter> myDomainElementAdapters = new ArrayList<Adapter>();
> 
> 	/**
> 	 * @generated
> 	 */
> 	protected void removeSemanticListeners() {
> 		View view = (View) getModel();
> 		if (view.getElement() != null) {
> 			RoundedRectangle modelElement = (RoundedRectangle) view.getElement();
> 			modelElement.eAdapters().removeAll(myDomainElementAdapters);
> 			myDomainElementAdapters.clear();
> 		}
> 		super.removeSemanticListeners();
> 	}
> 
> 	/**
> 	 * @generated
> 	 */
311a338,338
> 		myDomainElementAdapters.add(new AttachAdapter(GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData(), new AdapterImpl() {
313,328d339
< 		final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
< 				layoutDataChanged(modelElement.getLayoutData());
< 			}
< 		};
< 		if (modelElement.getLayoutData() != null) {
< 			addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
< 		}
< 		addListenerFilter("Layoutable_LayoutData_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
< 				removeListenerFilter("Layoutable_LayoutData_PropertiesListener");
< 				if (modelElement.getLayoutData() != null) {
< 					addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
< 				}
330a343,344
> 		}));
> 		myDomainElementAdapters.add(new AttachAdapter(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(), new AdapterImpl() {
331,333d342
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
< 
< 		final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener() {
335,335c340,340
< 			public void notifyChanged(Notification notification) {
---
> 			public void notifyChanged(Notification msg) {
337a349,350
> 		}));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
338,353d348
< 		};
< 		if (modelElement.getLayout() != null) {
< 			addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
< 		}
< 		addListenerFilter("Layoutable_Layout_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
< 				removeListenerFilter("Layoutable_Layout_PropertiesListener");
< 				if (modelElement.getLayout() != null) {
< 					addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
< 				}
< 				layoutChanged(modelElement.getLayout());
< 			}
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
< 
< 		addListenerFilter("Shape_Outline_Listener", new NotificationListener() {
355,355c346,346
< 			public void notifyChanged(Notification notification) {
---
> 			public void notifyChanged(Notification msg) {
357a355,356
> 		}, GMFGraphPackage.eINSTANCE.getShape_Outline()));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
358,358d354
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline());
360,362d357
< 		addListenerFilter("Shape_Fill_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
365,365c361,361
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill());
---
> 		}, GMFGraphPackage.eINSTANCE.getShape_Fill()));
365a362,362
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
366,367d361
< 
< 		addListenerFilter("Shape_LineWidth_Listener", new NotificationListener() {
369,369c352,352
< 			public void notifyChanged(Notification notification) {
---
> 			public void modelChanged(Notification msg) {
371a367,368
> 		}, GMFGraphPackage.eINSTANCE.getShape_LineWidth()));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
372,372d366
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth());
373a370,370
> 			public void modelChanged(Notification msg) {
374,376d369
< 		addListenerFilter("Shape_LineKind_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
379,379c373,373
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind());
---
> 		}, GMFGraphPackage.eINSTANCE.getShape_LineKind()));
379a374,374
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
380,381d373
< 
< 		addListenerFilter("Shape_XorFill_Listener", new NotificationListener() {
382a376,376
> 			public void modelChanged(Notification msg) {
383,383c358,358
< 			public void notifyChanged(Notification notification) {
---
> 			public void modelChanged(Notification msg) {
385a379,380
> 		}, GMFGraphPackage.eINSTANCE.getShape_XorFill()));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
386,386d378
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill());
387a382,382
> 			public void modelChanged(Notification msg) {
388,390d381
< 		addListenerFilter("Shape_XorOutline_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
393,393c385,385
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline());
---
> 		}, GMFGraphPackage.eINSTANCE.getShape_XorOutline()));
393a386,386
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
394,395d385
< 
< 		addListenerFilter("RoundedRectangle_CornerWidth_Listener", new NotificationListener() {
396a388,388
> 			public void modelChanged(Notification msg) {
397,397c364,364
< 			public void notifyChanged(Notification notification) {
---
> 			public void modelChanged(Notification msg) {
400a392,393
> 		}, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerWidth()));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
401,401d391
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerWidth());
402a395,395
> 			public void modelChanged(Notification msg) {
403,405d394
< 		addListenerFilter("RoundedRectangle_CornerHeight_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
409a400,400
> 		modelElement.eAdapters().addAll(myDomainElementAdapters);
409,409c399,399
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerHeight());
---
> 		}, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerHeight()));
482,482c473,473
< 									|| (modelElement.eContainer() instanceof Layoutable && ((Layoutable) modelElement.eContainer()).getLayout() instanceof XYLayout)) {
---
> 									|| (modelElement.eContainer() instanceof Layoutable && ((Layoutable) modelElement.eContainer()).getLayout() instanceof org.eclipse.gmf.gmfgraph.XYLayout)) {
749,749d739
< 
