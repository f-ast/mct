274,274c274,274
< 	protected Collection selectionChangedListeners = new ArrayList();
---
> 	protected Collection<ISelectionChangedListener> selectionChangedListeners = new ArrayList<ISelectionChangedListener>();
319a320,320
> 				// Ignore.
321a323,323
> 				// Ignore.
323a326,326
> 				// Ignore.
325a329,329
> 				// Ignore.
333,333c337,337
< 	protected Collection removedResources = new ArrayList();
---
> 	protected Collection<Resource> removedResources = new ArrayList<Resource>();
339,339c343,343
< 	protected Collection changedResources = new ArrayList();
---
> 	protected Collection<Resource> changedResources = new ArrayList<Resource>();
345,345c349,349
< 	protected Collection savedResources = new ArrayList();
---
> 	protected Collection<Resource> savedResources = new ArrayList<Resource>();
353,353c357,357
< 	protected Map resourceToDiagnosticMap = new LinkedHashMap();
---
> 	protected Map<Resource, Diagnostic> resourceToDiagnosticMap = new LinkedHashMap<Resource, Diagnostic>();
370a375,375
> 			@Override
393a399,399
> 							break;
401a408,408
> 			@Override
405a413,413
> 			@Override
427,427c435,435
< 							protected Collection changedResources = new ArrayList();
---
> 							protected Collection<Resource> changedResources = new ArrayList<Resource>();
428,428c436,436
< 							protected Collection removedResources = new ArrayList();
---
> 							protected Collection<Resource> removedResources = new ArrayList<Resource>();
449,449c457,457
< 							public Collection getChangedResources() {
---
> 							public Collection<Resource> getChangedResources() {
453,453c461,461
< 							public Collection getRemovedResources() {
---
> 							public Collection<Resource> getRemovedResources() {
536,536d543
< 			for (Iterator i = changedResources.iterator(); i.hasNext(); ) {
537,537c544,544
< 				Resource resource = (Resource)i.next();
---
> 			for (Resource resource : changedResources) {
570,570d576
< 			for (Iterator i = resourceToDiagnosticMap.values().iterator(); i.hasNext(); ) {
571,571c577,577
< 				Diagnostic childDiagnostic = (Diagnostic)i.next();
---
> 			for (Diagnostic childDiagnostic : resourceToDiagnosticMap.values()) {
636,636c642,642
< 		List factories = new ArrayList();
---
> 		List<AdapterFactory> factories = new ArrayList<AdapterFactory>();
673,673c679,679
< 		editingDomain = new AdapterFactoryEditingDomain(adapterFactory, commandStack, new HashMap());
---
> 		editingDomain = new AdapterFactoryEditingDomain(adapterFactory, commandStack, new HashMap<Resource, Boolean>());
681a688,688
> 	@Override
692,692c699,699
< 	public void setSelectionToViewer(Collection collection) {
---
> 	public void setSelectionToViewer(Collection<?> collection) {
693,693c700,700
< 		final Collection theSelection = collection;
---
> 		final Collection<?> theSelection = collection;
888,888c895,895
< 		URI resourceURI = URI.createPlatformResourceURI(modelFile.getFile().getFullPath().toString());;
---
> 		URI resourceURI = URI.createPlatformResourceURI(modelFile.getFile().getFullPath().toString(), true);
946a954,954
> 	@Override
955,955c963,963
< 		    !((Resource)getEditingDomain().getResourceSet().getResources().get(0)).getContents().isEmpty()) {
---
> 		    !(getEditingDomain().getResourceSet().getResources().get(0)).getContents().isEmpty()) {
960a969,969
> 						@Override
965a975,975
> 						@Override
977a988,988
> 				selectionViewer.setSelection(new StructuredSelection(editingDomain.getResourceSet().getResources().get(0)), true);
991a1003,1003
> 						@Override
996a1009,1009
> 						@Override
1018a1032,1032
> 						@Override
1021a1036,1036
> 						@Override
1041a1057,1057
> 						@Override
1044a1061,1061
> 						@Override
1066a1084,1084
> 						@Override
1069a1088,1088
> 						@Override
1107a1127,1127
> 						@Override
1110a1131,1131
> 						@Override
1152a1174,1174
> 				@Override
1206a1229,1229
> 	@Override
1220a1244,1245
> 	@SuppressWarnings("unchecked")
> 		@Override
1246a1272,1272
> 				@Override
1265,1266d1290
< 					  ArrayList selection = new ArrayList();
< 					  selection.add(editingDomain.getResourceSet().getResources().get(0));
1267,1267c1291,1291
< 					  contentOutlineViewer.setSelection(new StructuredSelection(selection), true);
---
> 					  contentOutlineViewer.setSelection(new StructuredSelection(editingDomain.getResourceSet().getResources().get(0)), true);
1270a1295,1295
> 				@Override
1275a1301,1301
> 				@Override
1308a1335,1335
> 					@Override
1309,1309c1336,1336
< 					public void setSelectionToViewer(List selection) {
---
> 					public void setSelectionToViewer(List<?> selection) {
1313a1341,1341
> 					@Override
1333,1333c1361,1361
< 			Iterator selectedElements = ((IStructuredSelection)selection).iterator();
---
> 			Iterator<?> selectedElements = ((IStructuredSelection)selection).iterator();
1342,1342c1370,1370
< 					ArrayList selectionList = new ArrayList();
---
> 					ArrayList<Object> selectionList = new ArrayList<Object>();
1369a1398,1398
> 	@Override
1379a1409,1409
> 	@Override
1386a1417,1417
> 				@Override
1391,1391c1422,1422
< 					for (Iterator i = editingDomain.getResourceSet().getResources().iterator(); i.hasNext(); ) {
---
> 					for (Resource resource : editingDomain.getResourceSet().getResources()) {
1392,1392d1422
< 						Resource resource = (Resource)i.next();
1443a1474,1474
> 			// Ignore
1453a1485,1485
> 	@Override
1463a1496,1496
> 	@Override
1471,1471c1504,1504
< 				doSaveAs(URI.createPlatformResourceURI(file.getFullPath().toString()), new FileEditorInput(file));
---
> 				doSaveAs(URI.createPlatformResourceURI(file.getFullPath().toString(), true), new FileEditorInput(file));
1482,1482c1515,1515
< 		((Resource)editingDomain.getResourceSet().getResources().get(0)).setURI(uri);
---
> 		(editingDomain.getResourceSet().getResources().get(0)).setURI(uri);
1520a1554,1554
> 	@Override
1534a1569,1569
> 	@Override
1584,1584d1618
< 		for (Iterator listeners = selectionChangedListeners.iterator(); listeners.hasNext(); ) {
1585,1585c1619,1619
< 			ISelectionChangedListener listener = (ISelectionChangedListener)listeners.next();
---
> 		for (ISelectionChangedListener listener : selectionChangedListeners) {
1602,1602c1636,1636
< 				Collection collection = ((IStructuredSelection)selection).toList();
---
> 				Collection<?> collection = ((IStructuredSelection)selection).toList();
1686a1721,1721
> 	@Override
