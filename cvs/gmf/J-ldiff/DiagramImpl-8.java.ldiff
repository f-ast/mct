2,2c2,2
<  * Copyright (c) 2004 IBM Corporation and others.
---
>  * Copyright (c) 2004, 2006 IBM Corporation and others.
22a23,23
> import org.eclipse.emf.ecore.EObject;
36,36d36
<  * <!-- begin-user-doc -->
37,37c37,37
<  * An implementation of the model object '<em><b>Diagram</b></em>'.
---
>  * <!-- begin-user-doc --> An implementation of the model object '<em><b>Diagram</b></em>'.
52a53,56
> public class DiagramImpl
>     extends ViewImpl
>     implements Diagram {
> 
53,53d52
< public class DiagramImpl extends ViewImpl implements Diagram {
56,56c59,59
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
57,57d59
< 	 * <!-- end-user-doc -->
66,66c68,68
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
67,67d68
< 	 * <!-- end-user-doc -->
76,76c77,77
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
77,77d77
< 	 * <!-- end-user-doc -->
86,86c86,86
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
87,87d86
< 	 * <!-- end-user-doc -->
96,96c95,95
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
97,97d95
<      * <!-- end-user-doc -->
105,105c103,103
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
106,106d103
< 	 * <!-- end-user-doc -->
115,115c112,112
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
116,116d112
< 	 * <!-- end-user-doc -->
123,123d118
< 
125a121,124
>     protected static final EStructuralFeature[] edgesFeatures = new EStructuralFeature[] {
>         NotationPackage.Literals.DIAGRAM__PERSISTED_EDGES,
>         NotationPackage.Literals.DIAGRAM__TRANSIENT_EDGES};
> 
127,127c126,126
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
128,128d126
< 	 * <!-- end-user-doc -->
136,136c134,134
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
137,137d134
< 	 * <!-- end-user-doc -->
145,145c142,142
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
146,146d142
< 	 * <!-- end-user-doc -->
154,154c150,150
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
155,155d150
< 	 * <!-- end-user-doc -->
166,166c161,161
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
167,167d161
< 	 * <!-- end-user-doc -->
174a169,170
>      * <!-- begin-user-doc --> Set the Measurement Unit for this Diagram, the
>      * Measure ment unit can be set only once, the set method will not set the
175,177d168
<      * <!-- begin-user-doc -->
<      * Set the Measurement Unit for this Diagram, the Measure ment unit can be set only 
<      * once, the set method will not set the value if it was already set
178,178c171,171
<      * <!-- end-user-doc -->
---
>      * value if it was already set <!-- end-user-doc -->
183a177,177
>                 : newMeasurementUnit;
183,183c176,176
<             measurementUnit = newMeasurementUnit == null ? MEASUREMENT_UNIT_EDEFAULT : newMeasurementUnit;
---
>             measurementUnit = newMeasurementUnit == null ? MEASUREMENT_UNIT_EDEFAULT
186a181,184
>                 eNotify(new ENotificationImpl(this, Notification.SET,
>                     NotationPackage.DIAGRAM__MEASUREMENT_UNIT,
>                     oldMeasurementUnit, measurementUnit,
>                     !oldMeasurementUnitESet));
187,187d180
<                 eNotify(new ENotificationImpl(this, Notification.SET, NotationPackage.DIAGRAM__MEASUREMENT_UNIT, oldMeasurementUnit, measurementUnit, !oldMeasurementUnitESet));
193,193c190,190
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
194,194d190
<      * <!-- end-user-doc -->
201,201c197,197
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
202,202d197
<      * <!-- end-user-doc -->
210,210c205,205
< 	 * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
211,211d205
< 	 * <!-- end-user-doc -->
215,215c209,209
< 			allEdges =  new EContentsEList(this, 
---
>             allEdges = new EContentsEList(this, edgesFeatures);
216,218d209
< 				new EStructuralFeature[] {
< 					NotationPackage.eINSTANCE.getDiagram_PersistedEdges(),
< 					NotationPackage.eINSTANCE.getDiagram_TransientEdges()});
224,224c215,215
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
225,225d215
< 	 * <!-- end-user-doc -->
236,236c226,226
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
237,237d226
< 	 * <!-- end-user-doc -->
248,248c237,237
< 	 * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
249,249d237
< 	 * <!-- end-user-doc -->
252a241,241
>             .create(eClass);
252,252c240,240
< 		Edge newEdge = (Edge) eClass.getEPackage().getEFactoryInstance().create(eClass);
---
>         Edge newEdge = (Edge) eClass.getEPackage().getEFactoryInstance()
258,258c247,247
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
259,259d247
<      * <!-- end-user-doc -->
263a252,263
>             case NotationPackage.DIAGRAM__EANNOTATIONS:
>                 return ((InternalEList)getEAnnotations()).basicRemove(otherEnd, msgs);
>             case NotationPackage.DIAGRAM__SOURCE_EDGES:
>                 return ((InternalEList)getSourceEdges()).basicRemove(otherEnd, msgs);
>             case NotationPackage.DIAGRAM__TARGET_EDGES:
>                 return ((InternalEList)getTargetEdges()).basicRemove(otherEnd, msgs);
>             case NotationPackage.DIAGRAM__PERSISTED_CHILDREN:
>                 return ((InternalEList)getPersistedChildren()).basicRemove(otherEnd, msgs);
>             case NotationPackage.DIAGRAM__STYLES:
>                 return ((InternalEList)getStyles()).basicRemove(otherEnd, msgs);
>             case NotationPackage.DIAGRAM__TRANSIENT_CHILDREN:
>                 return ((InternalEList)getTransientChildren()).basicRemove(otherEnd, msgs);
269,269c269,269
<         return super.eInverseRemove(otherEnd, featureID, msgs);
---
>         return eDynamicInverseRemove(otherEnd, featureID, msgs);
273,273c273,273
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
274,274d273
<      * <!-- end-user-doc -->
278a278,301
>             case NotationPackage.DIAGRAM__EANNOTATIONS:
>                 return getEAnnotations();
>             case NotationPackage.DIAGRAM__VISIBLE:
>                 return isVisible() ? Boolean.TRUE : Boolean.FALSE;
>             case NotationPackage.DIAGRAM__TYPE:
>                 return getType();
>             case NotationPackage.DIAGRAM__MUTABLE:
>                 return isMutable() ? Boolean.TRUE : Boolean.FALSE;
>             case NotationPackage.DIAGRAM__SOURCE_EDGES:
>                 return getSourceEdges();
>             case NotationPackage.DIAGRAM__TARGET_EDGES:
>                 return getTargetEdges();
>             case NotationPackage.DIAGRAM__PERSISTED_CHILDREN:
>                 return getPersistedChildren();
>             case NotationPackage.DIAGRAM__STYLES:
>                 return getStyles();
>             case NotationPackage.DIAGRAM__ELEMENT:
>                 if (resolve) return getElement();
>                 return basicGetElement();
>             case NotationPackage.DIAGRAM__DIAGRAM:
>                 if (resolve) return getDiagram();
>                 return basicGetDiagram();
>             case NotationPackage.DIAGRAM__TRANSIENT_CHILDREN:
>                 return getTransientChildren();
288,288c311,311
<         return super.eGet(featureID, resolve, coreType);
---
>         return eDynamicGet(featureID, resolve, coreType);
292,292c315,315
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
293,293d315
<      * <!-- end-user-doc -->
297a320,355
>             case NotationPackage.DIAGRAM__EANNOTATIONS:
>                 getEAnnotations().clear();
>                 getEAnnotations().addAll((Collection)newValue);
>                 return;
>             case NotationPackage.DIAGRAM__VISIBLE:
>                 setVisible(((Boolean)newValue).booleanValue());
>                 return;
>             case NotationPackage.DIAGRAM__TYPE:
>                 setType((String)newValue);
>                 return;
>             case NotationPackage.DIAGRAM__MUTABLE:
>                 setMutable(((Boolean)newValue).booleanValue());
>                 return;
>             case NotationPackage.DIAGRAM__SOURCE_EDGES:
>                 getSourceEdges().clear();
>                 getSourceEdges().addAll((Collection)newValue);
>                 return;
>             case NotationPackage.DIAGRAM__TARGET_EDGES:
>                 getTargetEdges().clear();
>                 getTargetEdges().addAll((Collection)newValue);
>                 return;
>             case NotationPackage.DIAGRAM__PERSISTED_CHILDREN:
>                 getPersistedChildren().clear();
>                 getPersistedChildren().addAll((Collection)newValue);
>                 return;
>             case NotationPackage.DIAGRAM__STYLES:
>                 getStyles().clear();
>                 getStyles().addAll((Collection)newValue);
>                 return;
>             case NotationPackage.DIAGRAM__ELEMENT:
>                 setElement((EObject)newValue);
>                 return;
>             case NotationPackage.DIAGRAM__TRANSIENT_CHILDREN:
>                 getTransientChildren().clear();
>                 getTransientChildren().addAll((Collection)newValue);
>                 return;
313,313c371,371
<         super.eSet(featureID, newValue);
---
>         eDynamicSet(featureID, newValue);
317,317c375,375
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
318,318d375
<      * <!-- end-user-doc -->
322a380,409
>             case NotationPackage.DIAGRAM__EANNOTATIONS:
>                 getEAnnotations().clear();
>                 return;
>             case NotationPackage.DIAGRAM__VISIBLE:
>                 setVisible(VISIBLE_EDEFAULT);
>                 return;
>             case NotationPackage.DIAGRAM__TYPE:
>                 setType(TYPE_EDEFAULT);
>                 return;
>             case NotationPackage.DIAGRAM__MUTABLE:
>                 setMutable(MUTABLE_EDEFAULT);
>                 return;
>             case NotationPackage.DIAGRAM__SOURCE_EDGES:
>                 getSourceEdges().clear();
>                 return;
>             case NotationPackage.DIAGRAM__TARGET_EDGES:
>                 getTargetEdges().clear();
>                 return;
>             case NotationPackage.DIAGRAM__PERSISTED_CHILDREN:
>                 getPersistedChildren().clear();
>                 return;
>             case NotationPackage.DIAGRAM__STYLES:
>                 getStyles().clear();
>                 return;
>             case NotationPackage.DIAGRAM__ELEMENT:
>                 unsetElement();
>                 return;
>             case NotationPackage.DIAGRAM__TRANSIENT_CHILDREN:
>                 getTransientChildren().clear();
>                 return;
335a423,423
>         eDynamicUnset(featureID);
336,336d422
<         super.eUnset(featureID);
340,340c427,427
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
341,341d427
<      * <!-- end-user-doc -->
345a432,453
>             case NotationPackage.DIAGRAM__EANNOTATIONS:
>                 return eAnnotations != null && !eAnnotations.isEmpty();
>             case NotationPackage.DIAGRAM__VISIBLE:
>                 return ((eFlags & VISIBLE_EFLAG) != 0) != VISIBLE_EDEFAULT;
>             case NotationPackage.DIAGRAM__TYPE:
>                 return TYPE_EDEFAULT == null ? type != null : !TYPE_EDEFAULT.equals(type);
>             case NotationPackage.DIAGRAM__MUTABLE:
>                 return ((eFlags & MUTABLE_EFLAG) != 0) != MUTABLE_EDEFAULT;
>             case NotationPackage.DIAGRAM__SOURCE_EDGES:
>                 return sourceEdges != null && !sourceEdges.isEmpty();
>             case NotationPackage.DIAGRAM__TARGET_EDGES:
>                 return targetEdges != null && !targetEdges.isEmpty();
>             case NotationPackage.DIAGRAM__PERSISTED_CHILDREN:
>                 return persistedChildren != null && !persistedChildren.isEmpty();
>             case NotationPackage.DIAGRAM__STYLES:
>                 return styles != null && !styles.isEmpty();
>             case NotationPackage.DIAGRAM__ELEMENT:
>                 return isSetElement();
>             case NotationPackage.DIAGRAM__DIAGRAM:
>                 return basicGetDiagram() != null;
>             case NotationPackage.DIAGRAM__TRANSIENT_CHILDREN:
>                 return transientChildren != null && !transientChildren.isEmpty();
355,355c463,463
<         return super.eIsSet(featureID);
---
>         return eDynamicIsSet(featureID);
359,359c467,467
<      * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
360,360d467
< 	 * <!-- end-user-doc -->
376,376c483,483
< 	 * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
377,377d483
< 	 * <!-- end-user-doc -->
385,385c491,491
< 	 * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
386,386d491
< 	 * <!-- end-user-doc -->
395,395d499
< 	
397,397c501,501
< 	 * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
398,398d501
< 	 * <!-- end-user-doc -->
410,410c513,513
< 	 * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
411,411d513
< 	 * <!-- end-user-doc -->
414,414c516,516
< 		if (transientEdges!=null &&
---
>         if (transientEdges != null && transientEdges.size() > 0) {
415,415d516
< 			transientEdges.size()>0){
418,418c519,519
< 			for (Iterator iterator = edges.iterator();
---
>             for (Iterator iterator = edges.iterator(); iterator.hasNext();) {
419,419d519
< 				 iterator.hasNext();){
432,432c532,532
< 	  * <!-- begin-user-doc -->
---
>      * <!-- begin-user-doc --> <!-- end-user-doc -->
433,433d532
< 	  * <!-- end-user-doc -->
436a536,536
>             .DIAGRAM__TRANSIENT_EDGES) {
436,436c535,535
< 	  	if (edge.eContainingFeature() == 
---
>         if (edge.eContainingFeature() == NotationPackage.Literals
437,438d535
< 			NotationPackage.eINSTANCE.getDiagram_TransientEdges()){
< 			if (transientEdges!=null && 
439,439c537,537
< 			    transientEdges.size()>0){
---
>             if (transientEdges != null && transientEdges.size() > 0) {
442,442c540,540
< 		} else if (edge.eContainingFeature() == 
---
>         } else if (edge.eContainingFeature() == NotationPackage.Literals
442a541,541
>                 .DIAGRAM__PERSISTED_EDGES) {
443,443d540
< 			NotationPackage.eINSTANCE.getDiagram_PersistedEdges()){
444,444c542,542
< 			if (persistedEdges!=null && 
---
>             if (persistedEdges != null && persistedEdges.size() > 0) {
445,445d542
< 				persistedEdges.size()>0){
