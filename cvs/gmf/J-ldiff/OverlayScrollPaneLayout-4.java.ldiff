59,68d58
< 
< 		ScrollBar hBar = scrollpane.getHorizontalScrollBar(),
< 			vBar = scrollpane.getVerticalScrollBar();
< 		Viewport viewport = scrollpane.getViewport();
< 
< 		Insets insets = new Insets();
< 		insets.bottom =
< 			hBar.getPreferredSize(clientArea.width, clientArea.height).height;
< 		insets.right =
< 			vBar.getPreferredSize(clientArea.width, clientArea.height).width;
72a66,66
> 		Viewport viewport = scrollpane.getViewport();
73,73c67,67
< 		Dimension available = clientArea.getSize(),
---
> 		Dimension available = clientArea.getSize();
74,75d67
< 			preferred =
< 				viewport
76a69,70
> 		boolean none = available.contains(preferred);
> 		boolean both =
76,76c68,68
< 					.getPreferredSize(available.width, available.height)
---
> 		Dimension preferred = viewport.getPreferredSize(available.width, available.height).getCopy();
77,77d68
< 					.getCopy();
79,80d65
< 		boolean none = available.contains(preferred),
< 			both =
84,84c74,74
< 					&& preferred.contains(available),
---
> 				&& preferred.contains(available);
84a75,75
> 		boolean showV = both || preferred.height > available.height;
85,85d74
< 			showV = both || preferred.height > available.height,
86,86c76,76
< 			showH = both || preferred.width > available.width;
---
> 		boolean showH = both || preferred.width > available.width;
87,87d76
< 
91,94d58
< 
< 		if (!showV)
< 			insets.right = 0;
< 		if (!showH)
95,95c59,59
< 			insets.bottom = 0;
---
> 		int bottom = 0;
95a60,60
> 		int right  = 0 ;
97a81,97
> 		int hPad = 0;
> 		int vPad = 0;
> 		ScrollBar vBar = null;
> 		ScrollBar hBar = null;
> 		
> 		if (hVis!=NEVER)
> 			hBar = scrollpane.getHorizontalScrollBar();
> 		if (vVis!=NEVER)
> 			vBar = scrollpane.getVerticalScrollBar();
> 				
> 		if (showH){
> 			bottom = hBar.getPreferredSize(clientArea.width, clientArea.height).height;
> 			hPad = hBar.getSize().height;
> 		}
> 		
> 		if (showV){
> 			right =	vBar.getPreferredSize(clientArea.width, clientArea.height).width;
98a99,99
> 		}
98,98c98,98
< 		int vPad = showV ? vBar.getSize().width : 0;
---
> 			vPad = vBar.getSize().width;
99,99d98
< 		int hPad = showH ?  hBar.getSize().height : 0;
103,103c104,104
< 					viewportArea.right() - insets.right,
---
> 					viewportArea.right() - right,
105,105c106,106
< 					insets.right,
---
> 					right,
108,108d108
< 			//vBar.setMaximum(preferred.height);
114,114c114,114
< 					viewportArea.bottom() - insets.bottom,
---
> 					viewportArea.bottom() - bottom,
116,116c116,116
< 					insets.bottom);
---
> 					bottom);
118,118d117
< 			//hBar.setMaximum(preferred.width);
119a119,119
> 		if (vBar!=null)
120a121,121
> 		if (hBar!=null)
