100,100d99
<         if (context != null) {
103a103,103
> 			delegate = null;
105a106,109
> 		if (context != null) {
> 			IWorkbenchPart part = getWorkbenchPart();
> 
> 			if (part != null) {
106a111,111
> 				delegate.setPruneHistory(true);
106,106c110,110
<             delegate = new RedoActionHandler(getWorkbenchPart().getSite(), context);
---
> 				delegate = new RedoActionHandler(part.getSite(), context);
107a113,114
> 			}
> 		}
111,111c118,118
<             firePropertyChange(IAction.ENABLED, Boolean.valueOf(!enabled),
---
> 		firePropertyChange(IAction.ENABLED, Boolean.valueOf(!enabled), Boolean
112,112c119,119
<                     Boolean.valueOf(enabled));
---
> 				.valueOf(enabled));
113,113d119
<         }
249a256,257
> 	 * Sets my undo context. It will no longer be derived from the workbench
> 	 * part.
250,250d255
<      * Sets my undo context.
255a263,263
> 		this.undoContext = context;
255,255c262,262
<     public final void setUndoContext(IUndoContext undoContext) {
---
> 	public final void setUndoContext(IUndoContext context) {
256,256d262
<         this.undoContext = undoContext;
257,257c264,264
<         initializeWithContext(undoContext);
---
> 		initializeWithContext(context);
286a294,307
> 	/**
> 	 * Disposes my delegate.
> 	 */
> 	public void dispose() {
> 
> 		if (delegate != null) {
> 			delegate.removePropertyChangeListener(getDelegateListener());
> 			delegate.dispose();
> 			delegate = null;
> 		}
> 
> 		super.dispose();
> 	}
> 
