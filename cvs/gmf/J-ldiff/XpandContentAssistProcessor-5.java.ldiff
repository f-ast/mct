32a33,33
> import org.eclipse.jface.text.IDocument;
54a56,56
>             final IDocument doc = viewer.getDocument();
55a58,59
> 			final int additionalTextLen = Math.min(doc.getLength(), documentOffset + doc.getLineLength(doc.getLineOfOffset(documentOffset))) - documentOffset;
> 			final String textPastInsertionPoint = doc.get(documentOffset, additionalTextLen);
55,55c57,57
<             final String txt = viewer.getDocument().get(0, documentOffset);
---
> 			final String txt = doc.get(0, documentOffset);
74,74c78,78
<                 proposals.addAll(new KeywordProposalComputer().computeProposals(txt, ctx, f));
---
>                 proposals.addAll(new KeywordProposalComputer(textPastInsertionPoint).computeProposals(txt, ctx, f));
86,87d89
<                 	// [artem] originally there was compareTo, but e.g. ExpressionProposalComputer
<                 	// ignores case when deciding what to take, so why should we
89,89c91,91
<                     return p1.getDisplayString().compareToIgnoreCase(p2.getDisplayString());
---
>                     return p1.getDisplayString().compareTo(p2.getDisplayString());
