18a15,15
> import org.eclipse.emf.ecore.EClassifier;
19,19c16,16
< import org.eclipse.emf.ecore.util.EcoreUtil;
---
> import org.eclipse.emf.ecore.EObject;
22,22c22,22
< import org.eclipse.gmf.mappings.FeatureValueSpec;
---
> import org.eclipse.gmf.mappings.FeatureInitializer;
24a26,26
> import org.eclipse.gmf.mappings.ReferenceNewElementSpec;
34a37,38
>  *   <li>{@link org.eclipse.gmf.mappings.impl.FeatureSeqInitializerImpl#getElementClass <em>Element Class</em>}</li>
>  *   <li>{@link org.eclipse.gmf.mappings.impl.FeatureSeqInitializerImpl#getCreatingInitializer <em>Creating Initializer</em>}</li>
51a56,65
> 	 * The cached value of the '{@link #getElementClass() <em>Element Class</em>}' reference.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getElementClass()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected EClass elementClass = null;
> 
> 	/**
74a89,103
> 		MappingEntry mappingEntry = basicGetMappingEntry();
> 		return mappingEntry != null && mappingEntry.eIsProxy() ? (MappingEntry)eResolveProxy((InternalEObject)mappingEntry) : mappingEntry;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated NOT
> 	 */
> 	public MappingEntry basicGetMappingEntry() {
> 		EObject container = eContainer();
> 		while(container != null && !(container instanceof MappingEntry)) {
> 			container = container.eContainer();
> 		}
> 		return (container != null) ? (MappingEntry)container : null;
75,76d88
< 		if (eContainerFeatureID != GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY) return null;
< 		return (MappingEntry)eContainer();
84,86d110
< 	public NotificationChain basicSetMappingEntry(MappingEntry newMappingEntry, NotificationChain msgs) {
< 		msgs = eBasicSetContainer((InternalEObject)newMappingEntry, GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY, msgs);
< 		return msgs;
93a143,150
> 	public EClass getElementClassGen() {
> 		if (elementClass != null && elementClass.eIsProxy()) {
> 			InternalEObject oldElementClass = (InternalEObject)elementClass;
> 			elementClass = (EClass)eResolveProxy(oldElementClass);
> 			if (elementClass != oldElementClass) {
> 				if (eNotificationRequired())
> 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS, oldElementClass, elementClass));
> 			}
94,104d142
< 	public void setMappingEntry(MappingEntry newMappingEntry) {
< 		if (newMappingEntry != eInternalContainer() || (eContainerFeatureID != GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY && newMappingEntry != null)) {
< 			if (EcoreUtil.isAncestor(this, newMappingEntry))
< 				throw new IllegalArgumentException("Recursive containment not allowed for " + toString());
< 			NotificationChain msgs = null;
< 			if (eInternalContainer() != null)
< 				msgs = eBasicRemoveFromContainer(msgs);
< 			if (newMappingEntry != null)
< 				msgs = ((InternalEObject)newMappingEntry).eInverseAdd(this, GMFMapPackage.MAPPING_ENTRY__DOMAIN_INITIALIZER, MappingEntry.class, msgs);
< 			msgs = basicSetMappingEntry(newMappingEntry, msgs);
< 			if (msgs != null) msgs.dispatch();
106,107d151
< 		else if (eNotificationRequired())
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY, newMappingEntry, newMappingEntry));
114a160,161
> 	public EClass basicGetElementClass() {
> 		return elementClass;
115,115c111,111
< 	public EList getInitializers() {
---
> 	public EList getInitializers() {
116,116c112,112
< 		if (initializers == null) {
---
> 		if (initializers == null) {
117,117c113,113
< 			initializers = new EObjectContainmentWithInverseEList(FeatureValueSpec.class, this, GMFMapPackage.FEATURE_SEQ_INITIALIZER__INITIALIZERS, GMFMapPackage.FEATURE_VALUE_SPEC__FEATURE_SEQ_INITIALIZER);
---
> 			initializers = new EObjectContainmentWithInverseEList(FeatureInitializer.class, this, GMFMapPackage.FEATURE_SEQ_INITIALIZER__INITIALIZERS, GMFMapPackage.FEATURE_INITIALIZER__FEATURE_SEQ_INITIALIZER);
117a114,135
> 		}
> 		return initializers;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated NOT
> 	 */
> 	public EClass getElementClass() {
> 		if(getCreatingInitializer() == null) {
> 			return (getMappingEntry() != null) ? getMappingEntry().getDomainContext() : null;
> 		}
> 		EClass eClass = getElementClassGen();
> 		if(eClass != null) {
> 			return eClass;
> 		}
> 		EClassifier eClassifier = null;
> 		if(getCreatingInitializer().getFeature() != null) {
> 			eClassifier = getCreatingInitializer().getFeature().getEType();			
> 		}
> 		return (eClassifier instanceof EClass) ? (EClass)eClassifier : null;
118a163,195
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated NOT
> 	 */
> 	public void setElementClass(EClass newElementClass) {
> 		if(getCreatingInitializer() == null && eContainer() != null) {
> 			return;
> 		}
> 		setElementClassGen(newElementClass);
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public void setElementClassGen(EClass newElementClass) {
> 		EClass oldElementClass = elementClass;
> 		elementClass = newElementClass;
> 		if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS, oldElementClass, elementClass));
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public ReferenceNewElementSpec getCreatingInitializer() {
> 		if (eContainerFeatureID != GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER) return null;
> 		return (ReferenceNewElementSpec)eContainer();
119,119c152,152
< 		return initializers;
---
> 		return elementClass;
128a207,207
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
129,129d206
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
130,130c208,208
< 				if (eInternalContainer() != null)
---
> 				if (eInternalContainer() != null)
131a210,210
> 				return eBasicSetContainer(otherEnd, GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER, msgs);
131,131c209,209
< 					msgs = eBasicRemoveFromContainer(msgs);
---
> 					msgs = eBasicRemoveFromContainer(msgs);
132,132d209
< 				return basicSetMappingEntry((MappingEntry)otherEnd, msgs);
146a225,225
> 				return eBasicSetContainer(null, GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER, msgs);
146,146c224,224
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
---
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
147,147d224
< 				return basicSetMappingEntry(null, msgs);
161,161c237,237
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
---
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
162,162c238,238
< 				return eInternalContainer().eInverseRemove(this, GMFMapPackage.MAPPING_ENTRY__DOMAIN_INITIALIZER, MappingEntry.class, msgs);
---
> 				return eInternalContainer().eInverseRemove(this, GMFMapPackage.REFERENCE_NEW_ELEMENT_SPEC__NEW_ELEMENT_INITIALIZERS, ReferenceNewElementSpec.class, msgs);
174a251,251
> 				if (resolve) return getMappingEntry();
175,175c252,252
< 				return getMappingEntry();
---
> 				return basicGetMappingEntry();
177a255,259
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
> 				if (resolve) return getElementClass();
> 				return basicGetElementClass();
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
> 				return getCreatingInitializer();
188a275,276
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
> 				setElementClass((EClass)newValue);
189,190d274
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
< 				setMappingEntry((MappingEntry)newValue);
191,191c277,277
< 				return;
---
> 				return;
207,207c310,310
< 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__MAPPING_ENTRY:
---
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
207a311,313
> 				return elementClass != null;
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__CREATING_INITIALIZER:
> 				return getCreatingInitializer() != null;
208,209d310
< 				setMappingEntry((MappingEntry)null);
< 				return;
212a292,294
> 			case GMFMapPackage.FEATURE_SEQ_INITIALIZER__ELEMENT_CLASS:
> 				setElementClass((EClass)null);
> 				return;
225,225c307,307
< 				return getMappingEntry() != null;
---
> 				return basicGetMappingEntry() != null;
