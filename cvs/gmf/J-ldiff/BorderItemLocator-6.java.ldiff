163a164,164
> 		Dimension borderItemSize = getSize(borderItem);
164,164d163
< 		Rectangle borderItemBounds = borderItem.getBounds();
167,167c167,167
< 			x = parentFigureX - borderItemBounds.width
---
> 			x = parentFigureX - borderItemSize.width
174,174c174,174
< 			y = parentFigureY - borderItemBounds.height
---
> 			y = parentFigureY - borderItemSize.height
198a199,199
> 		Dimension borderItemSize = getSize(borderItem);
199,199d198
< 		Rectangle borderItemBounds = borderItem.getBounds();
202,202c202,202
< 		int westX = parentFigureX - borderItemBounds.width
---
> 		int westX = parentFigureX - borderItemSize.width
208,208c208,208
< 		int northY = parentFigureY - borderItemBounds.height
---
> 		int northY = parentFigureY - borderItemSize.height
215,215c215,215
< 				newY = northY + borderItemBounds.height;
---
> 				newY = northY + borderItemSize.height;
216a217,217
> 				- borderItemSize.height) {
217,217d216
< 				- borderItemBounds.height) {
218,218c218,218
< 				newY = southY - borderItemBounds.height;
---
> 				newY = southY - borderItemSize.height;
225,225c225,225
< 				newY = northY + borderItemBounds.height;
---
> 				newY = northY + borderItemSize.height;
226a227,227
> 				- borderItemSize.height) {
227,227d226
< 				- borderItemBounds.height) {
228,228c228,228
< 				newY = southY - borderItemBounds.height;
---
> 				newY = southY - borderItemSize.height;
235,235c235,235
< 				newX = westX + borderItemBounds.width;
---
> 				newX = westX + borderItemSize.width;
236a237,237
> 				- borderItemSize.width) {
237,237d236
< 				- borderItemBounds.width) {
238,238c238,238
< 				newX = eastX - borderItemBounds.width;
---
> 				newX = eastX - borderItemSize.width;
245,245c245,245
< 				newX = westX + borderItemBounds.width;
---
> 				newX = westX + borderItemSize.width;
246a247,247
> 				- borderItemSize.width) {
247,247d246
< 				- borderItemBounds.width) {
248,248c248,248
< 				newX = eastX - borderItemBounds.width;
---
> 				newX = eastX - borderItemSize.width;
296a297,297
> 		Dimension borderItemSize = getSize(borderItem);
297,297d296
< 		Rectangle borderItemBounds = borderItem.getBounds();
302,302c302,302
< 					recommendedLocation.y += borderItemBounds.height
---
> 					recommendedLocation.y += borderItemSize.height
306,306c306,306
< 					- borderItemBounds.height) { // off the bottom,
---
> 					- borderItemSize.height) { // off the bottom,
313,313c313,313
< 					recommendedLocation.x += borderItemBounds.width
---
> 					recommendedLocation.x += borderItemSize.width
317,317c317,317
< 					- borderItemBounds.width) {
---
> 					- borderItemSize.width) {
324,324c324,324
< 					recommendedLocation.y -= (borderItemBounds.height + vertical_gap);
---
> 					recommendedLocation.y -= (borderItemSize.height + vertical_gap);
333,333c333,333
< 					recommendedLocation.x -= (borderItemBounds.width + horizontal_gap);
---
> 					recommendedLocation.x -= (borderItemSize.width + horizontal_gap);
427a428,428
>         Dimension size = getSize(borderItem);
429,429c430,430
< 			getPreferredLocation(borderItem), borderItem.getBounds().getSize());
---
> 			getPreferredLocation(borderItem), size);
436a438,438
>         borderItem.setSize(size);
438,438c440,440
< 		setCurrentSideOfParent(findClosestSideOfParent(new Rectangle(ptNewLocation, borderItem
---
> 		setCurrentSideOfParent(findClosestSideOfParent(new Rectangle(ptNewLocation, size), getParentBorder()));
439,439d440
< 			.getBounds().getSize()), getParentBorder()));
507a509,521
> 	
> 	/**
> 	 * Gets the size of the border item figure.
> 	 * @param borderItem
> 	 * @return the size of the border item figure.
> 	 */
> 	protected final Dimension getSize(IFigure borderItem) {
>         Dimension size = getConstraint().getSize();
>         if (LayoutHelper.UNDEFINED.getSize().equals(size)) {
>         	size = borderItem.getPreferredSize();
>         }
>         return size;
> 	}
