22a23,24
> import org.eclipse.emf.ecore.xmi.XMLResource;
> import org.eclipse.emf.transaction.util.TransactionUtil;
32,32d33
< import org.eclipse.gmf.runtime.diagram.ui.internal.util.DiagramMEditingDomainGetter;
35,35d35
< import org.eclipse.gmf.runtime.emf.core.edit.MRunnable;
36,36c36,36
< import org.eclipse.gmf.runtime.emf.core.util.EObjectUtil;
---
> import org.eclipse.gmf.runtime.emf.core.util.EMFCoreUtil;
69a70,73
> 			TransactionUtil.getEditingDomain(editorPart.getDiagram())
> 				.runExclusive(new Runnable() {
> 
> 					public void run() {
70,71d69
< 			DiagramMEditingDomainGetter.getMEditingDomain(editorPart).runAsRead( new MRunnable() {
< 				public Object run() {
92,92c94,94
< 							elementName = EObjectUtil.getQName(semanticElement,true);
---
> 							elementName = EMFCoreUtil.getQualifiedName(semanticElement,true);
105,105c107,107
< 							attribMap.put(IBookmark.ELEMENT_ID, EObjectUtil.getID(view));
---
> 							attribMap.put(IBookmark.ELEMENT_ID,
105a108,109
> 									((XMLResource) view.eResource())
> 										.getID(view));
120,120d123
< 					return null;
