2,2c2,2
<  * Copyright (c) 2006 Eclipse.org
---
>  * Copyright (c) 2006, 2007 Borland Software Corp.
10a11,11
>  *    Artem Tikhomirov (Borland) reorganized Map->Gen action
13a15,15
> import org.eclipse.gmf.internal.bridge.transform.TransformOptions;
14,17d14
< import org.eclipse.emf.common.util.URI;
< import org.eclipse.gmf.bridge.ui.dashboard.DashboardAction;
< import org.eclipse.gmf.bridge.ui.dashboard.DashboardFacade;
< import org.eclipse.gmf.bridge.ui.dashboard.DashboardState;
18,18c16,16
< import org.eclipse.gmf.internal.codegen.popup.actions.TransformToGenModelOperation;
---
> import org.eclipse.gmf.internal.bridge.ui.dashboard.actions.TransformMap2GenModelAction;
19a18,18
> public class GenerateLiteGMAction extends TransformMap2GenModelAction {
20,39d17
< /**
<  * @author dstadnik
<  */
< public class GenerateLiteGMAction implements DashboardAction {
< 
< 	private DashboardFacade context;
< 
< 	public void init(DashboardFacade context) {
< 		this.context = context;
< 	}
< 
< 	public boolean isEnabled() {
< 		DashboardState state = context.getState();
< 		if (context.isStrict()) {
< 			if (state.getDM() == null || state.getDGM() == null || state.getTDM() == null) {
< 				return false;
< 			}
< 		}
< 		return state.getMM() != null;
< 	}
40a20,23
> 	protected void configureOptions(TransformOptions options) {
> 		options.setUseRuntimeFigures(false);
> 		options.setUseMapMode(false);
> 		options.setGenerateRCP(false);
41,60d19
< 	public void run() {
< 		DashboardState state = context.getState();
< 		URI mm = state.getMM();
< 		URI gm = state.getGM();
< 		if (gm == null) {
< 			gm = mm.trimFileExtension().appendFileExtension("gmfgen"); //$NON-NLS-1$
< 			state.setGM(gm);
< 		}
< 		try {
< 			TransformToGenModelOperation op = new TransformToGenModelOperation();
< 			op.setUseRuntimeFigures(false);
< 			op.setUseMapMode(false);
< 			op.setRCP(false);
< 			op.setMapModelURI(mm);
< 			op.setGenModelURI(gm);
< 			op.setDomainGenModelURI(state.getDGM());
< 			op.run();
< 		} finally {
< 			context.updateStatus();
< 		}
