62a63,63
> 		recomputeContexts();
62a124,140
>     /**
>      * Propagates the contexts from my wrapped command.
>      */
>     private void recomputeContexts() {
>     	
>     	// Get my real contexts from my wrapped command
>     	IUndoContext[] realContexts = realSemanticCommand.getContexts();
>     	
>     	// Clear my contexts
>     	IUndoContext[] myContexts = getContexts();
>     	for (int i = 0; i < myContexts.length; i++) {
>     		removeContext(myContexts[i]);
>     	}
>     	
>     	// Add the contexts from my wrapped command
> 		for (int i = 0; i < realContexts.length; i++) {
> 			addContext(realContexts[i]);
63,65d123
< 		IUndoContext[] contexts = this.realSemanticCommand.getContexts();
< 		for (int i = 0; i < contexts.length; i++) {
< 			addContext(contexts[i]);
66a142,159
>     }
>     
>     /**
>      * Adds the context to my wrapped command.
>      */
>     public void addContext(IUndoContext context) {
>     	super.addContext(context);
>     	realSemanticCommand.addContext(context);
>     }
>     
>     /**
>      * Removes the context from my wrapped command.
>      */
>     public void removeContext(IUndoContext context) {
>     	super.removeContext(context);
>     	realSemanticCommand.removeContext(context);
>     }
> 
66,66c141,141
< 		}
---
> 		}
86,86c83,83
< 			return CommandResult.newOKCommandResult(requestAdapter);
---
> 			result = CommandResult.newOKCommandResult(requestAdapter);
87a85,86
> 		
> 		recomputeContexts();
95a95,96
> 		recomputeContexts();
> 		return result;
95,95c94,94
< 		return realSemanticCommand.getCommandResult();
---
> 		CommandResult result = realSemanticCommand.getCommandResult();
102,102c103,103
< 		return realSemanticCommand.getCommandResult();
---
> 		CommandResult result = realSemanticCommand.getCommandResult();
102a104,105
> 		recomputeContexts();
> 		return result;
