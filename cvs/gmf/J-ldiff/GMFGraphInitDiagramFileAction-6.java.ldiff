1,1c1,1
< /**
---
> /*
14a15,24
> import org.eclipse.emf.common.util.URI;
> import org.eclipse.emf.common.util.WrappedException;
> 
> import org.eclipse.emf.ecore.EObject;
> 
> import org.eclipse.emf.ecore.resource.Resource;
> import org.eclipse.emf.ecore.resource.ResourceSet;
> 
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
16a27,28
> import org.eclipse.gmf.runtime.emf.core.GMFEditingDomainFactory;
> 
19a32,32
> import org.eclipse.jface.dialogs.MessageDialog;
76a90,103
> 		TransactionalEditingDomain editingDomain = GMFEditingDomainFactory.INSTANCE.createEditingDomain();
> 		ResourceSet resourceSet = editingDomain.getResourceSet();
> 		EObject diagramRoot = null;
> 		try {
> 			Resource resource = resourceSet.getResource(URI.createPlatformResourceURI(mySelectedModelFile.getFullPath().toString()), true);
> 			diagramRoot = (EObject) resource.getContents().get(0);
> 		} catch (WrappedException ex) {
> 			GMFGraphDiagramEditorPlugin.getInstance().logError("Unable to load resource: " + mySelectedModelFile.getFullPath().toString(), ex); //$NON-NLS-1$
> 		}
> 		if (diagramRoot == null) {
> 			MessageDialog.openError(myPart.getSite().getShell(), "Error", "Model file loading failed");
> 			return;
> 		}
> 		Wizard wizard = new GMFGraphNewDiagramFileWizard(mySelectedModelFile, myPart.getSite().getPage(), mySelection, diagramRoot, editingDomain);
77,77d89
< 		Wizard wizard = new GMFGraphNewDiagramFileWizard(mySelectedModelFile, myPart.getSite().getPage(), mySelection);
