2,2c2,2
<  * Copyright (c) 2002, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2007 IBM Corporation and others.
31,31d30
< import org.eclipse.gef.commands.UnexecutableCommand;
85,87d83
< 	/* (non-Javadoc)
< 	 * @see org.eclipse.gmf.runtime.diagram.ui.actions.DiagramAction#getCommand()
< 	 */
89,89c86,86
< 		if (isArrangeAll()){
---
> 		if (isArrangeAll()) {
98,102d93
<             if (!arrangeCC.isEmpty())
<                 return arrangeCC;
<             else
<                 return UnexecutableCommand.INSTANCE;
<         }
103,103c94,94
< 		else if (getOperationSet().size() >= 2) {
---
> 		} else if (getOperationSet().size() >= 2) {
105,105c96,96
< 			if (parent != null)
---
> 			if (parent != null) {
106,106c97,97
< 				return parent.getCommand(getTargetRequest());
---
> 				Command cmd = parent.getCommand(getTargetRequest());
106a98,99
> 				if (cmd != null)
> 					arrangeCC.add(cmd);
107a101,102
> 		}
> 		return arrangeCC;
108,108d100
< 		return UnexecutableCommand.INSTANCE;
111a106,106
> 	 * Action is enabled if arrange all. If arrange selection, action is enabled
112,113d105
< 	 * Action is enabled if arrange all.   
< 	 * If arrange selection, action is enabled if the 
114,114c107,107
< 	 * operation set's parent has XYLayout 
---
> 	 * if the operation set's parent has XYLayout and there is atleast 2
115a109,109
> 	 * 
115,115c108,108
< 	 * and there is atleast 2 siblings to arrange
---
> 	 * siblings to arrange
