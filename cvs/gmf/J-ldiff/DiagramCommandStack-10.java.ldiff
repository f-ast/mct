21a22,23
> import java.util.Set;
> import java.util.Map.Entry;
555a558,572
>     public void dispose() {
>         // clean up the known listeners (if there is any remaining)
>         // this will prevent clients from causing memory leaks
>         Set entries = stackToManager.entrySet();
>         for (Iterator iter = entries.iterator(); iter.hasNext();) {
>             Map.Entry element = (Map.Entry) iter.next();
>             IOperationHistoryListener historyListener = (IOperationHistoryListener) element.getValue();
>             if (historyListener != null) {
>                 getOperationHistory().removeOperationHistoryListener(
>                     historyListener);
>             }
>         }
>         super.dispose();
>     }
> 
