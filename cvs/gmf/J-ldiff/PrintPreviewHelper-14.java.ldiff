2,2c2,2
<  * Copyright (c) 2002, 2007 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2008 IBM Corporation and others.
16a17,19
> import javax.print.PrintService;
> import javax.print.PrintServiceLookup;
> 
43,43c46,46
< import org.eclipse.gmf.runtime.diagram.ui.printing.internal.util.PrintHelper;
---
> import org.eclipse.gmf.runtime.diagram.ui.printing.internal.util.PrintHelperUtil;
64,64d66
< import org.eclipse.swt.printing.Printer;
165a168,172
> 	 * Enable or disable the print option
> 	 */
> 	protected boolean enablePrinting = true;
> 
> 	/**
306a314,322
> 	 * Enable or disable printing depending on where the print preview is invoked from.
> 	 * 
> 	 * @param enablePrinting
> 	 */
> 	public void enablePrinting(boolean enablePrinting){
> 		this.enablePrinting = enablePrinting;
> 	}
> 	
> 	/**
411,411c427,427
< 		if (printActionHelper == null) {
---
> 		if (printActionHelper == null || !enablePrinting) {
781,781c797,797
< 			pageBreakBounds = PrintHelper.getPageBreakBounds(getDiagramEditPart(), true);
---
> 			pageBreakBounds = PrintHelperUtil.getPageBreakBounds(getDiagramEditPart(), true);
813,813c829,829
< 			diagramEditPart = PrintHelper.createDiagramEditPart(diagram, preferencesHint, getTempShell());
---
> 			diagramEditPart = PrintHelperUtil.createDiagramEditPart(diagram, preferencesHint, getTempShell());
814,814c830,830
< 			PrintHelper.initializePreferences(diagramEditPart, preferencesHint);
---
> 			PrintHelperUtil.initializePreferences(diagramEditPart, preferencesHint);
862,862d877
< 		Printer printer = null;
863a879,881
> 			PrintService[] printServices = PrintServiceLookup.lookupPrintServices(
> 					null, null);
> 			return printServices.length > 0;
864,864d878
< 			printer = new Printer();
866,867d882
< 			//I cannot printer.dispose(); because it may not have been
< 			//initialized
891,894d905
< 
< 		printer.dispose();
< 
< 		return true;
