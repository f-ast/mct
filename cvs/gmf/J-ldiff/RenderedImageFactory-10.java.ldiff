296a297,297
> 				break;
297,297d296
< 				return image;
299a300,300
> 		if (image == null) {
302a304,310
> 		}
> 		
> 		if (image != null) {
> 			instanceMap.put(key, new WeakReference(image));
> 		}
> 		
> 		return image;
302,302c303,303
< 		return new ImageRenderedImage(buffer, key);
---
> 			image = new ImageRenderedImage(buffer, key);
