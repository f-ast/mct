2,2c2,2
<  * Copyright (c) 2002, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2008 IBM Corporation and others.
17,17d16
< import org.eclipse.core.resources.ResourcesPlugin;
146,146c145,145
< 			String FileExtension = resource.getFullPath().getFileExtension();
---
> 			String fileExtension = resource.getFullPath().getFileExtension();
147,147c146,146
< 			if (matchesExtension(FileExtension)) {
---
> 			if (matchesExtension(fileExtension)) {
167,167c166,166
< 			&& getAbsolutePath(getFileFilter()).equals(path.toOSString())) {
---
> 			&& getFileFilter().getFullPath().equals(path.toString())) {
170a170,170
> 				&& path.isPrefixOf(getFolderFilter().getFullPath())) {
171,171d169
< 				&& getAbsolutePath(getFolderFilter()).startsWith(path.toOSString())) {
174a174,174
> 				&& matchesContentType(path.segment(path.segmentCount()-1))) {
175,175d173
< 				&& matchesContentType(path.toFile().getName())) {
296a296,297
> 		if (resource.getLocationURI() == null) {
> 			return resource.getFullPath().toString();
297,300d295
< 		if (resource.getLocation() == null) {
< 			IPath root = ResourcesPlugin.getWorkspace().getRoot().getLocation();
< 			IPath path = root.append(resource.getFullPath());
< 			return path.toOSString();
302,302c299,299
< 			return resource.getLocation().toOSString();
---
> 			return resource.getLocationURI().toString();
