19,21d18
< import org.eclipse.gmf.gmfgraph.ConnectionFigure;
< import org.eclipse.gmf.gmfgraph.CustomFigure;
< import org.eclipse.gmf.gmfgraph.DecorationFigure;
22,22c19,19
< import org.eclipse.gmf.gmfgraph.Figure;
---
> import org.eclipse.gmf.gmfgraph.FigureDescriptor;
23,23d19
< import org.eclipse.gmf.gmfgraph.GMFGraphFactory;
26,26c22,22
< 	private final HashSet<Figure> myOriginalFigures = new HashSet<Figure>();
---
> 	private final HashSet<FigureDescriptor> myOriginalFigures = new HashSet<FigureDescriptor>();
28,28c24,24
< 	public void registerSubstitution(Figure original, CustomFigure substituted){
---
> 	public void registerSubstitution(FigureDescriptor original, FigureDescriptor substituted){
33,33c29,29
< 	public boolean isSubstituted(Figure original) {
---
> 	public boolean isSubstituted(FigureDescriptor original) {
36a33,37
> 	@SuppressWarnings("unchecked")
> 	public <T extends EObject> T xcopy(T original) {
> 		return (T) super.copy(original);
> 	}
> 
44,58d44
< 
< 	/**
< 	 * 	FIXME this method has nothing to do with DiagramElementsCopier 
< 	 */
< 	static CustomFigure createCustomFigure(Figure original){
< 		GMFGraphFactory factory = GMFGraphFactory.eINSTANCE;
< 		if (original instanceof DecorationFigure){
< 			return factory.createCustomDecoration();
< 		} 
< 		if (original instanceof ConnectionFigure){
< 			return factory.createCustomConnection();
< 		}
< 		return factory.createCustomFigure();
< 	}
< 
