40,40d40
< import org.eclipse.emf.ecore.xmi.XMLResource;
54a55,55
> import org.eclipse.osgi.util.NLS;
68a70,70
> 			throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0, NLS.bind(Messages.GMFGraphDocumentProvider_IncorrectInputError, new Object[] { element,
69,69d69
< 			throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0,
70,70c71,71
< 					"Incorrect element used: " + element + " instead of org.eclipse.ui.part.FileEditorInput or org.eclipse.emf.common.ui.URIEditorInput", null)); //$NON-NLS-1$ //$NON-NLS-2$
---
> 					"org.eclipse.ui.part.FileEditorInput", "org.eclipse.emf.common.ui.URIEditorInput" }), null));
85a87,87
> 			throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0, NLS.bind(Messages.GMFGraphDocumentProvider_IncorrectInputError, new Object[] { element,
86,86d86
< 			throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0,
87,87c88,88
< 					"Incorrect element used: " + element + " instead of org.eclipse.ui.part.FileEditorInput or org.eclipse.emf.common.ui.URIEditorInput", null)); //$NON-NLS-1$ //$NON-NLS-2$
---
> 					"org.eclipse.ui.part.FileEditorInput", "org.eclipse.emf.common.ui.URIEditorInput" }), null));
184a186,186
> 			URI uri = ((URIEditorInput) element).getURI();
184a36,36
> import org.eclipse.emf.common.util.URI;
185,185d35
< 			org.eclipse.emf.common.util.URI uri = ((URIEditorInput) element).getURI();
203a205,205
> 					throw new RuntimeException(Messages.GMFGraphDocumentProvider_UnableToLoadResourceError);
204,204d204
< 					throw new RuntimeException("Unable to load diagram resource");
220a222,222
> 				throw new RuntimeException(Messages.GMFGraphDocumentProvider_NoDiagramInResourceError);
221,221d221
< 				throw new RuntimeException("Diagram is not present in resource");
228,228c229,229
< 					thrownExcp = new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0, msg != null ? msg : "Error loading diagram", e)); //$NON-NLS-1$
---
> 					thrownExcp = new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0, msg != null ? msg : Messages.GMFGraphDocumentProvider_DiagramLoadingError, e));
232a234,234
> 			throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0, NLS.bind(Messages.GMFGraphDocumentProvider_IncorrectInputError, new Object[] { element,
233,233d233
< 			throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, 0,
234,234c235,235
< 					"Incorrect element used: " + element + " instead of org.eclipse.ui.part.FileEditorInput or org.eclipse.emf.common.ui.URIEditorInput", null)); //$NON-NLS-1$ //$NON-NLS-2$
---
> 					"org.eclipse.ui.part.FileEditorInput", "org.eclipse.emf.common.ui.URIEditorInput" }), null));
311a313,314
> 					GMFGraphDiagramEditorPlugin.getInstance().logError(Messages.GMFGraphDocumentProvider_isModifiable, ex);
> 					// Error message to log was initially taken from org.eclipse.gmf.runtime.diagram.ui.resources.editor.ide.internal.l10n.EditorMessages.StorageDocumentProvider_isModifiable
312,312d312
< 					GMFGraphDiagramEditorPlugin.getInstance().logError(Messages.DocumentProvider_isModifiable, ex);
334a337,338
> 					GMFGraphDiagramEditorPlugin.getInstance().logError(Messages.GMFGraphDocumentProvider_isModifiable, ex);
> 					// Error message to log was initially taken from org.eclipse.gmf.runtime.diagram.ui.resources.editor.ide.internal.l10n.EditorMessages.StorageDocumentProvider_isModifiable
335,335d336
< 					GMFGraphDiagramEditorPlugin.getInstance().logError(Messages.DocumentProvider_isModifiable, ex);
506,506c509,509
< 				throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, IStatus.OK, "The file has been changed on the file system", null)); //$NON-NLS-1$
---
> 				throw new CoreException(new Status(IStatus.ERROR, GMFGraphDiagramEditorPlugin.ID, IStatus.OK, Messages.GMFGraphDocumentProvider_UnsynchronizedFileSaveError, null));
512,512c515,515
< 				monitor.beginTask("Saving diagram", resources.size() + 1);
---
> 				monitor.beginTask(Messages.GMFGraphDocumentProvider_SaveDiagramTask, resources.size() + 1); //"Saving diagram"
513,514d515
< 				Map options = new HashMap();
< 				options.put(XMLResource.OPTION_RECORD_UNKNOWN_FEATURE, Boolean.TRUE);
517a519,519
> 					if (nextResource.isLoaded()) {
517,517c518,518
< 					monitor.setTaskName("Saving " + nextResource.getURI());
---
> 					monitor.setTaskName(NLS.bind(Messages.GMFGraphDocumentProvider_SaveNextResourceTask, nextResource.getURI()));
518,518d518
< 					if (nextResource.isLoaded() && (!nextResource.isTrackingModification() || nextResource.isModified())) {
520,520c521,521
< 							nextResource.save(options);
---
> 							nextResource.save(GMFGraphDiagramEditorUtil.getSaveOptions());
546a548,549
> 				GMFGraphDiagramEditorPlugin.getInstance().logError(Messages.GMFGraphDocumentProvider_handleElementContentChanged, ex);
> 				// Error message to log was initially taken from org.eclipse.gmf.runtime.diagram.ui.resources.editor.ide.internal.l10n.EditorMessages.FileDocumentProvider_handleElementContentChanged
547,547d547
< 				GMFGraphDiagramEditorPlugin.getInstance().logError(Messages.DocumentProvider_handleElementContentChanged, ex);
570,570c572,572
< 	protected void handleElementMoved(IEditorInput input, org.eclipse.emf.common.util.URI uri) {
---
> 	protected void handleElementMoved(IEditorInput input, URI uri) {
572,572c574,574
< 			IFile newFile = ResourcesPlugin.getWorkspace().getRoot().getFile(new Path(org.eclipse.emf.common.util.URI.decode(uri.path())).removeFirstSegments(1));
---
> 			IFile newFile = ResourcesPlugin.getWorkspace().getRoot().getFile(new Path(URI.decode(uri.path())).removeFirstSegments(1));
837,837c839,839
< 			public boolean handleResourceMoved(Resource resource, final org.eclipse.emf.common.util.URI newURI) {
---
> 			public boolean handleResourceMoved(Resource resource, final URI newURI) {
