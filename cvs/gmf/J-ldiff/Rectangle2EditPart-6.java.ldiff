39,41d38
< import org.eclipse.gmf.gmfgraph.Layout;
< import org.eclipse.gmf.gmfgraph.LayoutData;
< import org.eclipse.gmf.gmfgraph.LineKind;
125,125c122,122
< 		final NotificationListener layoutListener = new NotificationListener() {
---
> 		final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener() {
128,129d124
< 				Layout layout = (Layout) notification.getNotifier();
< 				layoutPropertyChanged(layout);
132,132c148,148
< 		if (modelElement.getLayout() != null) {
---
> 		if (modelElement.getLayout() != null) {
133,133c149,149
< 			addListenerFilter("LayoutPropertiesListener", layoutListener, modelElement.getLayout());
---
> 			addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
135,135c131,131
< 		addListenerFilter("ModelElementLayoutListener", new NotificationListener() {
---
> 		addListenerFilter("Layoutable_LayoutData_Listener", new NotificationListener() {
137a134,136
> 				removeListenerFilter("Layoutable_LayoutData_PropertiesListener");
> 				if (modelElement.getLayoutData() != null) {
> 					addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
138,141d133
< 				Layout newLayout = (Layout) notification.getNewValue();
< 				removeListenerFilter("LayoutPropertiesListener");
< 				if (newLayout != null) {
< 					addListenerFilter("LayoutPropertiesListener", layoutListener, newLayout);
142a138,138
> 				layoutDataChanged(modelElement.getLayoutData());
143,143d137
< 				layoutChanged(newLayout, true);
145,145c160,160
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
---
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
147,147c142,142
< 		final NotificationListener layoutDataListener = new NotificationListener() {
---
> 		final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener() {
150,150d144
< 				layoutDataPropertyChanged();
153,153c128,128
< 		if (modelElement.getLayoutData() != null) {
---
> 		if (modelElement.getLayoutData() != null) {
154,154c129,129
< 			addListenerFilter("LayoutDataPropertiesListener", layoutDataListener, modelElement.getLayoutData());
---
> 			addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
156,156c151,151
< 		addListenerFilter("ModelElementLayoutDataListener", new NotificationListener() {
---
> 		addListenerFilter("Layoutable_Layout_Listener", new NotificationListener() {
158a154,156
> 				removeListenerFilter("Layoutable_Layout_PropertiesListener");
> 				if (modelElement.getLayout() != null) {
> 					addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
159,162d153
< 				LayoutData newLayoutData = (LayoutData) notification.getNewValue();
< 				removeListenerFilter("LayoutDataPropertiesListener");
< 				if (newLayoutData != null) {
< 					addListenerFilter("LayoutDataPropertiesListener", layoutDataListener, newLayoutData);
163a158,158
> 				layoutChanged(modelElement.getLayout());
164,164c125,125
< 				layoutDataChanged();
---
> 				layoutDataChanged(modelElement.getLayoutData());
166,166c140,140
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
---
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
168,168c162,162
< 		addListenerFilter("ModelElementPropertiesListener", new NotificationListener() {
---
> 		addListenerFilter("Shape_Outline_Listener", new NotificationListener() {
171,185d164
< 				switch (notification.getFeatureID(Rectangle.class)) {
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.RECTANGLE__OUTLINE: {
< 					boolean value = modelElement.isOutline();
< 					myFigure.setOutline(value);
< 					break;
< 				}
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.RECTANGLE__FILL: {
< 					boolean value = modelElement.isFill();
< 					myFigure.setFill(value);
< 					break;
< 				}
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.RECTANGLE__LINE_WIDTH: {
< 					int value = modelElement.getLineWidth();
< 					myFigure.setLineWidth(value);
< 					break;
186a167,172
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline());
> 
> 		addListenerFilter("Shape_Fill_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setFill(modelElement.isFill());
187,193d166
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.RECTANGLE__LINE_KIND: {
< 					LineKind value = modelElement.getLineKind();
< 					myFigure.setLineStyle("LINE_DASH".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DOT
< 							: "LINE_DASHDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT
< 									: "LINE_DASHDOTDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT
< 											: "LINE_CUSTOM".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
< 					break;
194a174,179
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill());
> 
> 		addListenerFilter("Shape_LineWidth_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setLineWidth(modelElement.getLineWidth());
195,198d173
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.RECTANGLE__XOR_FILL: {
< 					boolean value = modelElement.isXorFill();
< 					myFigure.setFillXOR(value);
< 					break;
199a181,186
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth());
> 
> 		addListenerFilter("Shape_LineKind_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setLineStyle(getLineStyle(modelElement.getLineKind()));
200,203d180
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.RECTANGLE__XOR_OUTLINE: {
< 					boolean value = modelElement.isXorOutline();
< 					myFigure.setOutlineXOR(value);
< 					break;
204a188,193
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind());
> 
> 		addListenerFilter("Shape_XorFill_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setFillXOR(modelElement.isXorFill());
205a195,200
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill());
> 
> 		addListenerFilter("Shape_XorOutline_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setOutlineXOR(modelElement.isXorOutline());
206,206d194
< 				myFigure.repaint();
207a462,468
> 				layoutDataChanged(modelElement.getLayoutData());
> 			}
> 			{
> 				layoutChanged(modelElement.getLayout());
> 			}
> 			{
> 				myFigure.setOutline(modelElement.isOutline());
207a202,202
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline());
208,208d461
< 		}, modelElement);
468,468c165,165
< 				boolean value = modelElement.isOutline();
---
> 				myFigure.setOutline(modelElement.isOutline());
469,469d165
< 				myFigure.setOutline(value);
472,472c471,471
< 				boolean value = modelElement.isFill();
---
> 				myFigure.setFill(modelElement.isFill());
473,473d471
< 				myFigure.setFill(value);
476,476c474,474
< 				int value = modelElement.getLineWidth();
---
> 				myFigure.setLineWidth(modelElement.getLineWidth());
477,477d474
< 				myFigure.setLineWidth(value);
479a477,477
> 				myFigure.setLineStyle(getLineStyle(modelElement.getLineKind()));
480,483d476
< 				LineKind value = modelElement.getLineKind();
< 				myFigure.setLineStyle("LINE_DASH".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DOT
< 						: "LINE_DASHDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT : "LINE_DASHDOTDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT
< 								: "LINE_CUSTOM".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
486,486c480,480
< 				boolean value = modelElement.isXorFill();
---
> 				myFigure.setFillXOR(modelElement.isXorFill());
487,487d480
< 				myFigure.setFillXOR(value);
490,490c483,483
< 				boolean value = modelElement.isXorOutline();
---
> 				myFigure.setOutlineXOR(modelElement.isXorOutline());
491,491d483
< 				myFigure.setOutlineXOR(value);
493,493c145,145
< 			layoutChanged(modelElement.getLayout(), false);
---
> 				layoutChanged(modelElement.getLayout());
