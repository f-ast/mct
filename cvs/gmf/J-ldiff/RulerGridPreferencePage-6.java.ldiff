49,49c49,49
< 		private double minValidValue = 00.001;
---
> 		private double minValidValue = 00.009;
68a69,69
> 				number = convertToBase(number);
124a126,132
> 	private static final int INCHES = 0;
> 	private static final int CENTIMETERS = 1;
> 	private static final int PIXELS = 2;
> 
> 	// Conversion from inch to centimeter
> 	private static final double INCH2CM = 2.54;
> 	
164,165d171
< 			// Inches
< 			case 0:
167a175,175
> 			case CENTIMETERS:
168,168d174
< 			case 1: // cm
169,169c176,176
< 				pixelValue = value.doubleValue() * Display.getDefault().getDPI().x / 2.54;
---
> 				pixelValue = value.doubleValue() * Display.getDefault().getDPI().x / INCH2CM;
171,171d177
< 			case 2: // pixels
177a185,185
> 			case INCHES:
178,178c172,172
< 			case 0:
---
> 			case INCHES:
180a188,188
> 			case CENTIMETERS:
181,181d187
< 			case 1:
182,182c189,189
< 				returnValue = pixelValue * 2.54 / Display.getDefault().getDPI().x;
---
> 				returnValue = pixelValue * INCH2CM / Display.getDefault().getDPI().x;
183a191,191
> 			case PIXELS:
184,184c178,178
< 			case 2:
---
> 			case PIXELS:
191a223,225
> 		
> 		int units = getUnits();
> 
191,191c222,222
< 	private void updateUnits() {
---
> 	private void updateUnits() {
192a199,206
> 	/**
> 	 * 
> 	 * converts the current units used to a base unit value to be used (e.g. in validation)
> 	 * 
> 	 * @param number Units to be converted to the base unit
> 	 * @return
> 	 */
> 	private double convertToBase(double number) {
193,193d198
< 		int units = rulerUnits.getComboControl().getSelectionIndex();
194a245,247
> 	private int getUnits() {
> 		int units = rulerUnits.getComboControl().getSelectionIndex();
> 		
194a208,219
> 		double returnValue = 0;
> 		switch( getUnits() ) {
> 			case INCHES:
> 				returnValue = number;
> 				break;
> 			case CENTIMETERS:
> 				returnValue = number / INCH2CM;
> 				break;
> 			case PIXELS:
> 				returnValue = number / Display.getDefault().getDPI().x;
> 		}
> 		return returnValue;
195,195c248,248
< 		// IF no selection has been made
---
> 		// IF no selection has been made
196,196c249,249
< 		if( units == -1 ) {
---
> 		if( units == -1 ) {
197,197c250,250
< 			// Read the preference store
---
> 			// Read the preference store
198,198c251,251
< 			units = getPreferenceStore().getInt(IPreferenceConstants.PREF_RULER_UNITS);
---
> 			units = getPreferenceStore().getInt(IPreferenceConstants.PREF_RULER_UNITS);
199a253,256
> 		}
> 		return units;
> 	}
> 
199,199c252,252
< 			oldUnits = units;
---
> 			oldUnits = units;
203a228,228
> 			case INCHES:
204,204d227
< 			case 0: // Inches
207a232,232
> 			case CENTIMETERS:
208,208d231
< 			case 1: // CM
211a236,236
> 			case PIXELS:
212,212d235
< 			case 2: // Pixels
