74,74c74,74
< 	public TypePattern resolve(EClass type, EPackage domainPackage, EClass diagramClass) {
---
> 	public TypePattern resolve(EClass type, EPackage scope) {
78,78c78,78
< 		EReference[] containments = getContainments(type, domainPackage);
---
> 		EReference[] containments = getContainments(type, scope);
89,91d88
< 			if (diagramClass != null && !ContainmentClosure.contains(diagramClass, type, domainPackage)) {
< 				return null; // type can't be contained within the diagram class
< 			}
112,119d108
< 		if (diagramClass != null) {
< 			if (source != null && !ContainmentClosure.contains(diagramClass, source.getEReferenceType(), domainPackage)) {
< 				return null; // source type can't be contained within the diagram class
< 			}
< 			if (target != null && !ContainmentClosure.contains(diagramClass, target.getEReferenceType(), domainPackage)) {
< 				return null; // target type can't be contained within the diagram class
< 			}
< 		}
156,156c145,145
< 	protected EReference[] getContainments(EClass type, EPackage domainPackage) {
---
> 	protected EReference[] getContainments(EClass type, EPackage scope) {
158,158c147,147
< 		for (Iterator it = domainPackage.eAllContents(); it.hasNext();) {
---
> 		for (Iterator it = scope.eAllContents(); it.hasNext();) {
