14,14d13
< import org.eclipse.emf.ecore.util.EcoreUtil;
15a15,15
> import org.eclipse.gmf.codegen.gmfgen.GenAuditRoot;
30a31,32
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getRoot <em>Root</em>}</li>
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getContextSelectorLocalClassName <em>Context Selector Local Class Name</em>}</li>
37,37c40,40
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getContainer <em>Container</em>}</li>
---
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenAuditRuleImpl#getCategory <em>Category</em>}</li>
45a48,67
> 	 * The default value of the '{@link #getContextSelectorLocalClassName() <em>Context Selector Local Class Name</em>}' attribute.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getContextSelectorLocalClassName()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected static final String CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT = null;
> 
> 	/**
> 	 * The cached value of the '{@link #getContextSelectorLocalClassName() <em>Context Selector Local Class Name</em>}' attribute.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getContextSelectorLocalClassName()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected String contextSelectorLocalClassName = CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT;
> 
> 	/**
155a178,187
> 	 * The cached value of the '{@link #getCategory() <em>Category</em>}' reference.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @see #getCategory()
> 	 * @generated
> 	 * @ordered
> 	 */
> 	protected GenAuditContainer category = null;
> 
> 	/**
177a210,219
> 	public GenAuditRoot getRoot() {
> 		if (eContainerFeatureID != GMFGenPackage.GEN_AUDIT_RULE__ROOT) return null;
> 		return (GenAuditRoot)eContainer();
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
345a504,518
> 	public GenAuditContainer getCategory() {
> 		if (category != null && category.eIsProxy()) {
> 			InternalEObject oldCategory = (InternalEObject)category;
> 			category = (GenAuditContainer)eResolveProxy(oldCategory);
> 			if (category != oldCategory) {
> 				if (eNotificationRequired())
> 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFGenPackage.GEN_AUDIT_RULE__CATEGORY, oldCategory, category));
> 			}
> 		}
> 		return category;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
346,346c519,519
< 	 * @generated
---
> 	 * @generated
347a521,522
> 	public GenAuditContainer basicGetCategory() {
> 		return category;
347,347c520,520
< 	 */
---
> 	 */
348,350d520
< 	public GenAuditContainer getContainer() {
< 		if (eContainerFeatureID != GMFGenPackage.GEN_AUDIT_RULE__CONTAINER) return null;
< 		return (GenAuditContainer)eContainer();
351,351c523,523
< 	}
---
> 	}
352,352c524,524
< 
---
> 
353,353c525,525
< 	/**
---
> 	/**
354,354c526,526
< 	 * <!-- begin-user-doc -->
---
> 	 * <!-- begin-user-doc -->
355,355c527,527
< 	 * <!-- end-user-doc -->
---
> 	 * <!-- end-user-doc -->
356,356c528,528
< 	 * @generated
---
> 	 * @generated
357a530,536
> 	public NotificationChain basicSetCategory(GenAuditContainer newCategory, NotificationChain msgs) {
> 		GenAuditContainer oldCategory = category;
> 		category = newCategory;
> 		if (eNotificationRequired()) {
> 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CATEGORY, oldCategory, newCategory);
> 			if (msgs == null) msgs = notification; else msgs.add(notification);
> 		}
357,357c529,529
< 	 */
---
> 	 */
358,359d529
< 	public NotificationChain basicSetContainer(GenAuditContainer newContainer, NotificationChain msgs) {
< 		msgs = eBasicSetContainer((InternalEObject)newContainer, GMFGenPackage.GEN_AUDIT_RULE__CONTAINER, msgs);
360,360c537,537
< 		return msgs;
---
> 		return msgs;
361,361c538,538
< 	}
---
> 	}
362,362c539,539
< 
---
> 
363,363c540,540
< 	/**
---
> 	/**
364,364c541,541
< 	 * <!-- begin-user-doc -->
---
> 	 * <!-- begin-user-doc -->
365,365c542,542
< 	 * <!-- end-user-doc -->
---
> 	 * <!-- end-user-doc -->
366,366c543,543
< 	 * @generated
---
> 	 * @generated
367a545,546
> 	public void setCategory(GenAuditContainer newCategory) {
> 		if (newCategory != category) {
367,367c544,544
< 	 */
---
> 	 */
368,371d544
< 	public void setContainer(GenAuditContainer newContainer) {
< 		if (newContainer != eInternalContainer() || (eContainerFeatureID != GMFGenPackage.GEN_AUDIT_RULE__CONTAINER && newContainer != null)) {
< 			if (EcoreUtil.isAncestor(this, newContainer))
< 				throw new IllegalArgumentException("Recursive containment not allowed for " + toString());
372a548,552
> 			if (category != null)
> 				msgs = ((InternalEObject)category).eInverseRemove(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
> 			if (newCategory != null)
> 				msgs = ((InternalEObject)newCategory).eInverseAdd(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
> 			msgs = basicSetCategory(newCategory, msgs);
372,372c547,547
< 			NotificationChain msgs = null;
---
> 			NotificationChain msgs = null;
373,377d547
< 			if (eInternalContainer() != null)
< 				msgs = eBasicRemoveFromContainer(msgs);
< 			if (newContainer != null)
< 				msgs = ((InternalEObject)newContainer).eInverseAdd(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
< 			msgs = basicSetContainer(newContainer, msgs);
378,378c553,553
< 			if (msgs != null) msgs.dispatch();
---
> 			if (msgs != null) msgs.dispatch();
379,379c554,554
< 		}
---
> 		}
380a556,556
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CATEGORY, newCategory, newCategory));
380,380c555,555
< 		else if (eNotificationRequired())
---
> 		else if (eNotificationRequired())
381,381d555
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CONTAINER, newContainer, newContainer));
382,382c557,557
< 	}
---
> 	}
383,383c558,558
< 
---
> 
384,384c559,559
< 	/**
---
> 	/**
385,385c560,560
< 	 * <!-- begin-user-doc -->
---
> 	 * <!-- begin-user-doc -->
386,386c561,561
< 	 * <!-- end-user-doc -->
---
> 	 * <!-- end-user-doc -->
386a562,563
> 	 * @generated
> 	 */
410a412,418
> 	 * @generated
> 	 */
> 	public String getContextSelectorLocalClassNameGen() {
> 		return contextSelectorLocalClassName;
> 	}
> 
> 	/**
413a422,424
> 		if (getContextSelectorLocalClassNameGen() != null) {
> 			return getContextSelectorLocalClassNameGen();
> 		}
422a434,445
> 	 * @generated
> 	 */
> 	public void setContextSelectorLocalClassName(String newContextSelectorLocalClassName) {
> 		String oldContextSelectorLocalClassName = contextSelectorLocalClassName;
> 		contextSelectorLocalClassName = newContextSelectorLocalClassName;
> 		if (eNotificationRequired())
> 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME, oldContextSelectorLocalClassName, contextSelectorLocalClassName));
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
437a461,461
> 		return "Adapter" + (getRoot().getRules().indexOf(this) + 1); //$NON-NLS-1$ 
438,451d460
< 		if(getContainer() == null) {
< 			return null;
< 		}
< 		StringBuffer buf = new StringBuffer();
< 		for(GenAuditContainer container = getContainer(); container != null;) {
< 			GenAuditContainer parent = container.getParentContainer();
< 			if(parent != null) {
< 				buf.insert(0, parent.getChildContainers().indexOf(container) + 1);
< 			}
< 			container = parent;
< 		}
< 		buf.insert(0, "Adapter"); //$NON-NLS-1$
< 		buf.append(getContainer().getAudits().indexOf(this) + 1);
< 		return buf.toString(); 
466a477,478
> 		if(getRoot() != null) {
> 			return getRoot().getEditorGen().getDiagram();
467,468d476
< 		if(getContainer() != null && getContainer().getEditor() != null) {
< 			return getContainer().getEditor().getDiagram();
496,496c566,566
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
498a569,572
> 				return eBasicSetContainer(otherEnd, GMFGenPackage.GEN_AUDIT_RULE__ROOT, msgs);
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				if (category != null)
> 					msgs = ((InternalEObject)category).eInverseRemove(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
499,499c573,573
< 				return basicSetContainer((GenAuditContainer)otherEnd, msgs);
---
> 				return basicSetCategory((GenAuditContainer)otherEnd, msgs);
510a585,586
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
> 				return eBasicSetContainer(null, GMFGenPackage.GEN_AUDIT_RULE__ROOT, msgs);
515,515c591,591
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
516,516c592,592
< 				return basicSetContainer(null, msgs);
---
> 				return basicSetCategory(null, msgs);
527a604,604
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
528,528d603
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
529,529c605,605
< 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_AUDIT_CONTAINER__AUDITS, GenAuditContainer.class, msgs);
---
> 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_AUDIT_ROOT__RULES, GenAuditRoot.class, msgs);
553,553c617,617
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
554,554c618,618
< 				return getContainer();
---
> 				return getRoot();
554a619,620
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				return getContextSelectorLocalClassName();
556a635,637
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
> 				if (resolve) return getCategory();
> 				return basicGetCategory();
567a649,651
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				setContextSelectorLocalClassName((String)newValue);
> 				return;
586,586c670,670
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
587,587c671,671
< 				setContainer((GenAuditContainer)newValue);
---
> 				setCategory((GenAuditContainer)newValue);
599a684,686
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				setContextSelectorLocalClassName(CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT);
> 				return;
618,618c705,705
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
619,619c706,706
< 				setContainer((GenAuditContainer)null);
---
> 				setCategory((GenAuditContainer)null);
631a719,722
> 			case GMFGenPackage.GEN_AUDIT_RULE__ROOT:
> 				return getRoot() != null;
> 			case GMFGenPackage.GEN_AUDIT_RULE__CONTEXT_SELECTOR_LOCAL_CLASS_NAME:
> 				return CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT == null ? contextSelectorLocalClassName != null : !CONTEXT_SELECTOR_LOCAL_CLASS_NAME_EDEFAULT.equals(contextSelectorLocalClassName);
644,644c737,737
< 			case GMFGenPackage.GEN_AUDIT_RULE__CONTAINER:
---
> 			case GMFGenPackage.GEN_AUDIT_RULE__CATEGORY:
645,645c738,738
< 				return getContainer() != null;
---
> 				return category != null;
660a752,753
> 		result.append(" (contextSelectorLocalClassName: ");
> 		result.append(contextSelectorLocalClassName);
661,661c754,754
< 		result.append(" (id: ");
---
> 		result.append(", id: ");
