68a69,69
> import org.eclipse.emf.edit.ui.provider.UnwrappingSelectionProvider;
634a636,637
> 		initializeEditingDomain();
> 	}
635a639,645
> 	/**
> 	 * This sets up the editing domain for the model editor.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	protected void initializeEditingDomain() {
637a650,654
> 		adapterFactory.addAdapterFactory(new ResourceItemProviderAdapterFactory());
> 		adapterFactory.addAdapterFactory(new GMFMapItemProviderAdapterFactory());
> 		adapterFactory.addAdapterFactory(new GMFGraphItemProviderAdapterFactory());
> 		adapterFactory.addAdapterFactory(new GMFToolItemProviderAdapterFactory());
> 		adapterFactory.addAdapterFactory(new EcoreItemProviderAdapterFactory());
638,643d649
< 		List<AdapterFactory> factories = new ArrayList<AdapterFactory>();
< 		factories.add(new ResourceItemProviderAdapterFactory());
< 		factories.add(new GMFMapItemProviderAdapterFactory());
< 		factories.add(new GMFGraphItemProviderAdapterFactory());
< 		factories.add(new GMFToolItemProviderAdapterFactory());
< 		factories.add(new EcoreItemProviderAdapterFactory());
644,644c655,655
< 		factories.add(new ReflectiveItemProviderAdapterFactory());
---
> 		adapterFactory.addAdapterFactory(new ReflectiveItemProviderAdapterFactory());
646,646c648,648
< 		adapterFactory = new ComposedAdapterFactory(factories);
---
> 		adapterFactory = new ComposedAdapterFactory(ComposedAdapterFactory.Descriptor.Registry.INSTANCE);
848,848c857,857
< 		getSite().registerContextMenu(contextMenu, viewer);
---
> 		getSite().registerContextMenu(contextMenu, new UnwrappingSelectionProvider(viewer));
1410a1420,1424
> 		// Save only resources that have actually changed.
> 		//
> 		final Map<Object, Object> saveOptions = new HashMap<Object, Object>();
> 		saveOptions.put(Resource.OPTION_SAVE_ONLY_IF_CHANGED, Resource.OPTION_SAVE_ONLY_IF_CHANGED_MEMORY_BUFFER);
> 
1426,1426c1440,1440
< 								resource.save(Collections.EMPTY_MAP);
---
> 								resource.save(saveOptions);
