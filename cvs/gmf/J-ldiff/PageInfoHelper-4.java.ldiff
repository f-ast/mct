23a31,31
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
24,24c32,32
< import org.eclipse.jface.preference.IPreferenceStore;
---
> import org.eclipse.jface.preference.IPreferenceStore;
25,25c33,33
< import org.eclipse.swt.SWT;
---
> import org.eclipse.swt.SWT;
26,26c34,34
< import org.eclipse.swt.SWTError;
---
> import org.eclipse.swt.SWTError;
27,27c35,35
< import org.eclipse.swt.printing.Printer;
---
> import org.eclipse.swt.printing.Printer;
28,28c36,36
< import org.eclipse.swt.widgets.Display;
---
> import org.eclipse.swt.widgets.Display;
29,29d36
< 
37,37d30
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
107a107,107
>     public static Point getPageSize(IPreferenceStore store, IMapMode mm) {
108,108d106
<     public static Point getPageSize(IPreferenceStore store) {
109,109c108,108
<     	return getPageSize(store, true);
---
>     	return getPageSize(store, true, mm);
116,116c115,115
<     public static Point getPageSize(IPreferenceStore store, boolean subtractMargins) {
---
>     public static Point getPageSize(IPreferenceStore store, boolean subtractMargins, IMapMode mm) {
156a156,156
> 		paperSize[0] = mm.DPtoLP((int)(width * displayDPI.x));
157,157d155
< 		paperSize[0] = MapMode.DPtoLP((int)(width * displayDPI.x));
158,158c157,157
< 		paperSize[1] = MapMode.DPtoLP((int)(height * displayDPI.y));
---
> 		paperSize[1] = mm.DPtoLP((int)(height * displayDPI.y));
270,270c269,269
< 	public static PageMargins getPageMargins(IPreferenceStore preferenceStore) {
---
> 	public static PageMargins getPageMargins(IPreferenceStore preferenceStore, IMapMode mm) {
275,275d273
< 		margins.left = MapMode
276,276c274,274
< 		.DPtoLP((int) ( displayDPI.x * preferenceStore
---
> 		margins.left = mm.DPtoLP((int) ( displayDPI.x * preferenceStore
278,278d275
< 		margins.right = MapMode
279,279c276,276
< 		.DPtoLP((int) ( displayDPI.x * preferenceStore
---
> 		margins.right = mm.DPtoLP((int) ( displayDPI.x * preferenceStore
281,281d277
< 		margins.top = MapMode
282,282c278,278
< 		.DPtoLP((int) ( displayDPI.y * preferenceStore
---
> 		margins.top = mm.DPtoLP((int) ( displayDPI.y * preferenceStore
284,284d279
< 		margins.bottom = MapMode
285,285c280,280
< 		.DPtoLP((int) ( displayDPI.y * preferenceStore
---
> 		margins.bottom = mm.DPtoLP((int) ( displayDPI.y * preferenceStore
