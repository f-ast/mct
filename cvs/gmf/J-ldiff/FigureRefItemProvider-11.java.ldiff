16,16d15
< import org.eclipse.emf.ecore.EStructuralFeature;
24,27d22
< import org.eclipse.emf.edit.provider.ItemProviderAdapter;
< import org.eclipse.emf.edit.provider.ViewerNotification;
< import org.eclipse.gmf.gmfgraph.FigureRef;
< import org.eclipse.gmf.gmfgraph.GMFGraphFactory;
37,37c32,32
< 	extends ItemProviderAdapter
---
> 	extends AbstractFigureItemProvider
93,123d87
< 	 * This specifies how to implement {@link #getChildren} and is used to deduce an appropriate feature for an
< 	 * {@link org.eclipse.emf.edit.command.AddCommand}, {@link org.eclipse.emf.edit.command.RemoveCommand} or
< 	 * {@link org.eclipse.emf.edit.command.MoveCommand} in {@link #createCommand}.
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	@Override
< 	public Collection<? extends EStructuralFeature> getChildrenFeatures(Object object) {
< 		if (childrenFeatures == null) {
< 			super.getChildrenFeatures(object);
< 			childrenFeatures.add(GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
< 			childrenFeatures.add(GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
< 		}
< 		return childrenFeatures;
< 	}
< 
< 	/**
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @generated
< 	 */
< 	@Override
< 	protected EStructuralFeature getChildFeature(Object object, Object child) {
< 		// Check the type of the specified child object and return the proper feature to use for
< 		// adding (see {@link AddCommand}) it as a child.
< 
< 		return super.getChildFeature(object, child);
< 	}
< 
< 	/**
155,161d118
< 
< 		switch (notification.getFeatureID(FigureRef.class)) {
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT_DATA:
< 			case GMFGraphPackage.FIGURE_REF__LAYOUT:
< 				fireNotifyChanged(new ViewerNotification(notification, notification.getNotifier(), true, false));
< 				return;
< 		}
174a132,132
> 	}
175a134,159
> 	/**
> 	 * This returns the label text for {@link org.eclipse.emf.edit.command.CreateChildCommand}.
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	@Override
> 	public String getCreateChildText(Object owner, Object feature, Object child, Collection<?> selection) {
> 		Object childFeature = feature;
> 		Object childObject = child;
> 
> 		boolean qualify =
> 			childFeature == GMFGraphPackage.eINSTANCE.getFigure_ForegroundColor() ||
> 			childFeature == GMFGraphPackage.eINSTANCE.getFigure_BackgroundColor() ||
> 			childFeature == GMFGraphPackage.eINSTANCE.getFigure_MaximumSize() ||
> 			childFeature == GMFGraphPackage.eINSTANCE.getFigure_MinimumSize() ||
> 			childFeature == GMFGraphPackage.eINSTANCE.getFigure_PreferredSize() ||
> 			childFeature == GMFGraphPackage.eINSTANCE.getFigure_Location() ||
> 			childFeature == GMFGraphPackage.eINSTANCE.getFigure_Size();
> 
> 		if (qualify) {
> 			return getString
> 				("_UI_CreateChild_text2",
> 				 new Object[] { getTypeText(childObject), getFeatureText(childFeature), getTypeText(owner) });
> 		}
> 		return super.getCreateChildText(owner, feature, child, selection);
176,224d133
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData(),
< 				 GMFGraphFactory.eINSTANCE.createCustomLayoutData()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData(),
< 				 GMFGraphFactory.eINSTANCE.createGridLayoutData()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData(),
< 				 GMFGraphFactory.eINSTANCE.createBorderLayoutData()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData(),
< 				 GMFGraphFactory.eINSTANCE.createXYLayoutData()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(),
< 				 GMFGraphFactory.eINSTANCE.createCustomLayout()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(),
< 				 GMFGraphFactory.eINSTANCE.createGridLayout()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(),
< 				 GMFGraphFactory.eINSTANCE.createBorderLayout()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(),
< 				 GMFGraphFactory.eINSTANCE.createFlowLayout()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(),
< 				 GMFGraphFactory.eINSTANCE.createXYLayout()));
< 
< 		newChildDescriptors.add
< 			(createChildParameter
< 				(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(),
< 				 GMFGraphFactory.eINSTANCE.createStackLayout()));
