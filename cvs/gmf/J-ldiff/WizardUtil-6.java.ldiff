13a14,16
> import java.util.HashMap;
> import java.util.Map;
> 
16a20,20
> import org.eclipse.core.runtime.IProgressMonitor;
21a26,28
> import org.eclipse.emf.ecore.resource.Resource;
> import org.eclipse.emf.ecore.xmi.XMLResource;
> import org.eclipse.gmf.internal.bridge.ui.Plugin;
22,22d25
< import org.eclipse.gmf.gmfgraph.provider.GMFGraphEditPlugin;
26a33,33
> import org.eclipse.jface.wizard.IWizardContainer;
33,33c40,40
< import org.eclipse.ui.internal.UIPlugin;
---
> import org.eclipse.ui.actions.WorkspaceModifyOperation;
41a49,50
> 	// Wizard operation modes
> 
90a100,118
> 	@SuppressWarnings("unchecked")
> 	public static void saveModel(IWizardContainer container, final Resource resource) throws Exception {
> 		WorkspaceModifyOperation operation = new WorkspaceModifyOperation() {
> 
> 			protected void execute(IProgressMonitor progressMonitor) {
> 				try {
> 					Map options = new HashMap();
> 					options.put(XMLResource.OPTION_ENCODING, "UTF-8"); //$NON-NLS-1$
> 					resource.save(options);
> 				} catch (Exception exception) {
> 					Plugin.log(exception);
> 				} finally {
> 					progressMonitor.done();
> 				}
> 			}
> 		};
> 		container.run(false, false, operation);
> 	}
> 
144a173,173
> 
