146a147,161
>         // Make sure the palette container is still in the palette root and has
>         // not been removed.  See bugzilla#176752.
>         PaletteRoot realPaletteRoot = getHost().getViewer().getEditDomain()
>             .getPaletteViewer().getPaletteRoot();
>         PaletteContainer paletteRoot = container;
>         boolean sameRoot = false;
>         while (paletteRoot != null) {
>             paletteRoot = paletteRoot.getParent();
>             if (paletteRoot == realPaletteRoot) {
>                 sameRoot = true;
>                 break;
>             }
>         }
> 
>         if (sameRoot) {
148a164,164
>  	}
236a253,253
>         
