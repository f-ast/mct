2,2c2,2
<  * Copyright (c) 2004 IBM Corporation and others.
---
>  * Copyright (c) 2004, 2007 IBM Corporation and others.
111a112,114
> 			// set checked to 'false' if the IDiagramWorkbenchPart doesn't have a
> 			// graphical viewer or the viewer doesn't have a preference store
> 			boolean shouldBeChecked = false;
114a118,119
> 				
> 				if (viewer != null) {
115a121,122
> 					
> 					if (preferenceStore != null) {
116,116c123,123
< 				boolean shouldBeChecked = preferenceStore.getBoolean(WorkspaceViewerProperties.VIEWGRID);
---
> 						shouldBeChecked = preferenceStore.getBoolean(WorkspaceViewerProperties.VIEWGRID);
116a124,125
> 					}
> 				}
