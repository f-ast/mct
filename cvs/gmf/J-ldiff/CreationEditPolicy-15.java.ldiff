21a22,22
> import org.eclipse.core.resources.IFile;
23a25,26
> import org.eclipse.core.runtime.IStatus;
> import org.eclipse.core.runtime.Status;
34a38,38
> import org.eclipse.gmf.runtime.common.core.command.FileModificationValidator;
380a385,391
> 					
> 					// validate the affected files
> 					IStatus status = validateAffectedFiles(_createCmd);
> 					if (!status.isOK()) {
> 						return new CommandResult(status);
> 					}
> 					
398a410,414
> 						// validate the affected files
> 						IStatus status = validateAffectedFiles(_createCmd);
> 						if (!status.isOK()) {
> 							return new CommandResult(status);
> 						}
408a425,429
> 						// validate the affected files
> 						IStatus status = validateAffectedFiles(_createCmd);
> 						if (!status.isOK()) {
> 							return new CommandResult(status);
> 						}
412a434,445
> 				
> 				private IStatus validateAffectedFiles(Command command) {
> 					Collection affectedFiles = CommandUtilities
> 							.getAffectedFiles(command);
> 					int fileCount = affectedFiles.size();
> 					if (fileCount > 0) {
> 						return FileModificationValidator
> 								.approveFileModification((IFile[]) affectedFiles
> 										.toArray(new IFile[fileCount]));
> 					}
> 					return Status.OK_STATUS;
> 				}
