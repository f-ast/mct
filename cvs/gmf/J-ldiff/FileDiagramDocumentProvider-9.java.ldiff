172a173,173
> 		doSave(domain, file, diagram, null, monitor);
173,174d172
< 
< 		DiagramIOUtil.save(domain, file, diagram, DiagramIOUtil.hasUnrecognizedData(diagram.eResource()), monitor);
333a333,357
>     /**
>      * Handles the saving of the diagram to a file
>      * 
>      * @param domain
>      *            the TransactionalEditingDomain we are saving in
>      * @param file
>      *            the IFile to save to
>      * @param diagram
>      *            Diagram that will be saved
>      * @param options
>      *            save options or null
>      * @param monitor
>      *            IProgressMonitor
>      * @throws CoreException
>      */
>     protected void doSave(TransactionalEditingDomain domain, IFile file,
>             Diagram diagram, Map options, IProgressMonitor monitor)
>         throws CoreException {
>         if (options == null) {
>             DiagramIOUtil.save(domain, file, diagram, DiagramIOUtil
>                 .hasUnrecognizedData(diagram.eResource()), monitor);
>         } else {
>             DiagramIOUtil.save(domain, file, diagram, monitor, options);
>         }
>     }
