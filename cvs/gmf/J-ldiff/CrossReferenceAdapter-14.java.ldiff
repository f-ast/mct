38a39,39
> import org.eclipse.emf.ecore.util.ExtendedMetaData;
951,951c952,952
<                     if (feature.isChangeable())
---
>                     if (isMutable(feature))
961a963,988
>      * Queries whether a feature is mutable.  A feature is considered
>      * mutable if and only if it is changeable and it is either not derived
>      * or it is a member of a feature map (though not itself a feature map).
>      * 
>      * @param feature the feature to test
>      * 
>      * @return <code>true</code> if the reference is mutable;
>      *     <code>false</code>, otherwise
>      */
>     static boolean isMutable(EStructuralFeature feature) {
>         boolean result = feature.isChangeable();
>         
>         if (result) {
>             if (feature.isDerived()) {
>                 // check whether it is a feature-map member that is not, itself,
>                 //    a feature map
>                 EStructuralFeature group = ExtendedMetaData.INSTANCE.getGroup(feature);
>                 
>                 result = (group != null) && !FeatureMapUtil.isFeatureMap(feature);
>             }
>         }
>         
>         return result;
>     }
> 
> 	/**
