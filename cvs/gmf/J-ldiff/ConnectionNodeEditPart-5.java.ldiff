14,14d13
< import java.beans.PropertyChangeEvent;
25,25d23
< 
27,27d25
< import org.eclipse.gmf.runtime.diagram.core.listener.NotificationEvent;
28,28c26,26
< import org.eclipse.gmf.runtime.diagram.ui.editpolicies.GraphicalNodeEditPolicy;
---
> import org.eclipse.gmf.runtime.diagram.ui.editpolicies.GraphicalNodeEditPolicy;
29,29d26
< import org.eclipse.gmf.runtime.diagram.ui.properties.Properties;
33,33d28
< import org.eclipse.gmf.runtime.emf.core.util.MetaModelUtil;
39,41d33
< /*
<  * @canBeSeenBy %partners
<  */
173,190d164
< 	/**
< 	 * @see org.eclipse.gmf.runtime.diagram.ui.editparts.ConnectionEditPart#handlePropertyChangeEvent(java.beans.PropertyChangeEvent)
< 	 */
< 	protected void handlePropertyChangeEvent(PropertyChangeEvent event) {
< 		if (Properties.ID_SOURCECONNECTIONS.equals(event.getPropertyName()))
< 			refreshSourceConnections();
< 		else
< 		if (Properties.ID_TARGETCONNECTIONS.equals(event.getPropertyName()))
< 			refreshTargetConnections();
< 		else
< 			super.handlePropertyChangeEvent(event);
< 
<         Object element = MetaModelUtil.getElement(event.getPropertyName());
<         if (element != null && element.equals(NotationPackage.eINSTANCE.getIdentityAnchor_Id())) {
<         	anchorChange();
<         }
< 	}
< 		
201a176,182
> 		Object feature = notification.getFeature();
> 		if (NotationPackage.eINSTANCE.getView_SourceEdges().equals(feature))
> 			refreshSourceConnections();
> 		else
> 		if (NotationPackage.eINSTANCE.getView_TargetEdges().equals(feature))
> 			refreshTargetConnections();
> 		else
201,201c175,175
< 	protected void handleNotificationEvent(NotificationEvent e) {
---
> 	protected void handleNotificationEvent(Notification notification) {
202,202c183,183
< 		super.handleNotificationEvent(e);
---
> 			super.handleNotificationEvent(notification);
202a184,185
> 
>         if (  NotationPackage.eINSTANCE.getIdentityAnchor_Id().equals(feature) ||
203,203d183
< 		Notification event = e.getNotification();
204,204c186,186
< 		if (event.getNewValue() instanceof IdentityAnchor ||
---
>         	  notification.getNewValue() instanceof IdentityAnchor ||
205,205c187,187
< 	 			event.getOldValue() instanceof IdentityAnchor){
---
>         	  notification.getOldValue() instanceof IdentityAnchor) {
