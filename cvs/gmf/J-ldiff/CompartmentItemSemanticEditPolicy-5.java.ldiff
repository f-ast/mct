2,2c2,2
<  * Copyright (c) 2006 Borland Software Corporation and others.
---
>  *  Copyright (c) 2006, 2007 Borland Software Corporation and others.
16a31,31
> import org.eclipse.gmf.runtime.notation.Edge;
16a13,18
> import java.util.ArrayList;
> import java.util.Collection;
> import java.util.Collections;
> import java.util.Iterator;
> 
> import org.eclipse.emf.ecore.EAnnotation;
17,17c19,19
< import org.eclipse.emf.ecore.EObject;
---
> import org.eclipse.emf.ecore.EObject;
18,18c20,20
< import org.eclipse.emf.ecore.EAnnotation;
---
> import org.eclipse.gef.EditPart;
19a22,22
> import org.eclipse.gef.commands.CompoundCommand;
20,20c23,23
< import org.eclipse.gef.commands.UnexecutableCommand;
---
> import org.eclipse.gef.commands.UnexecutableCommand;
21,21d23
< 
22a25,25
> import org.eclipse.gmf.graphdef.editor.edit.parts.CompartmentEditPart;
22,22c24,24
< import org.eclipse.gmf.gmfgraph.DiagramElement;
---
> import org.eclipse.gmf.gmfgraph.DiagramElement;
23,23d24
< 
24,24c26,26
< import org.eclipse.gmf.graphdef.editor.providers.GMFGraphElementTypes;
---
> import org.eclipse.gmf.graphdef.editor.providers.GMFGraphElementTypes;
24a27,27
> import org.eclipse.gmf.runtime.diagram.ui.requests.EditCommandRequestWrapper;
34a43,55
> 		CompoundCommand cc = new CompoundCommand();
> 		Collection allEdges = new ArrayList();
> 		View view = (View) getHost().getModel();
> 		allEdges.addAll(view.getSourceEdges());
> 		allEdges.addAll(view.getTargetEdges());
> 		for (Iterator it = allEdges.iterator(); it.hasNext();) {
> 			Edge nextEdge = (Edge) it.next();
> 			EditPart nextEditPart = (EditPart) getHost().getViewer().getEditPartRegistry().get(nextEdge);
> 			EditCommandRequestWrapper editCommandRequest = new EditCommandRequestWrapper(new DestroyElementRequest(((CompartmentEditPart) getHost()).getEditingDomain(), req.isConfirmationRequired()),
> 					Collections.EMPTY_MAP);
> 			cc.add(nextEditPart.getCommand(editCommandRequest));
> 		}
> 		cc.add(getMSLWrapper(new DestroyElementCommand(req) {
35,35d42
< 		return getMSLWrapper(new DestroyElementCommand(req) {
45a95,95
> 
45a66,67
> 		}));
> 		return cc;
46,46d94
< 		});
54,54c75,75
< 			return req.getTarget() == null ? getCreateStartOutgoingDiagramElement_Figure4001Command(req) : null;
---
> 			return req.getTarget() == null ? getCreateStartOutgoingDiagramElementFigure_4001Command(req) : null;
61a83,89
> 	protected Command getCreateStartOutgoingDiagramElementFigure_4001Command(CreateRelationshipRequest req) {
> 		EObject sourceEObject = req.getSource();
> 		if (false == sourceEObject instanceof DiagramElement) {
> 			return UnexecutableCommand.INSTANCE;
> 		}
> 		DiagramElement source = (DiagramElement) sourceEObject;
> 		if (!GMFGraphBaseItemSemanticEditPolicy.LinkConstraints.canCreateDiagramElementFigure_4001(source, null)) {
62,64d82
< 	protected Command getCreateStartOutgoingDiagramElement_Figure4001Command(CreateRelationshipRequest req) {
< 		DiagramElement element = (DiagramElement) getSemanticElement();
< 		if (element.getFigure() != null) {
67,67d91
< 
