381a382,385
> 		IStructuredSelection structuredSelection = getSelectedElements();
> 		if (structuredSelection == null) {
> 			return;
> 		}
382,382d381
< 		List selection = new ArrayList();
383a387,387
> 		List selection = new ArrayList();
384,384c388,388
< 		for (Iterator e = getSelectedElements().iterator(); e.hasNext();) {
---
> 		for (Iterator e = structuredSelection.iterator(); e.hasNext();) {
