33a34,34
> import org.eclipse.gmf.codegen.gmfgen.LinkModelFacet;
34a36,37
> import org.eclipse.gmf.codegen.gmfgen.TypeLinkModelFacet;
> import org.eclipse.gmf.codegen.gmfgen.TypeModelFacet;
1967a1971,1972
> 			TypeModelFacet modelFacet = nextNode.getModelFacet();
> 			if(modelFacet.getModelElementInitializer() != null) {
1968,1968d1970
< 			if(nextNode.getModelElementInitializer() != null) {
1969,1969c1973,1973
< 				requiredIDs.addAll(Arrays.asList(nextNode.getModelElementInitializer().getRequiredPluginIDs()));
---
> 				requiredIDs.addAll(Arrays.asList(modelFacet.getModelElementInitializer().getRequiredPluginIDs()));
1970a1975,1975
> 			if(modelFacet.getModelElementSelector() != null) {
1971,1971d1974
< 			if(nextNode.getModelElementSelector() != null) {
1972,1972c1976,1976
< 				requiredIDs.addAll(Arrays.asList(nextNode.getModelElementSelector().getRequiredPluginIDs()));				
---
> 				requiredIDs.addAll(Arrays.asList(modelFacet.getModelElementSelector().getRequiredPluginIDs()));				
1976a1981,1982
> 				TypeModelFacet childModelFacet = nextChild.getModelFacet();
> 				if(childModelFacet.getModelElementInitializer() != null) {
1977,1977d1980
< 				if(nextChild.getModelElementInitializer() != null) {
1978,1978c1983,1983
< 					requiredIDs.addAll(Arrays.asList(nextChild.getModelElementInitializer().getRequiredPluginIDs()));
---
> 					requiredIDs.addAll(Arrays.asList(childModelFacet.getModelElementInitializer().getRequiredPluginIDs()));
1979a1985,1985
> 				if(childModelFacet.getModelElementSelector() != null) {
1980,1980d1984
< 				if(nextChild.getModelElementSelector() != null) {
1981,1981c1986,1986
< 					requiredIDs.addAll(Arrays.asList(nextChild.getModelElementSelector().getRequiredPluginIDs()));				
---
> 					requiredIDs.addAll(Arrays.asList(childModelFacet.getModelElementSelector().getRequiredPluginIDs()));				
1988,1989d1992
< 			if(nextLink.getModelElementInitializer() != null) {
< 				requiredIDs.addAll(Arrays.asList(nextLink.getModelElementInitializer().getRequiredPluginIDs()));
1990a1993,1999
> 			LinkModelFacet modelFacet = nextLink.getModelFacet();
> 			if(modelFacet instanceof TypeLinkModelFacet) {
> 				TypeLinkModelFacet  typeModelFacet = (TypeLinkModelFacet)modelFacet;
> 				if(typeModelFacet.getModelElementInitializer() != null) {
> 					requiredIDs.addAll(Arrays.asList(typeModelFacet.getModelElementInitializer().getRequiredPluginIDs()));
> 				}
> 				if(typeModelFacet.getModelElementSelector() != null) {
1991,1991d1992
< 			if(nextLink.getModelElementSelector() != null) {
1992,1992c2000,2000
< 				requiredIDs.addAll(Arrays.asList(nextLink.getModelElementSelector().getRequiredPluginIDs()));
---
> 					requiredIDs.addAll(Arrays.asList(typeModelFacet.getModelElementSelector().getRequiredPluginIDs()));
