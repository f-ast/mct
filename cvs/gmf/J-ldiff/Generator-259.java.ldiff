18a19,19
> import java.util.LinkedList;
34a36,38
> import org.eclipse.gmf.codegen.gmfgen.GenContributionItem;
> import org.eclipse.gmf.codegen.gmfgen.GenContributionManager;
> import org.eclipse.gmf.codegen.gmfgen.GenCustomAction;
52a57,57
> import org.eclipse.gmf.codegen.gmfgen.GenSharedContributionItem;
101a107,107
> 			generateModelAccessFacility();
117,119d122
< 		if (myEditorGen.getModelAccess() != null) {
< 			generateMetaModelFacility();
< 		}
206,208d208
< 		if (myEditorGen.getModelAccess() != null) {
< 			generateModelAccessFacility();
< 		}
285a286,286
> 		generateActions();
997a999,1015
> 	// actions
> 	private void generateActions() throws UnexpectedBehaviourException, InterruptedException {
> 		HashSet<GenContributionItem> processedItems = new HashSet<GenContributionItem>();
> 		for (GenContributionManager m : myEditorGen.getContextMenus()) {
> 			LinkedList<GenContributionItem> items = new LinkedList<GenContributionItem>(m.getItems());
> 			while (!items.isEmpty()) {
> 				GenContributionItem ci = items.removeFirst();
> 				if (ci instanceof GenCustomAction && ((GenCustomAction) ci).isGenerateBoilerplate() && !processedItems.contains(ci)) {
> 					doGenerateJavaClass(myEmitters.getCustomActionEmitter(), ((GenCustomAction) ci).getQualifiedClassName(), ci);
> 					processedItems.add(ci);
> 				} else if (ci instanceof GenContributionManager) {
> 					items.addAll(((GenContributionManager) ci).getItems());
> 				} else if (ci instanceof GenSharedContributionItem) {
> 					items.addLast(((GenSharedContributionItem) ci).getActualItem());
> 				}
> 			}
> 		}
998,999d998
< 	private void generateMetaModelFacility() throws UnexpectedBehaviourException, InterruptedException {
< 		doGenerateJavaClass(myEmitters.getMetaModelFacilityEmitter(), myEditorGen.getModelAccess().getQualifiedClassName(), myEditorGen.getModelAccess());
