21,21c25,25
< import org.eclipse.jface.operation.IRunnableContext;
---
> import org.eclipse.jface.operation.IRunnableContext;
22,22c26,26
< import org.eclipse.ui.IEditorInput;
---
> import org.eclipse.ui.IEditorInput;
23,23c27,27
< import org.eclipse.ui.PlatformUI;
---
> import org.eclipse.ui.PlatformUI;
24,24c28,28
< import org.osgi.framework.Bundle;
---
> import org.osgi.framework.Bundle;
25,25d28
< 
54a54,55
> 		public DiagramModificationListener fListener = null;
> 
61,61c62,62
< 		public DiagramResourceInfo(IDocument document) {
---
> 		public DiagramResourceInfo(IDocument document, DiagramModificationListener listener) {
62a64,64
> 			fListener = listener;
119a122,122
> 			DiagramModificationListener listener = new DiagramModificationListener(this, (DiagramDocument)document);
120,120c123,123
< 			ElementInfo info= new DiagramResourceInfo(document);
---
> 			ElementInfo info= new DiagramResourceInfo(document, listener);
121a125,125
> 			listener.startListening();
128a133,138
> 	protected void disposeElementInfo(Object element, ElementInfo info) {
> 		super.disposeElementInfo(element, info);
> 		
> 		((DiagramResourceInfo)info).fListener.stopListening();
> 	}
> 
