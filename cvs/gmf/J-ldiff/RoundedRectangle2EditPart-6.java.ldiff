41,43d40
< import org.eclipse.gmf.gmfgraph.Layout;
< import org.eclipse.gmf.gmfgraph.LayoutData;
< import org.eclipse.gmf.gmfgraph.LineKind;
127,127c124,124
< 		final NotificationListener layoutListener = new NotificationListener() {
---
> 		final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener() {
130,131d126
< 				Layout layout = (Layout) notification.getNotifier();
< 				layoutPropertyChanged(layout);
134,134c150,150
< 		if (modelElement.getLayout() != null) {
---
> 		if (modelElement.getLayout() != null) {
135,135c151,151
< 			addListenerFilter("LayoutPropertiesListener", layoutListener, modelElement.getLayout());
---
> 			addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
137,137c133,133
< 		addListenerFilter("ModelElementLayoutListener", new NotificationListener() {
---
> 		addListenerFilter("Layoutable_LayoutData_Listener", new NotificationListener() {
139a136,138
> 				removeListenerFilter("Layoutable_LayoutData_PropertiesListener");
> 				if (modelElement.getLayoutData() != null) {
> 					addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
140,143d135
< 				Layout newLayout = (Layout) notification.getNewValue();
< 				removeListenerFilter("LayoutPropertiesListener");
< 				if (newLayout != null) {
< 					addListenerFilter("LayoutPropertiesListener", layoutListener, newLayout);
144a140,140
> 				layoutDataChanged(modelElement.getLayoutData());
145,145d139
< 				layoutChanged(newLayout, true);
147,147c162,162
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
---
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
149,149c144,144
< 		final NotificationListener layoutDataListener = new NotificationListener() {
---
> 		final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener() {
152,152d146
< 				layoutDataPropertyChanged();
155,155c130,130
< 		if (modelElement.getLayoutData() != null) {
---
> 		if (modelElement.getLayoutData() != null) {
156,156c131,131
< 			addListenerFilter("LayoutDataPropertiesListener", layoutDataListener, modelElement.getLayoutData());
---
> 			addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
158,158c153,153
< 		addListenerFilter("ModelElementLayoutDataListener", new NotificationListener() {
---
> 		addListenerFilter("Layoutable_Layout_Listener", new NotificationListener() {
160a156,158
> 				removeListenerFilter("Layoutable_Layout_PropertiesListener");
> 				if (modelElement.getLayout() != null) {
> 					addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
161,164d155
< 				LayoutData newLayoutData = (LayoutData) notification.getNewValue();
< 				removeListenerFilter("LayoutDataPropertiesListener");
< 				if (newLayoutData != null) {
< 					addListenerFilter("LayoutDataPropertiesListener", layoutDataListener, newLayoutData);
165a160,160
> 				layoutChanged(modelElement.getLayout());
166,166c127,127
< 				layoutDataChanged();
---
> 				layoutDataChanged(modelElement.getLayoutData());
168,168c142,142
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
---
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
170,170c164,164
< 		addListenerFilter("ModelElementPropertiesListener", new NotificationListener() {
---
> 		addListenerFilter("Shape_Outline_Listener", new NotificationListener() {
173,177d166
< 				switch (notification.getFeatureID(RoundedRectangle.class)) {
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__OUTLINE: {
< 					boolean value = modelElement.isOutline();
< 					myFigure.setOutline(value);
< 					break;
178a169,174
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline());
> 
> 		addListenerFilter("Shape_Fill_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setFill(modelElement.isFill());
179,195d168
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__FILL: {
< 					boolean value = modelElement.isFill();
< 					myFigure.setFill(value);
< 					break;
< 				}
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__LINE_WIDTH: {
< 					int value = modelElement.getLineWidth();
< 					myFigure.setLineWidth(value);
< 					break;
< 				}
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__LINE_KIND: {
< 					LineKind value = modelElement.getLineKind();
< 					myFigure.setLineStyle("LINE_DASH".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DOT
< 							: "LINE_DASHDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT
< 									: "LINE_DASHDOTDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT
< 											: "LINE_CUSTOM".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
< 					break;
196a176,181
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill());
> 
> 		addListenerFilter("Shape_LineWidth_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setLineWidth(modelElement.getLineWidth());
197,200d175
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__XOR_FILL: {
< 					boolean value = modelElement.isXorFill();
< 					myFigure.setFillXOR(value);
< 					break;
201a183,188
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth());
> 
> 		addListenerFilter("Shape_LineKind_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setLineStyle(getLineStyle(modelElement.getLineKind()));
202,205d182
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__XOR_OUTLINE: {
< 					boolean value = modelElement.isXorOutline();
< 					myFigure.setOutlineXOR(value);
< 					break;
206a190,195
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind());
> 
> 		addListenerFilter("Shape_XorFill_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setFillXOR(modelElement.isXorFill());
206a204,208
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline());
> 
> 		addListenerFilter("RoundedRectangle_CornerWidth_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
207,208d203
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__CORNER_WIDTH: {
< 					int value = modelElement.getCornerWidth();
209,209c209,209
< 					myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(value), getMapMode().DPtoLP(modelElement.getCornerHeight())));
---
> 				myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(modelElement.getCornerWidth()), getMapMode().DPtoLP(modelElement.getCornerHeight())));
210,210d209
< 					break;
211a197,202
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill());
> 
> 		addListenerFilter("Shape_XorOutline_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
> 				myFigure.setOutlineXOR(modelElement.isXorOutline());
211a211,215
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerWidth());
> 
> 		addListenerFilter("RoundedRectangle_CornerHeight_Listener", new NotificationListener() {
> 
> 			public void notifyChanged(Notification notification) {
212,213d210
< 				case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__CORNER_HEIGHT: {
< 					int value = modelElement.getCornerHeight();
214,214c216,216
< 					myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(modelElement.getCornerWidth()), getMapMode().DPtoLP(value)));
---
> 				myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(modelElement.getCornerWidth()), getMapMode().DPtoLP(modelElement.getCornerHeight())));
215,215d216
< 					break;
218,218d210
< 				myFigure.repaint();
219a478,484
> 				layoutDataChanged(modelElement.getLayoutData());
> 			}
> 			{
> 				layoutChanged(modelElement.getLayout());
> 			}
> 			{
> 				myFigure.setOutline(modelElement.isOutline());
219a218,218
> 		}, modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerHeight());
220,220d477
< 		}, modelElement);
480,480c167,167
< 				boolean value = modelElement.isOutline();
---
> 				myFigure.setOutline(modelElement.isOutline());
481,481d167
< 				myFigure.setOutline(value);
484,484c487,487
< 				boolean value = modelElement.isFill();
---
> 				myFigure.setFill(modelElement.isFill());
485,485d487
< 				myFigure.setFill(value);
488,488c490,490
< 				int value = modelElement.getLineWidth();
---
> 				myFigure.setLineWidth(modelElement.getLineWidth());
489,489d490
< 				myFigure.setLineWidth(value);
491a493,493
> 				myFigure.setLineStyle(getLineStyle(modelElement.getLineKind()));
492,495d492
< 				LineKind value = modelElement.getLineKind();
< 				myFigure.setLineStyle("LINE_DASH".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DOT
< 						: "LINE_DASHDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT : "LINE_DASHDOTDOT".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT
< 								: "LINE_CUSTOM".equals(value.getName()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
498,498c496,496
< 				boolean value = modelElement.isXorFill();
---
> 				myFigure.setFillXOR(modelElement.isXorFill());
499,499d496
< 				myFigure.setFillXOR(value);
502,502c499,499
< 				boolean value = modelElement.isXorOutline();
---
> 				myFigure.setOutlineXOR(modelElement.isXorOutline());
503,503d499
< 				myFigure.setOutlineXOR(value);
506,506d501
< 				int value = modelElement.getCornerWidth();
507,507c502,502
< 				myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(value), getMapMode().DPtoLP(modelElement.getCornerHeight())));
---
> 				myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(modelElement.getCornerWidth()), getMapMode().DPtoLP(modelElement.getCornerHeight())));
510,510d504
< 				int value = modelElement.getCornerHeight();
511,511c505,505
< 				myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(modelElement.getCornerWidth()), getMapMode().DPtoLP(value)));
---
> 				myFigure.setCornerDimensions(new org.eclipse.draw2d.geometry.Dimension(getMapMode().DPtoLP(modelElement.getCornerWidth()), getMapMode().DPtoLP(modelElement.getCornerHeight())));
513,513c147,147
< 			layoutChanged(modelElement.getLayout(), false);
---
> 				layoutChanged(modelElement.getLayout());
