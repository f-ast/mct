2,2c2,2
<  * Copyright (c) 2002, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2002, 2007 IBM Corporation and others.
425,425c425,425
<         org.eclipse.draw2d.geometry.Point pageSize = PageInfoHelper.getPageSize(fPreferences, false, getMapMode());
---
>         org.eclipse.draw2d.geometry.Point pageBounds = PageInfoHelper.getPageSize(fPreferences, getMapMode());
442,442c442,442
<         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageSize, true);
---
>         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageBounds, true);
602,602c605,605
<         g.translate(translated.x, translated.y);
---
>         g.translate(translated.x, translated.y);
603a607,607
> 
603,603c606,606
<         g.scale(userScale);
---
>         g.scale(userScale);
658a660,661
>         org.eclipse.draw2d.geometry.Point pageBounds = PageInfoHelper
>             .getPageSize(fPreferences, getMapMode());
659,660d659
<         org.eclipse.draw2d.geometry.Point pageSize = PageInfoHelper
<             .getPageSize(fPreferences, false, getMapMode());
661,661c662,662
<         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageSize, false);
---
>         org.eclipse.draw2d.geometry.Point pageCount = getPageCount(dgrmEP, figureBounds, pageBounds, false);
667a669,669
>         	figureBounds = dgrmEP.getChildrenBounds();
668,670d668
<             Rectangle rectangle = dgrmEP.getChildrenBounds();
<             figureBounds.width = rectangle.x + rectangle.width + (numCols)*margins.right + numCols*margins.left ;
<             figureBounds.height = rectangle.y + rectangle.height + (numRows)*margins.top + numRows*margins.bottom;
673a673,673
>             actualWidth = numCols * pageBounds.x;
674,674d672
<             actualWidth = numCols * pageSize.x;
675,675c674,674
<             actualHeight = numRows * pageSize.y;
---
>             actualHeight = numRows * pageBounds.y;
677a677,677
>         int totalHeight = (this.rows * pageBounds.y);
678,688d676
<         org.eclipse.draw2d.geometry.Point pageBounds = PageInfoHelper
<             .getPageSize(fPreferences, getMapMode());
<         
< 
<         
<         Rectangle translate = new Rectangle(Math.min(0, figureBounds.x), Math
<             .min(0, figureBounds.y),
<             Math.max(pageBounds.x, numCols * pageSize.x), Math.max(pageBounds.y,
<                 numRows * pageSize.y));
<         
<         int totalHeight = (this.rows * pageSize.y);
689,689c678,678
<         int totalWidth  = (this.columns * pageSize.x);
---
>         int totalWidth  = (this.columns * pageBounds.x);
697,697c686,686
<         translated = new Point((int) (-translate.x * userScale),
---
>         translated = new Point((int) (-figureBounds.x * userScale),
698,698c687,687
<             (int) (-translate.y * userScale));
---
>             (int) (-figureBounds.y * userScale));
724,724c713,713
<                     drawPage(gc_, dgrmEP, fPreferences, translate, margins,
---
>                     drawPage(gc_, dgrmEP, fPreferences, figureBounds, margins,
