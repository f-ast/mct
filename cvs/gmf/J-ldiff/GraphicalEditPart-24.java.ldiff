63a64,64
> import org.eclipse.gmf.runtime.diagram.ui.internal.editparts.DummyEditPart;
197a199,200
> 		if (listenerFilters == null)
> 			listenerFilters = new HashMap();
338a342,364
> 			if (view != null){
> 				IGraphicalEditPart ep =   (IGraphicalEditPart)getViewer().getEditPartRegistry().get(view);
> 				// TODO remove this code after the clients change there code to 
> 				// be aware of the on demand editpart creation
> 				if (ep == null){
> 					// the ep had not been created yet, create a dummy one 
> 					ep  =  new DummyEditPart(view);
> 				}
> 				return ep;
> 			}
> 		}
> 		return null;
> 	}
> 	
> 	/**
> 	 * Method getChildViewBySemanticHint.
> 	 * 
> 	 * @param semanticHint
> 	 * @return IGraphicalEditPart
> 	 */
> 	public View getChildViewBySemanticHint(String semanticHint) {
> 		if (getModel()!=null){
> 			return ViewUtil.getChildBySemanticHint((View)getModel(),semanticHint);
339,340d341
< 			if (view != null)
< 				return  (IGraphicalEditPart)getViewer().getEditPartRegistry().get(view);
531,531c555,555
< 			return new ArrayList(((View)model).getChildren());
---
> 			return new ArrayList(((View)model).getVisibleChildren());
840,840c864,864
< 		if (hasNotationView())
---
> 		if (hasNotationView()){
842a867,867
> 	}
1275,1275d1299
< 		}
1276,1276c1300,1300
< 		else if (NotationPackage.eINSTANCE.getView_Visible().equals(event.getFeature())) {
---
> 		}else if (NotationPackage.eINSTANCE.getView_Visible().equals(event.getFeature())) {
1276a1301,1302
> 			Object notifier = event.getNotifier();
> 			if (notifier== getModel())
1277a1304,1306
> 			else {
> 				refreshChildren();
> 			}
