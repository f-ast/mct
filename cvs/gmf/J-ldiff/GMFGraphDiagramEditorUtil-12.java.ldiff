24a25,25
> import org.eclipse.core.resources.IResource;
36,36d36
< import org.eclipse.emf.ecore.xmi.XMIResource;
38,38c60,60
< import org.eclipse.emf.edit.ui.util.EditUIUtil;
---
> import org.eclipse.ui.IWorkbenchPage;
61a62,63
> import org.eclipse.ui.PlatformUI;
> import org.eclipse.ui.part.FileEditorInput;
71,75d72
< 	private static Map ourSaveOptions = null;
< 
< 	/**
< 	 * @generated
< 	 */
76a74,75
> 		Map saveOptions = new HashMap();
> 		saveOptions.put(XMLResource.OPTION_ENCODING, "UTF-8"); //$NON-NLS-1$
77,80d73
< 		if (ourSaveOptions == null) {
< 			ourSaveOptions = new HashMap();
< 			ourSaveOptions.put(XMIResource.OPTION_ENCODING, "UTF-8"); //$NON-NLS-1$
< 			ourSaveOptions.put(XMLResource.OPTION_RECORD_UNKNOWN_FEATURE, Boolean.TRUE);
81,81c76,76
< 			ourSaveOptions.put(Resource.OPTION_SAVE_ONLY_IF_CHANGED, Resource.OPTION_SAVE_ONLY_IF_CHANGED_MEMORY_BUFFER);
---
> 		saveOptions.put(Resource.OPTION_SAVE_ONLY_IF_CHANGED, Resource.OPTION_SAVE_ONLY_IF_CHANGED_MEMORY_BUFFER);
82,82d76
< 		}
83,83c77,77
< 		return ourSaveOptions;
---
> 		return saveOptions;
89a84,90
> 		String path = diagram.getURI().toPlatformString(true);
> 		IResource workspaceResource = ResourcesPlugin.getWorkspace().getRoot().findMember(new Path(path));
> 		if (workspaceResource instanceof IFile) {
> 			IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
> 			return null != page.openEditor(new FileEditorInput((IFile) workspaceResource), GMFGraphDiagramEditor.ID);
> 		}
> 		return false;
90,90d83
< 		return EditUIUtil.openEditor((EObject) diagram.getContents().get(0));
