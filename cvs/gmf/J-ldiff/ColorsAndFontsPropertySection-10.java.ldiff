27,27c27,27
< import org.eclipse.gmf.runtime.diagram.ui.properties.internal.l10n.ResourceManager;
---
> import org.eclipse.gmf.runtime.diagram.ui.properties.internal.l10n.DiagramUIPropertiesImages;
27a28,28
> import org.eclipse.gmf.runtime.diagram.ui.properties.internal.l10n.DiagramUIPropertiesMessages;
36a38,38
> import org.eclipse.jface.resource.ImageDescriptor;
70,70c72,72
< 	protected static final String FONT_COLOR_COMMAND_NAME = ResourceManager
---
> 	protected static final String FONT_COLOR_COMMAND_NAME = DiagramUIPropertiesMessages.
71,71c73,73
< 		.getI18NString("FontColor.commandText") + StringStatics.SPACE //$NON-NLS-1$
---
> 		FontColor_commandText + StringStatics.SPACE 
74,74c76,76
< 	protected static final String LINE_COLOR_COMMAND_NAME = ResourceManager
---
> 	protected static final String LINE_COLOR_COMMAND_NAME = DiagramUIPropertiesMessages.
75,75c77,77
< 		.getI18NString("LineColor.commandText") + StringStatics.SPACE //$NON-NLS-1$
---
> 		LineColor_commandText + StringStatics.SPACE 
79,79c81,81
< 	protected static final String FONT_COMMAND_NAME = ResourceManager
---
> 	protected static final String FONT_COMMAND_NAME = DiagramUIPropertiesMessages.
80,80c82,82
< 		.getI18NString("Font.commandText") + StringStatics.SPACE //$NON-NLS-1$
---
> 		Font_commandText + StringStatics.SPACE 
84,84c86,86
< 	static protected final String FILL_COLOR_COMMAND_NAME = ResourceManager
---
> 	static protected final String FILL_COLOR_COMMAND_NAME = DiagramUIPropertiesMessages.
85,85c87,87
< 		.getI18NString("FillColor.commandText") + StringStatics.SPACE //$NON-NLS-1$
---
> 		FillColor_commandText + StringStatics.SPACE 
88,94d89
< 	// image names
< 	protected static final String FILL_COLOR_IMAGE_NAME = "fill_color.gif"; //$NON-NLS-1$
< 
< 	protected static final String BOLD_IMAGE_NAME = "bold.gif"; //$NON-NLS-1$
< 
< 	protected static final String ITALIC_IMAGE_NAME = "italic.gif"; //$NON-NLS-1$
< 	
95,95c90,90
< 	protected static final String FONTS_AND_COLORS_LABEL = ResourceManager
---
> 	protected static final String FONTS_AND_COLORS_LABEL = DiagramUIPropertiesMessages.
96,96c91,91
< 		.getI18NString("FontAndColor.nameLabel"); //$NON-NLS-1$
---
> 		FontAndColor_nameLabel;
170,175d164
< 	private static final String FONT_COLOR_IMAGE_NAME = "font_color.gif"; //$NON-NLS-1$
< 
< 	private static final String LINE_COLOR_IMAGE_NAME = "line_color.gif"; //$NON-NLS-1$
< 
< 	
< 
279a269,269
> 		fontBoldButton.setImage(DiagramUIPropertiesImages.get(DiagramUIPropertiesImages.IMG_BOLD));
280,281d268
< 		fontBoldButton.setImage(ResourceManager.getInstance().getImage(
< 			BOLD_IMAGE_NAME));
284a273,273
> 		fontItalicButton.setImage(DiagramUIPropertiesImages.get(DiagramUIPropertiesImages.IMG_ITALIC));
285,286d272
< 		fontItalicButton.setImage(ResourceManager.getInstance().getImage(
< 			ITALIC_IMAGE_NAME));
304a292,292
> 		fontColorButton.setImage(DiagramUIPropertiesImages.get(DiagramUIPropertiesImages.IMG_FONT_COLOR));
305,306d291
< 		fontColorButton.setImage(ResourceManager.getInstance().getImage(
< 			FONT_COLOR_IMAGE_NAME));
317a304,304
> 		lineColorButton.setImage(DiagramUIPropertiesImages.get(DiagramUIPropertiesImages.IMG_LINE_COLOR));
318,319d303
< 		lineColorButton.setImage(ResourceManager.getInstance().getImage(
< 			LINE_COLOR_IMAGE_NAME));
328a314,314
> 		fillColorButton.setImage(DiagramUIPropertiesImages.get(DiagramUIPropertiesImages.IMG_FILL_COLOR));
329,330d313
< 		fillColorButton.setImage(ResourceManager.getInstance().getImage(
< 			FILL_COLOR_IMAGE_NAME));
362a347,347
> 			LINE_COLOR_COMMAND_NAME, DiagramUIPropertiesImages.DESC_LINE_COLOR);
363,363d346
< 			LINE_COLOR_COMMAND_NAME, LINE_COLOR_IMAGE_NAME);
374a359,359
> 			FONT_COLOR_COMMAND_NAME, DiagramUIPropertiesImages.DESC_FONT_COLOR);
375,375d358
< 			FONT_COLOR_COMMAND_NAME, FONT_COLOR_IMAGE_NAME);
393a378,378
> 	 * @deprecated Use {@link #changeColor(SelectionEvent, ToolItem, String, String, String, ImageDescriptor) instead and pass in the image descriptor itself.  To be removed on: 05/12/26
431a417,417
> 					DiagramUIPropertiesImages.get(imageName)
432,432d416
< 					ResourceManager.getInstance().getImage(imageName)
443a429,491
> 	 * @param event -
> 	 *            selection event
> 	 * @param button -
> 	 *            event source
> 	 * @param preferenceId -
> 	 *            id of the preference of the default color value for that
> 	 *            property
> 	 * @param propertyId -
> 	 *            id of the property
> 	 * @param commandName -
> 	 *            name of the command
> 	 * @param imageDescriptor -
> 	 *            the image to draw overlay on the button after the new
> 	 *            color is set
> 	 * @return - new RGB color, or null if none selected
> 	 */
> 	protected RGB changeColor(SelectionEvent event, ToolItem button,
> 			String preferenceId, final String propertyId, String commandName,
> 			ImageDescriptor imageDescriptor) {
> 
> 		ColorPalettePopup popup = new ColorPalettePopup(button.getParent()
> 			.getShell(), preferenceId, IDialogConstants.BUTTON_BAR_HEIGHT);
> 
> 		Rectangle r = button.getBounds();
> 		Point location = button.getParent().toDisplay(r.x, r.y);
> 		popup.open(new Point(location.x, location.y + r.height));
> 		if (popup.getSelectedColor() != null) {
> 			final RGB color = popup.getSelectedColor();
> 
> 			// Update model in response to user
> 
> 			if (color != null) {
> 
> 				List commands = new ArrayList();
> 				Iterator it = getInputIterator();
> 
> 				while (it.hasNext()) {
> 					final IGraphicalEditPart ep = (IGraphicalEditPart) it
> 						.next();
> 					commands.add(createCommand(commandName, ((View) ep
> 						.getModel()).eResource(), new Runnable() {
> 
> 						public void run() {
> 							ENamedElement element = (EStructuralFeature)MetaModelUtil.getElement(propertyId);
> 							if (element instanceof EStructuralFeature)
> 								ep.setStructuralFeatureValue((EStructuralFeature)MetaModelUtil.getElement(propertyId), FigureUtilities
> 									.RGBToInteger(color));
> 						}
> 					}));
> 				}
> 
> 				executeAsCompositeCommand(commandName, commands);
> 				Image overlyedImage = new ColorOverlayImageDescriptor(
> 					imageDescriptor.getImageData(), color).createImage();
> 				button.setImage(overlyedImage);
> 			}
> 
> 			return color;
> 		}
> 		return null;
> 
> 	}
> 	/**
555,555c603,603
< 		Image overlyedImage = new ColorOverlayImageDescriptor(ResourceManager
---
> 		Image overlyedImage = new ColorOverlayImageDescriptor(
556,556c604,604
< 			.getInstance().getImage(FONT_COLOR_IMAGE_NAME).getImageData(),
---
> 				DiagramUIPropertiesImages.DESC_FONT_COLOR.getImageData(),
560,560c608,608
< 		overlyedImage = new ColorOverlayImageDescriptor(ResourceManager
---
> 		overlyedImage = new ColorOverlayImageDescriptor(
561,561c609,609
< 			.getInstance().getImage(LINE_COLOR_IMAGE_NAME).getImageData(),
---
> 				DiagramUIPropertiesImages.DESC_LINE_COLOR.getImageData(),
