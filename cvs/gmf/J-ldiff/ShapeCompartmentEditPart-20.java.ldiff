23a24,24
> import org.eclipse.draw2d.Bendpoint;
33a35,35
> import org.eclipse.draw2d.geometry.PointList;
114a143,143
>                 
115,115d142
< 
143a146,157
>                 Point sRefPoint;
>                 Point tRefPoint;
>                 List bendpoints = (List) connection.getConnectionRouter()
>                     .getConstraint(connection);
>                 if (bendpoints.size() >= 2) {
>                     sRefPoint = ((Bendpoint) bendpoints.get(0)).getLocation()
>                         .getCopy();
>                     connection.translateToAbsolute(sRefPoint);
>                     tRefPoint = ((Bendpoint) bendpoints
>                         .get(bendpoints.size() - 1)).getLocation().getCopy();
>                     connection.translateToAbsolute(tRefPoint);
>                 } else {
144,145d145
< 				//
< 				// get the connection locations
146,146c158,158
< 				Point sLoc = sc.getLocation(tc.getReferencePoint());
---
>                     sRefPoint = tc.getReferencePoint();
147,147c159,159
< 				Point tLoc = tc.getLocation(sc.getReferencePoint());
---
>                     tRefPoint = sc.getReferencePoint();
147a160,162
>                 }
>                 Point sLoc = sc.getLocation(sRefPoint);
>                 Point tLoc = tc.getLocation(tRefPoint);
303a319,321
>          * items around the container of the compartment to be drawn to items
>          * within the interior of the compartment. This method should not return
>          * true for all border items, only for those may be outside of the area
304,304c322,322
< 		 * items to be drawn to items within the interior of the compartment.
---
>          * within the shape compartment.
307a326,327
>          * @return true if the itemEditPart is a border item around or outside
>          *         the shape compartment editpart passed in; false otherwise.
308,309d325
< 		 * @return false by default. Override to allow connections to border
< 		 *         items.
