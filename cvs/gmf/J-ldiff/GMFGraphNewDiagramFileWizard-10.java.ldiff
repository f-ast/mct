2,2c2,2
<  * Copyright (c) 2006 Borland Software Corporation and others.
---
>  * Copyright (c) 2006, 2007 Borland Software Corporation and others.
38a39,42
> import org.eclipse.emf.ecore.util.FeatureMap;
> 
> import org.eclipse.emf.edit.provider.IWrapperItemProvider;
> 
80,81d83
< import org.eclipse.ui.ide.IDE;
< 
172,172c174,174
< 		final Resource diagramResource = resourceSet.createResource(URI.createPlatformResourceURI(diagramFile.getFullPath().toString()));
---
> 		final Resource diagramResource = resourceSet.createResource(URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true));
193a196,196
> 			GMFGraphDiagramEditorUtil.openDiagram(diagramResource);
194,194d195
< 			IDE.openEditor(myWorkbenchPage, diagramFile);
265a268,276
> 				if (selection.size() == 1) {
> 					Object selectedElement = selection.getFirstElement();
> 					if (selectedElement instanceof IWrapperItemProvider) {
> 						selectedElement = ((IWrapperItemProvider) selectedElement).getValue();
> 					}
> 					if (selectedElement instanceof FeatureMap.Entry) {
> 						selectedElement = ((FeatureMap.Entry) selectedElement).getValue();
> 					}
> 					if (selectedElement instanceof EObject) {
266,266d267
< 				if (selection.size() == 1 && selection.getFirstElement() instanceof EObject) {
267,267c277,277
< 					myDiagramRoot = (EObject) selection.getFirstElement();
---
> 						myDiagramRoot = (EObject) selectedElement;
267a278,278
> 					}
