12a13,14
> import java.util.ArrayList;
> import java.util.Collection;
27a31,31
> import org.eclipse.emf.common.notify.Adapter;
28a33,33
> import org.eclipse.emf.common.notify.impl.AdapterImpl;
42,42c28,28
< import org.eclipse.gmf.gmfgraph.XYLayout;
---
> import org.eclipse.draw2d.XYLayout;
46a51,53
> import org.eclipse.gmf.graphdef.editor.sheet.AttachAdapter;
> import org.eclipse.gmf.graphdef.editor.sheet.ChangeTracker;
> import org.eclipse.gmf.graphdef.editor.sheet.FeatureTracker;
247,247c254,254
< 			this.setLayoutManager(new org.eclipse.draw2d.XYLayout());
---
> 			this.setLayoutManager(new XYLayout());
275a283,283
> 	// TODO: use myFigure?
283a292,309
> 	private Collection<Adapter> myDomainElementAdapters = new ArrayList<Adapter>();
> 
> 	/**
> 	 * @generated
> 	 */
> 	protected void removeSemanticListeners() {
> 		View view = (View) getModel();
> 		if (view.getElement() != null) {
> 			org.eclipse.gmf.gmfgraph.Rectangle modelElement = (org.eclipse.gmf.gmfgraph.Rectangle) view.getElement();
> 			modelElement.eAdapters().removeAll(myDomainElementAdapters);
> 			myDomainElementAdapters.clear();
> 		}
> 		super.removeSemanticListeners();
> 	}
> 
> 	/**
> 	 * @generated
> 	 */
294a321,321
> 		myDomainElementAdapters.add(new AttachAdapter(GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData(), new AdapterImpl() {
296,311d322
< 		final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
< 				layoutDataChanged(modelElement.getLayoutData());
< 			}
< 		};
< 		if (modelElement.getLayoutData() != null) {
< 			addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
< 		}
< 		addListenerFilter("Layoutable_LayoutData_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
< 				removeListenerFilter("Layoutable_LayoutData_PropertiesListener");
< 				if (modelElement.getLayoutData() != null) {
< 					addListenerFilter("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData());
< 				}
314,325d325
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData());
< 
< 		final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
< 				layoutChanged(modelElement.getLayout());
< 			}
< 		};
< 		if (modelElement.getLayout() != null) {
< 			addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
< 		}
< 		addListenerFilter("Layoutable_Layout_Listener", new NotificationListener() {
327,331d328
< 			public void notifyChanged(Notification notification) {
< 				removeListenerFilter("Layoutable_Layout_PropertiesListener");
< 				if (modelElement.getLayout() != null) {
< 					addListenerFilter("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout());
< 				}
333a332,333
> 		}));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
333a326,326
> 		}));
334,334c327,327
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout());
---
> 		myDomainElementAdapters.add(new AttachAdapter(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(), new AdapterImpl() {
335,336d327
< 
< 		addListenerFilter("Shape_Outline_Listener", new NotificationListener() {
338,338c323,323
< 			public void notifyChanged(Notification notification) {
---
> 			public void notifyChanged(Notification msg) {
340a338,339
> 		}, GMFGraphPackage.eINSTANCE.getShape_Outline()));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
341,341d337
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline());
342a341,341
> 			public void modelChanged(Notification msg) {
343,345d340
< 		addListenerFilter("Shape_Fill_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
348a345,345
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
348,348c344,344
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill());
---
> 		}, GMFGraphPackage.eINSTANCE.getShape_Fill()));
349,350d344
< 
< 		addListenerFilter("Shape_LineWidth_Listener", new NotificationListener() {
351a347,347
> 			public void modelChanged(Notification msg) {
352,352c329,329
< 			public void notifyChanged(Notification notification) {
---
> 			public void notifyChanged(Notification msg) {
354a350,351
> 		}, GMFGraphPackage.eINSTANCE.getShape_LineWidth()));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
355,355d349
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth());
356a353,353
> 			public void modelChanged(Notification msg) {
357,359d352
< 		addListenerFilter("Shape_LineKind_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
362a357,357
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
362,362c356,356
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind());
---
> 		}, GMFGraphPackage.eINSTANCE.getShape_LineKind()));
363,364d356
< 
< 		addListenerFilter("Shape_XorFill_Listener", new NotificationListener() {
365a359,359
> 			public void modelChanged(Notification msg) {
366,366c335,335
< 			public void notifyChanged(Notification notification) {
---
> 			public void modelChanged(Notification msg) {
368a362,363
> 		}, GMFGraphPackage.eINSTANCE.getShape_XorFill()));
> 		myDomainElementAdapters.add(new FeatureTracker(new ChangeTracker() {
369,369d361
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill());
370a365,365
> 			public void modelChanged(Notification msg) {
371,373d364
< 		addListenerFilter("Shape_XorOutline_Listener", new NotificationListener() {
< 
< 			public void notifyChanged(Notification notification) {
376,376c368,368
< 		}, modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline());
---
> 		}, GMFGraphPackage.eINSTANCE.getShape_XorOutline()));
376a369,369
> 		modelElement.eAdapters().addAll(myDomainElementAdapters);
449,449c442,442
< 									|| (modelElement.eContainer() instanceof Layoutable && ((Layoutable) modelElement.eContainer()).getLayout() instanceof XYLayout)) {
---
> 									|| (modelElement.eContainer() instanceof Layoutable && ((Layoutable) modelElement.eContainer()).getLayout() instanceof org.eclipse.gmf.gmfgraph.XYLayout)) {
716,716d708
< 
