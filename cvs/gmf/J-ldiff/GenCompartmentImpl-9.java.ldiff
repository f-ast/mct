14,14d13
< import org.eclipse.gmf.codegen.gmfgen.CompartmentLayoutKind;
31,31c30,30
<  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenCompartmentImpl#getLayoutKind <em>Layout Kind</em>}</li>
---
>  *   <li>{@link org.eclipse.gmf.codegen.gmfgen.impl.GenCompartmentImpl#getDiagram <em>Diagram</em>}</li>
120,120c119,119
< 	 * The default value of the '{@link #getLayoutKind() <em>Layout Kind</em>}' attribute.
---
> 	 * The cached value of the '{@link #getNode() <em>Node</em>}' reference.
123,123c122,122
< 	 * @see #getLayoutKind()
---
> 	 * @see #getNode()
126a126,126
> 	protected GenNode node = null;
127,137d125
< 	protected static final CompartmentLayoutKind LAYOUT_KIND_EDEFAULT = CompartmentLayoutKind.BORDER_LITERAL;
< 
< 	/**
< 	 * The cached value of the '{@link #getLayoutKind() <em>Layout Kind</em>}' attribute.
< 	 * <!-- begin-user-doc -->
< 	 * <!-- end-user-doc -->
< 	 * @see #getLayoutKind()
< 	 * @generated
< 	 * @ordered
< 	 */
< 	protected CompartmentLayoutKind layoutKind = LAYOUT_KIND_EDEFAULT;
246,247d234
< 	public CompartmentLayoutKind getLayoutKind() {
< 		return layoutKind;
254a245,249
> 	public GenNode getNode() {
> 		if (node != null && node.eIsProxy()) {
> 			InternalEObject oldNode = (InternalEObject)node;
> 			node = (GenNode)eResolveProxy(oldNode);
> 			if (node != oldNode) {
255,257d244
< 	public void setLayoutKind(CompartmentLayoutKind newLayoutKind) {
< 		CompartmentLayoutKind oldLayoutKind = layoutKind;
< 		layoutKind = newLayoutKind == null ? LAYOUT_KIND_EDEFAULT : newLayoutKind;
259,259c251,251
< 			eNotify(new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND, oldLayoutKind, layoutKind));
---
> 					eNotify(new ENotificationImpl(this, Notification.RESOLVE, GMFGenPackage.GEN_COMPARTMENT__NODE, oldNode, node));
259a252,254
> 			}
> 		}
> 		return node;
266a235,235
> 	public GenDiagram getDiagram() {
266a262,278
> 	public GenNode basicGetNode() {
> 		return node;
> 	}
> 
> 	/**
> 	 * <!-- begin-user-doc -->
> 	 * <!-- end-user-doc -->
> 	 * @generated
> 	 */
> 	public NotificationChain basicSetNode(GenNode newNode, NotificationChain msgs) {
> 		GenNode oldNode = node;
> 		node = newNode;
> 		if (eNotificationRequired()) {
> 			ENotificationImpl notification = new ENotificationImpl(this, Notification.SET, GMFGenPackage.GEN_COMPARTMENT__NODE, oldNode, newNode);
> 			if (msgs == null) msgs = notification; else msgs.add(notification);
> 		}
> 		return msgs;
267,267d234
< 	public GenNode getNode() {
268,268c236,236
< 		if (eContainerFeatureID != GMFGenPackage.GEN_COMPARTMENT__NODE) return null;
---
> 		if (eContainerFeatureID != GMFGenPackage.GEN_COMPARTMENT__DIAGRAM) return null;
269,269c237,237
< 		return (GenNode)eContainer();
---
> 		return (GenDiagram)eContainer();
288,288c297,297
< 			case GMFGenPackage.GEN_COMPARTMENT__NODE:
---
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
291a301,304
> 			case GMFGenPackage.GEN_COMPARTMENT__NODE:
> 				if (node != null)
> 					msgs = ((InternalEObject)node).eInverseRemove(this, GMFGenPackage.GEN_NODE__COMPARTMENTS, GenNode.class, msgs);
> 				return basicSetNode((GenNode)otherEnd, msgs);
291,291c300,300
< 				return eBasicSetContainer(otherEnd, GMFGenPackage.GEN_COMPARTMENT__NODE, msgs);
---
> 				return eBasicSetContainer(otherEnd, GMFGenPackage.GEN_COMPARTMENT__DIAGRAM, msgs);
303a316,316
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
303a319,319
> 				return basicSetNode(null, msgs);
304,304c317,317
< 				return eBasicSetContainer(null, GMFGenPackage.GEN_COMPARTMENT__NODE, msgs);
---
> 				return eBasicSetContainer(null, GMFGenPackage.GEN_COMPARTMENT__DIAGRAM, msgs);
315a331,331
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
316,316d330
< 			case GMFGenPackage.GEN_COMPARTMENT__NODE:
317,317c332,332
< 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_NODE__COMPARTMENTS, GenNode.class, msgs);
---
> 				return eInternalContainer().eInverseRemove(this, GMFGenPackage.GEN_DIAGRAM__COMPARTMENTS, GenDiagram.class, msgs);
337,337c352,352
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
---
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
338,338c353,353
< 				return getLayoutKind();
---
> 				return getDiagram();
339a355,355
> 				if (resolve) return getNode();
340,340c356,356
< 				return getNode();
---
> 				return basicGetNode();
364,366d379
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
< 				setLayoutKind((CompartmentLayoutKind)newValue);
< 				return;
390a423,423
> 				return getDiagram() != null;
390,390c422,422
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
---
> 			case GMFGenPackage.GEN_COMPARTMENT__DIAGRAM:
391,392d422
< 				setLayoutKind(LAYOUT_KIND_EDEFAULT);
< 				return;
412,413d421
< 			case GMFGenPackage.GEN_COMPARTMENT__LAYOUT_KIND:
< 				return layoutKind != LAYOUT_KIND_EDEFAULT;
415,415c425,425
< 				return getNode() != null;
---
> 				return node != null;
437,438d446
< 		result.append(", layoutKind: ");
< 		result.append(layoutKind);
467,470d474
< 	public GenDiagram getDiagram() {
< 		return getNode().getDiagram();
< 	}
< 
