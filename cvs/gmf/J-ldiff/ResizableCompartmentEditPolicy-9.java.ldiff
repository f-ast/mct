21a22,22
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
26,26c28,28
< import org.eclipse.gmf.runtime.diagram.core.listener.NotificationListener;
---
> import org.eclipse.gmf.runtime.diagram.core.listener.NotificationListener;
162a164,168
> 	 * Cache the diagram event broker after it is retrieved.
> 	 */
> 	private DiagramEventBroker diagramEventBroker;
> 
> 	/**
190a197,197
> 		getDiagramEventBroker().addNotificationListener(
191,191d196
< 		DiagramEventBroker.getInstance().addNotificationListener(
198a205,205
> 		getDiagramEventBroker().removeNotificationListener(
199,199d204
< 		DiagramEventBroker.getInstance().removeNotificationListener(
284a291,298
>     private DiagramEventBroker getDiagramEventBroker() {
>         TransactionalEditingDomain theEditingDomain = ((IGraphicalEditPart) getHost())
>             .getEditingDomain();
>         if (theEditingDomain != null) {
>             return DiagramEventBroker.getInstance(theEditingDomain);
>         }
>         return null;
>     }
