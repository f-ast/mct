19,19d18
< import org.eclipse.gef.EditPartViewer;
21,21d19
< import org.eclipse.gmf.runtime.diagram.ui.parts.DiagramGraphicalViewer;
62,62d59
< 		if (Display.getCurrent() == null) {
63,63c60,60
< 			TransactionalEditingDomain editingDomain = (TransactionalEditingDomain)editPart.getEditingDomain();
---
> 		InternalTransactionalEditingDomain editingDomain = (InternalTransactionalEditingDomain)editPart.getEditingDomain();
63a61,62
>         
> 		if (Display.getCurrent() == null && editingDomain != null && editingDomain.getActiveTransaction() != null) {
