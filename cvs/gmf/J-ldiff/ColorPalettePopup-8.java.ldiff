2,2c2,2
<  * Copyright (c) 2005, 2006 IBM Corporation and others.
---
>  * Copyright (c) 2005, 2007 IBM Corporation and others.
14a15,15
> import java.util.List;
17a19,19
> import org.eclipse.gmf.runtime.draw2d.ui.figures.FigureUtilities;
39a42,46
> 	/** variable to store previous color */
> 	private int previousColor;
> 	private Button customColorButton;
> 	private HashMap buttonMap = new HashMap();
> 	
242a250,250
> 			buttonMap.put(rgb , button);
244,244d251
< 
272a280,280
> 				dialog.setRGB(FigureUtilities.integerToRGB(getPreviousColor()));
281,281d288
< 
288a296,296
> 		customColorButton = moreColors;
319,319d326
< 
320a328,334
> 		Button prevButton = (Button)buttonMap.get(FigureUtilities.integerToRGB(getPreviousColor()));
> 		if (prevButton != null){
> 			shell.setDefaultButton(prevButton);
> 		}	
> 		else{
> 			shell.setDefaultButton(customColorButton);
> 		}
346a361,368
>     
> 	public int getPreviousColor() {
> 		return previousColor;
> 	}
> 
> 	public void setPreviousColor(int previousColor) {
> 		this.previousColor = previousColor;
> 	}
