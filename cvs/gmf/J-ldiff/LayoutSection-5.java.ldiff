12a538,538
> 			org.eclipse.core.commands.operations.OperationHistoryFactory.getOperationHistory().execute(cmd, new org.eclipse.core.runtime.NullProgressMonitor(), null);
13,15d537
< import java.util.Collections;
< import java.util.List;
< 
16,16c539,539
< import org.eclipse.core.commands.ExecutionException;
---
> 		} catch (org.eclipse.core.commands.ExecutionException ex) {
17,21d539
< import org.eclipse.core.commands.operations.OperationHistoryFactory;
< import org.eclipse.core.resources.IFile;
< import org.eclipse.core.runtime.IAdaptable;
< import org.eclipse.core.runtime.IProgressMonitor;
< import org.eclipse.core.runtime.NullProgressMonitor;
22a525,526
> 		final java.util.List<org.eclipse.core.resources.IFile> files = java.util.Collections.singletonList(org.eclipse.emf.workspace.util.WorkspaceSynchronizer.getFile(getInput().eResource()));
> 		org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand cmd = new org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand(
23a528,528
> 
23,23c527,527
< import org.eclipse.emf.transaction.util.TransactionUtil;
---
> 				org.eclipse.emf.transaction.util.TransactionUtil.getEditingDomain(getInput()), "", files) {
24,25d527
< import org.eclipse.emf.workspace.util.WorkspaceSynchronizer;
< import org.eclipse.gef.EditPart;
36a530,531
> 			protected org.eclipse.gmf.runtime.common.core.command.CommandResult doExecuteWithResult(org.eclipse.core.runtime.IProgressMonitor monitor, org.eclipse.core.runtime.IAdaptable info)
> 					throws org.eclipse.core.commands.ExecutionException {
37,40d529
< import org.eclipse.gmf.runtime.common.core.command.CommandResult;
< import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand;
< import org.eclipse.gmf.runtime.notation.View;
< import org.eclipse.jface.layout.GridDataFactory;
43a178,178
> 		parent.setLayout(new org.eclipse.swt.layout.FormLayout());
44,44d177
< import org.eclipse.swt.layout.FormAttachment;
45,45c179,179
< import org.eclipse.swt.layout.FormData;
---
> 		org.eclipse.swt.layout.FormData fd;
46a181,181
> 		fd.left = new org.eclipse.swt.layout.FormAttachment(0, 20);
46,46c180,180
< import org.eclipse.swt.layout.FormLayout;
---
> 		fd = new org.eclipse.swt.layout.FormData();
118,118c99,99
< 		myLayoutKindRadios.setLayout(new org.eclipse.swt.layout.FillLayout(SWT.VERTICAL));
---
> 		myLayoutKindRadios.setLayout(new org.eclipse.swt.layout.FillLayout(org.eclipse.swt.SWT.VERTICAL));
121a126,127
> 		org.eclipse.jface.layout.GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myFlowLayoutMatchMinor);
> 		org.eclipse.jface.layout.GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myFlowLayoutForceSingle);
121,121c125,125
< 		GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myFlowLayoutIsVertical);
---
> 		org.eclipse.jface.layout.GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myFlowLayoutIsVertical);
123,123d102
< 		GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myFlowLayoutMatchMinor);
125,125d103
< 		GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myFlowLayoutForceSingle);
145,145c123,123
< 		myFlowLayoutAlign.setLayout(new org.eclipse.swt.layout.FillLayout(SWT.VERTICAL));
---
> 		myFlowLayoutAlign.setLayout(new org.eclipse.swt.layout.FillLayout(org.eclipse.swt.SWT.VERTICAL));
166,166c172,172
< 		GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myGridLayoutSameWidth);
---
> 		org.eclipse.jface.layout.GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.BEGINNING).span(2, 1).applyTo(myGridLayoutSameWidth);
197,200d177
< 		parent.setLayout(new FormLayout());
< 		FormData fd;
< 		fd = new FormData();
< 		fd.left = new FormAttachment(0, 20);
201a183,183
> 		fd = new org.eclipse.swt.layout.FormData();
202,202d182
< 		fd = new FormData();
203,203c184,184
< 		fd.left = new FormAttachment(myLayoutKindRadios, 20, SWT.RIGHT);
---
> 		fd.left = new org.eclipse.swt.layout.FormAttachment(myLayoutKindRadios, 20, org.eclipse.swt.SWT.RIGHT);
204a186,186
> 		fd = new org.eclipse.swt.layout.FormData();
205,205d185
< 		fd = new FormData();
206,206c187,187
< 		fd.left = new FormAttachment(myLayoutKindRadios, 20, SWT.RIGHT);
---
> 		fd.left = new org.eclipse.swt.layout.FormAttachment(myLayoutKindRadios, 20, org.eclipse.swt.SWT.RIGHT);
207a189,189
> 		fd = new org.eclipse.swt.layout.FormData();
208,208d188
< 		fd = new FormData();
209,209c190,190
< 		fd.left = new FormAttachment(myLayoutKindRadios, 20, SWT.RIGHT);
---
> 		fd.left = new org.eclipse.swt.layout.FormAttachment(myLayoutKindRadios, 20, org.eclipse.swt.SWT.RIGHT);
544,545d524
< 		final List<IFile> files = Collections.singletonList(WorkspaceSynchronizer.getFile(getInput().eResource()));
< 		AbstractTransactionalCommand cmd = new AbstractTransactionalCommand(TransactionUtil.getEditingDomain(getInput()), "", files) {
547,547d529
< 			protected CommandResult doExecuteWithResult(IProgressMonitor monitor, IAdaptable info) throws ExecutionException {
549,549c533,533
< 				return CommandResult.newOKCommandResult();
---
> 				return org.eclipse.gmf.runtime.common.core.command.CommandResult.newOKCommandResult();
554,555d537
< 			OperationHistoryFactory.getOperationHistory().execute(cmd, new NullProgressMonitor(), null);
< 		} catch (ExecutionException ex) {
570a555,555
> 		if (element instanceof org.eclipse.gef.EditPart) {
571,571d554
< 		if (element instanceof EditPart) {
572,572c556,556
< 			Object model = ((EditPart) element).getModel();
---
> 			Object model = ((org.eclipse.gef.EditPart) element).getModel();
572a557,559
> 			rv = model instanceof org.eclipse.gmf.runtime.notation.View ? ((org.eclipse.gmf.runtime.notation.View) model).getElement() : null;
> 		} else if (element instanceof org.eclipse.gmf.runtime.notation.View) {
> 			rv = ((org.eclipse.gmf.runtime.notation.View) element).getElement();
573,575d556
< 			rv = model instanceof View ? ((View) model).getElement() : null;
< 		} else if (element instanceof View) {
< 			rv = ((View) element).getElement();
576,576c560,560
< 		} else if (element instanceof IAdaptable) {
---
> 		} else if (element instanceof org.eclipse.core.runtime.IAdaptable) {
576a561,562
> 			org.eclipse.gmf.runtime.notation.View view = (org.eclipse.gmf.runtime.notation.View) ((org.eclipse.core.runtime.IAdaptable) element)
> 					.getAdapter(org.eclipse.gmf.runtime.notation.View.class);
577,577d560
< 			View view = (View) ((IAdaptable) element).getAdapter(View.class);
589,589d573
< 		final GMFGraphPackage ePack = GMFGraphPackage.eINSTANCE;
590a575,575
> 
590,590c574,574
< 		myModelListeners = new org.eclipse.emf.common.notify.Adapter[] { new AttachAdapter(ePack.getLayoutable_Layout(), new ChangeTracker() {
---
> 		myModelListeners = new org.eclipse.emf.common.notify.Adapter[] { new AttachAdapter(GMFGraphPackage.eINSTANCE.getLayoutable_Layout(), new ChangeTracker() {
591a577,579
> 				// FIXME enable/disable widget(s) -- HOWEVER, need access to
> 				// Binding/Widget here, so can't share the template with e.g.
> 				// Alex's ItemProviders
592,592d576
< 				// FIXME enable/disable widget(s) -- HOWEVER, need access to Binding/Widget here, so can't share the template with e.g. Alex's ItemProviders
593,593c580,580
< 			}
---
> 			}
593a581,586
> 		}, new FeatureTracker(this, GMFGraphPackage.eINSTANCE.getFlowLayout_Vertical(), GMFGraphPackage.eINSTANCE.getFlowLayout_MatchMinorSize(), GMFGraphPackage.eINSTANCE
> 				.getFlowLayout_ForceSingleLine(), GMFGraphPackage.eINSTANCE.getFlowLayout_MajorSpacing(), GMFGraphPackage.eINSTANCE.getFlowLayout_MinorSpacing(), GMFGraphPackage.eINSTANCE
> 				.getGridLayout_NumColumns(), GMFGraphPackage.eINSTANCE.getGridLayout_EqualWidth(), GMFGraphPackage.eINSTANCE.getCustomClass_QualifiedClassName(), GMFGraphPackage.eINSTANCE
> 				.getFlowLayout_MinorAlignment(), GMFGraphPackage.eINSTANCE.getFlowLayout_MajorAlignment()), new AttachAdapter(GMFGraphPackage.eINSTANCE.getBorderLayout_Spacing(), new FeatureTracker(
> 				this, GMFGraphPackage.eINSTANCE.getDimension_Dx(), GMFGraphPackage.eINSTANCE.getDimension_Dy())), new AttachAdapter(GMFGraphPackage.eINSTANCE.getGridLayout_Margins(),
> 				new FeatureTracker(this, GMFGraphPackage.eINSTANCE.getDimension_Dx(), GMFGraphPackage.eINSTANCE.getDimension_Dy())), new AttachAdapter(GMFGraphPackage.eINSTANCE
594,597d580
< 		}, new FeatureTracker(this, ePack.getFlowLayout_Vertical(), ePack.getFlowLayout_MatchMinorSize(), ePack.getFlowLayout_ForceSingleLine(), ePack.getFlowLayout_MajorSpacing(), ePack
< 				.getFlowLayout_MinorSpacing(), ePack.getGridLayout_NumColumns(), ePack.getGridLayout_EqualWidth(), ePack.getCustomClass_QualifiedClassName(), ePack.getFlowLayout_MinorAlignment(),
< 				ePack.getFlowLayout_MajorAlignment()), new AttachAdapter(ePack.getBorderLayout_Spacing(), new FeatureTracker(this, ePack.getDimension_Dx(), ePack.getDimension_Dy())),
< 				new AttachAdapter(ePack.getGridLayout_Margins(), new FeatureTracker(this, ePack.getDimension_Dx(), ePack.getDimension_Dy())), new AttachAdapter(ePack.getGridLayout_Spacing(),
598,598c587,587
< 						new FeatureTracker(this, ePack.getDimension_Dx(), ePack.getDimension_Dy()))) };
---
> 				.getGridLayout_Spacing(), new FeatureTracker(this, GMFGraphPackage.eINSTANCE.getDimension_Dx(), GMFGraphPackage.eINSTANCE.getDimension_Dy()))) };
616,616c605,605
< 	private org.eclipse.swt.widgets.Label createLabel(Composite parent, String label) {
---
> 	private org.eclipse.swt.widgets.Label createLabel(org.eclipse.swt.widgets.Composite parent, String label) {
624,624c613,613
< 	private Group createGroup(Composite parent, String label) {
---
> 	private org.eclipse.swt.widgets.Group createGroup(org.eclipse.swt.widgets.Composite parent, String label) {
625,625c614,614
< 		Group g = new Group(parent, SWT.SHADOW_NONE);
---
> 		org.eclipse.swt.widgets.Group g = new org.eclipse.swt.widgets.Group(parent, SWT.SHADOW_NONE);
