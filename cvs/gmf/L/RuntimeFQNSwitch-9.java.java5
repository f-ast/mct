package org.eclipse.gmf.gmfgraph.util;

import java.util.Arrays;

import java.util.Iterator;

import org.eclipse.emf.common.util.UniqueEList;

import org.eclipse.emf.ecore.EObject;

import org.eclipse.gmf.gmfgraph.FigureGallery;

import org.eclipse.gmf.gmfgraph.GMFGraphPackage;

import org.eclipse.gmf.gmfgraph.Label;

import org.eclipse.gmf.gmfgraph.PolylineConnection;

public class RuntimeFQNSwitch extends PureGEFFigureQualifiedNameSwitch {

    protected void collectDependencies (FigureGallery gallery, UniqueEList < String > result) {
        super.collectDependencies (gallery, result);
        final String pluginRuntimeDraw2d = "org.eclipse.gmf.runtime.draw2d.ui";
        if (usesEClassWithID (gallery, new int [] {GMFGraphPackage.POLYLINE_CONNECTION, GMFGraphPackage.LABEL})) {
            result.add (pluginRuntimeDraw2d);
        }
    }

    private boolean usesEClassWithID (FigureGallery gallery, int [] ids) {
        Arrays.sort (ids);
        for (Iterator < EObject > it = gallery.eAllContents ();
        it.hasNext ();) {
            EObject next = it.next ();
            if (Arrays.binarySearch (ids, next.eClass ().getClassifierID ()) >= 0) {
                return true;
            }
        }
        return false;
    }

    public String casePolylineConnection (PolylineConnection object) {
        return "org.eclipse.gmf.runtime.draw2d.ui.figures.PolylineConnectionEx";
    }

    public String caseLabel (Label object) {
        return "org.eclipse.gmf.runtime.draw2d.ui.figures.WrappingLabel";
    }

}

