package org.eclipse.gmf.runtime.diagram.ui.geoshapes.internal.views.factories;

import java.util.List;

import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;

import org.eclipse.gmf.runtime.diagram.ui.preferences.IPreferenceConstants;

import org.eclipse.gmf.runtime.diagram.ui.view.factories.TextShapeViewFactory;

import org.eclipse.gmf.runtime.draw2d.ui.figures.FigureUtilities;

import org.eclipse.gmf.runtime.notation.NotationFactory;

import org.eclipse.gmf.runtime.notation.NotationPackage;

import org.eclipse.gmf.runtime.notation.View;

import org.eclipse.jface.preference.IPreferenceStore;

import org.eclipse.jface.preference.PreferenceConverter;

import org.eclipse.swt.graphics.RGB;

public class GeoShapeViewFactory extends TextShapeViewFactory {

    protected void initializeFromPreferences (View view) {
        super.initializeFromPreferences (view);
        IPreferenceStore store = (IPreferenceStore) getPreferencesHint ().getPreferenceStore ();
        RGB fillRGB = PreferenceConverter.getColor (store, IPreferenceConstants.PREF_NOTE_FILL_COLOR);
        ViewUtil.setStructuralFeatureValue (view, NotationPackage.eINSTANCE.getFillStyle_FillColor (), FigureUtilities.RGBToInteger (fillRGB));
        RGB lineRGB = PreferenceConverter.getColor (store, IPreferenceConstants.PREF_NOTE_LINE_COLOR);
        ViewUtil.setStructuralFeatureValue (view, NotationPackage.eINSTANCE.getLineStyle_LineColor (), FigureUtilities.RGBToInteger (lineRGB));
    }

    protected List createStyles (View view) {
        List styles = super.createStyles (view);
        styles.add (NotationFactory.eINSTANCE.createTextStyle ());
        return styles;
    }

}

