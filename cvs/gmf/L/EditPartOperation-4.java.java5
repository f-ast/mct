package org.eclipse.gmf.runtime.diagram.ui.internal.services.editpart;

import org.eclipse.gmf.runtime.common.core.service.IOperation;

import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;

import org.eclipse.gmf.runtime.notation.View;

import org.eclipse.jface.util.Assert;

public abstract class EditPartOperation implements IOperation {
    private final View view;
    private static final String dummyHiny = "dummy";

    protected EditPartOperation (View view) {
        Assert.isNotNull (view);
        this.view = view;
    }

    private String cachingKey;

    public String getCachingKey () {
        if (cachingKey == null) cachingKey = determineCachingKey ();

        return cachingKey;
    }

    public final View getView () {
        return view;
    }

    protected String determineCachingKey () {
        String type = getView ().getType ();
        if (type != null && type.length () > 0) return type;

        String classId = ViewUtil.getSemanticElementClassId (getView ());
        if (classId != null) return classId;

        return dummyHiny;
    }

}

