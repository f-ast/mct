package org.eclipse.gmf.runtime.diagram.ui.commands;

import java.util.Iterator;

import org.eclipse.core.commands.operations.IUndoableOperation;

import org.eclipse.gef.commands.Command;

import org.eclipse.gef.commands.CompoundCommand;

public class CommandUtilities {

    public static boolean canRedo (Command command) {
        if (command == null) return false;

        if (command instanceof IUndoableOperation) {
            return ((IUndoableOperation) command).canRedo ();
        } else if (command instanceof CompoundCommand) {
            for (Iterator iter = ((CompoundCommand) command).getCommands ().iterator ();
            iter.hasNext ();) {
                try {
                    if (! canRedo ((Command) iter.next ())) return false;

                } catch (ClassCastException e) {
                    return false;
                }
            }
            return true;
        } else if (command instanceof ICommandProxy) {
            return ((ICommandProxy) command).getICommand ().canRedo ();
        }

        return command.canUndo ();
    }

}

