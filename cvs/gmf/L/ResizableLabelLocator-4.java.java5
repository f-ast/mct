package org.eclipse.gmf.runtime.diagram.ui.internal.figures;

import org.eclipse.draw2d.IFigure;

import org.eclipse.draw2d.geometry.Dimension;

import org.eclipse.draw2d.geometry.Point;

import org.eclipse.draw2d.geometry.Rectangle;

import org.eclipse.gmf.runtime.diagram.ui.figures.LabelLocator;

public class ResizableLabelLocator extends LabelLocator {

    public ResizableLabelLocator (IFigure parent, Rectangle bounds, int alignment) {
        super (parent, bounds, alignment);
    }

    public void relocate (IFigure target) {
        Dimension preferredSize = target.getPreferredSize ();
        LabelLocator currentConstraint = (LabelLocator) target.getParent ().getLayoutManager ().getConstraint (target);
        Dimension currentExtent = currentConstraint.getSize ();
        Dimension size = new Dimension (currentExtent);
        if (currentExtent.width == - 1) size.width = preferredSize.width;

        if (currentExtent.height == - 1) size.height = preferredSize.height;

        target.setSize (size);
        Point location = LabelHelper.relativeCoordinateFromOffset (target, getReferencePoint (), getOffset ());
        target.setLocation (location);
    }

}

