package org.eclipse.gmf.runtime.diagram.ui.view.factories;

import java.util.ArrayList;

import java.util.List;

import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;

import org.eclipse.gmf.runtime.diagram.ui.preferences.IPreferenceConstants;

import org.eclipse.gmf.runtime.draw2d.ui.figures.FigureUtilities;

import org.eclipse.gmf.runtime.notation.LayoutConstraint;

import org.eclipse.gmf.runtime.notation.NotationFactory;

import org.eclipse.gmf.runtime.notation.NotationPackage;

import org.eclipse.gmf.runtime.notation.View;

import org.eclipse.jface.preference.IPreferenceStore;

import org.eclipse.jface.preference.PreferenceConverter;

import org.eclipse.swt.graphics.RGB;

public class AbstractShapeViewFactory extends BasicNodeViewFactory {

    protected LayoutConstraint createLayoutConstraint () {
        return NotationFactory.eINSTANCE.createBounds ();
    }

    protected void initializeFromPreferences (View view) {
        super.initializeFromPreferences (view);
        IPreferenceStore store = (IPreferenceStore) getPreferencesHint ().getPreferenceStore ();
        RGB fillRGB = PreferenceConverter.getColor (store, IPreferenceConstants.PREF_FILL_COLOR);
        ViewUtil.setStructuralFeatureValue (view, NotationPackage.eINSTANCE.getFillStyle_FillColor (), FigureUtilities.RGBToInteger (fillRGB));
    }

    protected List createStyles (View view) {
        List styles = new ArrayList ();
        styles.add (NotationFactory.eINSTANCE.createShapeStyle ());
        return styles;
    }

}

