package org.eclipse.gmf.runtime.emf.type.core.requests;

import java.util.Collections;

import java.util.List;

import org.eclipse.emf.ecore.EObject;

import org.eclipse.emf.transaction.TransactionalEditingDomain;

import org.eclipse.emf.transaction.util.TransactionUtil;

import org.eclipse.gmf.runtime.emf.type.core.EditHelperContext;

import org.eclipse.gmf.runtime.emf.type.core.IClientContext;

public class ReorientRelationshipRequest extends ReorientRequest {
    private final EObject relationship;

    public ReorientRelationshipRequest (TransactionalEditingDomain editingDomain, EObject relationship, EObject newRelationshipEnd, EObject oldRelationshipEnd, int direction) {
        super (editingDomain, direction, newRelationshipEnd, oldRelationshipEnd);
        this.relationship = relationship;
    }

    public ReorientRelationshipRequest (EObject relationship, EObject newRelationshipEnd, EObject oldRelationshipEnd, int direction) {
        this (TransactionUtil.getEditingDomain (relationship), relationship, newRelationshipEnd, oldRelationshipEnd, direction);
    }

    public EObject getRelationship () {
        return relationship;
    }

    public List getElementsToEdit () {
        return Collections.singletonList (relationship);
    }

    public Object getEditHelperContext () {
        IClientContext context = getClientContext ();
        if (context == null) {
            return relationship;
        } else {
            return new EditHelperContext (relationship, context);
        }
    }

}

