package org.eclipse.gmf.internal.bridge;

import org.eclipse.gmf.gmfgraph.DiagramLabel;

import org.eclipse.gmf.gmfgraph.Figure;

import org.eclipse.gmf.gmfgraph.FigureAccessor;

import org.eclipse.gmf.gmfgraph.FigureHandle;

import org.eclipse.gmf.mappings.LabelMapping;

import org.eclipse.gmf.mappings.NodeMapping;

public class Knowledge {

    public static boolean isExternal (DiagramLabel diagramLabel) {
        FigureHandle figure = diagramLabel.getFigure ();
        if (figure == null) {
            throw new NullPointerException ("FigureHandler is null for: " + diagramLabel);
        }
        if (figure instanceof Figure) {
            return ((Figure) figure).getParent () == null;
        } else if (figure instanceof FigureAccessor) {
            return false;
        }

        throw new IllegalStateException ("No more known subclasses of FigureHandle: " + figure);
    }

    public static boolean isPureLabelNode (NodeMapping childNodeMapping) {
        if (childNodeMapping.getLabelMappings ().size () == 1 && childNodeMapping.getChildren ().isEmpty ()) {
            LabelMapping soleLabel = childNodeMapping.getLabelMappings ().get (0);
            return childNodeMapping.getDiagramNode () == soleLabel.getDiagramLabel ();
        }
        return false;
    }

}

