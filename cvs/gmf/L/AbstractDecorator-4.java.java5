package org.eclipse.gmf.runtime.diagram.ui.services.decorator;

import org.eclipse.core.runtime.Assert;

import org.eclipse.gmf.runtime.diagram.ui.editpolicies.DecorationEditPolicy.DecoratorTarget;

import org.eclipse.gmf.runtime.diagram.ui.internal.services.decorator.Decoration;

public abstract class AbstractDecorator implements IDecorator {
    private DecoratorTarget decoratorTarget;
    private Decoration decoration;

    public AbstractDecorator (IDecoratorTarget decoratorTarget) {
        Assert.isTrue (decoratorTarget instanceof DecoratorTarget);
        this.decoratorTarget = (DecoratorTarget) decoratorTarget;
    }

    protected DecoratorTarget getDecoratorTarget () {
        return decoratorTarget;
    }

    public Decoration getDecoration () {
        return decoration;
    }

    public void setDecoration (IDecoration decoration) {
        Assert.isTrue (decoration instanceof Decoration);
        this.decoration = (Decoration) decoration;
    }

    protected void removeDecoration () {
        if (decoration != null) {
            decoratorTarget.removeDecoration (decoration);
            decoration = null;
        }
    }

    public void deactivate () {
        removeDecoration ();
    }

}

