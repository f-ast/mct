package org.eclipse.gmf.runtime.draw2d.ui.internal.mapmode;

import org.eclipse.draw2d.geometry.Point;

import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;

import org.eclipse.swt.widgets.Display;

public class HiMetricMapMode implements IMapMode {
    private float dpi;
    private double scale = 1;
    private static final double UNITS_PER_INCH = 2540.0;

    public HiMetricMapMode () {
        Display.getDefault ().syncExec (new Runnable () {

            public void run () {
                dpi = Display.getDefault ().getDPI ().x;
            }

        }

        );
        scale = dpi / UNITS_PER_INCH;
    }

    public double getScale () {
        return scale;
    }

    public int LPtoDP (int logicalUnit) {
        Point devPt = new Point (logicalUnit, 0);
        MapMode.translateToDP (devPt);
        return devPt.x;
    }

    public int DPtoLP (int deviceUnit) {
        Point logPt = new Point (deviceUnit, 0);
        MapMode.translateToLP (logPt);
        return logPt.x;
    }

}

