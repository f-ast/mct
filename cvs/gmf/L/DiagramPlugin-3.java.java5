package org.eclipse.gmf.runtime.diagram.core.internal;

import org.eclipse.core.runtime.Platform;

import org.eclipse.gmf.runtime.common.core.l10n.AbstractResourceManager;

import org.eclipse.gmf.runtime.common.core.plugin.XToolsPlugin;

import org.eclipse.gmf.runtime.diagram.core.internal.l10n.DiagramResourceManager;

import org.eclipse.gmf.runtime.diagram.core.internal.services.semantic.SemanticService;

import org.eclipse.gmf.runtime.diagram.core.internal.services.view.ViewService;

public class DiagramPlugin extends XToolsPlugin {
    private final static String SEMANTIC_SERVICE_EXTENSION_POINT = "semanticProviders";
    private final static String VIEW_SERVICE_EXTENSION_POINT = "viewProviders";
    private static DiagramPlugin plugin;

    public DiagramPlugin () {
        super ();
        plugin = this;
    }

    public static DiagramPlugin getInstance () {
        return plugin;
    }

    public static String getPluginId () {
        return getInstance ().getBundle ().getSymbolicName ();
    }

    public AbstractResourceManager getResourceManager () {
        return DiagramResourceManager.getInstance ();
    }

    private void configureSemanticProviders () {
        SemanticService.getInstance ().configureProviders (Platform.getExtensionRegistry ().getExtensionPoint (getPluginId (), SEMANTIC_SERVICE_EXTENSION_POINT).getConfigurationElements ());
    }

    private void configureViewProviders () {
        ViewService.getInstance ().configureProviders (Platform.getExtensionRegistry ().getExtensionPoint (getPluginId (), VIEW_SERVICE_EXTENSION_POINT).getConfigurationElements ());
    }

    protected void doStartup () {
        super.doStartup ();
        configureSemanticProviders ();
        configureViewProviders ();
    }

}

