package org.eclipse.gmf.runtime.emf.commands.core.commands;

import org.eclipse.core.runtime.IProgressMonitor;

import org.eclipse.emf.common.util.EList;

import org.eclipse.emf.ecore.EObject;

import org.eclipse.gmf.runtime.common.core.command.CommandResult;

import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractModelCommand;

public class RepositionEObjectCommand extends AbstractModelCommand {
    private EObject element;
    private int displacement;
    private EList elements;

    public RepositionEObjectCommand (String label, EList elements, EObject element, int displacement) {
        super (label, element);
        this.element = element;
        this.displacement = displacement;
        this.elements = elements;
    }

    protected CommandResult doExecute (IProgressMonitor progressMonitor) {
        CommandResult commandResult = null;
        int currentPosition = elements.indexOf (element);
        elements.move (currentPosition + displacement, element);
        return (commandResult == null) ? newCancelledCommandResult () : commandResult;
    }

}

