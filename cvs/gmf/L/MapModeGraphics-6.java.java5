package org.eclipse.gmf.runtime.draw2d.ui.internal.graphics;

import org.eclipse.draw2d.Graphics;

import org.eclipse.draw2d.geometry.Point;

import org.eclipse.gmf.runtime.draw2d.ui.internal.mapmode.DiagramMapModeUtil;

import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;

import org.eclipse.swt.graphics.Image;

public class MapModeGraphics extends ScaledGraphics {
    private IMapMode mm;

    public MapModeGraphics (Graphics g, IMapMode mm) {
        super (g);
        setScale (DiagramMapModeUtil.getScale (mm));
        this.mm = mm;
    }

    public IMapMode getMapMode () {
        return mm;
    }

    public void drawImage (Image srcImage, int x, int y) {
        org.eclipse.swt.graphics.Rectangle size = srcImage.getBounds ();
        drawImage (srcImage, 0, 0, size.width, size.height, x, y, size.width, size.height);
    }

    public void drawImage (Image srcImage, int sx, int sy, int sw, int sh, int tx, int ty, int tw, int th) {
        super.drawImage (srcImage, sx, sy, sw, sh, tx, ty, getMapMode ().DPtoLP (tw), getMapMode ().DPtoLP (th));
    }

    public void scale (double amount) {
        getGraphics ().scale (amount);
    }

    int zoomFontHeight (int height) {
        return height;
    }

    Point zoomTextPoint (int x, int y) {
        return zoomRect (x, y, 0, 0).getTopLeft ();
    }

}

