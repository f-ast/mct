package org.eclipse.gmf.runtime.draw2d.ui.render.internal.graphics;

import org.eclipse.draw2d.Graphics;

import org.eclipse.draw2d.geometry.Dimension;

import org.eclipse.draw2d.geometry.Rectangle;

import org.eclipse.gmf.runtime.draw2d.ui.internal.graphics.MapModeGraphics;

import org.eclipse.gmf.runtime.draw2d.ui.internal.mapmode.DiagramMapModeUtil;

import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;

import org.eclipse.gmf.runtime.draw2d.ui.render.RenderedImage;

import org.eclipse.gmf.runtime.draw2d.ui.render.internal.DrawableRenderedImage;

import org.eclipse.gmf.runtime.draw2d.ui.render.internal.RenderHelper;

import org.eclipse.gmf.runtime.draw2d.ui.render.internal.RenderingListener;

public class RenderedMapModeGraphics extends MapModeGraphics implements DrawableRenderedImage {
    boolean allowDelayRender = false;
    Dimension maximumRenderSize = null;

    public boolean shouldAllowDelayRender () {
        return allowDelayRender;
    }

    public RenderedMapModeGraphics (Graphics g, IMapMode mm) {
        this (g, mm, false, null);
    }

    public RenderedMapModeGraphics (Graphics g, IMapMode mm, boolean allowDelayRender, Dimension maximumRenderSize) {
        super (g, mm);
        this.allowDelayRender = allowDelayRender;
        this.maximumRenderSize = maximumRenderSize;
    }

    public RenderedImage drawRenderedImage (RenderedImage srcImage, Rectangle rect, RenderingListener listener) {
        return RenderHelper.getInstance (DiagramMapModeUtil.getScale (getMapMode ()), true, shouldAllowDelayRender (), getMaximumRenderSize ()).drawRenderedImage (getGraphics (), srcImage, rect, listener);
    }

    public Dimension getMaximumRenderSize () {
        return maximumRenderSize;
    }

}

