package org.eclipse.gmf.runtime.lite.edit.parts.update;

import java.util.ArrayList;

import java.util.Collection;

import java.util.LinkedHashSet;

import org.eclipse.emf.common.notify.Notification;

import org.eclipse.emf.ecore.EStructuralFeature;

public interface IUpdatableEditPart {

    public Refresher getRefresher (EStructuralFeature feature, Notification msg);

    public interface Refresher {

        public void refresh ();

    }

    public interface ComposeableRefresher extends Refresher, Iterable < Refresher > {

        public void addRefresher (Refresher refresher);

    }

    public class CompositeRefresher implements Refresher {

        public void addRefresher (Refresher refresher) {
            if (refresher != null) {
                refreshers.add (refresher);
            }
        }

        public void removeRefresher (Refresher refresher) {
            if (refresher != null) {
                refreshers.remove (refresher);
            }
        }

        public void refresh () {
            for (Refresher next : new LinkedHashSet < Refresher > (refreshers)) {
                next.refresh ();
            }
        }

        private Collection < Refresher > refreshers = new ArrayList < Refresher > ();
    }

}

