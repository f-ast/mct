3c3
< import org.eclipse.gef.commands.Command;
---
> import java.util.ArrayList;
5c5
< import org.eclipse.gmf.runtime.emf.type.core.commands.DestroyElementCommand;
---
> import java.util.Collection;
7c7
< import org.eclipse.gmf.runtime.emf.type.core.requests.CreateRelationshipRequest;
---
> import java.util.Collections;
9c9,11
< import org.eclipse.gmf.runtime.emf.type.core.requests.DestroyElementRequest;
---
> import java.util.Iterator;
> 
> import org.eclipse.emf.ecore.EAnnotation;
13c15,29
< import org.eclipse.emf.ecore.EAnnotation;
---
> import org.eclipse.gef.EditPart;
> 
> import org.eclipse.gef.commands.Command;
> 
> import org.eclipse.gef.commands.CompoundCommand;
> 
> import org.eclipse.gmf.graphdef.editor.edit.parts.FigureGalleryEditPart;
> 
> import org.eclipse.gmf.runtime.diagram.ui.requests.EditCommandRequestWrapper;
> 
> import org.eclipse.gmf.runtime.emf.type.core.commands.DestroyElementCommand;
> 
> import org.eclipse.gmf.runtime.emf.type.core.requests.DestroyElementRequest;
> 
> import org.eclipse.gmf.runtime.notation.Edge;
20c36,48
<         return getMSLWrapper (new DestroyElementCommand (req) {
---
>         CompoundCommand cc = new CompoundCommand ();
>         Collection allEdges = new ArrayList ();
>         View view = (View) getHost ().getModel ();
>         allEdges.addAll (view.getSourceEdges ());
>         allEdges.addAll (view.getTargetEdges ());
>         for (Iterator it = allEdges.iterator ();
>         it.hasNext ();) {
>             Edge nextEdge = (Edge) it.next ();
>             EditPart nextEditPart = (EditPart) getHost ().getViewer ().getEditPartRegistry ().get (nextEdge);
>             EditCommandRequestWrapper editCommandRequest = new EditCommandRequestWrapper (new DestroyElementRequest (((FigureGalleryEditPart) getHost ()).getEditingDomain (), req.isConfirmationRequired ()), Collections.EMPTY_MAP);
>             cc.add (nextEditPart.getCommand (editCommandRequest));
>         }
>         cc.add (getMSLWrapper (new DestroyElementCommand (req) {
33,37c61,62
<         );
<     }
< 
<     protected Command getCreateRelationshipCommand (CreateRelationshipRequest req) {
<         return super.getCreateRelationshipCommand (req);
---
>         ));
>         return cc;
