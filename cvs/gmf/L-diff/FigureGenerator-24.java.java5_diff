110a111,112
> import org.eclipse.gmf.graphdef.codegen.templates.TopGenerator;
> 
127a130
>     private static final String ENTRY_POINT = "main";
140,152c143
<         KeyMap keyMap = new HierarchyKeyMap () {
< 
<             public KeyChain map (Object key) {
<                 if (key instanceof String) {
<                     return super.map (key);
<                 } else {
<                     return super.map (key.getClass ());
<                 }
<             }
< 
<         }
< 
<         ;
---
>         KeyMap keyMap = new ClassesOrStringsKeyMap ();
161a153
>         tr.put (ENTRY_POINT, "/top/Top.javajet", TopGenerator.class);
211,212c203,204
<         Object args = new Object [] {fig, importManager, myTopDispatcher.getFQNSwitch (), myInnerDispatcher, Boolean.valueOf (myIsInnerClassCode)};
<         res = myTopDispatcher.dispatch (fig, args);
---
>         Object args = new Object [] {fig, myInnerDispatcher, myTopDispatcher, Boolean.valueOf (myIsInnerClassCode)};
>         res = myTopDispatcher.dispatch (ENTRY_POINT, args);
218a211,222
>     private static class ClassesOrStringsKeyMap extends HierarchyKeyMap {
> 
>         public KeyChain map (Object key) {
>             if (key instanceof String) {
>                 return super.map (key);
>             } else {
>                 return super.map (key.getClass ());
>             }
>         }
> 
>     }
> 
