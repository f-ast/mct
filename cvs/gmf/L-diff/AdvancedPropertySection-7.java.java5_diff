8a9,12
> import org.eclipse.emf.edit.domain.EditingDomain;
> 
> import org.eclipse.emf.edit.domain.IEditingDomainProvider;
> 
10a15,16
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
15,16d20
< import org.eclipse.jface.viewers.IStructuredSelection;
< 
90,93c94,98
<         if (! selection.isEmpty () && selection instanceof IStructuredSelection) {
<             Object firstElement = ((IStructuredSelection) selection).getFirstElement ();
<             if (firstElement instanceof EObject) {
<                 setEObject ((EObject) firstElement);
---
>         IEditingDomainProvider provider = (IEditingDomainProvider) part.getAdapter (IEditingDomainProvider.class);
>         if (provider != null) {
>             EditingDomain theEditingDomain = provider.getEditingDomain ();
>             if (theEditingDomain instanceof TransactionalEditingDomain) {
>                 setEditingDomain ((TransactionalEditingDomain) theEditingDomain);
