12a13,16
> import org.eclipse.core.commands.ExecutionException;
> 
> import org.eclipse.core.commands.operations.IOperationHistory;
> 
31,32d34
< import org.eclipse.gmf.runtime.common.core.command.CommandManager;
< 
120c122
<         final CommandManager manager = (CommandManager) getContext ().getActivePart ().getAdapter (CommandManager.class);
---
>         final IOperationHistory manager = (IOperationHistory) getContext ().getActivePart ().getAdapter (IOperationHistory.class);
134c136,141
<                     manager.execute (command, new NullProgressMonitor ());
---
>                     try {
>                         manager.execute (command, new NullProgressMonitor (), null);
>                     } catch (ExecutionException e) {
>                         Trace.catching (CommonUIServicesDNDPlugin.getDefault (), CommonUIServicesDNDDebugOptions.EXCEPTIONS_CATCHING, getClass (), "drop", e);
>                         Log.error (CommonUIServicesDNDPlugin.getDefault (), CommonUIServicesDNDStatusCodes.SERVICE_FAILURE, "drop", e);
>                     }
141c148,153
<             manager.execute (command, new NullProgressMonitor ());
---
>             try {
>                 manager.execute (command, new NullProgressMonitor (), null);
>             } catch (ExecutionException e) {
>                 Trace.catching (CommonUIServicesDNDPlugin.getDefault (), CommonUIServicesDNDDebugOptions.EXCEPTIONS_CATCHING, getClass (), "drop", e);
>                 Log.error (CommonUIServicesDNDPlugin.getDefault (), CommonUIServicesDNDStatusCodes.SERVICE_FAILURE, "drop", e);
>             }
204c216
<         final CommandManager manager = (CommandManager) getContext ().getActivePart ().getAdapter (CommandManager.class);
---
>         final IOperationHistory manager = (IOperationHistory) getContext ().getActivePart ().getAdapter (IOperationHistory.class);
208c220,228
<                 manager.execute (command, monitor);
---
>                 try {
>                     manager.execute (command, monitor, null);
>                 } catch (ExecutionException e) {
>                     Trace.catching (CommonUIServicesDNDPlugin.getDefault (), CommonUIServicesDNDDebugOptions.EXCEPTIONS_CATCHING, getClass (), "drop", e);
>                     Log.error (CommonUIServicesDNDPlugin.getDefault (), CommonUIServicesDNDStatusCodes.SERVICE_FAILURE, "drop", e);
>                     RuntimeException re = new RuntimeException (e);
>                     Trace.throwing (CommonUIServicesDNDPlugin.getDefault (), CommonUIServicesDNDDebugOptions.EXCEPTIONS_THROWING, getClass (), "runCommandInProgressMonitorDialog", re);
>                     throw re;
>                 }
