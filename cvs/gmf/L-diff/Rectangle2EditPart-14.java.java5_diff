42a43,44
> import org.eclipse.gmf.gmfgraph.ColorConstants;
> 
84a87,90
> import org.eclipse.gmf.runtime.notation.FillStyle;
> 
> import org.eclipse.gmf.runtime.notation.LineStyle;
> 
89,90d94
< import org.eclipse.gmf.runtime.notation.ShapeStyle;
< 
451c455
<         final ShapeStyle shapeStyle = (ShapeStyle) view.getStyle (NotationPackage.eINSTANCE.getShapeStyle ());
---
>         final FillStyle theFillStyle = (FillStyle) view.getStyle (NotationPackage.eINSTANCE.getFillStyle ());
459,462c463
<                 switch (modelColor.getValue ().getValue ()) {
<                     default :
<                         rgbColor = - 1;
<                 }
---
>                 rgbColor = getRgbColor (modelColor);
464c465
<             if (rgbColor != - 1 && shapeStyle.getFillColor () != rgbColor) {
---
>             if (rgbColor != - 1 && theFillStyle.getFillColor () != rgbColor) {
468c469
<                         shapeStyle.setFillColor (rgbColor);
---
>                         theFillStyle.setFillColor (rgbColor);
478c479
<                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Background background color with the model", e);
---
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Background color with the model", e);
481a483
>         final LineStyle theLineStyle = (LineStyle) view.getStyle (NotationPackage.eINSTANCE.getLineStyle ());
489,491c491
<                 switch (modelColor.getValue ().getValue ()) {
<                     default :
<                         rgbColor = - 1;
---
>                 rgbColor = getRgbColor (modelColor);
493,494c493
<             }
<             if (rgbColor != - 1 && shapeStyle.getLineColor () != rgbColor) {
---
>             if (rgbColor != - 1 && theLineStyle.getLineColor () != rgbColor) {
498c497
<                         shapeStyle.setLineColor (rgbColor);
---
>                         theLineStyle.setLineColor (rgbColor);
508c507
<                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Foreground background color with the model", e);
---
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Foreground color with the model", e);
512c511,512
<         addListenerFilter ("ShapeStyleListener", new NotificationListener () {
---
>         final FillStyle theFillStyle1 = (FillStyle) view.getStyle (NotationPackage.eINSTANCE.getFillStyle ());
>         addListenerFilter ("FillStyleListener", new NotificationListener () {
516c516
<                     new AbstractEMFOperation (getEditingDomain (), "Synchronizing model size with the view", Collections.singletonMap (Transaction.OPTION_UNPROTECTED, Boolean.TRUE)) {
---
>                     new AbstractEMFOperation (getEditingDomain (), "Synchronizing model Background color with the view", Collections.singletonMap (Transaction.OPTION_UNPROTECTED, Boolean.TRUE)) {
519,523c519,521
<                             ShapeStyle shapeStyle = (ShapeStyle) notification.getNotifier ();
<                             switch (notification.getFeatureID (ShapeStyle.class)) {
<                                 case NotationPackage.SHAPE_STYLE__FILL_COLOR :
<                                     {
<                                         int color = shapeStyle.getFillColor ();
---
>                             FillStyle theFillStyle = (FillStyle) notification.getNotifier ();
>                             if (notification.getFeatureID (FillStyle.class) == NotationPackage.FILL_STYLE__FILL_COLOR) {
>                                 int color = theFillStyle.getFillColor ();
536,539c534,559
<                                         break;
<                                     } case NotationPackage.SHAPE_STYLE__LINE_COLOR :
<                                     {
<                                         int color = shapeStyle.getLineColor ();
---
>                             }
>                             return Status.OK_STATUS;
>                         }
> 
>                     }
> 
>                     .execute (new NullProgressMonitor (), null);
>                 } catch (ExecutionException e) {
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize model Background color with the view", e);
>                 }
>             }
> 
>         }
> 
>         , theFillStyle1);
>         final LineStyle theLineStyle1 = (LineStyle) view.getStyle (NotationPackage.eINSTANCE.getLineStyle ());
>         addListenerFilter ("LineStyleListener", new NotificationListener () {
> 
>             public void notifyChanged (final Notification notification) {
>                 try {
>                     new AbstractEMFOperation (getEditingDomain (), "Synchronizing model Foreground color with the view", Collections.singletonMap (Transaction.OPTION_UNPROTECTED, Boolean.TRUE)) {
> 
>                         protected IStatus doExecute (IProgressMonitor monitor, IAdaptable info) throws ExecutionException {
>                             LineStyle theLineStyle = (LineStyle) notification.getNotifier ();
>                             if (notification.getFeatureID (LineStyle.class) == NotationPackage.LINE_STYLE__LINE_COLOR) {
>                                 int color = theLineStyle.getLineColor ();
552,553c572
<                                         break;
<                                     }}
---
>                             }
561c580
<                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize model size with the view", e);
---
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize model Foreground color with the view", e);
567c586
<         , shapeStyle);
---
>         , theLineStyle1);
588a608,676
>     public static int getRgbColor (ConstantColor modelColor) {
>         final int rgbColor;
>         switch (modelColor.getValue ().getValue ()) {
>             case ColorConstants.WHITE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.white.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.BLACK :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.black.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.LIGHT_GRAY :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.lightGray.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.GRAY :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.gray.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.DARK_GRAY :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.darkGray.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.RED :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.red.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.ORANGE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.orange.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.YELLOW :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.yellow.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.GREEN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.green.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.LIGHT_GREEN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.lightGreen.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.DARK_GREEN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.darkGreen.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.CYAN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.cyan.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.LIGHT_BLUE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.lightBlue.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.BLUE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.blue.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.DARK_BLUE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.darkBlue.getRGB ().hashCode ();
>                     break;
>                 } default :
>                 rgbColor = - 1;
>         }
>         return rgbColor;
>     }
> 
