44a45,46
> import org.eclipse.swt.widgets.Display;
> 
95,96c97,104
<         if (progressMonitor != null) getCommandManager ().execute (command, progressMonitor);
<         else getCommandManager ().execute (command);
---
>         if (progressMonitor != null) {
>             DiagramGraphicalViewer viewer = getDiagramGraphicalViewer ();
>             if (viewer != null && Display.getCurrent () == null) viewer.enableUpdates (false);
> 
>             try {
>                 getCommandManager ().execute (command, progressMonitor);
>             } finally {
>                 if (viewer != null) viewer.enableUpdates (true);
98a107,123
>         } else getCommandManager ().execute (command);
> 
>     }
> 
>     private DiagramGraphicalViewer getDiagramGraphicalViewer () {
>         IDiagramEditDomain ded = getDiagramEditDomain ();
>         DiagramGraphicalViewer viewer = null;
>         if (ded instanceof DiagramEditDomain) {
>             IDiagramWorkbenchPart dgrmWP = ((DiagramEditDomain) ded).getDiagramEditorPart ();
>             if (dgrmWP != null) {
>                 IDiagramGraphicalViewer dgv = ((DiagramEditDomain) ded).getDiagramEditorPart ().getDiagramGraphicalViewer ();
>                 if (dgv instanceof DiagramGraphicalViewer) viewer = (DiagramGraphicalViewer) dgv;
> 
>             }
>         }
>         return viewer;
>     }
