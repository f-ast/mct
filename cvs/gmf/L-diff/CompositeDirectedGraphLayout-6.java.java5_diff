16a17,18
> import org.eclipse.draw2d.PositionConstants;
> 
33a36
>     private int graphDirection = PositionConstants.SOUTH;
35a39
>         graphDirection = graph.getDirection ();
77a82,87
>             AdvancedSubGraph advancedSubgraphParent = parent instanceof AdvancedSubGraph ? (AdvancedSubGraph) parent : null;
>             if (advancedSubgraphParent != null && advancedSubgraphParent.getDirection () != PositionConstants.NONE) {
>                 g.setDirection (advancedSubgraphParent.getDirection ());
>             } else {
>                 g.setDirection (graphDirection);
>             }
80,81c90,92
<             if (parent instanceof AdvancedSubGraph) adjustAutoSizeNodeWidthAndHeight ((AdvancedSubGraph) parent);
< 
---
>             if (advancedSubgraphParent != null) {
>                 adjustAutoSizeNodeWidthAndHeight (advancedSubgraphParent);
>             }
