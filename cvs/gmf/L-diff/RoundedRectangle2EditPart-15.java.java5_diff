44a45,46
> import org.eclipse.gmf.gmfgraph.ColorConstants;
> 
86a89,92
> import org.eclipse.gmf.runtime.notation.FillStyle;
> 
> import org.eclipse.gmf.runtime.notation.LineStyle;
> 
91,92d96
< import org.eclipse.gmf.runtime.notation.ShapeStyle;
< 
338a343
>                 myFigure.repaint ();
347a353
>                 myFigure.repaint ();
475c481
<         final ShapeStyle shapeStyle = (ShapeStyle) view.getStyle (NotationPackage.eINSTANCE.getShapeStyle ());
---
>         final FillStyle theFillStyle = (FillStyle) view.getStyle (NotationPackage.eINSTANCE.getFillStyle ());
483,486c489
<                 switch (modelColor.getValue ().getValue ()) {
<                     default :
<                         rgbColor = - 1;
<                 }
---
>                 rgbColor = getRgbColor (modelColor);
488c491
<             if (rgbColor != - 1 && shapeStyle.getFillColor () != rgbColor) {
---
>             if (rgbColor != - 1 && theFillStyle.getFillColor () != rgbColor) {
492c495
<                         shapeStyle.setFillColor (rgbColor);
---
>                         theFillStyle.setFillColor (rgbColor);
502c505
<                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Background background color with the model", e);
---
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Background color with the model", e);
505a509
>         final LineStyle theLineStyle = (LineStyle) view.getStyle (NotationPackage.eINSTANCE.getLineStyle ());
513,515c517
<                 switch (modelColor.getValue ().getValue ()) {
<                     default :
<                         rgbColor = - 1;
---
>                 rgbColor = getRgbColor (modelColor);
517,518c519
<             }
<             if (rgbColor != - 1 && shapeStyle.getLineColor () != rgbColor) {
---
>             if (rgbColor != - 1 && theLineStyle.getLineColor () != rgbColor) {
522c523
<                         shapeStyle.setLineColor (rgbColor);
---
>                         theLineStyle.setLineColor (rgbColor);
532c533
<                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Foreground background color with the model", e);
---
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize view Foreground color with the model", e);
536c537,538
<         addListenerFilter ("ShapeStyleListener", new NotificationListener () {
---
>         final FillStyle theFillStyle1 = (FillStyle) view.getStyle (NotationPackage.eINSTANCE.getFillStyle ());
>         addListenerFilter ("FillStyleListener", new NotificationListener () {
540c542
<                     new AbstractEMFOperation (getEditingDomain (), "Synchronizing model size with the view", Collections.singletonMap (Transaction.OPTION_UNPROTECTED, Boolean.TRUE)) {
---
>                     new AbstractEMFOperation (getEditingDomain (), "Synchronizing model Background color with the view", Collections.singletonMap (Transaction.OPTION_UNPROTECTED, Boolean.TRUE)) {
543,547c545,547
<                             ShapeStyle shapeStyle = (ShapeStyle) notification.getNotifier ();
<                             switch (notification.getFeatureID (ShapeStyle.class)) {
<                                 case NotationPackage.SHAPE_STYLE__FILL_COLOR :
<                                     {
<                                         int color = shapeStyle.getFillColor ();
---
>                             FillStyle theFillStyle = (FillStyle) notification.getNotifier ();
>                             if (notification.getFeatureID (FillStyle.class) == NotationPackage.FILL_STYLE__FILL_COLOR) {
>                                 int color = theFillStyle.getFillColor ();
560,563c560,585
<                                         break;
<                                     } case NotationPackage.SHAPE_STYLE__LINE_COLOR :
<                                     {
<                                         int color = shapeStyle.getLineColor ();
---
>                             }
>                             return Status.OK_STATUS;
>                         }
> 
>                     }
> 
>                     .execute (new NullProgressMonitor (), null);
>                 } catch (ExecutionException e) {
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize model Background color with the view", e);
>                 }
>             }
> 
>         }
> 
>         , theFillStyle1);
>         final LineStyle theLineStyle1 = (LineStyle) view.getStyle (NotationPackage.eINSTANCE.getLineStyle ());
>         addListenerFilter ("LineStyleListener", new NotificationListener () {
> 
>             public void notifyChanged (final Notification notification) {
>                 try {
>                     new AbstractEMFOperation (getEditingDomain (), "Synchronizing model Foreground color with the view", Collections.singletonMap (Transaction.OPTION_UNPROTECTED, Boolean.TRUE)) {
> 
>                         protected IStatus doExecute (IProgressMonitor monitor, IAdaptable info) throws ExecutionException {
>                             LineStyle theLineStyle = (LineStyle) notification.getNotifier ();
>                             if (notification.getFeatureID (LineStyle.class) == NotationPackage.LINE_STYLE__LINE_COLOR) {
>                                 int color = theLineStyle.getLineColor ();
576,577c598
<                                         break;
<                                     }}
---
>                             }
585c606
<                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize model size with the view", e);
---
>                     GMFGraphDiagramEditorPlugin.getInstance ().logError ("Unable to synchronize model Foreground color with the view", e);
591c612
<         , shapeStyle);
---
>         , theLineStyle1);
612a634,702
>     public static int getRgbColor (ConstantColor modelColor) {
>         final int rgbColor;
>         switch (modelColor.getValue ().getValue ()) {
>             case ColorConstants.WHITE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.white.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.BLACK :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.black.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.LIGHT_GRAY :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.lightGray.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.GRAY :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.gray.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.DARK_GRAY :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.darkGray.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.RED :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.red.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.ORANGE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.orange.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.YELLOW :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.yellow.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.GREEN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.green.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.LIGHT_GREEN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.lightGreen.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.DARK_GREEN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.darkGreen.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.CYAN :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.cyan.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.LIGHT_BLUE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.lightBlue.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.BLUE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.blue.getRGB ().hashCode ();
>                     break;
>                 } case ColorConstants.DARK_BLUE :
>                 {
>                     rgbColor = org.eclipse.draw2d.ColorConstants.darkBlue.getRGB ().hashCode ();
>                     break;
>                 } default :
>                 rgbColor = - 1;
>         }
>         return rgbColor;
>     }
> 
