327,328c327,332
<             i.hasNext ();) l.addAll (getReturnValues ((ICommand) i.next ()));
< 
---
>             i.hasNext ();) {
>                 IUndoableOperation child = (IUndoableOperation) i.next ();
>                 if (child instanceof ICommand) {
>                     l.addAll (getReturnValues ((ICommand) child));
>                 }
>             }
