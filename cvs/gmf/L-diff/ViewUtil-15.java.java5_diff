303,305c303,305
<         if (object != null) {
<             if (object.eIsProxy ()) return EMFCoreUtil.resolve (TransactionUtil.getEditingDomain (object), object);
<             else return object;
---
>         if (object != null && object.eIsProxy ()) {
>             TransactionalEditingDomain domain = TransactionUtil.getEditingDomain (object);
>             if (domain != null) return EMFCoreUtil.resolve (domain, object);
308c308
<         return null;
---
>         return object;
