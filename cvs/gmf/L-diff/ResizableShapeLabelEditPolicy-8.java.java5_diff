68,73d67
<         PointList pl = new PointList ();
<         if (getHost ().getParent () instanceof AbstractConnectionEditPart) {
<             pl = ((AbstractConnectionEditPart) getHost ().getParent ()).getConnectionFigure ().getPoints ();
<         } else {
<             pl.addPoint (getReferencePoint ());
<         }
127c121,123
<         ICommand resizeCommand = new SetBoundsCommand (editingDomain, DiagramUIMessages.SetLocationCommand_Label_Resize, new EObjectAdapter (shapeView), rect.getSize ());
---
>         Point refPoint = getReferencePoint ();
>         Point normalPoint = LabelHelper.offsetFromRelativeCoordinate (getHostFigure (), rect, refPoint);
>         ICommand resizeCommand = new SetBoundsCommand (editingDomain, DiagramUIMessages.SetLocationCommand_Label_Resize, new EObjectAdapter (shapeView), new Rectangle (normalPoint, rect.getSize ()));
