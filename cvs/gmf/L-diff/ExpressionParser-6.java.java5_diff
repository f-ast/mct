5,8d4
< import org.eclipse.gmf.internal.xpand.expression.ast.*;
< 
< import java.util.Collections;
< 
12a9,18
> import java.util.regex.Matcher;
> 
> import java.util.regex.Pattern;
> 
> import org.eclipse.gmf.internal.xpand.util.ParserException.ErrorLocationInfo;
> 
> import org.eclipse.gmf.internal.xpand.expression.ast.*;
> 
> import java.util.Collections;
> 
131a138
>             resetErrors ();
147a155,193
>     public ErrorLocationInfo [] getErrors () {
>         return errors.toArray (new ErrorLocationInfo [errors.size ()]);
>     }
> 
>     private void resetErrors () {
>         errors.clear ();
>     }
> 
>     private final List < ErrorLocationInfo > errors = new LinkedList < ErrorLocationInfo > ();
> 
>     @Override
>     public void reportError (int errorCode, String locationInfo, int leftToken, int rightToken, String tokenText) {
>         final int leftTokenLine = getLine (leftToken);
>         final int leftTokenColumn = getColumn (leftToken);
>         final int rightTokenLine = getEndLine (rightToken);
>         final int rightTokenColumn = getEndColumn (rightToken);
>         final String msg = tokenText + errorMsgText [errorCode];
>         errors.add (new ErrorLocationInfo (msg, leftTokenLine, leftTokenColumn, rightTokenLine, rightTokenColumn));
>         super.reportError (errorCode, locationInfo, leftToken, rightToken, tokenText);
>     }
> 
>     @Override
>     public void reportError (int errorCode, String locationInfo, String tokenText) {
>         try {
>             Matcher m = Pattern.compile ("[^:]+:(\\d+):(\\d+):(\\d+):(\\d+):.*").matcher (locationInfo);
>             boolean t = m.matches ();
>             assert t;
>             final int leftTokenLine = getLine (Integer.parseInt (m.group (1)));
>             final int leftTokenColumn = getColumn (Integer.parseInt (m.group (2)));
>             final int rightTokenLine = getEndLine (Integer.parseInt (m.group (3)));
>             final int rightTokenColumn = getEndColumn (Integer.parseInt (m.group (4)));
>             final String msg = tokenText + errorMsgText [errorCode];
>             errors.add (new ErrorLocationInfo (msg, leftTokenLine, leftTokenColumn, rightTokenLine, rightTokenColumn));
>         } catch (Exception ex) {
>             errors.add (new ErrorLocationInfo (tokenText + errorMsgText [errorCode]));
>         }
>         super.reportError (errorCode, locationInfo, tokenText);
>     }
> 
