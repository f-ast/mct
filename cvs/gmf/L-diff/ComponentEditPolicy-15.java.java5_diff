96c96,97
<         if (parent instanceof IGraphicalEditPart) {
---
>         EObject eObject = (EObject) getHost ().getAdapter (EObject.class);
>         if (eObject != null && parent != null) {
98,100c99
<             if (cep != null) {
<                 return cep.isEnabled ();
<             }
---
>             return cep != null && cep.isEnabled () && cep.canCreate (eObject);
