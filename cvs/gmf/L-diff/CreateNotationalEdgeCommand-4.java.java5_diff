4a5,8
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
> import org.eclipse.emf.transaction.util.TransactionUtil;
> 
29,30c33,41
<     public boolean canExecute () {
<         return getParent () != null && getCreatedView () != null && source != null && target != null;
---
>     protected boolean prepare () {
>         if (getParent () == null || getCreatedView () == null || source == null || target == null) {
>             return false;
>         }
>         TransactionalEditingDomain domain = TransactionUtil.getEditingDomain (getParent ());
>         if (domain == null || domain.isReadOnly (getParent ().eResource ())) {
>             return false;
>         }
>         return true;
