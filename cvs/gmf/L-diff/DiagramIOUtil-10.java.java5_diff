38a39,40
> import org.eclipse.gmf.runtime.common.core.util.Log;
> 
92a95
>             logResourceErrorsAndWarnings (resource);
97a101,113
>     private static void logResourceErrorsAndWarnings (Resource resource) {
>         for (Iterator iter = resource.getErrors ().iterator ();
>         iter.hasNext ();) {
>             Resource.Diagnostic diagnostic = (Resource.Diagnostic) iter.next ();
>             Log.error (EditorPlugin.getInstance (), EditorStatusCodes.ERROR, diagnostic.getMessage ());
>         }
>         for (Iterator iter = resource.getWarnings ().iterator ();
>         iter.hasNext ();) {
>             Resource.Diagnostic diagnostic = (Resource.Diagnostic) iter.next ();
>             Log.warning (EditorPlugin.getInstance (), EditorStatusCodes.WARNING, diagnostic.getMessage ());
>         }
>     }
> 
107,108c123,132
<             String storagePath = fStorage.getFullPath ().toString ();
<             Resource resource = editingDomain.getResourceSet ().getResource (URI.createPlatformResourceURI (storagePath, true), true);
---
>             String storageName = fStorage.getName ();
>             URI uri = URI.createPlatformResourceURI (storageName);
>             Resource resource = editingDomain.getResourceSet ().getResource (uri, false);
>             if (resource == null) {
>                 resource = editingDomain.getResourceSet ().createResource (uri);
>             }
>             if (! resource.isLoaded ()) {
>                 resource.load (fStorage.getContents (), loadOptions);
>             }
>             logResourceErrorsAndWarnings (resource);
136c160
<                     Throwable causeError = e.getWrappedException ();
---
>                     Throwable causeError = e.getCause ();
142c166
<                         Exception exc = ((Resource.IOWrappedException) causeError).getWrappedException ();
---
>                         Exception exc = (Exception) ((Resource.IOWrappedException) causeError).getCause ();
157c181
<                         throw new CoreException (new Status (IStatus.ERROR, EditorPlugin.getPluginId (), EditorStatusCodes.ERROR, UNABLE_TO_LOAD_DIAGRAM, causeError));
---
>                         throw e;
177,178c201,204
<             } else thrownExcp = new CoreException (new Status (IStatus.ERROR, EditorPlugin.getPluginId (), EditorStatusCodes.ERROR, e.getMessage (), e));
< 
---
>             } else {
>                 String exceptionMessage = e.getLocalizedMessage ();
>                 thrownExcp = new CoreException (new Status (IStatus.ERROR, EditorPlugin.getPluginId (), EditorStatusCodes.ERROR, exceptionMessage != null ? exceptionMessage : "load(IFile, boolean)", e));
>             }
206a233
>         logResourceErrorsAndWarnings (notationModel);
