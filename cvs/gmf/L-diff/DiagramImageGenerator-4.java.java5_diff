19,32d18
< import org.eclipse.jface.preference.IPreferenceStore;
< 
< import org.eclipse.jface.resource.ImageDescriptor;
< 
< import org.eclipse.swt.graphics.GC;
< 
< import org.eclipse.swt.graphics.Image;
< 
< import org.eclipse.swt.graphics.ImageData;
< 
< import org.eclipse.swt.graphics.Rectangle;
< 
< import org.eclipse.swt.widgets.Display;
< 
45c31
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
52a39,52
> import org.eclipse.jface.preference.IPreferenceStore;
> 
> import org.eclipse.jface.resource.ImageDescriptor;
> 
> import org.eclipse.swt.graphics.GC;
> 
> import org.eclipse.swt.graphics.Image;
> 
> import org.eclipse.swt.graphics.ImageData;
> 
> import org.eclipse.swt.graphics.Rectangle;
> 
> import org.eclipse.swt.widgets.Display;
> 
95c95,96
<             awtImage = new BufferedImage (MapMode.LPtoDP (sourceRect.width), MapMode.LPtoDP (sourceRect.height), BufferedImage.TYPE_4BYTE_ABGR_PRE);
---
>             IMapMode mm = getMapMode ();
>             awtImage = new BufferedImage (mm.LPtoDP (sourceRect.width), mm.LPtoDP (sourceRect.height), BufferedImage.TYPE_4BYTE_ABGR_PRE);
106,107c107,108
<             Graphics graphics = new GraphicsToGraphics2DAdaptor (g2d, new Rectangle (0, 0, MapMode.LPtoDP (sourceRect.width), MapMode.LPtoDP (sourceRect.height)));
<             RenderedMapModeGraphics mapModeGraphics = new RenderedMapModeGraphics (graphics);
---
>             Graphics graphics = new GraphicsToGraphics2DAdaptor (g2d, new Rectangle (0, 0, mm.LPtoDP (sourceRect.width), mm.LPtoDP (sourceRect.height)));
>             RenderedMapModeGraphics mapModeGraphics = new RenderedMapModeGraphics (graphics, mm);
