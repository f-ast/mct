64c64
<     public TypePattern resolve (EClass type, EPackage domainPackage) {
---
>     public TypePattern resolve (EClass type, EPackage domainPackage, EClass diagramClass) {
74a75,77
>             if (diagramClass != null && ! ContainmentClosure.contains (diagramClass, type, domainPackage)) {
>                 return null;
>             }
92a96,103
>         if (diagramClass != null) {
>             if (source != null && ! ContainmentClosure.contains (diagramClass, source.getEReferenceType (), domainPackage)) {
>                 return null;
>             }
>             if (target != null && ! ContainmentClosure.contains (diagramClass, target.getEReferenceType (), domainPackage)) {
>                 return null;
>             }
>         }
