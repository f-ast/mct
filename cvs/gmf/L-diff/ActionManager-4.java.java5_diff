17,22d16
< import org.eclipse.jface.dialogs.ProgressMonitorDialog;
< 
< import org.eclipse.jface.operation.IRunnableWithProgress;
< 
< import org.eclipse.swt.custom.BusyIndicator;
< 
35c29,33
< import org.eclipse.gmf.runtime.common.ui.internal.l10n.ResourceManager;
---
> import org.eclipse.jface.dialogs.ProgressMonitorDialog;
> 
> import org.eclipse.jface.operation.IRunnableWithProgress;
> 
> import org.eclipse.swt.custom.BusyIndicator;
39d36
<     public static final String REPEAT_LABEL_PREFIX = ResourceManager.getI18NString ("ActionManager.repeat.label.prefix");
43c40
<     private IRepeatableAction action = null;
---
>     private IActionWithProgress action = null;
63c60
<     protected final IRepeatableAction getAction () {
---
>     protected final IActionWithProgress getAction () {
67c64
<     protected final void setAction (IRepeatableAction action) {
---
>     protected final void setAction (IActionWithProgress action) {
75,78d71
<     public String getRepeatLabel () {
<         return REPEAT_LABEL_PREFIX + (canRepeat () ? SPACE + getAction ().getLabel () : EMPTY_STRING);
<     }
< 
101,104d93
<     public boolean canRepeat () {
<         return false;
<     }
< 
110,138c99
<     public void repeat () {
<         if (! canRepeat ()) {
<             UnsupportedOperationException uoe = new UnsupportedOperationException ();
<             Trace.throwing (CommonUIPlugin.getDefault (), CommonUIDebugOptions.EXCEPTIONS_THROWING, getClass (), "repeat", uoe);
<             throw uoe;
<         }
<         IRepeatableAction.WorkIndicatorType type = getAction ().getWorkIndicatorType ();
<         if (type == IRepeatableAction.WorkIndicatorType.PROGRESS_MONITOR) {
<             repeatActionInProgressMonitorDialog (getAction (), false);
<         } else if (type == IRepeatableAction.WorkIndicatorType.CANCELABLE_PROGRESS_MONITOR) {
<             repeatActionInProgressMonitorDialog (getAction (), true);
<         } else if (type == IRepeatableAction.WorkIndicatorType.BUSY) {
<             BusyIndicator.showWhile (null, new Runnable () {
< 
<                 public void run () {
<                     getAction ().repeat (new NullProgressMonitor ());
<                 }
< 
<             }
< 
<             );
<         } else {
<             getAction ().run (new NullProgressMonitor ());
<         }
< 
<         Trace.trace (CommonUIPlugin.getDefault (), CommonUIDebugOptions.ACTIONS_REPEAT, "Action '" + String.valueOf (getAction ()) + "' repeated.");
<     }
< 
<     public void run (final IRepeatableAction theAction) {
---
>     public void run (final IActionWithProgress theAction) {
148,149c109,110
<         IRepeatableAction.WorkIndicatorType type = theAction.getWorkIndicatorType ();
<         if (type == IRepeatableAction.WorkIndicatorType.PROGRESS_MONITOR) {
---
>         IActionWithProgress.WorkIndicatorType type = theAction.getWorkIndicatorType ();
>         if (type == IActionWithProgress.WorkIndicatorType.PROGRESS_MONITOR) {
151c112
<         } else if (type == IRepeatableAction.WorkIndicatorType.CANCELABLE_PROGRESS_MONITOR) {
---
>         } else if (type == IActionWithProgress.WorkIndicatorType.CANCELABLE_PROGRESS_MONITOR) {
153c114
<         } else if (type == IRepeatableAction.WorkIndicatorType.BUSY) {
---
>         } else if (type == IActionWithProgress.WorkIndicatorType.BUSY) {
186c147
<     private void runActionInProgressMonitorDialog (final IRepeatableAction act, boolean cancelable) {
---
>     private void runActionInProgressMonitorDialog (final IActionWithProgress act, boolean cancelable) {
199,211d159
<     private void repeatActionInProgressMonitorDialog (final IRepeatableAction act, boolean cancelable) {
<         IRunnableWithProgress runnable = new IRunnableWithProgress () {
< 
<             public void run (IProgressMonitor monitor) {
<                 act.repeat (monitor);
<             }
< 
<         }
< 
<         ;
<         runInProgressMonitorDialog (runnable, cancelable);
<     }
< 
