3,4d2
< import java.util.ArrayList;
< 
9,10d6
< import java.util.List;
< 
25,26d20
< import org.eclipse.draw2d.Graphics;
< 
31,32d24
< import org.eclipse.draw2d.PositionConstants;
< 
35,36d26
< import org.eclipse.draw2d.geometry.Rectangle;
< 
49,52d38
< import org.eclipse.gef.handles.MoveHandle;
< 
< import org.eclipse.gef.handles.ResizableHandleKit;
< 
91,92d76
< import org.eclipse.gmf.runtime.diagram.ui.editpolicies.ResizableShapeEditPolicy;
< 
537,564d520
<     public EditPolicy getPrimaryDragEditPolicy () {
<         return new ResizableShapeEditPolicy () {
< 
<             protected List createSelectionHandles () {
<                 final org.eclipse.gef.GraphicalEditPart part = (org.eclipse.gef.GraphicalEditPart) getHost ();
<                 final List list = new ArrayList ();
<                 addMoveHandle (part, list);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.NORTH);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.SOUTH);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.WEST);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.EAST);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.NORTH_EAST);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.NORTH_WEST);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.SOUTH_EAST);
<                 ResizableHandleKit.addHandle (part, list, PositionConstants.SOUTH_WEST);
<                 return list;
<             }
< 
<             private void addMoveHandle (final org.eclipse.gef.GraphicalEditPart part, final List list) {
<                 MoveHandle moveHandle = new MoveHandle (part);
<                 list.add (moveHandle);
<             }
< 
<         }
< 
<         ;
<     }
< 
592d547
<         private Rectangle myBounds;
601,642d555
<         protected void outlineShape (Graphics g) {
<             Rectangle bounds = getBounds ();
<             g.translate (bounds.x, bounds.y);
<             super.outlineShape (g);
<             g.translate (- bounds.x, - bounds.y);
<         }
< 
<         public Rectangle getBounds () {
<             if (myBounds == null) {
<                 myBounds = new Rectangle (0, 0, 0, 0);
<             }
<             return myBounds;
<         }
< 
<         public void primTranslate (int dx, int dy) {
<             getBounds ().x += dx;
<             getBounds ().y += dy;
<             if (useLocalCoordinates ()) {
<                 fireCoordinateSystemChanged ();
<                 return;
<             }
<         }
< 
<         public void setBounds (Rectangle rect) {
<             boolean resize = (rect.width != getBounds ().width) || (rect.height != getBounds ().height), translate = (rect.x != getBounds ().x) || (rect.y != getBounds ().y);
<             if ((resize || translate) && isVisible ()) erase ();
< 
<             if (translate) {
<                 int dx = rect.x - getBounds ().x;
<                 int dy = rect.y - getBounds ().y;
<                 primTranslate (dx, dy);
<             }
<             getBounds ().width = rect.width;
<             getBounds ().height = rect.height;
<             if (translate || resize) {
<                 if (resize) invalidate ();
< 
<                 fireFigureMoved ();
<                 repaint ();
<             }
<         }
< 
