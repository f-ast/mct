4a5,6
> import java.util.Collections;
> 
7c9
< import java.util.Iterator;
---
> import java.util.Map;
112,114c114
<             for (Iterator it = getEditingDomain ().getResourceSet ().getResources ().iterator ();
<             it.hasNext ();) {
<                 Resource next = (Resource) it.next ();
---
>             for (Resource next : getEditingDomain ().getResourceSet ().getResources ()) {
130c130,134
<         myDiagramDisplayer.save (monitor);
---
>         myDiagramDisplayer.save (getSaveOptions (), monitor);
>     }
> 
>     protected Map < ?, ? > getSaveOptions () {
>         return Collections.emptyMap ();
330,332c334,335
<                 for (Iterator it = resourceSet.getResources ().iterator ();
<                 it.hasNext ();) {
<                     ((Resource) it.next ()).setTrackingModification (true);
---
>                 for (Resource next : resourceSet.getResources ()) {
>                     next.setTrackingModification (true);
348,351c351,354
<                             Collection resources = (Collection) msg.getNewValue ();
<                             for (Iterator it = resources.iterator ();
<                             it.hasNext ();) {
<                                 ((Resource) it.next ()).setTrackingModification (true);
---
>                             @SuppressWarnings("unchecked")
>                             Collection < Resource > resources = (Collection < Resource >) msg.getNewValue ();
>                             for (Resource next : resources) {
>                                 next.setTrackingModification (true);
