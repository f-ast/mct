14a15,16
> import org.eclipse.draw2d.geometry.Rectangle;
> 
38a41,42
> import org.eclipse.gmf.runtime.diagram.ui.editpolicies.NonResizableEditPolicyEx;
> 
75,83c79
<         DefaultSizeNodeFigure result = new DefaultSizeNodeFigure (getMapMode ().DPtoLP (0), getMapMode ().DPtoLP (0)) {
< 
<             protected boolean useLocalCoordinates () {
<                 return true;
<             }
< 
<         }
< 
<         ;
---
>         DefaultSizeNodeFigureExt result = new DefaultSizeNodeFigureExt (getMapMode ().DPtoLP (0), getMapMode ().DPtoLP (0));
149d144
<             getPrimaryShape ().setLineWidth (modelElement.getLineWidth ());
158a154,156
>             refreshMainFigureBounds ();
>             getPrimaryShape ().setLineWidth (modelElement.getLineWidth ());
>             refreshMainFigureBounds ();
214,223d211
<         ChangeTracker lineWidthTracker = new ChangeTracker () {
< 
<             public void modelChanged (Notification msg) {
<                 getPrimaryShape ().setLineWidth (modelElement.getLineWidth ());
<             }
< 
<         }
< 
<         ;
<         myDomainElementAdapters.add (new FeatureTracker (lineWidthTracker, GMFGraphPackage.eINSTANCE.getShape_LineWidth ()));
299a288
>                 refreshMainFigureBounds ();
305a295,305
>         ChangeTracker lineWidthTracker = new ChangeTracker () {
> 
>             public void modelChanged (Notification msg) {
>                 getPrimaryShape ().setLineWidth (modelElement.getLineWidth ());
>                 refreshMainFigureBounds ();
>             }
> 
>         }
> 
>         ;
>         myDomainElementAdapters.add (new FeatureTracker (lineWidthTracker, GMFGraphPackage.eINSTANCE.getShape_LineWidth ()));
322a323,352
>     public void refreshMainFigureBounds () {
>         DefaultSizeNodeFigureExt nodeFigure = (DefaultSizeNodeFigureExt) getFigure ();
>         nodeFigure.fireFigureMoved ();
>         nodeFigure.revalidate ();
>     }
> 
>     public EditPolicy getPrimaryDragEditPolicy () {
>         return new NonResizableEditPolicyEx ();
>     }
> 
>     class DefaultSizeNodeFigureExt extends DefaultSizeNodeFigure {
> 
>         DefaultSizeNodeFigureExt (int width, int height) {
>             super (width, height);
>         }
> 
>         public void setBounds (Rectangle rect) {
>             getPrimaryShape ().setBounds (rect);
>         }
> 
>         public Rectangle getBounds () {
>             return getPrimaryShape ().getBounds ();
>         }
> 
>         public void fireFigureMoved () {
>             super.fireFigureMoved ();
>         }
> 
>     }
> 
