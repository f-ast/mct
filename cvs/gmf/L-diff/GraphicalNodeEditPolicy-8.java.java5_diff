37,38d36
< import org.eclipse.gef.commands.UnexecutableCommand;
< 
43,48d40
< import org.eclipse.jface.preference.IPreferenceStore;
< 
< import org.eclipse.jface.util.Assert;
< 
< import org.eclipse.swt.widgets.Display;
< 
64a57,58
> import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;
> 
101,102d94
< import org.eclipse.gmf.runtime.diagram.core.util.ViewUtil;
< 
107,108d98
< import org.eclipse.gmf.runtime.emf.ui.services.modelingassistant.ModelingAssistantService;
< 
112a103,104
> import org.eclipse.gmf.runtime.emf.ui.services.modelingassistant.ModelingAssistantService;
> 
122a115,120
> import org.eclipse.jface.preference.IPreferenceStore;
> 
> import org.eclipse.jface.util.Assert;
> 
> import org.eclipse.swt.widgets.Display;
> 
363c361
<         if (createElementCommand == null || createElementCommand instanceof UnexecutableCommand) return null;
---
>         if (createElementCommand == null || ! createElementCommand.canExecute ()) return null;
