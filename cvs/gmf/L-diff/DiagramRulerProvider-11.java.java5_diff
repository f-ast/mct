12a13,14
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
109a112
>     private final TransactionalEditingDomain editingDomain;
111c114
<     public DiagramRulerProvider (DiagramRuler ruler, IMapMode mm) {
---
>     public DiagramRulerProvider (TransactionalEditingDomain editingDomain, DiagramRuler ruler, IMapMode mm) {
113a117
>         this.editingDomain = editingDomain;
153c157
<         return new EtoolsProxyCommand (new CreateGuideCommand (theRuler, position));
---
>         return new EtoolsProxyCommand (new CreateGuideCommand (editingDomain, theRuler, position));
157c161
<         return new EtoolsProxyCommand (new DeleteGuideCommand ((Guide) guide));
---
>         return new EtoolsProxyCommand (new DeleteGuideCommand (editingDomain, (Guide) guide));
162c166
<         cmd.add (new EtoolsProxyCommand (new MoveGuideCommand ((Guide) guide, pDelta)));
---
>         cmd.add (new EtoolsProxyCommand (new MoveGuideCommand (editingDomain, (Guide) guide, pDelta)));
171c175
<                 spc = new SetPropertyCommand (new EObjectAdapter (part), Properties.ID_POSITIONX, Properties.ID_POSITIONX, new Integer (x));
---
>                 spc = new SetPropertyCommand (editingDomain, new EObjectAdapter (part), Properties.ID_POSITIONX, Properties.ID_POSITIONX, new Integer (x));
174c178
<                 spc = new SetPropertyCommand (new EObjectAdapter (part), Properties.ID_POSITIONY, Properties.ID_POSITIONY, new Integer (y));
---
>                 spc = new SetPropertyCommand (editingDomain, new EObjectAdapter (part), Properties.ID_POSITIONY, Properties.ID_POSITIONY, new Integer (y));
