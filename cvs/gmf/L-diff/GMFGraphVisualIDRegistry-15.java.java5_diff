7,8d6
< import org.eclipse.emf.ecore.EClass;
< 
13,20d10
< import org.eclipse.gmf.gmfgraph.Compartment;
< 
< import org.eclipse.gmf.gmfgraph.Connection;
< 
< import org.eclipse.gmf.gmfgraph.Ellipse;
< 
< import org.eclipse.gmf.gmfgraph.FigureGallery;
< 
23,30d12
< import org.eclipse.gmf.gmfgraph.Node;
< 
< import org.eclipse.gmf.gmfgraph.Polyline;
< 
< import org.eclipse.gmf.gmfgraph.Rectangle;
< 
< import org.eclipse.gmf.gmfgraph.RoundedRectangle;
< 
32a15,16
> import org.eclipse.gmf.graphdef.editor.edit.parts.ChildAccessEditPart;
> 
46a31,32
> import org.eclipse.gmf.graphdef.editor.edit.parts.Ellipse3EditPart;
> 
48a35,38
> import org.eclipse.gmf.graphdef.editor.edit.parts.FigureDescriptorEditPart;
> 
> import org.eclipse.gmf.graphdef.editor.edit.parts.FigureDescriptorNameEditPart;
> 
62a53,54
> import org.eclipse.gmf.graphdef.editor.edit.parts.Polyline3EditPart;
> 
66a59,60
> import org.eclipse.gmf.graphdef.editor.edit.parts.Rectangle3EditPart;
> 
70a65,66
> import org.eclipse.gmf.graphdef.editor.edit.parts.RoundedRectangle3EditPart;
> 
122,127c118
<         EClass domainElementMetaclass = domainElement.eClass ();
<         return getDiagramVisualID (domainElement, domainElementMetaclass);
<     }
< 
<     private static int getDiagramVisualID (EObject domainElement, EClass domainElementMetaclass) {
<         if (GMFGraphPackage.eINSTANCE.getCanvas ().isSuperTypeOf (domainElementMetaclass) && isDiagramCanvas_1000 ((Canvas) domainElement)) {
---
>         if (GMFGraphPackage.eINSTANCE.getCanvas ().isSuperTypeOf (domainElement.eClass ()) && isDiagram ((Canvas) domainElement)) {
130c121
<         return getUnrecognizedDiagramID (domainElement);
---
>         return - 1;
134c125
<         if (domainElement == null) {
---
>         if (domainElement == null || ! CanvasEditPart.MODEL_ID.equals (org.eclipse.gmf.graphdef.editor.part.GMFGraphVisualIDRegistry.getModelID (containerView))) {
137,138c128,131
<         EClass domainElementMetaclass = domainElement.eClass ();
<         return getNodeVisualID (containerView, domainElement, domainElementMetaclass, null);
---
>         switch (org.eclipse.gmf.graphdef.editor.part.GMFGraphVisualIDRegistry.getVisualID (containerView)) {
>             case FigureDescriptorEditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return RectangleEditPart.VISUAL_ID;
140,144c133,134
< 
<     public static int getNodeVisualID (View containerView, EObject domainElement, EClass domainElementMetaclass, String semanticHint) {
<         String containerModelID = getModelID (containerView);
<         if (! CanvasEditPart.MODEL_ID.equals (containerModelID)) {
<             return - 1;
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Ellipse2EditPart.VISUAL_ID;
146,153c136,137
<         int containerVisualID;
<         if (CanvasEditPart.MODEL_ID.equals (containerModelID)) {
<             containerVisualID = getVisualID (containerView);
<         } else {
<             if (containerView instanceof Diagram) {
<                 containerVisualID = CanvasEditPart.VISUAL_ID;
<             } else {
<                 return - 1;
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return RoundedRectangle2EditPart.VISUAL_ID;
154a139,140
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Polyline2EditPart.VISUAL_ID;
156,160c142,145
<         int nodeVisualID = semanticHint != null ? getVisualID (semanticHint) : - 1;
<         switch (containerVisualID) {
<             case CompartmentEditPart.VISUAL_ID :
<                 if (CompartmentNameEditPart.VISUAL_ID == nodeVisualID) {
<                     return CompartmentNameEditPart.VISUAL_ID;
---
>                 break;
>             case RectangleEditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Rectangle2EditPart.VISUAL_ID;
162,163c147,148
<                 if (CompartmentVisualFacetsEditPart.VISUAL_ID == nodeVisualID) {
<                     return CompartmentVisualFacetsEditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
>                     return EllipseEditPart.VISUAL_ID;
165,168c150,151
<                 return getUnrecognizedCompartment_2001ChildNodeID (domainElement, semanticHint);
<             case NodeEditPart.VISUAL_ID :
<                 if (NodeNameEditPart.VISUAL_ID == nodeVisualID) {
<                     return NodeNameEditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return RoundedRectangleEditPart.VISUAL_ID;
170,171c153,154
<                 if (NodeVisualFacetsEditPart.VISUAL_ID == nodeVisualID) {
<                     return NodeVisualFacetsEditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
>                     return PolylineEditPart.VISUAL_ID;
173,176c156,159
<                 return getUnrecognizedNode_2002ChildNodeID (domainElement, semanticHint);
<             case ConnectionEditPart.VISUAL_ID :
<                 if (ConnectionNameEditPart.VISUAL_ID == nodeVisualID) {
<                     return ConnectionNameEditPart.VISUAL_ID;
---
>                 break;
>             case Rectangle2EditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Rectangle2EditPart.VISUAL_ID;
178,179c161,162
<                 if (ConnectionVisualFacetsEditPart.VISUAL_ID == nodeVisualID) {
<                     return ConnectionVisualFacetsEditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
>                     return EllipseEditPart.VISUAL_ID;
181,184c164,165
<                 return getUnrecognizedConnection_2003ChildNodeID (domainElement, semanticHint);
<             case FigureGalleryEditPart.VISUAL_ID :
<                 if (FigureGalleryNameEditPart.VISUAL_ID == nodeVisualID) {
<                     return FigureGalleryNameEditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return RoundedRectangleEditPart.VISUAL_ID;
186,187c167,168
<                 if (FigureGalleryFiguresEditPart.VISUAL_ID == nodeVisualID) {
<                     return FigureGalleryFiguresEditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
>                     return PolylineEditPart.VISUAL_ID;
189,191c170,172
<                 return getUnrecognizedFigureGallery_2004ChildNodeID (domainElement, semanticHint);
<             case RectangleEditPart.VISUAL_ID :
<                 if ((semanticHint == null || Rectangle2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRectangle_3002 ((Rectangle) domainElement))) {
---
>                 break;
>             case EllipseEditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
194c175
<                 if ((semanticHint == null || EllipseEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeEllipse_3003 ((Ellipse) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
197c178
<                 if ((semanticHint == null || RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRoundedRectangle_3004 ((RoundedRectangle) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
200c181
<                 if ((semanticHint == null || PolylineEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodePolyline_3005 ((Polyline) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
203,205c184,186
<                 return getUnrecognizedRectangle_3001ChildNodeID (domainElement, semanticHint);
<             case Rectangle2EditPart.VISUAL_ID :
<                 if ((semanticHint == null || Rectangle2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRectangle_3002 ((Rectangle) domainElement))) {
---
>                 break;
>             case RoundedRectangleEditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
208c189
<                 if ((semanticHint == null || EllipseEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeEllipse_3003 ((Ellipse) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
211c192
<                 if ((semanticHint == null || RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRoundedRectangle_3004 ((RoundedRectangle) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
214c195
<                 if ((semanticHint == null || PolylineEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodePolyline_3005 ((Polyline) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
217,219c198,200
<                 return getUnrecognizedRectangle_3002ChildNodeID (domainElement, semanticHint);
<             case EllipseEditPart.VISUAL_ID :
<                 if ((semanticHint == null || Rectangle2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRectangle_3002 ((Rectangle) domainElement))) {
---
>                 break;
>             case Ellipse2EditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
222c203
<                 if ((semanticHint == null || EllipseEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeEllipse_3003 ((Ellipse) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
225c206
<                 if ((semanticHint == null || RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRoundedRectangle_3004 ((RoundedRectangle) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
228c209
<                 if ((semanticHint == null || PolylineEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodePolyline_3005 ((Polyline) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
231,233c212,214
<                 return getUnrecognizedEllipse_3003ChildNodeID (domainElement, semanticHint);
<             case RoundedRectangleEditPart.VISUAL_ID :
<                 if ((semanticHint == null || Rectangle2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRectangle_3002 ((Rectangle) domainElement))) {
---
>                 break;
>             case RoundedRectangle2EditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
236c217
<                 if ((semanticHint == null || EllipseEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeEllipse_3003 ((Ellipse) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
239c220
<                 if ((semanticHint == null || RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRoundedRectangle_3004 ((RoundedRectangle) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
242c223
<                 if ((semanticHint == null || PolylineEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodePolyline_3005 ((Polyline) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
245,249c226,228
<                 return getUnrecognizedRoundedRectangle_3004ChildNodeID (domainElement, semanticHint);
<             case PolylineEditPart.VISUAL_ID :
<                 return getUnrecognizedPolyline_3005ChildNodeID (domainElement, semanticHint);
<             case Ellipse2EditPart.VISUAL_ID :
<                 if ((semanticHint == null || Rectangle2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRectangle_3002 ((Rectangle) domainElement))) {
---
>                 break;
>             case Rectangle3EditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
252c231
<                 if ((semanticHint == null || EllipseEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeEllipse_3003 ((Ellipse) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
255c234
<                 if ((semanticHint == null || RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRoundedRectangle_3004 ((RoundedRectangle) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
258c237
<                 if ((semanticHint == null || PolylineEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodePolyline_3005 ((Polyline) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
261,263c240,242
<                 return getUnrecognizedEllipse_3006ChildNodeID (domainElement, semanticHint);
<             case RoundedRectangle2EditPart.VISUAL_ID :
<                 if ((semanticHint == null || Rectangle2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRectangle_3002 ((Rectangle) domainElement))) {
---
>                 break;
>             case Ellipse3EditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
266c245
<                 if ((semanticHint == null || EllipseEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeEllipse_3003 ((Ellipse) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
269c248
<                 if ((semanticHint == null || RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRoundedRectangle_3004 ((RoundedRectangle) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
272c251
<                 if ((semanticHint == null || PolylineEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodePolyline_3005 ((Polyline) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
275,283c254,268
<                 return getUnrecognizedRoundedRectangle_3007ChildNodeID (domainElement, semanticHint);
<             case Polyline2EditPart.VISUAL_ID :
<                 return getUnrecognizedPolyline_3008ChildNodeID (domainElement, semanticHint);
<             case CompartmentVisualFacetsEditPart.VISUAL_ID :
<                 return getUnrecognizedCompartmentVisualFacets_7001ChildNodeID (domainElement, semanticHint);
<             case NodeVisualFacetsEditPart.VISUAL_ID :
<                 return getUnrecognizedNodeVisualFacets_7002ChildNodeID (domainElement, semanticHint);
<             case ConnectionVisualFacetsEditPart.VISUAL_ID :
<                 return getUnrecognizedConnectionVisualFacets_7003ChildNodeID (domainElement, semanticHint);
---
>                 break;
>             case RoundedRectangle3EditPart.VISUAL_ID :
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Rectangle2EditPart.VISUAL_ID;
>                 }
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
>                     return EllipseEditPart.VISUAL_ID;
>                 }
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return RoundedRectangleEditPart.VISUAL_ID;
>                 }
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
>                     return PolylineEditPart.VISUAL_ID;
>                 }
>                 break;
285,286c270,271
<                 if ((semanticHint == null || RectangleEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRectangle_3001 ((Rectangle) domainElement))) {
<                     return RectangleEditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getFigureDescriptor ().isSuperTypeOf (domainElement.eClass ())) {
>                     return FigureDescriptorEditPart.VISUAL_ID;
288,289c273,274
<                 if ((semanticHint == null || Ellipse2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeEllipse_3006 ((Ellipse) domainElement))) {
<                     return Ellipse2EditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Rectangle3EditPart.VISUAL_ID;
291,292c276,277
<                 if ((semanticHint == null || RoundedRectangle2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeRoundedRectangle_3007 ((RoundedRectangle) domainElement))) {
<                     return RoundedRectangle2EditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getEllipse ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Ellipse3EditPart.VISUAL_ID;
294,295c279,283
<                 if ((semanticHint == null || Polyline2EditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodePolyline_3008 ((Polyline) domainElement))) {
<                     return Polyline2EditPart.VISUAL_ID;
---
>                 if (GMFGraphPackage.eINSTANCE.getRoundedRectangle ().isSuperTypeOf (domainElement.eClass ())) {
>                     return RoundedRectangle3EditPart.VISUAL_ID;
>                 }
>                 if (GMFGraphPackage.eINSTANCE.getPolyline ().isSuperTypeOf (domainElement.eClass ())) {
>                     return Polyline3EditPart.VISUAL_ID;
297c285
<                 return getUnrecognizedFigureGalleryFigures_7004ChildNodeID (domainElement, semanticHint);
---
>                 break;
299c287
<                 if ((semanticHint == null || CompartmentEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getCompartment ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeCompartment_2001 ((Compartment) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getCompartment ().isSuperTypeOf (domainElement.eClass ())) {
302c290
<                 if ((semanticHint == null || NodeEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getNode ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeNode_2002 ((Node) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getNode ().isSuperTypeOf (domainElement.eClass ())) {
305c293
<                 if ((semanticHint == null || ConnectionEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getConnection ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeConnection_2003 ((Connection) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getConnection ().isSuperTypeOf (domainElement.eClass ())) {
308c296
<                 if ((semanticHint == null || FigureGalleryEditPart.VISUAL_ID == nodeVisualID) && GMFGraphPackage.eINSTANCE.getFigureGallery ().isSuperTypeOf (domainElementMetaclass) && (domainElement == null || isNodeFigureGallery_2004 ((FigureGallery) domainElement))) {
---
>                 if (GMFGraphPackage.eINSTANCE.getFigureGallery ().isSuperTypeOf (domainElement.eClass ())) {
311c299
<                 return getUnrecognizedCanvas_1000ChildNodeID (domainElement, semanticHint);
---
>                 break;
316,318c304,307
<     public static int getLinkWithClassVisualID (EObject domainElement) {
<         if (domainElement == null) {
<             return - 1;
---
>     public static boolean canCreateNode (View containerView, int nodeVisualID) {
>         String containerModelID = org.eclipse.gmf.graphdef.editor.part.GMFGraphVisualIDRegistry.getModelID (containerView);
>         if (! CanvasEditPart.MODEL_ID.equals (containerModelID) && ! "GMFGraph".equals (containerModelID)) {
>             return false;
320,321c309,316
<         EClass domainElementMetaclass = domainElement.eClass ();
<         return getLinkWithClassVisualID (domainElement, domainElementMetaclass);
---
>         int containerVisualID;
>         if (CanvasEditPart.MODEL_ID.equals (containerModelID)) {
>             containerVisualID = org.eclipse.gmf.graphdef.editor.part.GMFGraphVisualIDRegistry.getVisualID (containerView);
>         } else {
>             if (containerView instanceof Diagram) {
>                 containerVisualID = CanvasEditPart.VISUAL_ID;
>             } else {
>                 return false;
323,329c318,321
< 
<     public static int getLinkWithClassVisualID (EObject domainElement, EClass domainElementMetaclass) {
<         {
<             return getUnrecognizedLinkWithClassID (domainElement);
<         }}
< 
<     private static boolean isDiagramCanvas_1000 (Canvas element) {
---
>         }
>         switch (containerVisualID) {
>             case CompartmentEditPart.VISUAL_ID :
>                 if (CompartmentNameEditPart.VISUAL_ID == nodeVisualID) {
332,334c324,325
< 
<     private static int getUnrecognizedDiagramID (EObject domainElement) {
<         return - 1;
---
>                 if (CompartmentVisualFacetsEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
336,337c327,329
< 
<     private static boolean isNodeCompartment_2001 (Compartment element) {
---
>                 break;
>             case NodeEditPart.VISUAL_ID :
>                 if (NodeNameEditPart.VISUAL_ID == nodeVisualID) {
340,341c332
< 
<     private static boolean isNodeNode_2002 (Node element) {
---
>                 if (NodeVisualFacetsEditPart.VISUAL_ID == nodeVisualID) {
344,345c335,337
< 
<     private static boolean isNodeConnection_2003 (Connection element) {
---
>                 break;
>             case ConnectionEditPart.VISUAL_ID :
>                 if (ConnectionNameEditPart.VISUAL_ID == nodeVisualID) {
348,349c340
< 
<     private static boolean isNodeFigureGallery_2004 (FigureGallery element) {
---
>                 if (ConnectionVisualFacetsEditPart.VISUAL_ID == nodeVisualID) {
352,353c343,345
< 
<     private static boolean isNodeRectangle_3001 (Rectangle element) {
---
>                 break;
>             case FigureGalleryEditPart.VISUAL_ID :
>                 if (FigureGalleryNameEditPart.VISUAL_ID == nodeVisualID) {
356,357c348
< 
<     private static boolean isNodeRectangle_3002 (Rectangle element) {
---
>                 if (FigureGalleryFiguresEditPart.VISUAL_ID == nodeVisualID) {
360,361c351,353
< 
<     private static boolean isNodeEllipse_3003 (Ellipse element) {
---
>                 break;
>             case FigureDescriptorEditPart.VISUAL_ID :
>                 if (FigureDescriptorNameEditPart.VISUAL_ID == nodeVisualID) {
364,365c356
< 
<     private static boolean isNodeRoundedRectangle_3004 (RoundedRectangle element) {
---
>                 if (RectangleEditPart.VISUAL_ID == nodeVisualID) {
368,369c359
< 
<     private static boolean isNodePolyline_3005 (Polyline element) {
---
>                 if (Ellipse2EditPart.VISUAL_ID == nodeVisualID) {
372,373c362
< 
<     private static boolean isNodeEllipse_3006 (Ellipse element) {
---
>                 if (RoundedRectangle2EditPart.VISUAL_ID == nodeVisualID) {
376,377c365
< 
<     private static boolean isNodeRoundedRectangle_3007 (RoundedRectangle element) {
---
>                 if (Polyline2EditPart.VISUAL_ID == nodeVisualID) {
380,381c368,370
< 
<     private static boolean isNodePolyline_3008 (Polyline element) {
---
>                 break;
>             case RectangleEditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
384,386c373,374
< 
<     private static int getUnrecognizedCompartment_2001ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
388,390c376,377
< 
<     private static int getUnrecognizedNode_2002ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
392,394c379,380
< 
<     private static int getUnrecognizedConnection_2003ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
396,398c382,385
< 
<     private static int getUnrecognizedFigureGallery_2004ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 break;
>             case Rectangle2EditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
400,402c387,388
< 
<     private static int getUnrecognizedRectangle_3001ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
404,406c390,391
< 
<     private static int getUnrecognizedRectangle_3002ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
408,410c393,394
< 
<     private static int getUnrecognizedEllipse_3003ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
412,414c396,399
< 
<     private static int getUnrecognizedRoundedRectangle_3004ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 break;
>             case EllipseEditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
416,418c401,402
< 
<     private static int getUnrecognizedPolyline_3005ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
420,422c404,405
< 
<     private static int getUnrecognizedEllipse_3006ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
424,426c407,408
< 
<     private static int getUnrecognizedRoundedRectangle_3007ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
428,430c410,413
< 
<     private static int getUnrecognizedPolyline_3008ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 break;
>             case RoundedRectangleEditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
432,434c415,416
< 
<     private static int getUnrecognizedCompartmentVisualFacets_7001ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
436,438c418,419
< 
<     private static int getUnrecognizedNodeVisualFacets_7002ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
440,442c421,527
< 
<     private static int getUnrecognizedConnectionVisualFacets_7003ChildNodeID (EObject domainElement, String semanticHint) {
<         return - 1;
---
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>             case Ellipse2EditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>             case RoundedRectangle2EditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>             case Rectangle3EditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>             case Ellipse3EditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>             case RoundedRectangle3EditPart.VISUAL_ID :
>                 if (Rectangle2EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (EllipseEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (RoundedRectangleEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (PolylineEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>             case FigureGalleryFiguresEditPart.VISUAL_ID :
>                 if (FigureDescriptorEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (Rectangle3EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (Ellipse3EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (RoundedRectangle3EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (Polyline3EditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>             case CanvasEditPart.VISUAL_ID :
>                 if (CompartmentEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (NodeEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (ConnectionEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 if (FigureGalleryEditPart.VISUAL_ID == nodeVisualID) {
>                     return true;
>                 }
>                 break;
>         }
>         return false;
445c530,531
<     private static int getUnrecognizedFigureGalleryFigures_7004ChildNodeID (EObject domainElement, String semanticHint) {
---
>     public static int getLinkWithClassVisualID (EObject domainElement) {
>         if (domainElement == null) {
448,449c534,536
< 
<     private static int getUnrecognizedCanvas_1000ChildNodeID (EObject domainElement, String semanticHint) {
---
>         if (GMFGraphPackage.eINSTANCE.getChildAccess ().isSuperTypeOf (domainElement.eClass ())) {
>             return ChildAccessEditPart.VISUAL_ID;
>         }
453,454c540,541
<     private static int getUnrecognizedLinkWithClassID (EObject domainElement) {
<         return - 1;
---
>     private static boolean isDiagram (Canvas element) {
>         return true;
