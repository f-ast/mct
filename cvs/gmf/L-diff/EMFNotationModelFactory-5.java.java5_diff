8a9,12
> import org.eclipse.emf.common.util.EList;
> 
> import org.eclipse.emf.common.util.URI;
> 
13c17
< import org.eclipse.gmf.runtime.common.core.util.Trace;
---
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
15c19
< import org.eclipse.gmf.runtime.diagram.core.internal.util.MEditingDomainGetter;
---
> import org.eclipse.gmf.runtime.common.core.util.Trace;
21,24d24
< import org.eclipse.gmf.runtime.emf.core.edit.MEditingDomain;
< 
< import org.eclipse.gmf.runtime.emf.core.util.ResourceUtil;
< 
29,33c29
<     static public Diagram load (final IFile file) throws EmfNotationException {
<         return load (file, MEditingDomain.INSTANCE);
<     }
< 
<     static public Diagram load (final IFile file, MEditingDomain editingDomain) throws EmfNotationException {
---
>     static public Diagram load (final IFile file, TransactionalEditingDomain editingDomain) throws EmfNotationException {
45c41,43
<         EObject element = ResourceUtil.getFirstRoot (notationModel);
---
>         EList contents = notationModel.getContents ();
>         if (! contents.isEmpty ()) {
>             Object element = contents.get (0);
47a46,47
>         return null;
>     }
53c53,54
<             MEditingDomainGetter.getMEditingDomain (notationModel).saveResourceAs (notationModel, fileName);
---
>             notationModel.setURI (URI.createURI ((fileName)));
>             notationModel.save (null);
55c56
<             MEditingDomainGetter.getMEditingDomain (notationModel).saveResource (notationModel);
---
>             notationModel.save (null);
