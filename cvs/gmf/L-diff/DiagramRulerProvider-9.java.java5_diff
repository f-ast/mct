41c41
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
108a109
>     private IMapMode mm;
110c111
<     public DiagramRulerProvider (DiagramRuler ruler) {
---
>     public DiagramRulerProvider (DiagramRuler ruler, IMapMode mm) {
111a113,117
>         this.mm = mm;
>     }
> 
>     private IMapMode getMapMode () {
>         return mm;
164c170
<                 x += MapMode.DPtoLP (pDelta);
---
>                 x += getMapMode ().DPtoLP (pDelta);
167c173
<                 y += MapMode.DPtoLP (pDelta);
---
>                 y += getMapMode ().DPtoLP (pDelta);
