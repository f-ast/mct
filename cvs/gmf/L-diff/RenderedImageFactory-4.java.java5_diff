10a11,12
> import java.io.IOException;
> 
24a27,34
> import org.apache.batik.dom.svg.SAXSVGDocumentFactory;
> 
> import org.apache.batik.util.XMLResourceDescriptor;
> 
> import org.eclipse.core.runtime.IStatus;
> 
> import org.eclipse.gmf.runtime.common.core.util.Log;
> 
133,144d142
<     private static String getTestString (byte [] buffer) {
<         if (buffer == null) return null;
< 
<         StringBuffer szTestBuf = new StringBuffer (10 + 1);
<         for (int i = 0;
<         i < 10; i ++) szTestBuf.insert (i, (char) buffer [i]);
< 
<         String szTest = new String (szTestBuf);
<         szTest = szTest.trim ();
<         return szTest;
<     }
< 
146,147c144,153
<         String szTest = getTestString (buffer);
<         return szTest.startsWith ("<?xml");
---
>         ByteArrayInputStream bIS = new ByteArrayInputStream (buffer);
>         String parserName = XMLResourceDescriptor.getXMLParserClassName ();
>         SAXSVGDocumentFactory svgFactory = new SAXSVGDocumentFactory (parserName);
>         try {
>             svgFactory.createDocument (null, bIS);
>             return true;
>         } catch (IOException e) {
>             Log.error (Draw2dRenderPlugin.getInstance (), IStatus.ERROR, e.getMessage (), e);
>         }
>         return false;
