2a3,4
> import java.text.ParseException;
> 
163c165
<                 IPreferenceStore preferenceStore = (IPreferenceStore) ((DiagramEditor) getPart ()).getDiagramEditPart ().getDiagramPreferencesHint ().getPreferenceStore ();
---
>                 IPreferenceStore preferenceStore = getPreferenceStore ();
194a197,201
>     private IPreferenceStore getPreferenceStore () {
>         IPreferenceStore preferenceStore = (IPreferenceStore) ((DiagramEditor) getPart ()).getDiagramEditPart ().getDiagramPreferencesHint ().getPreferenceStore ();
>         return preferenceStore;
>     }
> 
254a262,272
>     private Double convertStringToDouble (String strValue) {
>         NumberFormat numberFormatter = NumberFormat.getInstance ();
>         Double value;
>         try {
>             value = forceDouble (numberFormatter.parse (strValue));
>         } catch (ParseException e) {
>             value = new Double (getPreferenceStore ().getDouble (IPreferenceConstants.PREF_GRID_SPACING));
>         }
>         return value;
>     }
> 
277c295
<                 setWorkspaceProperty (WorkspaceViewerProperties.GRIDSPACING, new Double (currentUnits).doubleValue ());
---
>                 setWorkspaceProperty (WorkspaceViewerProperties.GRIDSPACING, convertStringToDouble (currentUnits).doubleValue ());
300c318
<         Double value = new Double (valueStr);
---
>         Double value = convertStringToDouble (valueStr);
362c380,382
<             textWidget.setText (getWorkspaceProperty (WorkspaceViewerProperties.GRIDSPACING));
---
>             double value = getWorkspacePropertyDouble (WorkspaceViewerProperties.GRIDSPACING);
>             NumberFormat numberFormater = NumberFormat.getInstance ();
>             textWidget.setText (numberFormater.format (value));
392c412,414
<         textWidget.setText (getWorkspaceProperty (WorkspaceViewerProperties.GRIDSPACING));
---
>         double value = getWorkspacePropertyDouble (WorkspaceViewerProperties.GRIDSPACING);
>         NumberFormat numberFormatter = NumberFormat.getNumberInstance ();
>         textWidget.setText (numberFormatter.format (value));
518a541,544
>     private double getWorkspacePropertyDouble (String property) {
>         return getWorkspaceViewerProperties ().getDouble (property);
>     }
> 
554c580,581
<                 textWidget.setText (getEventString (event));
---
>                 Double value = new Double (getEventString (event));
>                 textWidget.setText (NumberFormat.getInstance ().format (value));
593a621,626
>     private Double forceDouble (Number number) {
>         if (! (number instanceof Double)) return new Double (number.doubleValue ());
> 
>         return (Double) number;
>     }
> 
