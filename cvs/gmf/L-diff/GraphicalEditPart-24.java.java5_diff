100a101,102
> import org.eclipse.gmf.runtime.diagram.ui.internal.editparts.DummyEditPart;
> 
208a211,212
>         if (listenerFilters == null) listenerFilters = new HashMap ();
> 
299c303,312
<             if (view != null) return (IGraphicalEditPart) getViewer ().getEditPartRegistry ().get (view);
---
>             if (view != null) {
>                 IGraphicalEditPart ep = (IGraphicalEditPart) getViewer ().getEditPartRegistry ().get (view);
>                 if (ep == null) {
>                     ep = new DummyEditPart (view);
>                 }
>                 return ep;
>             }
>         }
>         return null;
>     }
300a314,316
>     public View getChildViewBySemanticHint (String semanticHint) {
>         if (getModel () != null) {
>             return ViewUtil.getChildBySemanticHint ((View) getModel (), semanticHint);
420c436
<             return new ArrayList (((View) model).getChildren ());
---
>             return new ArrayList (((View) model).getVisibleChildren ());
619,620c635,637
<         if (hasNotationView ()) addListenerFilter ("View", this, (View) getModel ());
< 
---
>         if (hasNotationView ()) {
>             addListenerFilter ("View", this, (View) getModel ());
>         }
881c898,902
<             refreshVisibility ();
---
>             Object notifier = event.getNotifier ();
>             if (notifier == getModel ()) refreshVisibility ();
>             else {
>                 refreshChildren ();
>             }
