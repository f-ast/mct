87,88d86
<             activityManagerListener = new ActivityManagerListener ();
<             PlatformUI.getWorkbench ().getActivitySupport ().getActivityManager ().addActivityManagerListener (activityManagerListener);
210a209
>         if (getEditDomain () != null && getEditDomain ().getPaletteViewer () != null && getEditDomain ().getPaletteViewer ().getPaletteRoot () != null) {
212a212
>     }
318a319,324
>     protected void startListening () {
>         super.startListening ();
>         activityManagerListener = new ActivityManagerListener ();
>         PlatformUI.getWorkbench ().getActivitySupport ().getActivityManager ().addActivityManagerListener (activityManagerListener);
>     }
> 
