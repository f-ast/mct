6a7,8
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
13,18d14
< import org.eclipse.jface.preference.IPreferenceStore;
< 
< import org.eclipse.ui.IWorkbenchPage;
< 
< import org.eclipse.ui.IWorkbenchPart;
< 
27c23
< import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeTransactionalCommand;
30a27,32
> import org.eclipse.jface.preference.IPreferenceStore;
> 
> import org.eclipse.ui.IWorkbenchPage;
> 
> import org.eclipse.ui.IWorkbenchPart;
> 
43c45,47
<         DestroyElementRequest destroyRequest = new DestroyElementRequest (shouldPrompt);
---
>         TransactionalEditingDomain editingDomain = getEditingDomain ();
>         if (editingDomain != null) {
>             DestroyElementRequest destroyRequest = new DestroyElementRequest (editingDomain, shouldPrompt);
45a50,51
>         return null;
>     }
55c61
<             CompositeModelCommand compositeModelActionCommand = new CompositeModelCommand (getCommandLabel ());
---
>             CompositeTransactionalCommand compositeModelActionCommand = new CompositeTransactionalCommand (getEditingDomain (), getCommandLabel ());
