4a5,6
> import org.eclipse.emf.codegen.ecore.genmodel.GenClass;
> 
24a27,32
> import org.eclipse.gmf.codegen.gmfgen.GenLink;
> 
> import org.eclipse.gmf.codegen.gmfgen.GenNode;
> 
> import org.eclipse.gmf.codegen.gmfgen.LinkModelFacet;
> 
28a37,38
> import org.eclipse.gmf.codegen.gmfgen.TypeLinkModelFacet;
> 
99,101c109,112
<         final Palette palette = getDiagramElement ().getDiagram ().getPalette ();
<         if (palette == null) {
<             return null;
---
>         if (getDiagramElement () instanceof GenNode) {
>             GenClass type = ((GenNode) getDiagramElement ()).getDomainMetaClass ();
>             if (type != null) {
>                 return type.getName ();
103,109c114,119
<         for (Iterator elements = palette.eAllContents ();
<         elements.hasNext ();) {
<             Object next = elements.next ();
<             if (next instanceof ToolEntry) {
<                 ToolEntry toolEntry = (ToolEntry) next;
<                 if (toolEntry.getElements ().contains (getDiagramElement ())) {
<                     return toolEntry.getTitle ();
---
>         } else if (getDiagramElement () instanceof GenLink) {
>             LinkModelFacet mf = ((GenLink) getDiagramElement ()).getModelFacet ();
>             if (mf instanceof TypeLinkModelFacet) {
>                 GenClass type = ((TypeLinkModelFacet) mf).getMetaClass ();
>                 if (type != null) {
>                     return type.getName ();
113c123,124
<         return null;
---
> 
>         return "Undefined";
