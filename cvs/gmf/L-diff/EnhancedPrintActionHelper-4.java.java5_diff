73c73
<         DiagramPrinterUtil.printWithSettings (diagramEditor, createDiagramMap (diagramEditor), new RenderedDiagramPrinter (preferencesHint, mapMode));
---
>         DiagramPrinterUtil.printWithSettings (diagramEditor, createDiagramMap (), new RenderedDiagramPrinter (preferencesHint, mapMode));
76,77c76
<     private Map createDiagramMap (DiagramEditor diagramEditor) {
<         assert diagramEditor != null;
---
>     private Map createDiagramMap () {
79,81c78
<         String id = diagramEditor.getEditorSite ().getId ();
<         assert id != null;
<         List diagramEditors = EditorService.getInstance ().getRegisteredEditors (id);
---
>         List diagramEditors = EditorService.getInstance ().getRegisteredEditorParts ();
99c96
<                     diagramName = id;
---
>                     diagramName = dEditor.getDiagram ().getName ();
