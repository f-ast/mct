173c173,180
<         return getWorkbenchPart () instanceof IDiagramWorkbenchPart ? (IDiagramWorkbenchPart) getWorkbenchPart () : null;
---
>         IDiagramWorkbenchPart diagramPart = null;
>         IWorkbenchPart part = getWorkbenchPart ();
>         if (part instanceof IDiagramWorkbenchPart) {
>             diagramPart = (IDiagramWorkbenchPart) part;
>         } else {
>             diagramPart = (IDiagramWorkbenchPart) part.getAdapter (IDiagramWorkbenchPart.class);
>         }
>         return diagramPart;
