21,22d20
< import org.eclipse.core.runtime.Path;
< 
24a23,24
> import org.eclipse.emf.common.util.URI;
> 
50a51,52
> import org.eclipse.gmf.internal.common.URIUtil;
> 
179,189d180
<     public IFile getFile (String fileName) {
<         return project.getFile (new Path (fileName));
<     }
< 
<     public String getName (IFile file) {
<         if (file == null) {
<             return null;
<         }
<         return file.getProjectRelativePath ().toString ();
<     }
< 
216,221c207,212
<         setModelName (view.getDGMFigure (), state.dgmFileName);
<         setModelName (view.getGDMFigure (), state.gdmFileName);
<         setModelName (view.getDMFigure (), state.dmFileName);
<         setModelName (view.getTDMFigure (), state.tdmFileName);
<         setModelName (view.getMMFigure (), state.mmFileName);
<         setModelName (view.getGMFigure (), state.gmFileName);
---
>         setModelName (view.getDGMFigure (), state.getDGM ());
>         setModelName (view.getGDMFigure (), state.getGDM ());
>         setModelName (view.getDMFigure (), state.getDM ());
>         setModelName (view.getTDMFigure (), state.getTDM ());
>         setModelName (view.getMMFigure (), state.getMM ());
>         setModelName (view.getGMFigure (), state.getGM ());
225,226c216,218
<     protected void setModelName (ModelFigure figure, String name) {
<         figure.setName (name);
---
>     protected void setModelName (ModelFigure figure, URI uri) {
>         figure.setName (uri == null ? null : uri.lastSegment ());
>         figure.setFullName (uri == null ? null : uri.toString ());
239,243c231
<             IFile file = null;
<             String fileName = getFileName ();
<             if (fileName != null) {
<                 file = getFile (fileName);
<             }
---
>             IFile file = getURI () == null ? null : URIUtil.getFile (getURI ());
245c233,236
<             setFileName (getName (file));
---
>             if (file == null) {
>                 return;
>             }
>             setURI (URI.createPlatformResourceURI (file.getFullPath ().toString ()));
251c242
<         protected abstract String getFileName ();
---
>         protected abstract URI getURI ();
253c244
<         protected abstract void setFileName (String fileName);
---
>         protected abstract void setURI (URI uri);
265c256
<             return project != null && getFileName () != null;
---
>             return project != null && getURI () != null;
272c263
<             IFile modelFile = getFile (getFileName ());
---
>             IFile modelFile = URIUtil.getFile (getURI ());
278c269
<                 String msg = MessageFormat.format (Messages.DashboardMediator_FailToOpen, new Object [] {getFileName ()});
---
>                 String msg = MessageFormat.format (Messages.DashboardMediator_FailToOpen, new Object [] {getURI ()});
283c274
<         protected abstract String getFileName ();
---
>         protected abstract URI getURI ();
320,325c311,316
<             addFile (selection, state.dmFileName);
<             addFile (selection, state.dgmFileName);
<             addFile (selection, state.gdmFileName);
<             addFile (selection, state.tdmFileName);
<             addFile (selection, state.mmFileName);
<             addFile (selection, state.gmFileName);
---
>             addFile (selection, state.getDM ());
>             addFile (selection, state.getDGM ());
>             addFile (selection, state.getGDM ());
>             addFile (selection, state.getTDM ());
>             addFile (selection, state.getMM ());
>             addFile (selection, state.getGM ());
329,330c320,321
<         protected void addFile (List < IFile > files, String name) {
<             if (name == null) {
---
>         protected void addFile (List < IFile > files, URI uri) {
>             if (uri == null) {
333c324,327
<             files.add (project.getFile (name));
---
>             IFile file = URIUtil.getFile (uri);
>             if (file != null) {
>                 files.add (file);
>             }
349,350c343,344
<         protected String getFileName () {
<             return state.dgmFileName;
---
>         protected URI getURI () {
>             return state.getDGM ();
353,354c347,348
<         protected void setFileName (String fileName) {
<             state.dgmFileName = fileName;
---
>         protected void setURI (URI uri) {
>             state.setDGM (uri);
369,370c363,364
<         protected String getFileName () {
<             return state.gdmFileName;
---
>         protected URI getURI () {
>             return state.getGDM ();
373,374c367,368
<         protected void setFileName (String fileName) {
<             state.gdmFileName = fileName;
---
>         protected void setURI (URI uri) {
>             state.setGDM (uri);
389,390c383,384
<         protected String getFileName () {
<             return state.dmFileName;
---
>         protected URI getURI () {
>             return state.getDM ();
393,394c387,388
<         protected void setFileName (String fileName) {
<             state.dmFileName = fileName;
---
>         protected void setURI (URI uri) {
>             state.setDM (uri);
409,410c403,404
<         protected String getFileName () {
<             return state.tdmFileName;
---
>         protected URI getURI () {
>             return state.getTDM ();
413,414c407,408
<         protected void setFileName (String fileName) {
<             state.tdmFileName = fileName;
---
>         protected void setURI (URI uri) {
>             state.setTDM (uri);
429,430c423,424
<         protected String getFileName () {
<             return state.mmFileName;
---
>         protected URI getURI () {
>             return state.getMM ();
433,434c427,428
<         protected void setFileName (String fileName) {
<             state.mmFileName = fileName;
---
>         protected void setURI (URI uri) {
>             state.setMM (uri);
449,450c443,444
<         protected String getFileName () {
<             return state.gmFileName;
---
>         protected URI getURI () {
>             return state.getDM ();
453,454c447,448
<         protected void setFileName (String fileName) {
<             state.gmFileName = fileName;
---
>         protected void setURI (URI uri) {
>             state.setDM (uri);
465,466c459,460
<         protected String getFileName () {
<             return state.dgmFileName;
---
>         protected URI getURI () {
>             return state.getDGM ();
473,474c467,468
<         protected String getFileName () {
<             return state.gdmFileName;
---
>         protected URI getURI () {
>             return state.getGDM ();
481,482c475,476
<         protected String getFileName () {
<             return state.dmFileName;
---
>         protected URI getURI () {
>             return state.getDM ();
489,490c483,484
<         protected String getFileName () {
<             return state.tdmFileName;
---
>         protected URI getURI () {
>             return state.getTDM ();
497,498c491,492
<         protected String getFileName () {
<             return state.mmFileName;
---
>         protected URI getURI () {
>             return state.getMM ();
505,506c499,500
<         protected String getFileName () {
<             return state.gmFileName;
---
>         protected URI getURI () {
>             return state.getGM ();
519c513
<             state.gdmFileName = getName (file);
---
>             state.setGDM (file);
533c527
<             state.dmFileName = getName (file);
---
>             state.setDM (file);
547c541
<             state.tdmFileName = getName (file);
---
>             state.setTDM (file);
561c555
<             state.mmFileName = getName (file);
---
>             state.setMM (file);
575c569
<             state.gmFileName = getName (file);
---
>             state.setGM (file);
587c581
<             return state.dgmFileName != null;
---
>             return state.getDGM () != null;
591c585
<             IFile file = getFile (state.dgmFileName);
---
>             IFile file = URIUtil.getFile (state.getDGM ());
607c601
<             return super.isEnabled () && state.dmFileName != null;
---
>             return super.isEnabled () && state.getDM () != null;
616c610
<             state.dgmFileName = getName (file);
---
>             state.setDGM (file);
621c615
<             return new StructuredSelection (getFile (state.dmFileName));
---
>             return new StructuredSelection (URIUtil.getFile (state.getDM ()));
638c632
<             return super.isEnabled () && state.dmFileName != null;
---
>             return super.isEnabled () && state.getDM () != null;
649c643
<             state.gdmFileName = getName (file);
---
>             state.setGDM (file);
658c652
<             return super.isEnabled () && state.dmFileName != null;
---
>             return super.isEnabled () && state.getDM () != null;
669c663
<             state.tdmFileName = getName (file);
---
>             state.setTDM (file);
678c672
<             return project != null && state.gdmFileName != null && state.dmFileName != null && state.tdmFileName != null;
---
>             return project != null && state.getGDM () != null && state.getDM () != null && state.getTDM () != null;
687c681
<             state.mmFileName = getName (file);
---
>             state.setMM (file);
