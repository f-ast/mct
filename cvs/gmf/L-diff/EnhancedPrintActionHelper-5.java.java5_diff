14a15,16
> import org.eclipse.core.runtime.Platform;
> 
35,36d36
< import org.eclipse.gmf.runtime.diagram.ui.printing.actions.DefaultPrintActionHelper;
< 
40a41,44
> import org.eclipse.gmf.runtime.diagram.ui.printing.render.internal.JPSDiagramPrinter;
> 
> import org.eclipse.gmf.runtime.diagram.ui.printing.render.internal.JPSDiagramPrinterHelper;
> 
48a53,54
> import org.eclipse.gmf.runtime.notation.Diagram;
> 
69,72c75
<         if (! System.getProperty ("os.name").toUpperCase ().startsWith ("WIN")) {
<             DefaultPrintActionHelper.doRun (diagramEditor, new RenderedDiagramPrinter (preferencesHint, mapMode));
<             return;
<         }
---
>         if (Platform.getOS ().startsWith (Platform.OS_WIN32)) {
73a77,79
>         } else {
>             JPSDiagramPrinterHelper.getDiagramPrinterHelper ().printWithSettings (diagramEditor, createDiagramMap (), new JPSDiagramPrinter (preferencesHint, mapMode));
>         }
76,77c82,83
<     private Map createDiagramMap () {
<         Map diagramMap = new HashMap ();
---
>     protected Map < String, Diagram > createDiagramMap () {
>         Map < String, Diagram > diagramMap = new HashMap < String, Diagram > ();
