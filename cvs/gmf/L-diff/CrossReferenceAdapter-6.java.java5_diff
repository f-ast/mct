442c442,443
<                     for (Iterator j = ((Collection) eObject.eGet (eReference)).iterator ();
---
>                     Object collection = eObject.eGet (eReference);
>                     for (Iterator j = resolve () ? ((Collection) collection).iterator () : ((InternalEList) collection).basicIterator ();
448c449
<                     InternalEObject referencingEObject = ((InternalEObject) eObject.eGet (eReference));
---
>                     InternalEObject referencingEObject = ((InternalEObject) eObject.eGet (eReference, resolve ()));
