2a3,6
> import org.eclipse.core.commands.ExecutionException;
> 
> import org.eclipse.core.runtime.IAdaptable;
> 
7c11,13
< import org.eclipse.ui.views.properties.IPropertySource;
---
> import org.eclipse.emf.ecore.EObject;
> 
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
11c17,19
< import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand;
> 
> import org.eclipse.ui.views.properties.IPropertySource;
13c21
< public class SetModelPropertyValueCommand extends AbstractModelCommand {
---
> public class SetModelPropertyValueCommand extends AbstractTransactionalCommand {
20,21c28,29
<     public SetModelPropertyValueCommand (String label, Object affectedObjects, IPropertySource propertySource, Object propertyId, Object propertyValue) {
<         super (label, affectedObjects);
---
>     public SetModelPropertyValueCommand (TransactionalEditingDomain editingDomain, String label, Object affectedObjects, IPropertySource propertySource, Object propertyId, Object propertyValue) {
>         super (editingDomain, label, (affectedObjects instanceof EObject) ? getWorkspaceFiles ((EObject) affectedObjects) : null);
27,35c35
<     public boolean isRedoable () {
<         return true;
<     }
< 
<     public boolean isUndoable () {
<         return true;
<     }
< 
<     protected CommandResult doExecute (IProgressMonitor progressMonitor) {
---
>     protected CommandResult doExecuteWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
43c43
<         return newOKCommandResult (getPropertyValue ());
---
>         return CommandResult.newOKCommandResult (getPropertyValue ());
46,47c46,47
<     protected CommandResult doRedo () {
<         return doExecute (new NullProgressMonitor ());
---
>     protected CommandResult doRedoWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
>         return doExecuteWithResult (new NullProgressMonitor (), info);
50c50
<     protected CommandResult doUndo () {
---
>     protected CommandResult doUndoWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
56c56
<         return newOKCommandResult (getPropertySource ().getPropertyValue (getPropertyId ()));
---
>         return CommandResult.newOKCommandResult (getPropertySource ().getPropertyValue (getPropertyId ()));
