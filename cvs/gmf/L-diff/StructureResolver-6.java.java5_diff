64c64
<     public TypePattern resolve (EClass type, EPackage domainPackage, EClass diagramClass) {
---
>     public TypePattern resolve (EClass type, EPackage scope) {
68c68
<         EReference [] containments = getContainments (type, domainPackage);
---
>         EReference [] containments = getContainments (type, scope);
75,77d74
<             if (diagramClass != null && ! ContainmentClosure.contains (diagramClass, type, domainPackage)) {
<                 return null;
<             }
96,103d92
<         if (diagramClass != null) {
<             if (source != null && ! ContainmentClosure.contains (diagramClass, source.getEReferenceType (), domainPackage)) {
<                 return null;
<             }
<             if (target != null && ! ContainmentClosure.contains (diagramClass, target.getEReferenceType (), domainPackage)) {
<                 return null;
<             }
<         }
134c123
<     protected EReference [] getContainments (EClass type, EPackage domainPackage) {
---
>     protected EReference [] getContainments (EClass type, EPackage scope) {
136c125
<         for (Iterator it = domainPackage.eAllContents ();
---
>         for (Iterator it = scope.eAllContents ();
