16a17,18
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
20a23,24
> import org.eclipse.gef.editpolicies.NonResizableEditPolicy;
> 
77c81,82
<         ICommand moveCommand = new SetBoundsCommand (DiagramUIMessages.MoveLabelCommand_Label_Location, new EObjectAdapter ((View) getHost ().getModel ()), normalPoint);
---
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost ()).getEditingDomain ();
>         ICommand moveCommand = new SetBoundsCommand (editingDomain, DiagramUIMessages.MoveLabelCommand_Label_Location, new EObjectAdapter ((View) getHost ().getModel ()), normalPoint);
122c127,128
<         ICommand resizeCommand = new SetBoundsCommand (DiagramUIMessages.SetLocationCommand_Label_Resize, new EObjectAdapter (shapeView), rect.getSize ());
---
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost ()).getEditingDomain ();
>         ICommand resizeCommand = new SetBoundsCommand (editingDomain, DiagramUIMessages.SetLocationCommand_Label_Resize, new EObjectAdapter (shapeView), rect.getSize ());
