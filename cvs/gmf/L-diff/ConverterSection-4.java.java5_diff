13,14d12
< import java.util.ArrayList;
< 
53,54d50
< import org.eclipse.gmf.gmfgraph.GMFGraphPackage;
< 
164,176c160
<         ArrayList rv = new ArrayList ();
<         for (TreeIterator it = resource.getAllContents ();
<         it.hasNext ();) {
<             EObject next = (EObject) it.next ();
<             if (next.eClass ().getClassifierID () == GMFGraphPackage.FIGURE_GALLERY) {
<                 rv.add (next);
<                 it.prune ();
<             } else if (next.eClass ().getClassifierID () != GMFGraphPackage.CANVAS) {
<                 it.prune ();
<             }
< 
<         }
<         return (FigureGallery []) rv.toArray (new FigureGallery [rv.size ()]);
---
>         return new FigureFinder ().findFigures (resource);
