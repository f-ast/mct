3,12d2
< import org.eclipse.ui.IWorkbench;
< 
< import org.eclipse.ui.IWorkbenchPage;
< 
< import org.eclipse.ui.IWorkbenchWindow;
< 
< import org.eclipse.ui.PlatformUI;
< 
< import org.eclipse.ui.views.properties.IPropertyDescriptor;
< 
24a15,16
> import org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditor;
> 
26a19,30
> import org.eclipse.ui.IEditorPart;
> 
> import org.eclipse.ui.IWorkbench;
> 
> import org.eclipse.ui.IWorkbenchPage;
> 
> import org.eclipse.ui.IWorkbenchWindow;
> 
> import org.eclipse.ui.PlatformUI;
> 
> import org.eclipse.ui.views.properties.IPropertyDescriptor;
> 
36c40,43
<                     return page != null && page.getActiveEditor () instanceof IReadOnlyDiagramPropertySheetPageContributor;
---
>                     if (page != null) {
>                         IEditorPart part = page.getActiveEditor ();
>                         return part instanceof IReadOnlyDiagramPropertySheetPageContributor || (part instanceof DiagramEditor && ! ((DiagramEditor) part).isWritable ());
>                     }
