14a15,16
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
55c57
< import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeTransactionalCommand;
107c109,110
<         CompositeModelCommand cmc = new CompositeModelCommand (DiagramUIMessages.Command_AdjustRatioCommand_Label);
---
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost ()).getEditingDomain ();
>         CompositeTransactionalCommand cmc = new CompositeTransactionalCommand (editingDomain, DiagramUIMessages.Command_AdjustRatioCommand_Label);
112c115
<                 cmc.compose (new SetCompartmentRatioCommand (new EObjectAdapter ((View) child.getModel ()), NULL_CONSTRAINT));
---
>                 cmc.compose (new SetCompartmentRatioCommand (editingDomain, new EObjectAdapter ((View) child.getModel ()), NULL_CONSTRAINT));
115c118
<         return cmc.isEmpty () ? null : new EtoolsProxyCommand (cmc.unwrap ());
---
>         return cmc.isEmpty () ? null : new EtoolsProxyCommand (cmc.reduce ());
119c122,123
<         CompositeModelCommand cmc = new CompositeModelCommand (DiagramUIMessages.Command_AdjustRatioCommand_Label);
---
>         TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost ()).getEditingDomain ();
>         CompositeTransactionalCommand cmc = new CompositeTransactionalCommand (editingDomain, DiagramUIMessages.Command_AdjustRatioCommand_Label);
143c147
<                 cmc.compose (new SetCompartmentRatioCommand (new EObjectAdapter ((View) part.getModel ()), r));
---
>                 cmc.compose (new SetCompartmentRatioCommand (editingDomain, new EObjectAdapter ((View) part.getModel ()), r));
