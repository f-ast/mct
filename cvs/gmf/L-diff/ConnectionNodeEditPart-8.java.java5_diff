10a11,12
> import org.eclipse.emf.transaction.RunnableWithResult;
> 
21c23,25
< import org.eclipse.gmf.runtime.diagram.core.internal.util.MEditingDomainGetter;
---
> import org.eclipse.gmf.runtime.common.core.util.Log;
> 
> import org.eclipse.gmf.runtime.common.core.util.Trace;
27c31,33
< import org.eclipse.gmf.runtime.draw2d.ui.figures.IAnchorableFigure;
---
> import org.eclipse.gmf.runtime.diagram.ui.internal.DiagramUIDebugOptions;
> 
> import org.eclipse.gmf.runtime.diagram.ui.internal.DiagramUIPlugin;
29c35,37
< import org.eclipse.gmf.runtime.emf.core.edit.MRunnable;
---
> import org.eclipse.gmf.runtime.diagram.ui.internal.DiagramUIStatusCodes;
> 
> import org.eclipse.gmf.runtime.draw2d.ui.figures.IAnchorableFigure;
68c76,78
<         String t = (String) MEditingDomainGetter.getMEditingDomain ((View) getModel ()).runAsRead (new MRunnable () {
---
>         String t = "";
>         try {
>             t = (String) getEditingDomain ().runExclusive (new RunnableWithResult.Impl () {
70c80
<             public Object run () {
---
>                 public void run () {
72c82
<                 if (a instanceof IdentityAnchor) return ((IdentityAnchor) a).getId ();
---
>                     if (a instanceof IdentityAnchor) setResult (((IdentityAnchor) a).getId ());
74c84
<                 return "";
---
>                     setResult ("");
79a90,93
>         } catch (InterruptedException e) {
>             Trace.catching (DiagramUIPlugin.getInstance (), DiagramUIDebugOptions.EXCEPTIONS_CATCHING, getClass (), "getSourceConnectionAnchor", e);
>             Log.error (DiagramUIPlugin.getInstance (), DiagramUIStatusCodes.IGNORED_EXCEPTION_WARNING, "getSourceConnectionAnchor", e);
>         }
103c117,119
<         String t = (String) MEditingDomainGetter.getMEditingDomain ((View) getModel ()).runAsRead (new MRunnable () {
---
>         String t = "";
>         try {
>             t = (String) getEditingDomain ().runExclusive (new RunnableWithResult.Impl () {
105c121
<             public Object run () {
---
>                 public void run () {
107c123
<                 if (a instanceof IdentityAnchor) return ((IdentityAnchor) a).getId ();
---
>                     if (a instanceof IdentityAnchor) setResult (((IdentityAnchor) a).getId ());
109c125
<                 return "";
---
>                     setResult ("");
114a131,134
>         } catch (InterruptedException e) {
>             Trace.catching (DiagramUIPlugin.getInstance (), DiagramUIDebugOptions.EXCEPTIONS_CATCHING, getClass (), "getTargetConnectionAnchor", e);
>             Log.error (DiagramUIPlugin.getInstance (), DiagramUIStatusCodes.IGNORED_EXCEPTION_WARNING, "getTargetConnectionAnchor", e);
>         }
