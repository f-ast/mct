12a13,14
> import org.eclipse.emf.ecore.EObject;
> 
110c112
<         private EditPart editPart = null;
---
>         private NoteEditPart editPart = null;
112c114
<         public ResourceListener (Resource resource, EditPart editPart) {
---
>         public ResourceListener (Resource resource, NoteEditPart editPart) {
118,119c120,126
<             if (editPart == null || resourceRef.get () == null) return;
< 
---
>             if (editPart == null || resourceRef.get () == null) {
>                 if (editPart != null && editPart.listener != null) {
>                     getEditingDomain ().removeResourceSetListener (editPart.listener);
>                     editPart.listener = null;
>                 }
>                 return;
>             }
122a130,133
>                 if (editPart.listener != null) {
>                     getEditingDomain ().removeResourceSetListener (editPart.listener);
>                     editPart.listener = null;
>                 }
156,157c167,170
<         if (listener != null) getEditingDomain ().removeResourceSetListener (listener);
< 
---
>         if (listener != null) {
>             getEditingDomain ().removeResourceSetListener (listener);
>             listener = null;
>         }
160a174,181
>     protected void handleNotificationEvent (Notification notification) {
>         Object feature = notification.getFeature ();
>         if (feature == NotationPackage.eINSTANCE.getView_Element () && notification.getEventType () == Notification.RESOLVE && ((EObject) notification.getNotifier ()) == getNotationView () && listener != null) {
>             return;
>         }
>         super.handleNotificationEvent (notification);
>     }
> 
