266c266
<             if (_model instanceof View) return _model;
---
>             if (key.isInstance (_model)) return _model;
861,887d860
<     public void removeNotify () {
<         if (getSelected () != SELECTED_NONE) getViewer ().deselect (this);
< 
<         if (hasFocus ()) getViewer ().setFocus (null);
< 
<         List _children = getChildren ();
<         for (int i = 0;
<         i < _children.size (); i ++) ((EditPart) _children.get (i)).removeNotify ();
< 
<         unregister ();
<         List conns;
<         conns = getSourceConnections ();
<         for (int i = 0;
<         i < conns.size (); i ++) {
<             ConnectionEditPart conn = (ConnectionEditPart) conns.get (i);
<             if (conn.getSource () == this) conn.setSource (null);
< 
<         }
<         conns = getTargetConnections ();
<         for (int i = 0;
<         i < conns.size (); i ++) {
<             ConnectionEditPart conn = (ConnectionEditPart) conns.get (i);
<             if (conn.getTarget () == this) conn.setTarget (null);
< 
<         }
<     }
< 
