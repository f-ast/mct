136c136
<         for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>         for (Iterator it = info.getLoadedResourcesIterator ();
284c284
<             for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = info.getLoadedResourcesIterator ();
335c335
<             for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = info.getLoadedResourcesIterator ();
371c371
<             for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = info.getLoadedResourcesIterator ();
388c388
<             for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = info.getLoadedResourcesIterator ();
405c405
<             for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = info.getLoadedResourcesIterator ();
422c422
<             for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = info.getLoadedResourcesIterator ();
449c449
<             for (Iterator it = info.getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = info.getLoadedResourcesIterator ();
467d466
<             List resources = info.getResourceSet ().getResources ();
469,470c468,469
<                 monitor.beginTask (Messages.GMFGraphDocumentProvider_SaveDiagramTask, resources.size () + 1);
<                 for (Iterator it = resources.iterator ();
---
>                 monitor.beginTask (Messages.GMFGraphDocumentProvider_SaveDiagramTask, info.getResourceSet ().getResources ().size () + 1);
>                 for (Iterator it = info.getLoadedResourcesIterator ();
621a621,624
>         public Iterator getLoadedResourcesIterator () {
>             return new ArrayList (getResourceSet ().getResources ()).iterator ();
>         }
> 
629c632
<             for (Iterator it = getResourceSet ().getResources ().iterator ();
---
>             for (Iterator it = getLoadedResourcesIterator ();
769c772
<                         for (Iterator it = myInfo.getResourceSet ().getResources ().iterator ();
---
>                         for (Iterator it = myInfo.getLoadedResourcesIterator ();
