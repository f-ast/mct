23,24d22
< import org.eclipse.gmf.runtime.diagram.ui.editparts.IDiagramPreferenceSupport;
< 
296a295
>         if (rtlEnabled) {
313d311
<         if (rtlEnabled) {
316,319d313
<         } else {
<             scaledTranslateX += ((margins.left * colIndex) + (margins.right * (colIndex - 1)));
<             scaledTranslateY += ((margins.top * rowIndex) + (margins.bottom * (rowIndex - 1)));
<         }
329a324,347
>         } else {
>             this.graphics.translate (translated.x, translated.y);
>             this.graphics.scale (userScale);
>             this.graphics.pushState ();
>             int translateX = - (width * (colIndex - 1));
>             int translateY = - (height * (rowIndex - 1));
>             int scaledTranslateX = (int) (translateX / userScale);
>             int scaledTranslateY = (int) (translateY / userScale);
>             int scaledWidth = (int) (width / userScale);
>             int scaledHeight = (int) (height / userScale);
>             if (rtlEnabled) {
>                 scaledTranslateX += (margins.left * (colIndex - 1)) + (margins.right * (colIndex));
>                 scaledTranslateY += ((margins.top * rowIndex) + (margins.bottom * (rowIndex - 1)));
>             } else {
>                 scaledTranslateX += ((margins.left * colIndex) + (margins.right * (colIndex - 1)));
>                 scaledTranslateY += ((margins.top * rowIndex) + (margins.bottom * (rowIndex - 1)));
>             }
>             this.graphics.translate (scaledTranslateX, scaledTranslateY);
>             Rectangle clip = new Rectangle ((scaledWidth - margins.left - margins.right) * (colIndex - 1) + figureBounds.x, (scaledHeight - margins.bottom - margins.top) * (rowIndex - 1) + figureBounds.y, scaledWidth - margins.right - margins.left, scaledHeight - margins.top - margins.bottom);
>             this.graphics.clipRect (clip);
>             dgrmEP.getLayer (LayerConstants.PRINTABLE_LAYERS).paint (this.graphics);
>             this.graphics.popState ();
>             drawHeaderAndFooter (gc_, dgrmEP, figureBounds, font, rowIndex, colIndex);
>         }
