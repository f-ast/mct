6a7,8
> import org.eclipse.core.runtime.CoreException;
> 
79,80c81
<             myRunStatus = Status.CANCEL_STATUS;
<             new ProgressMonitorDialog (getShell ()).run (true, true, this);
---
>             doRunWithStatus ();
96d96
<         } catch (InvocationTargetException ex) {
102a103,116
>     private void doRunWithStatus () throws InterruptedException {
>         myRunStatus = Status.CANCEL_STATUS;
>         try {
>             new ProgressMonitorDialog (getShell ()).run (true, true, this);
>         } catch (InvocationTargetException ex) {
>             Throwable targetException = ex.getTargetException ();
>             if (targetException instanceof CoreException) {
>                 myRunStatus = ((CoreException) targetException).getStatus ();
>             } else {
>                 myRunStatus = new Status (IStatus.ERROR, CodeGenUIPlugin.getPluginID (), 0, "Exception occurred while generating code", targetException);
>             }
>         }
>     }
> 
