26a27,28
> import org.eclipse.draw2d.geometry.Geometry;
> 
30a33,34
> import org.eclipse.draw2d.geometry.PrecisionRectangle;
> 
51,52c55,57
<         if (source == null || target == null || isAvoidingObstructions (conn) || isClosestDistance (conn) || super.calculateBendPoints (conn).size () > 2) {
<             return super.calculateBendPoints (conn);
---
>         PointList bends = super.calculateBendPoints (conn);
>         if (source == null || target == null || isAvoidingObstructions (conn) || isClosestDistance (conn) || bends.size () > 2) {
>             return bends;
57c62
<             return super.calculateBendPoints (conn);
---
>             return bends;
71a77,79
>         if (bends.size () == 2 && ! lineIntersectRectangle (bends.getFirstPoint (), bends.getLastPoint (), sourceParentRect) && ! lineIntersectRectangle (bends.getFirstPoint (), bends.getLastPoint (), targetParentRect)) {
>             return bends;
>         }
83c91
<             return super.calculateBendPoints (conn);
---
>             return bends;
269c277
<         Rectangle rect = parent.getBounds ().getCopy ();
---
>         Rectangle rect = new PrecisionRectangle (parent.getBounds ());
278a287,290
>     private boolean lineIntersectRectangle (Point start, Point end, Rectangle rect) {
>         return Geometry.linesIntersect (start.x, start.y, end.x, end.y, rect.x, rect.y, rect.x + rect.width, rect.y) || Geometry.linesIntersect (start.x, start.y, end.x, end.y, rect.x + rect.width, rect.y, rect.x + rect.width, rect.y + rect.height) || Geometry.linesIntersect (start.x, start.y, end.x, end.y, rect.x + rect.width, rect.y + rect.height, rect.x, rect.y + rect.height) || Geometry.linesIntersect (start.x, start.y, end.x, end.y, rect.x, rect.y + rect.height, rect.x, rect.y);
>     }
> 
