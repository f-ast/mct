63,64d62
< import org.eclipse.emf.ecore.provider.EcoreItemProviderAdapterFactory;
< 
386d383
<         factories.add (new EcoreItemProviderAdapterFactory ());
847,849c844,853
<                     Resource savedResource = (Resource) editingDomain.getResourceSet ().getResources ().get (0);
<                     savedResources.add (savedResource);
<                     savedResource.save (Collections.EMPTY_MAP);
---
>                     boolean first = true;
>                     for (Iterator i = editingDomain.getResourceSet ().getResources ().iterator ();
>                     i.hasNext ();) {
>                         Resource resource = (Resource) i.next ();
>                         if ((first || ! resource.getContents ().isEmpty ()) && ! editingDomain.isReadOnly (resource)) {
>                             savedResources.add (resource);
>                             resource.save (Collections.EMPTY_MAP);
>                         }
>                         first = false;
>                     }
