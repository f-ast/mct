71c71
<         if (getOperationSet ().size () >= 2) {
---
>         if (! getOperationSet ().isEmpty ()) {
73,74c73,75
<             if (parent != null) return parent.getCommand (getTargetRequest ());
< 
---
>             if (parent != null) {
>                 return parent.getCommand (getTargetRequest ());
>             }
80c81
<         if (isArrangeAll ()) {
---
>         if (isArrangeAll () && ! getOperationSet ().isEmpty ()) {
121c122
<         if (editparts.size () < 2) return Collections.EMPTY_LIST;
---
>         if (editparts == null || editparts.isEmpty ()) return Collections.EMPTY_LIST;
193c194
<                 IGraphicalEditPart container = (IGraphicalEditPart) ((EditPart) operationSet.get (0)).getParent ();
---
>                 IGraphicalEditPart container = (IGraphicalEditPart) getSelectionParent (operationSet);
