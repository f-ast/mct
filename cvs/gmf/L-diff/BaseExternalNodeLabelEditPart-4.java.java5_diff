2a3,14
> import org.eclipse.draw2d.AbstractLocator;
> 
> import org.eclipse.draw2d.IFigure;
> 
> import org.eclipse.draw2d.PositionConstants;
> 
> import org.eclipse.draw2d.geometry.Point;
> 
> import org.eclipse.emf.common.notify.Notification;
> 
> import org.eclipse.gef.GraphicalEditPart;
> 
4a17,28
> import org.eclipse.gmf.runtime.lite.edit.parts.update.IExternallyUpdatableEditPart;
> 
> import org.eclipse.gmf.runtime.lite.edit.parts.update.UpdaterUtil;
> 
> import org.eclipse.gmf.runtime.notation.Location;
> 
> import org.eclipse.gmf.runtime.notation.Node;
> 
> import org.eclipse.gmf.runtime.notation.NotationPackage;
> 
> import org.eclipse.gmf.runtime.notation.View;
> 
7c31
<     public BaseExternalNodeLabelEditPart (org.eclipse.gmf.runtime.notation.View view) {
---
>     public BaseExternalNodeLabelEditPart (View view) {
12c36
<         org.eclipse.gmf.runtime.notation.Node node = (org.eclipse.gmf.runtime.notation.Node) getModel ();
---
>         Node node = (Node) getModel ();
16,18c40,42
<         assert node.getLayoutConstraint () instanceof org.eclipse.gmf.runtime.notation.Location;
<         final org.eclipse.gmf.runtime.notation.Location location = (org.eclipse.gmf.runtime.notation.Location) node.getLayoutConstraint ();
<         getFigure ().getParent ().setConstraint (getFigure (), new org.eclipse.draw2d.AbstractLocator () {
---
>         assert node.getLayoutConstraint () instanceof Location;
>         final Location location = (Location) node.getLayoutConstraint ();
>         getFigure ().getParent ().setConstraint (getFigure (), new AbstractLocator () {
20,21c44,45
<             protected org.eclipse.draw2d.geometry.Point getReferencePoint () {
<                 return getLabelLocation (((org.eclipse.gef.GraphicalEditPart) getParent ()).getFigure ()).translate (location.getX (), location.getY ());
---
>             protected Point getReferencePoint () {
>                 return getLabelLocation (((GraphicalEditPart) getParent ()).getFigure ()).translate (location.getX (), location.getY ());
25c49
<                 return org.eclipse.draw2d.PositionConstants.SOUTH;
---
>                 return PositionConstants.SOUTH;
38c62
<     protected org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart.Refresher boundsRefresher = new org.eclipse.gmf.runtime.lite.edit.parts.update.IUpdatableEditPart.Refresher () {
---
>     protected IExternallyUpdatableEditPart.ExternalRefresher boundsRefresher = new IExternallyUpdatableEditPart.ExternalRefresher () {
43a68,77
>         public boolean isAffectingEvent (Notification msg) {
>             if (NotationPackage.eINSTANCE.getLocation ().getEStructuralFeatures ().contains (msg.getFeature ())) {
>                 return true;
>             }
>             if (NotationPackage.eINSTANCE.getNode_LayoutConstraint () == msg.getFeature ()) {
>                 return UpdaterUtil.affects (msg, NotationPackage.eINSTANCE.getLocation ());
>             }
>             return false;
>         }
> 
48,49c82,83
<     public org.eclipse.draw2d.geometry.Point getReferencePoint () {
<         return getLabelLocation (((org.eclipse.gef.GraphicalEditPart) getParent ()).getFigure ());
---
>     public Point getReferencePoint () {
>         return getLabelLocation (((GraphicalEditPart) getParent ()).getFigure ());
52,53c86,87
<     protected org.eclipse.draw2d.geometry.Point getLabelLocation (org.eclipse.draw2d.IFigure parent) {
<         org.eclipse.draw2d.geometry.Point result = parent.getBounds ().getBottom ();
---
>     protected Point getLabelLocation (IFigure parent) {
>         Point result = parent.getBounds ().getBottom ();
