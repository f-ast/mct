2a3,6
> import org.eclipse.core.commands.ExecutionException;
> 
> import org.eclipse.core.runtime.IAdaptable;
> 
10a15,16
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
12a19,20
> import org.eclipse.gmf.runtime.common.core.util.StringStatics;
> 
21c29
< import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand;
27c35
< public class CreateDiagramCommand extends AbstractModelCommand {
---
> public class CreateDiagramCommand extends AbstractTransactionalCommand {
32,33c40,41
<     public CreateDiagramCommand (String label, EObject anElementContext, String aDiagramKindType, PreferencesHint preferencesHint) {
<         super (label, null);
---
>     public CreateDiagramCommand (TransactionalEditingDomain editingDomain, String label, EObject anElementContext, String aDiagramKindType, PreferencesHint preferencesHint) {
>         super (editingDomain, label, null);
40c48
<     protected CommandResult doExecute (IProgressMonitor progressMonitor) {
---
>     protected CommandResult doExecuteWithResult (IProgressMonitor monitor, IAdaptable info) throws ExecutionException {
42c50
<         return new CommandResult (new Status (IStatus.OK, getPluginId (), DiagramStatusCodes.OK, EMPTY_STRING, null), diagram);
---
>         return new CommandResult (new Status (IStatus.OK, getPluginId (), DiagramStatusCodes.OK, StringStatics.BLANK, null), diagram);
