2a3,4
> import java.util.ArrayList;
> 
10a13,14
> import org.eclipse.core.runtime.Assert;
> 
55,56d58
< import org.eclipse.jface.util.Assert;
< 
135a138
>         removeEmptyContainers (root);
199a203,228
>     private boolean removeEmptyContainers (PaletteContainer container) {
>         List childrenToRemove = new ArrayList ();
>         boolean containsToolEntries = false;
>         for (Iterator iter = container.getChildren ().iterator ();
>         iter.hasNext ();) {
>             PaletteEntry entry = (PaletteEntry) iter.next ();
>             if (entry instanceof PaletteSeparator) {
>                 continue;
>             } else if (entry instanceof PaletteContainer) {
>                 if (removeEmptyContainers ((PaletteContainer) entry)) {
>                     containsToolEntries = true;
>                 } else {
>                     childrenToRemove.add (entry);
>                 }
>             } else {
>                 containsToolEntries = true;
>             }
> 
>         }
>         for (Iterator iter = childrenToRemove.iterator ();
>         iter.hasNext ();) {
>             container.remove ((PaletteEntry) iter.next ());
>         }
>         return containsToolEntries;
>     }
> 
