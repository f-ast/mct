18a19,22
> import java.util.Set;
> 
> import java.util.Map.Entry;
> 
338a343,355
>     public void dispose () {
>         Set entries = stackToManager.entrySet ();
>         for (Iterator iter = entries.iterator ();
>         iter.hasNext ();) {
>             Map.Entry element = (Map.Entry) iter.next ();
>             IOperationHistoryListener historyListener = (IOperationHistoryListener) element.getValue ();
>             if (historyListener != null) {
>                 getOperationHistory ().removeOperationHistoryListener (historyListener);
>             }
>         }
>         super.dispose ();
>     }
> 
