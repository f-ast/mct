732c732,735
<         PolylineConnectionEx poly = ((PolylineConnectionEx) getConnectionFigure ());
---
>         Connection connection = getConnectionFigure ();
>         if (! (connection instanceof PolylineConnectionEx)) return;
> 
>         PolylineConnectionEx poly = (PolylineConnectionEx) connection;
750c753,756
<         PolylineConnectionEx poly = ((PolylineConnectionEx) getConnectionFigure ());
---
>         Connection connection = getConnectionFigure ();
>         if (! (connection instanceof PolylineConnectionEx)) return;
> 
>         PolylineConnectionEx poly = (PolylineConnectionEx) connection;
777c783,786
<         PolylineConnectionEx poly = ((PolylineConnectionEx) getConnectionFigure ());
---
>         Connection connection = getConnectionFigure ();
>         if (! (connection instanceof PolylineConnectionEx)) return;
> 
>         PolylineConnectionEx poly = (PolylineConnectionEx) connection;
