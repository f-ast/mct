19,20d18
< import org.eclipse.gmf.common.codegen.ImportAssistant;
< 
21,21c19,19
< import org.eclipse.gmf.gmfgraph.Figure;
---
> import org.eclipse.gmf.gmfgraph.FigureDescriptor;
41,41c39,39
<     private final Map < String, Figure > myCallbackFigures = new LinkedHashMap < String, Figure > ();
---
>     private final Map < String, FigureDescriptor > myCallbackFigures = new LinkedHashMap < String, FigureDescriptor > ();
137,137c135,135
<         public String visitFigure (Figure f) throws InterruptedException;
---
>         public String visitFigure (FigureDescriptor f) throws InterruptedException;
159,159c157,157
<         myFigureGenerator = new FigureGenerator (config.getRuntimeToken (), strategy, accessor, false, dynamicTemplates);
---
>         myFigureGenerator = new FigureGenerator (config.getRuntimeToken (), getPackageName (), strategy, accessor, false, dynamicTemplates);
203,203c201,201
<             public String visitFigure (Figure f) throws InterruptedException {
---
>             public String visitFigure (FigureDescriptor f) throws InterruptedException {
211a210,216
>     private String visitFigure (FigureDescriptor figureDescriptor) throws InterruptedException {
>         if (figureDescriptor.getName () == null) {
>             throw new IllegalArgumentException ("FigureDescriptor needs a name");
>         }
>         final String compilationUnitName = CodeGenUtil.validJavaIdentifier (CodeGenUtil.capName (figureDescriptor.getName ()));
>         doGenerateJavaClass (myFigureGenerator, getPackageName (), compilationUnitName, figureDescriptor);
>         final String qualifiedName = composeFQN (getPackageName (), compilationUnitName);
212,216d209
<     private String visitFigure (Figure figure) throws InterruptedException {
<         final ImportAssistant importAssistant = new ImportUtil (getPackageName (), CodeGenUtil.validJavaIdentifier (figure.getName ()));
<         Object [] args = new Object [] {figure, importAssistant};
<         doGenerateJavaClass (myFigureGenerator, getPackageName (), importAssistant.getCompilationUnitName (), args);
<         final String qualifiedName = composeFQN (getPackageName (), importAssistant.getCompilationUnitName ());
217,217c217,217
<         myCallbackFigures.put (qualifiedName, figure);
---
>         myCallbackFigures.put (qualifiedName, figureDescriptor);
