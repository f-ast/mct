30a33,33
> import org.eclipse.emf.ecore.resource.Resource;
31a20,20
> 
31,31c19,19
< import org.eclipse.emf.ecore.xmi.XMLResource;
---
> import org.eclipse.emf.ecore.EDataType;
47a50,50
>     private Map < EClass, Map < String, EStructuralFeature > > myTracedHierarchyFeatures = new HashMap < EClass, Map < String, EStructuralFeature > > ();
48,48d49
<     private Map < EClass, Map < String, EStructuralFeature > > myRenamedParentAttributes = new HashMap < EClass, Map < String, EStructuralFeature > > ();
49,49c51,51
<     private XMLResource myResource;
---
>     private Resource myResource;
60,60c62,62
<     public void registerRenamedParentAttributes (EClass eClass, Map < String, EStructuralFeature > renamedAttributes) {
---
>     public void registerTracedFeatureForHierarchy (EClass eClass, Map < String, EStructuralFeature > tracedFeature) {
61,61c63,63
<         myRenamedParentAttributes.put (eClass, renamedAttributes);
---
>         myTracedHierarchyFeatures.put (eClass, tracedFeature);
80a83,85
>     public void registerTracedFeatureForHierarchy (EClass eClass, String xmlName, EStructuralFeature tracerFeature) {
>         Map < String, EStructuralFeature > tracedFeatures = myTracedHierarchyFeatures.get (eClass);
>         if (tracedFeatures == null) {
81,83d82
<     public void registerRenamedParentAttribute (EClass eClass, String oldName, EStructuralFeature newStructuralFeature) {
<         Map < String, EStructuralFeature > renamedAttributes = myRenamedParentAttributes.get (eClass);
<         if (renamedAttributes == null) {
84,84c86,86
<             renamedAttributes = new HashMap < String, EStructuralFeature > ();
---
>             tracedFeatures = new HashMap < String, EStructuralFeature > ();
85a88,89
>         tracedFeatures.put (xmlName, tracerFeature);
>         registerTracedFeatureForHierarchy (eClass, tracedFeatures);
86,87d87
<         renamedAttributes.put (oldName, newStructuralFeature);
<         registerRenamedParentAttributes (eClass, renamedAttributes);
110a113,113
>         Map < String, EStructuralFeature > tracings = myTracedHierarchyFeatures.get (clazz);
110,110c112,112
<     public EStructuralFeature getRenamedParentFeatureFor (EClass clazz, String name) {
---
>     public EStructuralFeature getTracedParentFeatureFor (EClass clazz, String name) {
111,111d112
<         Map < String, EStructuralFeature > renamings = myRenamedParentAttributes.get (clazz);
112,112c114,114
<         EStructuralFeature result = renamings != null ? renamings.get (name) : null;
---
>         EStructuralFeature result = tracings != null ? tracings.get (name) : null;
116,116c118,118
<             result = getRenamedParentFeatureFor (nextParent, name);
---
>             result = getTracedParentFeatureFor (nextParent, name);
134a140,140
>         } else if ((rename = getTracedParentFeatureFor (eClass, name)) != null) {
135,135d139
<         } else if ((rename = getRenamedParentFeatureFor (eClass, name)) != null) {
136,136c141,141
<             result = rename;
---
>             result = rename;
137,137d141
<             fireMigrationApplied (true);
164,165d164
<     public String getID (EObject obj) {
<         return null;
168,168c165,165
<     public void postProcess () {
---
>     public void preResolve () {
170a171,172
>     public boolean setManyReference (EObject object, EStructuralFeature feature, Object [] values) {
>         return false;
171,171c168,168
<     public void processObject (EObject result) {
---
>     public void processObject (EObject result) {
196,196c197,197
<     protected static EAttribute createNewAttribute (String name, EClassifier eType, boolean isMany) {
---
>     protected static EAttribute createNewAttribute (String name, EDataType eType, boolean isMany) {
200,200c201,201
<     protected static EAttribute createNewAttribute (String name, EClassifier eType, boolean isMany, boolean isObligatory) {
---
>     protected static EAttribute createNewAttribute (String name, EDataType eType, boolean isMany, boolean isObligatory) {
209,209c210,210
<     public void setResource (XMLResource resource) {
---
>     public void setResource (Resource resource) {
213,213c214,214
<     protected XMLResource getResource () {
---
>     protected Resource getResource () {
216a218,220
>     public void postLoad () {
>     }
> 
