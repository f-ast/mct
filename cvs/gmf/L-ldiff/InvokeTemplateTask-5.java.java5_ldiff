2a3,14
> import java.io.File;
> 
> import java.io.FileOutputStream;
> 
> import java.io.IOException;
> 
> import java.net.MalformedURLException;
> 
> import java.util.ArrayList;
> 
> import java.util.StringTokenizer;
> 
12,12c24,24
<     private String myTemplateRoot;
---
>     private String [] myTemplateRoots;
12a25,25
>     private String myOutFile;
21a35,40
>     public void setInputURI (String uri) {
>         myTemplateTarget = uri;
>     }
> 
>     public void setOutFile (String uri) {
>         myOutFile = uri;
22,23d34
<     public void setBareInput (int i) {
<         myTemplateTarget = i;
26a44,49
>         ArrayList < String > roots = new ArrayList < String > ();
>         for (StringTokenizer st = new StringTokenizer (root, ";, ");
>         st.hasMoreTokens ();) {
>             roots.add (st.nextToken ().trim ());
>         }
>         myTemplateRoots = roots.toArray (new String [roots.size ()]);
27,27d43
<         myTemplateRoot = root;
42a65,65
>         if (myOutFile == null) {
43a67,76
>         } else {
>             try {
>                 File f = getProject ().resolveFile (myOutFile);
>                 FileOutputStream os = new FileOutputStream (f);
>                 os.write (result.getBytes ());
>                 os.close ();
>             } catch (IOException ex) {
>                 throw new BuildException ("Can't write to " + myOutFile, ex, getLocation ());
>             }
>         }
52a86,88
>         if (myTemplateRoots == null || myTemplateRoots.length == 0) {
>             throw new BuildException ("No template root specified", getLocation ());
>         }
63,63c99,99
<     protected XpandFacade createFacade () {
---
>     protected XpandFacade createFacade () throws BuildException {
65a102,104
>             for (String r : myTemplateRoots) {
>                 xf.addLocation (r);
>             }
66,66d101
<             xf.addLocation (myTemplateRoot);
67a106,107
>         } catch (MalformedURLException ex) {
>             throw new BuildException (ex, getLocation ());
68,69d105
<         } catch (Exception ex) {
<             ex.printStackTrace ();
71,72d108
<         assert false;
<         return null;
