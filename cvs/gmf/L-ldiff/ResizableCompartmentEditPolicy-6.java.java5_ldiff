32a33,34
> import org.eclipse.gmf.runtime.diagram.ui.editparts.ResizableCompartmentEditPart;
> 
75a91,94
> 
>         return compartmentFigure;
>     }
> 
76,76c95,95
<     protected void showSelection () {
---
>     protected void showSelection () {
77,77c96,96
<         super.showSelection ();
---
>         super.showSelection ();
78,78c97,97
<         if (getHost ().getSelected () != EditPart.SELECTED_NONE) {
---
>         if (getHost ().getSelected () != EditPart.SELECTED_NONE) {
78a98,100
>             ResizableCompartmentFigure compartmentFigure = getCompartmentFigure ();
>             if (compartmentFigure != null) {
>                 compartmentFigure.setSelected (true);
79,81d97
<             if (getGraphicalEditPart ().getFigure () instanceof ResizableCompartmentFigure) {
<                 ResizableCompartmentFigure f = (ResizableCompartmentFigure) getGraphicalEditPart ().getFigure ();
<                 f.setSelected (true);
82,82c101,101
<             }
---
>             }
83,83d101
<             if (getGraphicalEditPart ().getFigure () instanceof GatedPaneFigure) {
87,87c190,190
<                     ((ResizableCompartmentFigure) f).setSelected (true);
---
>         ResizableCompartmentFigure f = getCompartmentFigure ();
95a78,81
>     private ResizableCompartmentFigure getCompartmentFigure () {
>         ResizableCompartmentFigure compartmentFigure = null;
>         if (getGraphicalEditPart () instanceof ResizableCompartmentEditPart) {
>             compartmentFigure = ((ResizableCompartmentEditPart) getGraphicalEditPart ()).getCompartmentFigure ();
95a108,110
>             ResizableCompartmentFigure compartmentFigure = getCompartmentFigure ();
>             if (compartmentFigure != null) {
>                 compartmentFigure.setSelected (false);
96a83,83
>             compartmentFigure = (ResizableCompartmentFigure) getGraphicalEditPart ().getFigure ();
96,96c82,82
<             if (getGraphicalEditPart ().getFigure () instanceof ResizableCompartmentFigure) {
---
>         } else if (getGraphicalEditPart ().getFigure () instanceof ResizableCompartmentFigure) {
97,99d82
<                 ResizableCompartmentFigure f = (ResizableCompartmentFigure) getGraphicalEditPart ().getFigure ();
<                 f.setSelected (false);
<             }
100,100c84,84
<             if (getGraphicalEditPart ().getFigure () instanceof GatedPaneFigure) {
---
>         } else if (getGraphicalEditPart ().getFigure () instanceof GatedPaneFigure) {
101,105d84
<                 GatedPaneFigure gpf = (GatedPaneFigure) getGraphicalEditPart ().getFigure ();
<                 IFigure f = gpf.getElementPane ();
<                 if (f instanceof ResizableCompartmentFigure) {
<                     ((ResizableCompartmentFigure) f).setSelected (false);
<                 }
185,185c88,88
<         ResizableCompartmentFigure f = (ResizableCompartmentFigure) getHostFigure ();
---
>                 compartmentFigure = (ResizableCompartmentFigure) f;
