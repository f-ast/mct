22a23,24
> import org.eclipse.gmf.internal.common.URIUtil;
> 
108a111,111
>         myOperation = new TransformToGenModelOperation ();
109,115d110
<         IFile mapFile = (IFile) selection.getFirstElement ();
<         URI mapURI = URI.createPlatformResourceURI (mapFile.getFullPath ().toString (), true);
<         initOperation (mapURI);
<     }
< 
<     void initOperation (URI mapURI) {
<         myOperation = new TransformToGenModelOperation (mapURI);
175a172,179
>     IFile getMapFile () {
>         URI mapURI = mapModelPage.getURI ();
>         if (mapURI != null) {
>             return URIUtil.getFile (mapURI);
>         }
>         return (IFile) mySelection.getFirstElement ();
>     }
> 
