12a13,14
> import org.eclipse.draw2d.geometry.PrecisionRectangle;
> 
38,38c40,40
<             if (points.size () <= 2 || ptTerm == null || ptNext == null) return changed;
---
>             if (points.size () <= 2 || ptTerm == null || ptNext == null) {
38a41,42
>                 return changed;
>             }
39,39d40
< 
43,43c46,46
<                 if (seg.y < straightLineTolerance) {
---
>                 if (Math.abs (seg.y) < straightLineTolerance) {
45,45c48,48
<                 } else if (seg.x < straightLineTolerance) {
---
>                 } else if (Math.abs (seg.x) < straightLineTolerance) {
76,76c79,79
<                 points.removePoint (i);
---
>                 points.removePoint (i --);
885a889,890
>         Point result = null;
>         if (points.size () != 0) {
886,886c891,891
<         Point result = points.getFirstPoint ();
---
>             result = points.getFirstPoint ();
893a899,899
>         }
897a904,905
>         Point result = null;
>         if (points.size () != 0) {
898,898c906,906
<         Point result = points.getFirstPoint ();
---
>             result = points.getFirstPoint ();
905a914,914
>         }
