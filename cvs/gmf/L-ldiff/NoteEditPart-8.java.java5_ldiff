12a13,14
> import org.eclipse.emf.ecore.EObject;
> 
110,110c112,112
<         private EditPart editPart = null;
---
>         private NoteEditPart editPart = null;
112,112c114,114
<         public ResourceListener (Resource resource, EditPart editPart) {
---
>         public ResourceListener (Resource resource, NoteEditPart editPart) {
118,118c120,120
<             if (editPart == null || resourceRef.get () == null) return;
---
>             if (editPart == null || resourceRef.get () == null) {
118a121,126
>                 if (editPart != null && editPart.listener != null) {
>                     getEditingDomain ().removeResourceSetListener (editPart.listener);
>                     editPart.listener = null;
>                 }
>                 return;
>             }
119,119d120
< 
122a130,133
>                 if (editPart.listener != null) {
>                     getEditingDomain ().removeResourceSetListener (editPart.listener);
>                     editPart.listener = null;
>                 }
155a167,167
>         if (listener != null) {
156a169,170
>             listener = null;
>         }
156,156c168,168
<         if (listener != null) getEditingDomain ().removeResourceSetListener (listener);
---
>             getEditingDomain ().removeResourceSetListener (listener);
157,157d168
< 
160a174,181
>     protected void handleNotificationEvent (Notification notification) {
>         Object feature = notification.getFeature ();
>         if (feature == NotationPackage.eINSTANCE.getView_Element () && notification.getEventType () == Notification.RESOLVE && ((EObject) notification.getNotifier ()) == getNotationView () && listener != null) {
>             return;
>         }
>         super.handleNotificationEvent (notification);
>     }
> 
