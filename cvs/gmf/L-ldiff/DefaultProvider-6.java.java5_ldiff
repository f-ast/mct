57,57c85,85
< import org.eclipse.jface.util.Assert;
---
> import org.eclipse.jface.util.Assert;
58,58c86,86
< 
---
> 
81a80,81
> 
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapModeUtil;
81,81c79,79
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
87a90,91
>     private int layoutDefaultMargin = 0;
>     private IMapMode mm;
88,88d89
<     protected static final int LAYOUTDEFAULTMARGIN = MapMode.DPtoLP (25);
92a96,99
>     protected IMapMode getMapMode () {
>         return mm;
>     }
> 
103a111,111
>         mm = MapModeUtil.getMapMode (containerEditPart.getFigure ());
120a129,129
>         mm = MapModeUtil.getMapMode (containerEditPart.getFigure ());
356a366,366
>         layoutDefaultMargin = MapModeUtil.getMapMode (diagramEP.getFigure ()).DPtoLP (25);
382,382c392,392
<                 PointListUtilities.normalizeSegments (points, MapMode.DPtoLP (3));
---
>                 PointListUtilities.normalizeSegments (points, MapModeUtil.getMapMode (cep.getFigure ()).DPtoLP (3));
458,458c468,468
<         return new Point (LAYOUTDEFAULTMARGIN, LAYOUTDEFAULTMARGIN);
---
>         return new Point (layoutDefaultMargin, layoutDefaultMargin);
