26a27,28
> import org.eclipse.gmf.codegen.gmfgen.FeatureModelFacet;
> 
36a39,40
> import org.eclipse.gmf.codegen.gmfgen.LinkModelFacet;
> 
38a43,44
> import org.eclipse.gmf.codegen.gmfgen.TypeLinkModelFacet;
> 
41,41c47,47
< public abstract class GenLinkImpl extends GenBaseElementImpl implements GenLink {
---
> public class GenLinkImpl extends GenBaseElementImpl implements GenLink {
42,42c48,48
<     protected GenFeature domainLinkTargetFeature = null;
---
>     protected LinkModelFacet modelFacet = null;
58a65,66
>     public LinkModelFacet getModelFacet () {
>         return modelFacet;
59,65d64
<     public GenFeature getDomainLinkTargetFeature () {
<         if (domainLinkTargetFeature != null && domainLinkTargetFeature.eIsProxy ()) {
<             GenFeature oldDomainLinkTargetFeature = domainLinkTargetFeature;
<             domainLinkTargetFeature = (GenFeature) eResolveProxy ((InternalEObject) domainLinkTargetFeature);
<             if (domainLinkTargetFeature != oldDomainLinkTargetFeature) {
<                 if (eNotificationRequired ()) eNotify (new ENotificationImpl (this, Notification.RESOLVE, GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE, oldDomainLinkTargetFeature, domainLinkTargetFeature));
< 
66a68,76
> 
>     public NotificationChain basicSetModelFacet (LinkModelFacet newModelFacet, NotificationChain msgs) {
>         LinkModelFacet oldModelFacet = modelFacet;
>         modelFacet = newModelFacet;
>         if (eNotificationRequired ()) {
>             ENotificationImpl notification = new ENotificationImpl (this, Notification.SET, GMFGenPackage.GEN_LINK__MODEL_FACET, oldModelFacet, newModelFacet);
>             if (msgs == null) msgs = notification;
>             else msgs.add (notification);
> 
68,68c78,78
<         return domainLinkTargetFeature;
---
>         return msgs;
70a81,89
>     public void setModelFacet (LinkModelFacet newModelFacet) {
>         if (newModelFacet != modelFacet) {
>             NotificationChain msgs = null;
>             if (modelFacet != null) msgs = ((InternalEObject) modelFacet).eInverseRemove (this, EOPPOSITE_FEATURE_BASE - GMFGenPackage.GEN_LINK__MODEL_FACET, null, msgs);
> 
>             if (newModelFacet != null) msgs = ((InternalEObject) newModelFacet).eInverseAdd (this, EOPPOSITE_FEATURE_BASE - GMFGenPackage.GEN_LINK__MODEL_FACET, null, msgs);
> 
>             msgs = basicSetModelFacet (newModelFacet, msgs);
>             if (msgs != null) msgs.dispatch ();
71,73d80
<     public GenFeature basicGetDomainLinkTargetFeature () {
<         return domainLinkTargetFeature;
<     }
74a91,91
>         } else if (eNotificationRequired ()) eNotify (new ENotificationImpl (this, Notification.SET, GMFGenPackage.GEN_LINK__MODEL_FACET, newModelFacet, newModelFacet));
75,78d90
<     public void setDomainLinkTargetFeature (GenFeature newDomainLinkTargetFeature) {
<         GenFeature oldDomainLinkTargetFeature = domainLinkTargetFeature;
<         domainLinkTargetFeature = newDomainLinkTargetFeature;
<         if (eNotificationRequired ()) eNotify (new ENotificationImpl (this, Notification.SET, GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE, oldDomainLinkTargetFeature, domainLinkTargetFeature));
121a135,136
>                 case GMFGenPackage.GEN_LINK__MODEL_FACET :
>                     return basicSetModelFacet (null, msgs);
163,163c178,178
<             case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE :
---
>             case GMFGenPackage.GEN_LINK__MODEL_FACET :
164,165d178
<                 if (resolve) return getDomainLinkTargetFeature ();
< 
166,166c179,179
<                 return basicGetDomainLinkTargetFeature ();
---
>                 return getModelFacet ();
195a209,210
>             case GMFGenPackage.GEN_LINK__MODEL_FACET :
>                 setModelFacet ((LinkModelFacet) newValue);
196,197d208
<             case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE :
<                 setDomainLinkTargetFeature ((GenFeature) newValue);
229a243,244
>             case GMFGenPackage.GEN_LINK__MODEL_FACET :
>                 setModelFacet ((LinkModelFacet) null);
230,231d242
<             case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE :
<                 setDomainLinkTargetFeature ((GenFeature) null);
258,258c271,271
<             case GMFGenPackage.GEN_LINK__DOMAIN_LINK_TARGET_FEATURE :
---
>             case GMFGenPackage.GEN_LINK__MODEL_FACET :
259,259c272,272
<                 return domainLinkTargetFeature != null;
---
>                 return modelFacet != null;
265a279,299
>     public String getClassNamePrefix () {
>         LinkModelFacet aModelFacet = getModelFacet ();
>         if (aModelFacet instanceof FeatureModelFacet) {
>             GenFeature metaFeature = ((FeatureModelFacet) aModelFacet).getMetaFeature ();
>             return metaFeature.getGenClass ().getName () + metaFeature.getCapName ();
>         } else if (aModelFacet instanceof TypeLinkModelFacet) {
>             GenClass metaClass = ((TypeLinkModelFacet) aModelFacet).getMetaClass ();
>             return metaClass.getName ();
>         }
> 
>         return "Link$" + hashCode ();
>     }
> 
>     public String getClassNameSuffux () {
>         return "Link";
>     }
> 
>     public String getUniqueIdentifier () {
>         return getClassNamePrefix () + "_" + getVisualID ();
>     }
> 
