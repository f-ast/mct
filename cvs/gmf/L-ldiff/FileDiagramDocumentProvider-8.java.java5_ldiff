77,78d76
< import org.eclipse.gmf.runtime.emf.core.internal.util.EMFCoreConstants;
< 
159,159c157,157
<             diagram = copyDiagramResource (diagram);
---
>             diagram = copyDiagramResource (diagram, file);
166,166c164,164
<     private Diagram copyDiagramResource (Diagram sourceDiagram) {
---
>     private Diagram copyDiagramResource (Diagram sourceDiagram, IFile file) {
171a170,171
>         String fileName = file.getFullPath ().toString ();
>         final Resource newResource = editingDomain.getResourceSet ().createResource (URI.createPlatformResourceURI (fileName, true));
172,172d169
<         final Resource newResource = editingDomain.createResource (EcoreUtil.generateUUID () + EMFCoreConstants.INVALID_PATH);
