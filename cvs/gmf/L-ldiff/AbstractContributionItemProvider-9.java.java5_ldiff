22a23,24
> import org.eclipse.gmf.runtime.common.ui.action.AbstractActionHandler;
> 
44a47,48
> import org.eclipse.gmf.runtime.common.ui.util.IPartSelector;
> 
155,155c159,159
<                     contributeItem (new ActionContributionItemAdapter (item.getId (), partDescriptor), actionBars.getMenuManager (), item.getMenubarPath (), item.getMenubarGroup ());
---
>                     contributeItem (new ActionContributionItemAdapter (item.getId (), partDescriptor, item), actionBars.getMenuManager (), item.getMenubarPath (), item.getMenubarGroup ());
157,157c161,161
<                 contributeItem (new ActionContributionItemAdapter (item.getId (), partDescriptor), actionBars.getToolBarManager (), item.getToolbarPath (), item.getToolbarGroup ());
---
>                 contributeItem (new ActionContributionItemAdapter (item.getId (), partDescriptor, item), actionBars.getToolBarManager (), item.getToolbarPath (), item.getToolbarGroup ());
194,194c198,198
<                 contributeItem (new ActionContributionItemAdapter (item.getId (), partDescriptor), popupMenu, item.getPath (), item.getGroup ());
---
>                 contributeItem (new ActionContributionItemAdapter (item.getId (), partDescriptor, item), popupMenu, item.getPath (), item.getGroup ());
410a415,415
>         private final IPartSelector partSelector;
412,412c417,417
<         public ActionContributionItemAdapter (String actionId, IWorkbenchPartDescriptor partDescriptor) {
---
>         public ActionContributionItemAdapter (String actionId, IWorkbenchPartDescriptor partDescriptor, IPartSelector partSelector) {
414a420,420
>             this.partSelector = partSelector;
419a426,426
>                 if (action != null) {
420,420c427,427
<                 if (action != null) return new PluginActionContributionItem (action);
---
>                     PluginActionContributionItem item = new PluginActionContributionItem (action);
420a428,432
>                     if (partSelector != null) {
>                         item.setPartSelector (partSelector);
>                     }
>                     return item;
>                 }
421,421d427
< 
767a779,785
>         public void setPartSelector (IPartSelector partSelector) {
>             IAction action = getAction ();
>             if (action instanceof AbstractActionHandler) {
>                 ((AbstractActionHandler) action).setPartSelector (partSelector);
>             }
>         }
> 
