3,10d2
< import java.util.ArrayList;
< 
< import java.util.Collection;
< 
< import java.util.Collections;
< 
< import java.util.Iterator;
< 
15,16d6
< import org.eclipse.gef.EditPart;
< 
29,30d18
< import org.eclipse.gmf.graphdef.editor.edit.parts.NodeEditPart;
< 
33,34d20
< import org.eclipse.gmf.runtime.diagram.ui.requests.EditCommandRequestWrapper;
< 
43,44d28
< import org.eclipse.gmf.runtime.notation.Edge;
< 
49a34,34
>         CompoundCommand cc = getDestroyEdgesCommand (req.isConfirmationRequired ());
50,61d33
<         CompoundCommand cc = new CompoundCommand ();
<         Collection allEdges = new ArrayList ();
<         View view = (View) getHost ().getModel ();
<         allEdges.addAll (view.getSourceEdges ());
<         allEdges.addAll (view.getTargetEdges ());
<         for (Iterator it = allEdges.iterator ();
<         it.hasNext ();) {
<             Edge nextEdge = (Edge) it.next ();
<             EditPart nextEditPart = (EditPart) getHost ().getViewer ().getEditPartRegistry ().get (nextEdge);
<             EditCommandRequestWrapper editCommandRequest = new EditCommandRequestWrapper (new DestroyElementRequest (((NodeEditPart) getHost ()).getEditingDomain (), req.isConfirmationRequired ()), Collections.EMPTY_MAP);
<             cc.add (nextEditPart.getCommand (editCommandRequest));
<         }
76,76c49,49
<         return cc;
---
>         return cc.unwrap ();
