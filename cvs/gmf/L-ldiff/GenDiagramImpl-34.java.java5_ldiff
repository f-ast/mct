31,32d30
< import org.eclipse.emf.ecore.EStructuralFeature;
< 
61,62d58
< import org.eclipse.gmf.codegen.gmfgen.Viewmap;
< 
158a155,155
>             InternalEObject oldDomainMetaModel = (InternalEObject) domainMetaModel;
159,159d154
<             GenPackage oldDomainMetaModel = domainMetaModel;
160,160c156,156
<             domainMetaModel = (GenPackage) eResolveProxy ((InternalEObject) domainMetaModel);
---
>             domainMetaModel = (GenPackage) eResolveProxy (oldDomainMetaModel);
181a178,178
>             InternalEObject oldDomainDiagramElement = (InternalEObject) domainDiagramElement;
182,182d177
<             GenClass oldDomainDiagramElement = domainDiagramElement;
183,183c179,179
<             domainDiagramElement = (GenClass) eResolveProxy ((InternalEObject) domainDiagramElement);
---
>             domainDiagramElement = (GenClass) eResolveProxy (oldDomainDiagramElement);
991a1481,1483
>         return super.eIsSet (featureID);
>     }
> 
991a988,989
>     public NotificationChain eInverseAdd (InternalEObject otherEnd, int featureID, NotificationChain msgs) {
>         switch (featureID) {
992,992c1484,1484
<     public boolean hasLinkCreationConstraints () {
---
>     public boolean hasLinkCreationConstraints () {
993,993c1485,1485
<         for (Iterator it = getLinks ().iterator ();
---
>         for (Iterator it = getLinks ().iterator ();
994,994c1486,1486
<         it.hasNext ();) {
---
>         it.hasNext ();) {
995,995c1487,1487
<             GenLink nextLink = (GenLink) it.next ();
---
>             GenLink nextLink = (GenLink) it.next ();
996,996c1488,1488
<             if (nextLink.getCreationConstraints () != null) {
---
>             if (nextLink.getCreationConstraints () != null) {
997,997c1489,1489
<                 return true;
---
>                 return true;
998,998c1490,1490
<             }
---
>             }
999,999c1491,1491
<         }
---
>         }
1000,1000c1492,1492
<         return false;
---
>         return false;
1001,1001c1493,1493
<     }
---
>     }
1002,1002c1494,1494
< 
---
> 
1003,1003c1495,1495
<     public String getLinkCreationConstraintsClassName () {
---
>     public String getLinkCreationConstraintsClassName () {
1004,1004c1496,1496
<         return "LinkConstraints";
---
>         return "LinkConstraints";
1005,1005c1497,1497
<     }
---
>     }
1006,1006c1498,1498
< 
---
> 
1007,1007c1499,1499
<     public String getLinkCreationConstraintsQualifiedClassName () {
---
>     public String getLinkCreationConstraintsQualifiedClassName () {
1008,1008c1500,1500
<         String owningClass = getBaseItemSemanticEditPolicyQualifiedClassName ();
---
>         String owningClass = getBaseItemSemanticEditPolicyQualifiedClassName ();
1009,1009c1501,1501
<         if (owningClass != null) {
---
>         if (owningClass != null) {
1010,1010c1502,1502
<             return owningClass + "." + getLinkCreationConstraintsClassName ();
---
>             return owningClass + "." + getLinkCreationConstraintsClassName ();
1011,1011c1503,1503
<         }
---
>         }
1012,1012c1504,1504
<         return getLinkCreationConstraintsClassName ();
---
>         return getLinkCreationConstraintsClassName ();
1013,1013c1505,1505
<     }
---
>     }
1014,1014c1506,1506
< 
---
> 
1015,1015c1507,1507
<     public String getEditorQualifiedClassName () {
---
>     public String getEditorQualifiedClassName () {
1016,1016c1508,1508
<         return getEditorPackageName () + '.' + getEditorClassName ();
---
>         return getEditorPackageName () + '.' + getEditorClassName ();
1017,1017c1509,1509
<     }
---
>     }
1018,1018c1510,1510
< 
---
> 
1019,1019c1511,1511
<     public String getReorientConnectionViewCommandQualifiedClassName () {
---
>     public String getReorientConnectionViewCommandQualifiedClassName () {
1020,1020c1512,1512
<         return getEditCommandsPackageName () + '.' + getReorientConnectionViewCommandClassName ();
---
>         return getEditCommandsPackageName () + '.' + getReorientConnectionViewCommandClassName ();
1021,1021c1513,1513
<     }
---
>     }
1022,1022c1514,1514
< 
---
> 
1023,1023c1515,1515
<     public String getEditPartFactoryQualifiedClassName () {
---
>     public String getEditPartFactoryQualifiedClassName () {
1024,1024c1516,1516
<         return getEditPartsPackageName () + '.' + getEditPartFactoryClassName ();
---
>         return getEditPartsPackageName () + '.' + getEditPartFactoryClassName ();
1025,1025c1517,1517
<     }
---
>     }
1026,1026c1518,1518
< 
---
> 
1027,1027c1519,1519
<     public String getBaseItemSemanticEditPolicyQualifiedClassName () {
---
>     public String getBaseItemSemanticEditPolicyQualifiedClassName () {
1028,1028c1520,1520
<         return getEditPoliciesPackageName () + '.' + getBaseItemSemanticEditPolicyClassName ();
---
>         return getEditPoliciesPackageName () + '.' + getBaseItemSemanticEditPolicyClassName ();
1029,1029c1521,1521
<     }
---
>     }
1030,1030c1522,1522
< 
---
> 
1031,1031c1523,1523
<     public String getBaseGraphicalNodeEditPolicyQualifiedClassName () {
---
>     public String getBaseGraphicalNodeEditPolicyQualifiedClassName () {
1032,1032c1524,1524
<         return getEditPoliciesPackageName () + '.' + getBaseGraphicalNodeEditPolicyClassName ();
---
>         return getEditPoliciesPackageName () + '.' + getBaseGraphicalNodeEditPolicyClassName ();
1033,1033c1525,1525
<     }
---
>     }
1034,1034c1526,1526
< 
---
> 
1035,1035c1527,1527
<     public String getReferenceConnectionEditPolicyQualifiedClassName () {
---
>     public String getReferenceConnectionEditPolicyQualifiedClassName () {
1036,1036c1528,1528
<         return getEditPoliciesPackageName () + '.' + getReferenceConnectionEditPolicyClassName ();
---
>         return getEditPoliciesPackageName () + '.' + getReferenceConnectionEditPolicyClassName ();
1037,1037c1529,1529
<     }
---
>     }
1038,1038c1530,1530
< 
---
> 
1039,1039c1531,1531
<     public String getCanonicalEditPolicyQualifiedClassName () {
---
>     public String getCanonicalEditPolicyQualifiedClassName () {
1040,1040c1532,1532
<         return getEditPoliciesPackageName () + '.' + getCanonicalEditPolicyClassName ();
---
>         return getEditPoliciesPackageName () + '.' + getCanonicalEditPolicyClassName ();
1041,1041c1533,1533
<     }
---
>     }
1042,1042c1534,1534
< 
---
> 
1043,1043c1535,1535
<     public String getElementTypesQualifiedClassName () {
---
>     public String getElementTypesQualifiedClassName () {
1044,1044c1536,1536
<         return getProvidersPackageName () + '.' + getElementTypesClassName ();
---
>         return getProvidersPackageName () + '.' + getElementTypesClassName ();
1045,1045c1537,1537
<     }
---
>     }
1046,1046c1538,1538
< 
---
> 
1047,1047c1539,1539
<     public String getSemanticHintsQualifiedClassName () {
---
>     public String getSemanticHintsQualifiedClassName () {
1048,1048c1540,1540
<         return getProvidersPackageName () + '.' + getSemanticHintsClassName ();
---
>         return getProvidersPackageName () + '.' + getSemanticHintsClassName ();
1049,1049c1541,1541
<     }
---
>     }
1050,1050c1542,1542
< 
---
> 
1051,1051c1543,1543
<     public String getNotationViewProviderQualifiedClassName () {
---
>     public String getNotationViewProviderQualifiedClassName () {
1052,1052c1544,1544
<         return getProvidersPackageName () + '.' + getNotationViewProviderClassName ();
---
>         return getProvidersPackageName () + '.' + getNotationViewProviderClassName ();
1053,1053c1545,1545
<     }
---
>     }
1054,1054c1546,1546
< 
---
> 
1055,1055c1547,1547
<     public String [] getRequiredPluginIDs () {
---
>     public String [] getRequiredPluginIDs () {
1056,1056c1548,1548
<         ArrayList requiredPlugins = new ArrayList ();
---
>         ArrayList requiredPlugins = new ArrayList ();
1057,1057c1549,1549
<         if (usesSVGShapes ()) {
---
>         if (usesSVGShapes ()) {
1058,1058c1550,1550
<             requiredPlugins.add ("org.eclipse.gmf.diagramrt.gefsvg");
---
>             requiredPlugins.add ("org.eclipse.gmf.diagramrt.gefsvg");
1059,1059c1551,1551
<         }
---
>         }
1060,1060c1552,1552
<         requiredPlugins.addAll (getExpressionsRequiredPluginIDs ());
---
>         requiredPlugins.addAll (getExpressionsRequiredPluginIDs ());
1061,1061c1553,1553
<         return (String []) requiredPlugins.toArray (new String [requiredPlugins.size ()]);
---
>         return (String []) requiredPlugins.toArray (new String [requiredPlugins.size ()]);
1062,1062c1554,1554
<     }
---
>     }
1063,1063c1555,1555
< 
---
> 
1064,1064c1556,1556
<     public String getInitDiagramFileActionQualifiedClassName () {
---
>     public String getInitDiagramFileActionQualifiedClassName () {
1065,1065c1557,1557
<         return getEditorPackageName () + '.' + getInitDiagramFileActionClassName ();
---
>         return getEditorPackageName () + '.' + getInitDiagramFileActionClassName ();
1066,1066c1558,1558
<     }
---
>     }
1067,1067c1559,1559
< 
---
> 
1068,1068c1560,1560
<     public String getEditPartProviderQualifiedClassName () {
---
>     public String getEditPartProviderQualifiedClassName () {
1069,1069c1561,1561
<         return getProvidersPackageName () + '.' + getEditPartProviderClassName ();
---
>         return getProvidersPackageName () + '.' + getEditPartProviderClassName ();
1070,1070c1562,1562
<     }
---
>     }
1071,1071c1563,1563
< 
---
> 
1072,1072c1564,1564
<     public String getMetamodelSupportProviderQualifiedClassName () {
---
>     public String getMetamodelSupportProviderQualifiedClassName () {
1073,1073c1565,1565
<         return getProvidersPackageName () + '.' + getMetamodelSupportProviderClassName ();
---
>         return getProvidersPackageName () + '.' + getMetamodelSupportProviderClassName ();
1074,1074c1566,1566
<     }
---
>     }
1075,1075c1567,1567
< 
---
> 
1076,1076c1568,1568
<     public String getModelingAssistantProviderQualifiedClassName () {
---
>     public String getModelingAssistantProviderQualifiedClassName () {
1077,1077c1569,1569
<         return getProvidersPackageName () + '.' + getModelingAssistantProviderClassName ();
---
>         return getProvidersPackageName () + '.' + getModelingAssistantProviderClassName ();
1078,1078c1570,1570
<     }
---
>     }
1079,1079c1571,1571
< 
---
> 
1080,1080c1572,1572
<     public String getPropertyProviderQualifiedClassName () {
---
>     public String getPropertyProviderQualifiedClassName () {
1081,1081c1573,1573
<         return getProvidersPackageName () + '.' + getPropertyProviderClassName ();
---
>         return getProvidersPackageName () + '.' + getPropertyProviderClassName ();
1082,1082c1574,1574
<     }
---
>     }
1083,1083c1575,1575
< 
---
> 
1084,1084c1576,1576
<     public String getIconProviderQualifiedClassName () {
---
>     public String getIconProviderQualifiedClassName () {
1085,1085c1577,1577
<         return getProvidersPackageName () + '.' + getIconProviderClassName ();
---
>         return getProvidersPackageName () + '.' + getIconProviderClassName ();
1086,1086c1578,1578
<     }
---
>     }
1087,1087c1579,1579
< 
---
> 
1088,1088c1580,1580
<     public String getStructuralFeatureParserQualifiedClassName () {
---
>     public String getStructuralFeatureParserQualifiedClassName () {
1089,1089c1581,1581
<         return getProvidersPackageName () + '.' + getStructuralFeatureParserClassName ();
---
>         return getProvidersPackageName () + '.' + getStructuralFeatureParserClassName ();
1090,1090c1582,1582
<     }
---
>     }
1091,1091c1583,1583
< 
---
> 
1092,1092c1584,1584
<     public String getActionBarContributorQualifiedClassName () {
---
>     public String getActionBarContributorQualifiedClassName () {
1093,1093c1585,1585
<         return getEditorPackageName () + '.' + getActionBarContributorClassName ();
---
>         return getEditorPackageName () + '.' + getActionBarContributorClassName ();
1094,1094c1586,1586
<     }
---
>     }
1095,1095c1587,1587
< 
---
> 
1096,1096c1588,1588
<     public String getCreationWizardQualifiedClassName () {
---
>     public String getCreationWizardQualifiedClassName () {
1097,1097c1589,1589
<         return getEditorPackageName () + '.' + getCreationWizardClassName ();
---
>         return getEditorPackageName () + '.' + getCreationWizardClassName ();
1098,1098c1590,1590
<     }
---
>     }
1099,1099c1591,1591
< 
---
> 
1100,1100c1592,1592
<     public String getCreationWizardPageQualifiedClassName () {
---
>     public String getCreationWizardPageQualifiedClassName () {
1101,1101c1593,1593
<         return getEditorPackageName () + '.' + getCreationWizardPageClassName ();
---
>         return getEditorPackageName () + '.' + getCreationWizardPageClassName ();
1102,1102c1594,1594
<     }
---
>     }
1103,1103c1595,1595
< 
---
> 
1104,1104c1596,1596
<     public String getDiagramEditorUtilQualifiedClassName () {
---
>     public String getDiagramEditorUtilQualifiedClassName () {
1105,1105c1597,1597
<         return getEditorPackageName () + '.' + getDiagramEditorUtilClassName ();
---
>         return getEditorPackageName () + '.' + getDiagramEditorUtilClassName ();
1106,1106c1598,1598
<     }
---
>     }
1107,1107c1599,1599
< 
---
> 
1108,1108c1600,1600
<     public String getDiagramFileCreatorQualifiedClassName () {
---
>     public String getDiagramFileCreatorQualifiedClassName () {
1109,1109c1601,1601
<         return getEditorPackageName () + '.' + getDiagramFileCreatorClassName ();
---
>         return getEditorPackageName () + '.' + getDiagramFileCreatorClassName ();
1110,1110c1602,1602
<     }
---
>     }
1111,1111c1603,1603
< 
---
> 
1112,1112c1604,1604
<     public String getDocumentProviderQualifiedClassName () {
---
>     public String getDocumentProviderQualifiedClassName () {
1113,1113c1605,1605
<         return getEditorPackageName () + '.' + getDocumentProviderClassName ();
---
>         return getEditorPackageName () + '.' + getDocumentProviderClassName ();
1114,1114c1606,1606
<     }
---
>     }
1115,1115c1607,1607
< 
---
> 
1116,1116c1608,1608
<     public String getMatchingStrategyQualifiedClassName () {
---
>     public String getMatchingStrategyQualifiedClassName () {
1117,1117c1609,1609
<         return getEditorPackageName () + '.' + getMatchingStrategyClassName ();
---
>         return getEditorPackageName () + '.' + getMatchingStrategyClassName ();
1118,1118c1610,1610
<     }
---
>     }
1119,1119c1611,1611
< 
---
> 
1120,1120c1612,1612
<     public String getElementInitializersClassName () {
---
>     public String getElementInitializersClassName () {
1121,1121c1613,1613
<         return "ElementInitializers";
---
>         return "ElementInitializers";
1122,1122c1614,1614
<     }
---
>     }
1123,1123c1615,1615
< 
---
> 
1124,1124c1616,1616
<     public String getElementInitializersPackageName () {
---
>     public String getElementInitializersPackageName () {
1125,1125c1617,1617
<         return getProvidersPackageName ();
---
>         return getProvidersPackageName ();
1126,1126c1618,1618
<     }
---
>     }
1127,1127c1619,1619
< 
---
> 
1128,1128c1620,1620
<     private boolean usesSVGShapes () {
---
>     private boolean usesSVGShapes () {
1129,1129c1621,1621
<         return false;
---
>         return false;
1130,1134d1621
<     }
< 
<     public NotificationChain eInverseAdd (InternalEObject otherEnd, int featureID, Class baseClass, NotificationChain msgs) {
<         if (featureID >= 0) {
<             switch (eDerivedStructuralFeatureID (featureID, baseClass)) {
1143,1143d998
<                 default :
1144,1144c999,999
<                     return eDynamicInverseAdd (otherEnd, featureID, baseClass, msgs);
---
>         return super.eInverseAdd (otherEnd, featureID, msgs);
1146,1149d998
<         }
<         if (eContainer != null) msgs = eBasicRemoveFromContainer (msgs);
< 
<         return eBasicSetContainer (otherEnd, featureID, msgs);
1152,1152c1002,1002
<     public NotificationChain eInverseRemove (InternalEObject otherEnd, int featureID, Class baseClass, NotificationChain msgs) {
---
>     public NotificationChain eInverseRemove (InternalEObject otherEnd, int featureID, NotificationChain msgs) {
1153,1153c1003,1003
<         if (featureID >= 0) {
---
>         switch (featureID) {
1154,1156d1003
<             switch (eDerivedStructuralFeatureID (featureID, baseClass)) {
<                 case GMFGenPackage.GEN_DIAGRAM__VIEWMAP :
<                     return basicSetViewmap (null, msgs);
1163,1163d1010
<                 default :
1164,1164c1011,1011
<                     return eDynamicInverseRemove (otherEnd, featureID, baseClass, msgs);
---
>         return super.eInverseRemove (otherEnd, featureID, msgs);
1166,1167d1010
<         }
<         return eBasicSetContainer (null, featureID, msgs);
1169a1014,1015
>     public Object eGet (int featureID, boolean resolve, boolean coreType) {
>         switch (featureID) {
1170,1185d1013
<     public Object eGet (EStructuralFeature eFeature, boolean resolve) {
<         switch (eDerivedStructuralFeatureID (eFeature)) {
<             case GMFGenPackage.GEN_DIAGRAM__DIAGRAM_RUN_TIME_CLASS :
<                 if (resolve) return getDiagramRunTimeClass ();
< 
<                 return basicGetDiagramRunTimeClass ();
<             case GMFGenPackage.GEN_DIAGRAM__VISUAL_ID :
<                 return new Integer (getVisualID ());
<             case GMFGenPackage.GEN_DIAGRAM__EDIT_PART_CLASS_NAME :
<                 return getEditPartClassName ();
<             case GMFGenPackage.GEN_DIAGRAM__ITEM_SEMANTIC_EDIT_POLICY_CLASS_NAME :
<                 return getItemSemanticEditPolicyClassName ();
<             case GMFGenPackage.GEN_DIAGRAM__NOTATION_VIEW_FACTORY_CLASS_NAME :
<                 return getNotationViewFactoryClassName ();
<             case GMFGenPackage.GEN_DIAGRAM__VIEWMAP :
<                 return getViewmap ();
1278a1109,1109
>         return super.eGet (featureID, resolve, coreType);
1279,1279d1108
<         return eDynamicGet (eFeature, resolve);
1281a1112,1113
>     public void eSet (int featureID, Object newValue) {
>         switch (featureID) {
1282,1301d1111
<     public void eSet (EStructuralFeature eFeature, Object newValue) {
<         switch (eDerivedStructuralFeatureID (eFeature)) {
<             case GMFGenPackage.GEN_DIAGRAM__DIAGRAM_RUN_TIME_CLASS :
<                 setDiagramRunTimeClass ((GenClass) newValue);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__VISUAL_ID :
<                 setVisualID (((Integer) newValue).intValue ());
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__EDIT_PART_CLASS_NAME :
<                 setEditPartClassName ((String) newValue);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__ITEM_SEMANTIC_EDIT_POLICY_CLASS_NAME :
<                 setItemSemanticEditPolicyClassName ((String) newValue);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__NOTATION_VIEW_FACTORY_CLASS_NAME :
<                 setNotationViewFactoryClassName ((String) newValue);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__VIEWMAP :
<                 setViewmap ((Viewmap) newValue);
<                 return;
1436a1249,1249
>         super.eSet (featureID, newValue);
1437,1437d1248
<         eDynamicSet (eFeature, newValue);
1439a1252,1253
>     public void eUnset (int featureID) {
>         switch (featureID) {
1440,1459d1251
<     public void eUnset (EStructuralFeature eFeature) {
<         switch (eDerivedStructuralFeatureID (eFeature)) {
<             case GMFGenPackage.GEN_DIAGRAM__DIAGRAM_RUN_TIME_CLASS :
<                 setDiagramRunTimeClass ((GenClass) null);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__VISUAL_ID :
<                 setVisualID (VISUAL_ID_EDEFAULT);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__EDIT_PART_CLASS_NAME :
<                 setEditPartClassName (EDIT_PART_CLASS_NAME_EDEFAULT);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__ITEM_SEMANTIC_EDIT_POLICY_CLASS_NAME :
<                 setItemSemanticEditPolicyClassName (ITEM_SEMANTIC_EDIT_POLICY_CLASS_NAME_EDEFAULT);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__NOTATION_VIEW_FACTORY_CLASS_NAME :
<                 setNotationViewFactoryClassName (NOTATION_VIEW_FACTORY_CLASS_NAME_EDEFAULT);
<                 return;
<             case GMFGenPackage.GEN_DIAGRAM__VIEWMAP :
<                 setViewmap ((Viewmap) null);
<                 return;
1592a1387,1387
>         super.eUnset (featureID);
1593,1593d1386
<         eDynamicUnset (eFeature);
1595a1390,1391
>     public boolean eIsSet (int featureID) {
>         switch (featureID) {
1596,1609d1389
<     public boolean eIsSet (EStructuralFeature eFeature) {
<         switch (eDerivedStructuralFeatureID (eFeature)) {
<             case GMFGenPackage.GEN_DIAGRAM__DIAGRAM_RUN_TIME_CLASS :
<                 return diagramRunTimeClass != null;
<             case GMFGenPackage.GEN_DIAGRAM__VISUAL_ID :
<                 return visualID != VISUAL_ID_EDEFAULT;
<             case GMFGenPackage.GEN_DIAGRAM__EDIT_PART_CLASS_NAME :
<                 return EDIT_PART_CLASS_NAME_EDEFAULT == null ? editPartClassName != null : ! EDIT_PART_CLASS_NAME_EDEFAULT.equals (editPartClassName);
<             case GMFGenPackage.GEN_DIAGRAM__ITEM_SEMANTIC_EDIT_POLICY_CLASS_NAME :
<                 return ITEM_SEMANTIC_EDIT_POLICY_CLASS_NAME_EDEFAULT == null ? itemSemanticEditPolicyClassName != null : ! ITEM_SEMANTIC_EDIT_POLICY_CLASS_NAME_EDEFAULT.equals (itemSemanticEditPolicyClassName);
<             case GMFGenPackage.GEN_DIAGRAM__NOTATION_VIEW_FACTORY_CLASS_NAME :
<                 return NOTATION_VIEW_FACTORY_CLASS_NAME_EDEFAULT == null ? notationViewFactoryClassName != null : ! NOTATION_VIEW_FACTORY_CLASS_NAME_EDEFAULT.equals (notationViewFactoryClassName);
<             case GMFGenPackage.GEN_DIAGRAM__VIEWMAP :
<                 return viewmap != null;
1699,1699d1480
<         return eDynamicIsSet (eFeature);
