34a35,36
> import org.eclipse.emf.ecore.util.FeatureMapUtil;
> 
270,270c272,272
<                     if (ref.isMany ()) {
---
>                     if (FeatureMapUtil.isMany (eObject, ref)) {
382,382c391,391
<                     if (eReference.isMany () == false) {
---
>                     if (FeatureMapUtil.isMany (eObject, eReference)) {
389,389c384,384
<                     if (eReference.isMany ()) {
---
>                     if (! FeatureMapUtil.isMany (eObject, eReference)) {
411,411c413,413
<             if (eReference.isMany () && ! eObject.eIsSet (eReference)) return false;
---
>             if (FeatureMapUtil.isMany (eObject, eReference) && ! eObject.eIsSet (eReference)) return false;
