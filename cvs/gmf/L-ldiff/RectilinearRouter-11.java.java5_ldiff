43a44,44
>         IFigure sourceFigure = conn.getSourceAnchor ().getOwner ();
44,44c45,45
<         if (conn.getSourceAnchor ().getOwner () == null) return false;
---
>         if (sourceFigure == null) return false;
45a47,47
>         PointList startPolygon = getFigurePolygon (sourceFigure, conn);
46,48d46
<         Rectangle startRect = new Rectangle (conn.getSourceAnchor ().getOwner ().getBounds ());
<         conn.getSourceAnchor ().getOwner ().translateToAbsolute (startRect);
<         conn.translateToRelative (startRect);
50a50,50
>             boolean in1 = PointListUtilities.containsPoint (startPolygon, newPoints.getPoint (i));
51,51d49
<             boolean in1 = startRect.contains (newPoints.getPoint (i));
52,52c51,51
<             boolean in2 = startRect.contains (newPoints.getPoint (i + 1));
---
>             boolean in2 = PointListUtilities.containsPoint (startPolygon, newPoints.getPoint (i + 1));
70a70,70
>         IFigure targetFigure = conn.getTargetAnchor ().getOwner ();
71,71c71,71
<         if (conn.getTargetAnchor ().getOwner () == null) return false;
---
>         if (targetFigure == null) return false;
72a73,73
>         PointList endPolygon = getFigurePolygon (targetFigure, conn);
73,75d72
<         Rectangle endRect = new Rectangle (conn.getTargetAnchor ().getOwner ().getBounds ());
<         conn.getTargetAnchor ().getOwner ().translateToAbsolute (endRect);
<         conn.translateToRelative (endRect);
77a76,76
>             boolean in1 = PointListUtilities.containsPoint (endPolygon, newPoints.getPoint (i));
78,78d75
<             boolean in1 = endRect.contains (newPoints.getPoint (i));
79,79c77,77
<             boolean in2 = endRect.contains (newPoints.getPoint (i - 1));
---
>             boolean in2 = PointListUtilities.containsPoint (endPolygon, newPoints.getPoint (i - 1));
