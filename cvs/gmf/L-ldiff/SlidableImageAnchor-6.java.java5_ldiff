25,25c29,29
< import org.eclipse.gmf.runtime.draw2d.ui.geometry.LineSeg;
---
> import org.eclipse.gmf.runtime.draw2d.ui.geometry.LineSeg;
26,26c30,30
< 
---
> 
27,27c31,31
< import org.eclipse.gmf.runtime.draw2d.ui.geometry.PointListUtilities;
---
> import org.eclipse.gmf.runtime.draw2d.ui.geometry.PointListUtilities;
28,28c32,32
< 
---
> 
35,35c35,35
<         static private Map < Image, ImageAnchorLocation > imageAnchorLocationMap = new WeakHashMap < Image, ImageAnchorLocation > ();
---
>         static private Map imageAnchorLocationMap = new WeakHashMap ();
38,38c38,38
<             ImageAnchorLocation imgAnchorLoc = imageAnchorLocationMap.get (image);
---
>             ImageAnchorLocation imgAnchorLoc = (ImageAnchorLocation) imageAnchorLocationMap.get (image);
46,46c46,46
<         private Map < Integer, Point > locationMap = new HashMap < Integer, Point > ();
---
>         private Map locationMap = new HashMap ();
97,97c97,97
<                 ptIntersect = locationMap.get (new Integer (angle));
---
>                 ptIntersect = (Point) locationMap.get (new Integer (angle));
173,173c173,173
<         Rectangle ownerRect = getBox ();
---
>         Rectangle ownerRect = new Rectangle (getBox ());
177a178,180
>             Point loc = ImageAnchorLocation.getInstance (getImage ()).getLocation (ptRef, ptEdge, ownerRect, isDefaultAnchor ());
>             if (loc != null) loc = normalizeToStraightlineTolerance (foreignReference, loc, 3);
> 
178,181d177
<             Point location = ImageAnchorLocation.getInstance (getImage ()).getLocation (ptRef, ptEdge, ownerRect, getReferencePoint ().equals (ownReference) && isDefaultAnchor ());
<             if (location != null) {
<                 location = normalizeToStraightlineTolerance (foreignReference, location, 3);
<             }
182,182c181,181
<             return location;
---
>             return loc;
