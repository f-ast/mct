2a3,6
> import org.eclipse.core.commands.ExecutionException;
> 
> import org.eclipse.core.runtime.IAdaptable;
> 
6a11,13
> import org.eclipse.emf.ecore.EObject;
> 
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
7,7d10
< import org.eclipse.ui.views.properties.IPropertySource;
11,11c17,17
< import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractModelCommand;
---
> import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand;
11a18,19
> 
> import org.eclipse.ui.views.properties.IPropertySource;
13,13c21,21
< public class SetModelPropertyValueCommand extends AbstractModelCommand {
---
> public class SetModelPropertyValueCommand extends AbstractTransactionalCommand {
20a29,29
>         super (editingDomain, label, (affectedObjects instanceof EObject) ? getWorkspaceFiles ((EObject) affectedObjects) : null);
20,20c28,28
<     public SetModelPropertyValueCommand (String label, Object affectedObjects, IPropertySource propertySource, Object propertyId, Object propertyValue) {
---
>     public SetModelPropertyValueCommand (TransactionalEditingDomain editingDomain, String label, Object affectedObjects, IPropertySource propertySource, Object propertyId, Object propertyValue) {
21,21d28
<         super (label, affectedObjects);
26a35,35
>     protected CommandResult doExecuteWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
27,35d34
<     public boolean isRedoable () {
<         return true;
<     }
< 
<     public boolean isUndoable () {
<         return true;
<     }
< 
<     protected CommandResult doExecute (IProgressMonitor progressMonitor) {
43,43c43,43
<         return newOKCommandResult (getPropertyValue ());
---
>         return CommandResult.newOKCommandResult (getPropertyValue ());
45a46,47
>     protected CommandResult doRedoWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
>         return doExecuteWithResult (new NullProgressMonitor (), info);
46,47d45
<     protected CommandResult doRedo () {
<         return doExecute (new NullProgressMonitor ());
49a50,50
>     protected CommandResult doUndoWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
50,50d49
<     protected CommandResult doUndo () {
56,56c56,56
<         return newOKCommandResult (getPropertySource ().getPropertyValue (getPropertyId ()));
---
>         return CommandResult.newOKCommandResult (getPropertySource ().getPropertyValue (getPropertyId ()));
