138,138d137
<         removeEmptyContainers (root);
203,228d201
<     private boolean removeEmptyContainers (PaletteContainer container) {
<         List childrenToRemove = new ArrayList ();
<         boolean containsToolEntries = false;
<         for (Iterator iter = container.getChildren ().iterator ();
<         iter.hasNext ();) {
<             PaletteEntry entry = (PaletteEntry) iter.next ();
<             if (entry instanceof PaletteSeparator) {
<                 continue;
<             } else if (entry instanceof PaletteContainer) {
<                 if (removeEmptyContainers ((PaletteContainer) entry)) {
<                     containsToolEntries = true;
<                 } else {
<                     childrenToRemove.add (entry);
<                 }
<             } else {
<                 containsToolEntries = true;
<             }
< 
<         }
<         for (Iterator iter = childrenToRemove.iterator ();
<         iter.hasNext ();) {
<             container.remove ((PaletteEntry) iter.next ());
<         }
<         return containsToolEntries;
<     }
< 
