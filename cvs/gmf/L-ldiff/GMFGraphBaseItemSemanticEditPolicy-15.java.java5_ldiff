6a23,23
> import org.eclipse.gmf.gmfgraph.ChildAccess;
7,7d22
< import org.eclipse.emf.ecore.EClass;
8a25,26
> import org.eclipse.gmf.gmfgraph.Compartment;
> 
8,8c24,24
< 
---
> 
26a29,30
> import org.eclipse.gmf.gmfgraph.DiagramLabel;
> 
27,27c31,31
< import org.eclipse.gmf.gmfgraph.FigureHandle;
---
> import org.eclipse.gmf.gmfgraph.Figure;
27a32,33
> 
> import org.eclipse.gmf.gmfgraph.FigureDescriptor;
119,119c125,125
<         Command epCommand = getSemanticCommandSwitch (completedRequest);
---
>         Command semanticCommand = getSemanticCommandSwitch (completedRequest);
119a126,126
>         if (semanticCommand != null) {
120,120d125
<         if (epCommand != null) {
121,121c127,127
<             ICommand command = epCommand instanceof ICommandProxy ? ((ICommandProxy) epCommand).getICommand () : new CommandProxy (epCommand);
---
>             ICommand command = semanticCommand instanceof ICommandProxy ? ((ICommandProxy) semanticCommand).getICommand () : new CommandProxy (semanticCommand);
124,124d129
<         Command ehCommand = null;
132,132c137,137
<                 ehCommand = new ICommandProxy (command);
---
>                 semanticCommand = new ICommandProxy (command);
143,143c148,148
<                 ehCommand = ehCommand == null ? deleteViewCommand : ehCommand.chain (deleteViewCommand);
---
>                 semanticCommand = semanticCommand == null ? deleteViewCommand : semanticCommand.chain (deleteViewCommand);
145,145c150,150
<             return ehCommand;
---
>             return semanticCommand;
221a227,227
>     protected final Command getGEFWrapper (ICommand cmd) {
222a232,232
>         return getGEFWrapper (cmd);
222,222c231,231
<     protected Command getMSLWrapper (ICommand cmd) {
---
>     protected final Command getMSLWrapper (ICommand cmd) {
226,226c235,235
<     protected EObject getSemanticElement () {
---
>     protected EObject getSemanticElement () {
227,227c236,236
<         return ViewUtil.resolveSemanticElement ((View) getHost ().getModel ());
---
>         return ViewUtil.resolveSemanticElement ((View) getHost ().getModel ());
230,239d234
<     protected EObject getRelationshipContainer (Object uelement, EClass containerClass, IElementType relationshipType) {
<         if (uelement instanceof EObject) {
<             EObject element = (EObject) uelement;
<             for (; element != null; element = element.eContainer ()) {
<                 if (containerClass.isSuperTypeOf (element.eClass ())) {
<                     return element;
<                 }
<             }
<         }
<         return null;
245a243,243
>     protected Command getDestroyElementCommand (View view) {
246,246d242
<     protected Command getDestroyEdgeCommand (Edge edge, boolean confirm) {
247,247c244,244
<         EditPart editPart = (EditPart) getHost ().getViewer ().getEditPartRegistry ().get (edge);
---
>         EditPart editPart = (EditPart) getHost ().getViewer ().getEditPartRegistry ().get (view);
248,248c245,245
<         DestroyElementRequest request = new DestroyElementRequest (getEditingDomain (), confirm);
---
>         DestroyElementRequest request = new DestroyElementRequest (getEditingDomain (), false);
252,252c249,249
<     protected CompoundCommand getDestroyEdgesCommand (boolean confirm) {
---
>     protected CompoundCommand getDestroyEdgesCommand () {
257,257c254,254
<             cmd.add (getDestroyEdgeCommand ((Edge) it.next (), confirm));
---
>             cmd.add (getDestroyElementCommand ((Edge) it.next ()));
261,261c258,258
<             cmd.add (getDestroyEdgeCommand ((Edge) it.next (), confirm));
---
>             cmd.add (getDestroyElementCommand ((Edge) it.next ()));
265a263,277
>     protected void addDestroyShortcutsCommand (CompoundCommand command) {
>         View view = (View) getHost ().getModel ();
>         if (view.getEAnnotation ("Shortcut") != null) {
>             return;
>         }
>         for (Iterator it = view.getDiagram ().getChildren ().iterator ();
>         it.hasNext ();) {
>             View nextView = (View) it.next ();
>             if (nextView.getEAnnotation ("Shortcut") == null || ! nextView.isSetElement () || nextView.getElement () != view.getElement ()) {
>                 continue;
>             }
>             command.add (getDestroyElementCommand (nextView));
>         }
>     }
> 
268,268c323,323
<         public static boolean canCreateDiagramElementFigure_4001 (DiagramElement source, FigureHandle target) {
---
>         public static boolean canExistDiagramElementFigure_4005 (DiagramElement source, FigureDescriptor target) {
274,274c308,308
<             return canExistDiagramElementFigure_4001 (source, target);
---
>             return canExistDiagramElementFigure_4005 (source, target);
274a309,320
>         }
> 
>         public static boolean canExistChildAccess_4002 (FigureDescriptor source, Figure target) {
>             return true;
>         }
> 
>         public static boolean canExistCompartmentAccessor_4003 (Compartment source, ChildAccess target) {
>             return true;
>         }
> 
>         public static boolean canExistDiagramLabelAccessor_4004 (DiagramLabel source, ChildAccess target) {
>             return true;
276a280,301
>         public static boolean canCreateChildAccess_4002 (FigureDescriptor source, Figure target) {
>             return canExistChildAccess_4002 (source, target);
>         }
> 
>         public static boolean canCreateCompartmentAccessor_4003 (Compartment source, ChildAccess target) {
>             if (source != null) {
>                 if (source.getAccessor () != null) {
>                     return false;
>                 }
>             }
>             return canExistCompartmentAccessor_4003 (source, target);
>         }
> 
>         public static boolean canCreateDiagramLabelAccessor_4004 (DiagramLabel source, ChildAccess target) {
>             if (source != null) {
>                 if (source.getAccessor () != null) {
>                     return false;
>                 }
>             }
>             return canExistDiagramLabelAccessor_4004 (source, target);
>         }
> 
277,277c302,302
<         public static boolean canExistDiagramElementFigure_4001 (DiagramElement source, FigureHandle target) {
---
>         public static boolean canCreateDiagramElementFigure_4005 (DiagramElement source, FigureDescriptor target) {
