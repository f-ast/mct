37,37c39,39
< import org.eclipse.gmf.codegen.gmfgen.GenPlugin;
---
> import org.eclipse.gmf.codegen.gmfgen.GenPlugin;
39,39c37,37
< import org.eclipse.gmf.codegen.gmfgen.ValueExpression;
---
> import org.eclipse.gmf.codegen.gmfgen.GenExpressionProviderBase;
163a164,165
>         if (getEditorGen ().getExpressionProviders () != null) {
>             for (Iterator it = getEditorGen ().getExpressionProviders ().getProviders ().iterator ();
164,164d163
<         for (Iterator it = getDiagram ().eAllContents ();
165a167,168
>                 GenExpressionProviderBase nextProvider = (GenExpressionProviderBase) it.next ();
>                 requiredIDs.addAll (nextProvider.getRequiredPluginIDs ());
166,172d166
<             Object nextObj = it.next ();
<             if (nextObj instanceof ValueExpression) {
<                 String lang = ((ValueExpression) nextObj).getLanguage ();
<                 if ("ocl".equals (lang)) {
<                     requiredIDs.add ("org.eclipse.emf.query.ocl");
<                 }
<             }
174,176d169
<         if (getDiagram ().hasLinkCreationConstraints ()) {
<             requiredIDs.add ("org.eclipse.emf.ocl");
<             requiredIDs.add ("org.eclipse.emf.query.ocl");
