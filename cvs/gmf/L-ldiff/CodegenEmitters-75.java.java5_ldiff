18a19,20
> import org.eclipse.core.runtime.NullProgressMonitor;
> 
223a226,226
>     private static final String PATH_SEPARATOR = "::";
705a709,712
>     }
> 
>     public String getPreferenceInitializerName (Object...input) throws UnexpectedBehaviourException {
>         return getQualifiedClassName ("xpt::diagram::preferences::PreferenceInitializer", input);
705,705c708,708
<         return new XpandTextEmitter (myResourceManager, "xpt::diagram::preferences::PreferenceInitializer::PreferenceInitializer");
---
>         return getPrimaryEmitter ("xpt::diagram::preferences::PreferenceInitializer");
767a775,800
>     private TextEmitter getPrimaryEmitter (String templateName) throws UnexpectedBehaviourException {
>         String [] parts = templateName.split (PATH_SEPARATOR);
>         String definition = templateName + PATH_SEPARATOR + parts [parts.length - 1];
>         return new XpandTextEmitter (myResourceManager, definition);
>     }
> 
>     private TextEmitter getQualifiedClassNameEmitter (String templateName) throws UnexpectedBehaviourException {
>         String definition = templateName + PATH_SEPARATOR + "qualifiedClassName";
>         return new XpandTextEmitter (myResourceManager, definition);
>     }
> 
>     private String getText (TextEmitter emitter, Object...input) throws UnexpectedBehaviourException {
>         try {
>             return emitter.generate (new NullProgressMonitor (), input).trim ();
>         } catch (InterruptedException ie) {
>             return null;
>         } catch (InvocationTargetException ite) {
>             throw new UnexpectedBehaviourException (ite.getCause ());
>         }
>     }
> 
>     private String getQualifiedClassName (String templateName, Object...input) throws UnexpectedBehaviourException {
>         TextEmitter emitter = getQualifiedClassNameEmitter (templateName);
>         return getText (emitter, input);
>     }
> 
