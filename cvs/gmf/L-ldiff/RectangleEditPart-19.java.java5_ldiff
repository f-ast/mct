2a3,6
> import java.util.ArrayList;
> 
> import java.util.Collection;
> 
30a37,38
> import org.eclipse.emf.common.notify.Adapter;
> 
32a41,42
> import org.eclipse.emf.common.notify.impl.AdapterImpl;
> 
58a31,31
> import org.eclipse.draw2d.XYLayout;
59,59d30
< import org.eclipse.gmf.gmfgraph.XYLayout;
60,60c32,32
< 
---
> 
68a77,82
> import org.eclipse.gmf.graphdef.editor.sheet.AttachAdapter;
> 
> import org.eclipse.gmf.graphdef.editor.sheet.ChangeTracker;
> 
> import org.eclipse.gmf.graphdef.editor.sheet.FeatureTracker;
> 
221,221c235,235
<             this.setLayoutManager (new org.eclipse.draw2d.XYLayout ());
---
>             this.setLayoutManager (new XYLayout ());
237a252,262
>     private Collection < Adapter > myDomainElementAdapters = new ArrayList < Adapter > ();
> 
>     protected void removeSemanticListeners () {
>         View view = (View) getModel ();
>         if (view.getElement () != null) {
>             org.eclipse.gmf.gmfgraph.Rectangle modelElement = (org.eclipse.gmf.gmfgraph.Rectangle) view.getElement ();
>             modelElement.eAdapters ().removeAll (myDomainElementAdapters);
>             myDomainElementAdapters.clear ();
>         }
>         super.removeSemanticListeners ();
>     }
248a274,274
>         myDomainElementAdapters.add (new AttachAdapter (GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData (), new AdapterImpl () {
249,249d273
<         final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener () {
251,251c276,276
<             public void notifyChanged (Notification notification) {
---
>             public void notifyChanged (Notification msg) {
257,261d281
<         ;
<         if (modelElement.getLayoutData () != null) {
<             addListenerFilter ("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData ());
<         }
<         addListenerFilter ("Layoutable_LayoutData_Listener", new NotificationListener () {
263,292d284
<             public void notifyChanged (Notification notification) {
<                 removeListenerFilter ("Layoutable_LayoutData_PropertiesListener");
<                 if (modelElement.getLayoutData () != null) {
<                     addListenerFilter ("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData ());
<                 }
<                 layoutDataChanged (modelElement.getLayoutData ());
<             }
< 
<         }
< 
<         , modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData ());
<         final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener () {
< 
<             public void notifyChanged (Notification notification) {
<                 layoutChanged (modelElement.getLayout ());
<             }
< 
<         }
< 
<         ;
<         if (modelElement.getLayout () != null) {
<             addListenerFilter ("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout ());
<         }
<         addListenerFilter ("Layoutable_Layout_Listener", new NotificationListener () {
< 
<             public void notifyChanged (Notification notification) {
<                 removeListenerFilter ("Layoutable_Layout_PropertiesListener");
<                 if (modelElement.getLayout () != null) {
<                     addListenerFilter ("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout ());
<                 }
297a282,282
>         ));
297a291,292
>         ));
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
298,298c283,283
<         , modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout ());
---
>         myDomainElementAdapters.add (new AttachAdapter (GMFGraphPackage.eINSTANCE.getLayoutable_Layout (), new AdapterImpl () {
299,299d283
<         addListenerFilter ("Shape_Outline_Listener", new NotificationListener () {
301,301c285,285
<             public void notifyChanged (Notification notification) {
---
>             public void notifyChanged (Notification msg) {
307,307c300,300
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_Outline ()));
307a301,301
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
308,308d300
<         addListenerFilter ("Shape_Fill_Listener", new NotificationListener () {
310,310c294,294
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
316,316c309,309
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_Fill ()));
316a310,310
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
317,317d309
<         addListenerFilter ("Shape_LineWidth_Listener", new NotificationListener () {
319,319c303,303
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
325,325c318,318
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_LineWidth ()));
325a319,319
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
326,326d318
<         addListenerFilter ("Shape_LineKind_Listener", new NotificationListener () {
328,328c312,312
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
334,334c327,327
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_LineKind ()));
334a328,328
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
335,335d327
<         addListenerFilter ("Shape_XorFill_Listener", new NotificationListener () {
337,337c321,321
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
343,343c336,336
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_XorFill ()));
343a337,337
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
344,344d336
<         addListenerFilter ("Shape_XorOutline_Listener", new NotificationListener () {
345a339,339
>             public void modelChanged (Notification msg) {
346,346c330,330
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
352a346,346
>         modelElement.eAdapters ().addAll (myDomainElementAdapters);
352,352c345,345
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_XorOutline ()));
423,423c417,417
<                             if (modelElement.getLayoutData () instanceof XYLayoutData || (modelElement.eContainer () instanceof Layoutable && ((Layoutable) modelElement.eContainer ()).getLayout () instanceof XYLayout)) {
---
>                             if (modelElement.getLayoutData () instanceof XYLayoutData || (modelElement.eContainer () instanceof Layoutable && ((Layoutable) modelElement.eContainer ()).getLayout () instanceof org.eclipse.gmf.gmfgraph.XYLayout)) {
