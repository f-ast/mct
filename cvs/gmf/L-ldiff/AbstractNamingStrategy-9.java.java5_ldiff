2a3,10
> import org.eclipse.emf.codegen.util.CodeGenUtil;
> 
> import org.eclipse.gmf.codegen.gmfgen.GenLink;
> 
> import org.eclipse.gmf.codegen.gmfgen.GenNode;
> 
> import org.eclipse.gmf.common.NamesDispenser;
> 
10a19,20
> import org.eclipse.gmf.mappings.MappingEntry;
> 
13a24,42
>     private final String suffix;
>     private final NamesDispenser namesDispenser;
>     private final NamingStrategy chainedNamingStrategy;
>     private final NamingStrategy prefixNamingStrategy;
> 
>     public AbstractNamingStrategy (String suffix, NamesDispenser namesDispenser, NamingStrategy chainedNamingStrategy, NamingStrategy prefixNamingStrategy) {
>         this.suffix = suffix;
>         this.namesDispenser = namesDispenser;
>         this.chainedNamingStrategy = chainedNamingStrategy;
>         this.prefixNamingStrategy = prefixNamingStrategy;
>     }
> 
>     protected String createClassName (String s) {
>         s = getValidClassName (s);
>         if (namesDispenser == null) {
>             return suffix == null ? s : s + suffix;
>         }
>         return namesDispenser.get (s, suffix);
>     }
14,14d23
<     private final NamingStrategy myDelegate;
15a44,47
>     protected String getValidClassName (String s) {
>         assert ! isEmpty (s);
>         s = CodeGenUtil.validJavaIdentifier (s);
>         return Character.toUpperCase (s.charAt (0)) + s.substring (1);
16,17d43
<     public AbstractNamingStrategy () {
<         this (null);
20,21d49
<     public AbstractNamingStrategy (NamingStrategy chained) {
<         myDelegate = chained;
24,26d53
<     public String get (CanvasMapping cme) {
<         if (myDelegate != null) {
<             return myDelegate.get (cme);
31,31c69,69
<     public String get (NodeMapping nme) {
---
>     public String get (NodeMapping mapping) {
32,32c70,70
<         if (myDelegate != null) {
---
>         if (chainedNamingStrategy != null) {
33,33c71,71
<             return myDelegate.get (nme);
---
>             return chainedNamingStrategy.get (mapping);
38,38c76,76
<     public String get (LinkMapping lme) {
---
>     public String get (LinkMapping mapping) {
39,39c77,77
<         if (myDelegate != null) {
---
>         if (chainedNamingStrategy != null) {
40,40c78,78
<             return myDelegate.get (lme);
---
>             return chainedNamingStrategy.get (mapping);
45,45c83,83
<     public String get (CompartmentMapping cm) {
---
>     public String get (CompartmentMapping mapping) {
46,46c84,84
<         if (myDelegate != null) {
---
>         if (chainedNamingStrategy != null) {
47,47c85,85
<             return myDelegate.get (cm);
---
>             return chainedNamingStrategy.get (mapping);
52,52c90,90
<     public String get (LabelMapping labelMapping) {
---
>     public String get (LabelMapping mapping) {
53,53c91,91
<         if (myDelegate != null) {
---
>         if (chainedNamingStrategy != null) {
54,54c92,92
<             return myDelegate.get (labelMapping);
---
>             return chainedNamingStrategy.get (mapping);
58a97,108
>     protected String getCompartmentHostPrefix (CompartmentMapping mapping) {
>         return getPrefixNamingStrategy () != null ? getPrefixNamingStrategy ().get (mapping.getParentNode ()) : GenNode.CLASS_NAME_PREFIX;
>     }
> 
>     protected String getLabelHostPrefix (LabelMapping mapping) {
>         MappingEntry parentMapping = mapping.getMapEntry ();
>         if (parentMapping instanceof NodeMapping) {
>             return getPrefixNamingStrategy () != null ? getPrefixNamingStrategy ().get ((NodeMapping) parentMapping) : GenNode.CLASS_NAME_PREFIX;
>         } else if (parentMapping instanceof LinkMapping) {
>             return getPrefixNamingStrategy () != null ? getPrefixNamingStrategy ().get ((LinkMapping) parentMapping) : GenLink.CLASS_NAME_PREFIX;
>         } else {
>             throw new IllegalArgumentException (String.valueOf (mapping));
58a54,57
>     protected final NamingStrategy getChainedNamingStrategy () {
>         return chainedNamingStrategy;
>     }
> 
59,59c58,58
<     protected final NamingStrategy getDelegate () {
---
>     protected final NamingStrategy getPrefixNamingStrategy () {
60a60,64
>     }
> 
>     public String get (CanvasMapping mapping) {
>         if (chainedNamingStrategy != null) {
>             return chainedNamingStrategy.get (mapping);
60,60c59,59
<         return myDelegate;
---
>         return prefixNamingStrategy;
62a50,50
>     protected boolean isEmpty (String s) {
63,63d49
<     protected static boolean isEmpty (String s) {
64,64c51,51
<         return s == null || s.length () == 0;
---
>         return s == null || s.length () == 0;
