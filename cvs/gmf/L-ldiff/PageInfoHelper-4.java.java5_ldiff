20a35,36
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
> 
21,21c37,37
< import org.eclipse.jface.preference.IPreferenceStore;
---
> import org.eclipse.jface.preference.IPreferenceStore;
22,22c38,38
< 
---
> 
23,23c39,39
< import org.eclipse.swt.SWT;
---
> import org.eclipse.swt.SWT;
24,24c40,40
< 
---
> 
25,25c41,41
< import org.eclipse.swt.SWTError;
---
> import org.eclipse.swt.SWTError;
26,26c42,42
< 
---
> 
27,27c43,43
< import org.eclipse.swt.printing.Printer;
---
> import org.eclipse.swt.printing.Printer;
28,28c44,44
< 
---
> 
29,29c45,45
< import org.eclipse.swt.widgets.Display;
---
> import org.eclipse.swt.widgets.Display;
30,30d45
< 
45,45d34
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
88a89,89
>     public static Point getPageSize (IPreferenceStore store, IMapMode mm) {
89,89d88
<     public static Point getPageSize (IPreferenceStore store) {
90,90c90,90
<         return getPageSize (store, true);
---
>         return getPageSize (store, true, mm);
93,93c93,93
<     public static Point getPageSize (IPreferenceStore store, boolean subtractMargins) {
---
>     public static Point getPageSize (IPreferenceStore store, boolean subtractMargins, IMapMode mm) {
113a114,114
>         paperSize [0] = mm.DPtoLP ((int) (width * displayDPI.x));
114,114d113
<         paperSize [0] = MapMode.DPtoLP ((int) (width * displayDPI.x));
115,115c115,115
<         paperSize [1] = MapMode.DPtoLP ((int) (height * displayDPI.y));
---
>         paperSize [1] = mm.DPtoLP ((int) (height * displayDPI.y));
185,185c185,185
<     public static PageMargins getPageMargins (IPreferenceStore preferenceStore) {
---
>     public static PageMargins getPageMargins (IPreferenceStore preferenceStore, IMapMode mm) {
188a189,191
>         margins.left = mm.DPtoLP ((int) (displayDPI.x * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_LEFT)));
>         margins.right = mm.DPtoLP ((int) (displayDPI.x * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_RIGHT)));
>         margins.top = mm.DPtoLP ((int) (displayDPI.y * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_TOP)));
189,191d188
<         margins.left = MapMode.DPtoLP ((int) (displayDPI.x * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_LEFT)));
<         margins.right = MapMode.DPtoLP ((int) (displayDPI.x * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_RIGHT)));
<         margins.top = MapMode.DPtoLP ((int) (displayDPI.y * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_TOP)));
192,192c192,192
<         margins.bottom = MapMode.DPtoLP ((int) (displayDPI.y * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_BOTTOM)));
---
>         margins.bottom = mm.DPtoLP ((int) (displayDPI.y * preferenceStore.getDouble (WorkspaceViewerProperties.PREF_MARGIN_BOTTOM)));
