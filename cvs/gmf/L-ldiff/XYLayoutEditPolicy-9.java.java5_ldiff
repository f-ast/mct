127a128,128
>             ChangeGuideCommand cgm = null;
128,128c130,130
<             ChangeGuideCommand cgm = new ChangeGuideCommand (editingDomain, view, true);
---
>                 cgm = new ChangeGuideCommand (editingDomain, view, true);
128a131,131
>                 ;
131a134,137
>             } else {
>                 Guide theOldGuide = DiagramGuide.getInstance ().getHorizontalGuide (view);
>                 if (theOldGuide != null) cgm = new ChangeGuideCommand (editingDomain, view, true);
> 
133,133c139,139
<             cmd = cmd.chain (new EtoolsProxyCommand (cgm));
---
>             if (cgm != null) cmd = cmd.chain (new EtoolsProxyCommand (cgm));
133a140,140
> 
134a142,142
>             cgm = null;
135,135c144,144
<             cgm = new ChangeGuideCommand (editingDomain, view, false);
---
>                 cgm = new ChangeGuideCommand (editingDomain, view, false);
138a147,150
>             } else {
>                 Guide theOldGuide = DiagramGuide.getInstance ().getVerticalGuide (view);
>                 if (theOldGuide != null) cgm = new ChangeGuideCommand (editingDomain, view, true);
> 
140a153,153
> 
140,140c152,152
<             cmd = cmd.chain (new EtoolsProxyCommand (cgm));
---
>             if (cgm != null) cmd = cmd.chain (new EtoolsProxyCommand (cgm));
