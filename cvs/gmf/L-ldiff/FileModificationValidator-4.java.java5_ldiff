20a21,22
> import org.eclipse.ui.PlatformUI;
> 
46a49,52
>         final boolean result [] = new boolean [] {false};
>         PlatformUI.getWorkbench ().getDisplay ().syncExec (new Runnable () {
> 
>             public void run () {
46,46c48,48
<     public boolean okToEdit (IFile [] files, String modificationReason) {
---
>     public boolean okToEdit (final IFile [] files, final String modificationReason) {
47,47c53,53
<         IStatus status = ResourcesPlugin.getWorkspace ().validateEdit (files, Display.getCurrent ().getActiveShell ());
---
>                 IStatus status = ResourcesPlugin.getWorkspace ().validateEdit (files, PlatformUI.getWorkbench ().getActiveWorkbenchWindow ().getShell ());
48a55,55
>                     result [0] = true;
49,49d54
<             return true;
51,51c57,57
<             MessageDialog.openError (Display.getCurrent ().getActiveShell (), MessageFormat.format (editProblemDialogTitle, new Object [] {modificationReason}), MessageFormat.format (editProblemDialogMessage_part1, new Object [] {modificationReason}) + "\n\n" + editProblemDialogMessage_part2 + "\n" + MessageFormat.format (editProblemDialogMessage_part3, new Object [] {status.getMessage ()}));
---
>                     MessageDialog.openError (PlatformUI.getWorkbench ().getActiveWorkbenchWindow ().getShell (), MessageFormat.format (editProblemDialogTitle, new Object [] {modificationReason}), MessageFormat.format (editProblemDialogMessage_part1, new Object [] {modificationReason}) + "\n\n" + editProblemDialogMessage_part2 + "\n" + MessageFormat.format (editProblemDialogMessage_part3, new Object [] {status.getMessage ()}));
52,52c58,58
<             return false;
---
>                     result [0] = false;
55a62,67
>         }
> 
>         );
>         return result [0];
>     }
> 
