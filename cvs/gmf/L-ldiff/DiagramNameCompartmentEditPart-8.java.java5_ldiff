8a9,10
> import org.eclipse.emf.transaction.TransactionalEditingDomain;
> 
26a29,30
> import org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart;
> 
107a112,112
>             TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost ()).getEditingDomain ();
108,108c113,113
<             CreateDiagramLinkCommand com = new CreateDiagramLinkCommand (DiagramUIMessages.Command_CreateDiagramLink, (View) getHost ().getParent ().getModel (), null);
---
>             CreateDiagramLinkCommand com = new CreateDiagramLinkCommand (editingDomain, DiagramUIMessages.Command_CreateDiagramLink, (View) getHost ().getParent ().getModel (), null);
