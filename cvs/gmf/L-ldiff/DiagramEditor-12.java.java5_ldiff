6a9,9
> import java.util.Map;
7,7c5,5
< import java.util.Iterator;
---
> import java.util.Collections;
7a6,6
> 
112,112c114,114
<             for (Iterator it = getEditingDomain ().getResourceSet ().getResources ().iterator ();
---
>             for (Resource next : getEditingDomain ().getResourceSet ().getResources ()) {
113,114d114
<             it.hasNext ();) {
<                 Resource next = (Resource) it.next ();
130,130c130,130
<         myDiagramDisplayer.save (monitor);
---
>         myDiagramDisplayer.save (getSaveOptions (), monitor);
130a131,134
>     }
> 
>     protected Map < ?, ? > getSaveOptions () {
>         return Collections.emptyMap ();
329a334,334
>                 for (Resource next : resourceSet.getResources ()) {
330,331d333
<                 for (Iterator it = resourceSet.getResources ().iterator ();
<                 it.hasNext ();) {
332,332c335,335
<                     ((Resource) it.next ()).setTrackingModification (true);
---
>                     next.setTrackingModification (true);
347a351,353
>                             @SuppressWarnings("unchecked")
>                             Collection < Resource > resources = (Collection < Resource >) msg.getNewValue ();
>                             for (Resource next : resources) {
348,350d350
<                             Collection resources = (Collection) msg.getNewValue ();
<                             for (Iterator it = resources.iterator ();
<                             it.hasNext ();) {
351,351c354,354
<                                 ((Resource) it.next ()).setTrackingModification (true);
---
>                                 next.setTrackingModification (true);
