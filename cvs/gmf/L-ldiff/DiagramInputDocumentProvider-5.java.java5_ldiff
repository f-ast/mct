17,17c25,25
< import org.eclipse.jface.operation.IRunnableContext;
---
> import org.eclipse.jface.operation.IRunnableContext;
18,18c26,26
< 
---
> 
19,19c27,27
< import org.eclipse.ui.IEditorInput;
---
> import org.eclipse.ui.IEditorInput;
20,20c28,28
< 
---
> 
21,21c29,29
< import org.eclipse.ui.PlatformUI;
---
> import org.eclipse.ui.PlatformUI;
22,22c30,30
< 
---
> 
23,23c31,31
< import org.osgi.framework.Bundle;
---
> import org.osgi.framework.Bundle;
24,24c32,32
< 
---
> 
37a38,38
>         public DiagramModificationListener fListener = null;
39,39c40,40
<         public DiagramResourceInfo (IDocument document) {
---
>         public DiagramResourceInfo (IDocument document, DiagramModificationListener listener) {
40a42,42
>             fListener = listener;
73a76,76
>             DiagramModificationListener listener = new DiagramModificationListener (this, (DiagramDocument) document);
74,74c77,77
<             ElementInfo info = new DiagramResourceInfo (document);
---
>             ElementInfo info = new DiagramResourceInfo (document, listener);
75a79,79
>             listener.startListening ();
80a85,89
>     protected void disposeElementInfo (Object element, ElementInfo info) {
>         super.disposeElementInfo (element, info);
>         ((DiagramResourceInfo) info).fListener.stopListening ();
>     }
> 
