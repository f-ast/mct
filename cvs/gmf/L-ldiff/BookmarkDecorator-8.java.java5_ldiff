74a75,76
> import org.eclipse.ui.PlatformUI;
> 
154,157d155
<             try {
<                 TransactionUtil.getEditingDomain (getDecoratorTarget ().getAdapter (View.class)).runExclusive (new Runnable () {
< 
<                     public void run () {
160a159,159
>                 refreshDecorators (list);
161,175d158
<                             Iterator iter = list.iterator ();
<                             while (iter.hasNext ()) {
<                                 IDecorator decorator = (IDecorator) iter.next ();
<                                 if (decorator != null) {
<                                     decorator.refresh ();
<                                 }
<                             }
<                         }
<                     }
< 
<                 }
< 
<                 );
<             } catch (Exception e) {
<                 Trace.catching (DiagramProvidersPlugin.getInstance (), DiagramActionsDebugOptions.EXCEPTIONS_CATCHING, getClass (), "handleMarkerDeleted()", e);
187a183,183
>                                 Iterator iter = decorators.iterator ();
188,188c168,168
<                         String elementId = marker.getAttribute (IBookmark.ELEMENT_ID, StringStatics.BLANK);
---
>             String elementId = marker.getAttribute (IBookmark.ELEMENT_ID, StringStatics.BLANK);
189,189c169,169
<                         List list = elementId != null ? (List) mapOfIdsToDecorators.get (elementId) : null;
---
>             List list = elementId != null ? (List) mapOfIdsToDecorators.get (elementId) : null;
190,190c170,170
<                         if (list != null && ! list.isEmpty ()) {
---
>             if (list != null && ! list.isEmpty ()) {
191a172,178
>             }
>         }
> 
>         private void refreshDecorators (final List decorators) {
>             PlatformUI.getWorkbench ().getDisplay ().asyncExec (new Runnable () {
> 
>                 public void run () {
191,191c171,171
<                             Iterator iter = list.iterator ();
---
>                 refreshDecorators (list);
198a199,199
> 
199a201,202
> 
>             );
199,199c200,200
<                     }
---
>             }
205,205c196,196
<                 Trace.catching (DiagramProvidersPlugin.getInstance (), DiagramActionsDebugOptions.EXCEPTIONS_CATCHING, getClass (), "handleMarkerChanged()", e);
---
>                         Trace.catching (DiagramProvidersPlugin.getInstance (), DiagramActionsDebugOptions.EXCEPTIONS_CATCHING, getClass (), "refreshDecorators()", e);
205a197,197
>                     }
