9,10d8
< import org.eclipse.gmf.runtime.diagram.ui.properties.internal.DiagramPropertiesPlugin;
< 
13,16d10
< import org.eclipse.jface.preference.IPreferenceStore;
< 
< import org.eclipse.jface.preference.PreferenceConverter;
< 
136,136d129
<     private String preferenceId;
137a131,131
>     private boolean useDefaultColor = false;
141,141d134
<         this.preferenceId = preferenceId;
144,144c137,137
<     private ColorPalettePopup (Shell parent, int rowHeight) {
---
>     public ColorPalettePopup (Shell parent, int rowHeight) {
173,173c166,166
<         Button defaultColor = new Button (shell, SWT.PUSH);
---
>         Button defaultButton = new Button (shell, SWT.PUSH);
174,174c167,167
<         defaultColor.setText (DEAFULT_COLOR_STRING);
---
>         defaultButton.setText (DEAFULT_COLOR_STRING);
177a171,171
>         defaultButton.setLayoutData (data);
178,178d170
<         defaultColor.setLayoutData (data);
179,179c172,172
<         defaultColor.addSelectionListener (new SelectionAdapter () {
---
>         defaultButton.addSelectionListener (new SelectionAdapter () {
181a175,175
>                 useDefaultColor = true;
182,184d174
<                 IPreferenceStore store = DiagramPropertiesPlugin.getDefault ().getPreferenceStore ();
<                 if (preferenceId != null) selectedColor = PreferenceConverter.getColor (store, preferenceId);
< 
242a234,237
>     public boolean useDefaultColor () {
>         return useDefaultColor;
>     }
> 
