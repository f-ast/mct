3,4d2
< import java.util.Collection;
< 
9,10d6
< import org.eclipse.emf.common.util.EList;
< 
18a19,19
> import org.eclipse.gmf.gmfgraph.RealFigure;
19,19d18
< import org.eclipse.emf.ecore.util.EObjectWithInverseResolvingEList;
20,20c20,20
< 
---
> 
21,26d20
< import org.eclipse.emf.ecore.util.InternalEList;
< 
< import org.eclipse.gmf.gmfgraph.CustomFigure;
< 
< import org.eclipse.gmf.gmfgraph.DiagramElement;
< 
32,32d21
<     protected EList < DiagramElement > referencingElements = null;
35,35c24,24
<     protected CustomFigure typedFigure = null;
---
>     protected RealFigure typedFigure;
46,52d34
<     public EList < DiagramElement > getReferencingElements () {
<         if (referencingElements == null) {
<             referencingElements = new EObjectWithInverseResolvingEList < DiagramElement > (DiagramElement.class, this, GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS, GMFGraphPackage.DIAGRAM_ELEMENT__FIGURE);
<         }
<         return referencingElements;
<     }
< 
63a46,46
>     public RealFigure getTypedFigure () {
64,69d60
<     public CustomFigure getTypedFigure () {
<         if (typedFigure != null && typedFigure.eIsProxy ()) {
<             InternalEObject oldTypedFigure = (InternalEObject) typedFigure;
<             typedFigure = (CustomFigure) eResolveProxy (oldTypedFigure);
<             if (typedFigure != oldTypedFigure) {
<                 if (eNotificationRequired ()) eNotify (new ENotificationImpl (this, Notification.RESOLVE, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, oldTypedFigure, typedFigure));
70,70c61,61
< 
---
> 
70a62,73
>     public void setTypedFigure (RealFigure newTypedFigure) {
>         if (newTypedFigure != typedFigure) {
>             NotificationChain msgs = null;
>             if (typedFigure != null) msgs = ((InternalEObject) typedFigure).eInverseRemove (this, EOPPOSITE_FEATURE_BASE - GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, null, msgs);
> 
>             if (newTypedFigure != null) msgs = ((InternalEObject) newTypedFigure).eInverseAdd (this, EOPPOSITE_FEATURE_BASE - GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, null, msgs);
> 
>             msgs = basicSetTypedFigure (newTypedFigure, msgs);
>             if (msgs != null) msgs.dispatch ();
> 
>         } else if (eNotificationRequired ()) eNotify (new ENotificationImpl (this, Notification.SET, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, newTypedFigure, newTypedFigure));
> 
71,72d61
<             }
<         }
75a50,51
>     public NotificationChain basicSetTypedFigure (RealFigure newTypedFigure, NotificationChain msgs) {
>         RealFigure oldTypedFigure = typedFigure;
76,81d49
<     public CustomFigure basicGetTypedFigure () {
<         return typedFigure;
<     }
< 
<     public void setTypedFigure (CustomFigure newTypedFigure) {
<         CustomFigure oldTypedFigure = typedFigure;
82a53,53
>         if (eNotificationRequired ()) {
83a55,56
>             if (msgs == null) msgs = notification;
>             else msgs.add (notification);
83,83c54,54
<         if (eNotificationRequired ()) eNotify (new ENotificationImpl (this, Notification.SET, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, oldTypedFigure, typedFigure));
---
>             ENotificationImpl notification = new ENotificationImpl (this, Notification.SET, GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE, oldTypedFigure, newTypedFigure);
86,92d58
< 
<     @SuppressWarnings("unchecked")
<     @Override
<     public NotificationChain eInverseAdd (InternalEObject otherEnd, int featureID, NotificationChain msgs) {
<         switch (featureID) {
<             case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS :
<                 return ((InternalEList < InternalEObject >) (InternalEList < ? >) getReferencingElements ()).basicAdd (otherEnd, msgs);
93a59,59
>         return msgs;
94,94d58
<         return super.eInverseAdd (otherEnd, featureID, msgs);
100,101d78
<             case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS :
<                 return ((InternalEList < ? >) getReferencingElements ()).basicRemove (otherEnd, msgs);
109,110d87
<             case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS :
<                 return getReferencingElements ();
114,115d90
<                 if (resolve) return getTypedFigure ();
< 
116,116c91,91
<                 return basicGetTypedFigure ();
---
>                 return getTypedFigure ();
125,128d99
<             case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS :
<                 getReferencingElements ().clear ();
<                 getReferencingElements ().addAll ((Collection < ? extends DiagramElement >) newValue);
<                 return;
133,133c104,104
<                 setTypedFigure ((CustomFigure) newValue);
---
>                 setTypedFigure ((RealFigure) newValue);
142,144d112
<             case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS :
<                 getReferencingElements ().clear ();
<                 return;
149,149c117,117
<                 setTypedFigure ((CustomFigure) null);
---
>                 setTypedFigure ((RealFigure) null);
158,158c79,79
<             case GMFGraphPackage.FIGURE_ACCESSOR__REFERENCING_ELEMENTS :
---
>             case GMFGraphPackage.FIGURE_ACCESSOR__TYPED_FIGURE :
158a80,80
>                 return basicSetTypedFigure (null, msgs);
159,159d79
<                 return referencingElements != null && ! referencingElements.isEmpty ();
