100a101,102
> import org.eclipse.gmf.runtime.diagram.ui.internal.editparts.DummyEditPart;
> 
208a211,212
>         if (listenerFilters == null) listenerFilters = new HashMap ();
> 
298a303,303
>             if (view != null) {
299a305,312
>                 if (ep == null) {
>                     ep = new DummyEditPart (view);
>                 }
>                 return ep;
>             }
>         }
>         return null;
>     }
299,299c304,304
<             if (view != null) return (IGraphicalEditPart) getViewer ().getEditPartRegistry ().get (view);
---
>                 IGraphicalEditPart ep = (IGraphicalEditPart) getViewer ().getEditPartRegistry ().get (view);
300a314,316
>     public View getChildViewBySemanticHint (String semanticHint) {
>         if (getModel () != null) {
>             return ViewUtil.getChildBySemanticHint ((View) getModel (), semanticHint);
420,420c436,436
<             return new ArrayList (((View) model).getChildren ());
---
>             return new ArrayList (((View) model).getVisibleChildren ());
618a635,635
>         if (hasNotationView ()) {
619,619c636,636
<         if (hasNotationView ()) addListenerFilter ("View", this, (View) getModel ());
---
>             addListenerFilter ("View", this, (View) getModel ());
619a637,637
>         }
620,620d636
< 
880a898,902
>             Object notifier = event.getNotifier ();
>             if (notifier == getModel ()) refreshVisibility ();
>             else {
>                 refreshChildren ();
>             }
881,881d897
<             refreshVisibility ();
