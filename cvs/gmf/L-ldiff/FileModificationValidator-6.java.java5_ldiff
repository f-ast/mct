3,4d2
< import java.text.MessageFormat;
< 
20a19,20
> import org.eclipse.osgi.util.NLS;
> 
22a23,24
> import org.eclipse.swt.widgets.Shell;
> 
38a41,42
>         Shell shell = null;
>         if (PlatformUI.getWorkbench ().getActiveWorkbenchWindow () != null && Display.getCurrent () != null) {
39,42d40
<         final boolean result [] = new boolean [] {false};
<         PlatformUI.getWorkbench ().getDisplay ().syncExec (new Runnable () {
< 
<             public void run () {
43a44,45
>         }
>         final IStatus status = ResourcesPlugin.getWorkspace ().validateEdit (files, shell);
43,43c43,43
<                 IStatus status = ResourcesPlugin.getWorkspace ().validateEdit (files, PlatformUI.getWorkbench ().getActiveWorkbenchWindow ().getShell ());
---
>             shell = PlatformUI.getWorkbench ().getActiveWorkbenchWindow ().getShell ();
44a47,47
>             return true;
45,45d46
<                     result [0] = true;
46a49,51
>             PlatformUI.getWorkbench ().getDisplay ().asyncExec (new Runnable () {
> 
>                 public void run () {
47,47c52,52
<                     MessageDialog.openError (PlatformUI.getWorkbench ().getActiveWorkbenchWindow ().getShell (), MessageFormat.format (CommonUIMessages.FileModificationValidator_EditProblemDialogTitle, new Object [] {modificationReason}), MessageFormat.format (CommonUIMessages.FileModificationValidator_EditProblemDialogMessage_part1, new Object [] {modificationReason}) + "\n\n" + CommonUIMessages.FileModificationValidator_EditProblemDialogMessage_part2 + "\n" + MessageFormat.format (CommonUIMessages.FileModificationValidator_EditProblemDialogMessage_part3, new Object [] {status.getMessage ()}));
---
>                     MessageDialog.openError (PlatformUI.getWorkbench ().getActiveWorkbenchWindow ().getShell (), NLS.bind (CommonUIMessages.FileModificationValidator_EditProblemDialogTitle, modificationReason), NLS.bind (CommonUIMessages.FileModificationValidator_EditProblemDialogMessage, modificationReason, status.getMessage ()));
48,49d52
<                     result [0] = false;
<                 }
54a58,59
>             return false;
>         }
55,55d57
<         return result [0];
72a77,77
>             MessageDialog.openError (PlatformUI.getWorkbench ().getActiveWorkbenchWindow ().getShell (), CommonUIMessages.FileModificationValidator_SaveProblemDialogTitle, NLS.bind (CommonUIMessages.FileModificationValidator_SaveProblemDialogMessage, status.getMessage ()));
73,73d76
<             MessageDialog.openError (Display.getCurrent ().getActiveShell (), CommonUIMessages.FileModificationValidator_SaveProblemDialogTitle, CommonUIMessages.FileModificationValidator_SaveProblemDialogMessage_part1 + "\n\n" + CommonUIMessages.FileModificationValidator_SaveProblemDialogMessage_part2 + "\n" + MessageFormat.format (CommonUIMessages.FileModificationValidator_SaveProblemDialogMessage_part3, new Object [] {status.getMessage ()}));
80,80c84,84
<             String message = MessageFormat.format (CommonUIMessages.FileModificationValidator_FileIsReadOnlyErrorMessage, new Object [] {file.getFullPath ().toString ()});
---
>             String message = NLS.bind (CommonUIMessages.FileModificationValidator_FileIsReadOnlyErrorMessage, file.getFullPath ().toString ());
