118a119,120
> import org.eclipse.emf.edit.ui.provider.UnwrappingSelectionProvider;
> 
515a518,527
>         initializeEditingDomain ();
>     }
> 
>     protected void initializeEditingDomain () {
>         adapterFactory = new ComposedAdapterFactory (ComposedAdapterFactory.Descriptor.Registry.INSTANCE);
>         adapterFactory.addAdapterFactory (new ResourceItemProviderAdapterFactory ());
>         adapterFactory.addAdapterFactory (new GMFMapItemProviderAdapterFactory ());
>         adapterFactory.addAdapterFactory (new GMFGraphItemProviderAdapterFactory ());
>         adapterFactory.addAdapterFactory (new GMFToolItemProviderAdapterFactory ());
>         adapterFactory.addAdapterFactory (new EcoreItemProviderAdapterFactory ());
516,521d517
<         List < AdapterFactory > factories = new ArrayList < AdapterFactory > ();
<         factories.add (new ResourceItemProviderAdapterFactory ());
<         factories.add (new GMFMapItemProviderAdapterFactory ());
<         factories.add (new GMFGraphItemProviderAdapterFactory ());
<         factories.add (new GMFToolItemProviderAdapterFactory ());
<         factories.add (new EcoreItemProviderAdapterFactory ());
522,522c528,528
<         factories.add (new ReflectiveItemProviderAdapterFactory ());
---
>         adapterFactory.addAdapterFactory (new ReflectiveItemProviderAdapterFactory ());
523,523d528
<         adapterFactory = new ComposedAdapterFactory (factories);
651,651c656,656
<         getSite ().registerContextMenu (contextMenu, viewer);
---
>         getSite ().registerContextMenu (contextMenu, new UnwrappingSelectionProvider (viewer));
1060a1066,1067
>         final Map < Object, Object > saveOptions = new HashMap < Object, Object > ();
>         saveOptions.put (Resource.OPTION_SAVE_ONLY_IF_CHANGED, Resource.OPTION_SAVE_ONLY_IF_CHANGED_MEMORY_BUFFER);
1070,1070c1077,1077
<                             resource.save (Collections.EMPTY_MAP);
---
>                             resource.save (saveOptions);
