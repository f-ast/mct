66a67,70
> import org.eclipse.gmf.runtime.diagram.ui.label.ILabelDelegate;
> 
> import org.eclipse.gmf.runtime.diagram.ui.label.WrappingLabelDelegate;
> 
74a79,80
> import org.eclipse.gmf.runtime.draw2d.ui.figures.WrappingLabel;
> 
111a118,118
>     private ILabelDelegate labelDelegate;
127a135,147
>         return new WrapLabel ();
>     }
> 
>     protected ILabelDelegate createLabelDelegate () {
>         WrapLabel label = getLabel ();
>         ILabelDelegate newLabelDelegate = null;
>         if (label != null) {
>             newLabelDelegate = new WrappingLabelDelegate (label);
>         } else {
>             newLabelDelegate = new WrappingLabelDelegate ((WrappingLabel) getFigure ());
>         }
>         newLabelDelegate.setTextJustification (PositionConstants.CENTER);
>         newLabelDelegate.setAlignment (PositionConstants.CENTER);
128,129d134
<         WrapLabel label = new WrapLabel ("");
<         label.setLabelAlignment (PositionConstants.TOP);
130,130c148,148
<         label.setTextAlignment (PositionConstants.TOP);
---
>         newLabelDelegate.setTextAlignment (PositionConstants.TOP);
131,131c149,149
<         return label;
---
>         return newLabelDelegate;
134a153,179
>         if (figure == null) {
>             setFigure (createFigure ());
>             setLabelDelegate (createLabelDelegate ());
>         }
>         return figure;
>     }
> 
>     public ILabelDelegate getLabelDelegate () {
>         if (labelDelegate == null) {
>             getFigure ();
>             if (labelDelegate == null) {
>                 setLabelDelegate (createLabelDelegate ());
>             }
>             return labelDelegate;
>         }
>         return labelDelegate;
>     }
> 
>     protected void setLabelDelegate (ILabelDelegate labelDelegate) {
>         this.labelDelegate = labelDelegate;
>     }
> 
>     public Object getAdapter (Class key) {
>         if (key == ILabelDelegate.class) {
>             return getLabelDelegate ();
>         }
>         return super.getAdapter (key);
135,135d152
<         return super.getFigure ();
157,157c201,201
<         getLabel ().setText (text);
---
>         getLabelDelegate ().setText (text);
355,355c399,399
<         getLabel ().setForegroundColor (color);
---
>         getFigure ().setForegroundColor (color);
413,413c457,457
<         getLabel ().setText (getLabelText ());
---
>         getLabelDelegate ().setText (getLabelText ());
415,415c459,459
<         i < numIcons; i ++) getLabel ().setIcon (getLabelIcon (i), i);
---
>         i < numIcons; i ++) getLabelDelegate ().setIcon (getLabelIcon (i), i);
417,417c461,461
<         getLabel ().setToolTip (getLabelToolTip ());
---
>         getFigure ().setToolTip (getLabelToolTip ());
422,422c466,466
<         if (style != null) getLabel ().setTextUnderline (style.isUnderline ());
---
>         if (style != null) getLabelDelegate ().setTextUnderline (style.isUnderline ());
428,428c472,472
<         if (style != null) getLabel ().setTextStrikeThrough (style.isStrikeThrough ());
---
>         if (style != null) getLabelDelegate ().setTextStrikeThrough (style.isStrikeThrough ());
435a480,482
>                 ILabelDelegate label = getLabelDelegate ();
>                 if (label != null) {
>                     e.result = label.getText ();
436,438d479
<                 IFigure fig = getFigure ();
<                 if (fig instanceof WrapLabel) {
<                     e.result = ((WrapLabel) fig).getText ();
