60a61,62
> import org.eclipse.gmf.runtime.diagram.ui.internal.figures.IExpandableFigure;
> 
187a190,191
>         Rectangle relBounds = null;
>         if (figure instanceof IExpandableFigure) relBounds = ((IExpandableFigure) figure).getExtendedBounds ().getCopy ();
188,188c192,192
<         Rectangle relBounds = figure.getBounds ().getCopy ();
---
>         else relBounds = figure.getBounds ().getCopy ();
188a193,193
> 
329a335,336
>             Rectangle bounds = null;
>             if (figure instanceof IExpandableFigure) bounds = ((IExpandableFigure) figure).getExtendedBounds ();
330,330c337,337
<             Rectangle bounds = figure.getBounds ().getCopy ();
---
>             else bounds = figure.getBounds ().getCopy ();
330a338,338
> 
