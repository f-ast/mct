10a11,12
> import org.eclipse.draw2d.RectangleFigure;
> 
12a15,16
> import org.eclipse.draw2d.XYLayout;
> 
18a23,24
> import org.eclipse.emf.ecore.EObject;
> 
24a31,31
> import org.eclipse.gmf.graphdef.editor.edit.policies.Polyline3CanonicalEditPolicy;
24a43,44
> import org.eclipse.gmf.runtime.diagram.ui.editpolicies.CreationEditPolicy;
> 
25a46,46
> 
25,25c45,45
< import org.eclipse.gmf.gmfgraph.Shape;
---
> import org.eclipse.gmf.runtime.diagram.ui.editpolicies.DragDropEditPolicy;
29,29c35,35
< import org.eclipse.gmf.graphdef.editor.edit.polocies.DomainBasedXYLayoutEditPolicy;
---
> import org.eclipse.gmf.graphdef.editor.edit.polocies.PointContainerXYLayoutEditPolicy;
38a49,50
> import org.eclipse.gmf.runtime.draw2d.ui.figures.ConstrainedToolbarLayout;
> 
56a69,69
>         installEditPolicy (EditPolicyRoles.CREATION_ROLE, new CreationEditPolicy ());
58a72,73
>         installEditPolicy (EditPolicyRoles.DRAG_DROP_ROLE, new DragDropEditPolicy ());
>         installEditPolicy (EditPolicyRoles.CANONICAL_ROLE, new Polyline3CanonicalEditPolicy ());
63,63c78,78
<         return new DomainBasedXYLayoutEditPolicy (getMapMode ());
---
>         return new PointContainerXYLayoutEditPolicy (getMapMode ());
84a100,105
>         RectangleFigure childContainer = new RectangleFigure ();
>         childContainer.setFill (false);
>         childContainer.setOutline (false);
>         figure.add (childContainer);
>         childContainer.setLayoutManager (new XYLayout ());
>         contentPane = childContainer;
85,85d99
<         contentPane = setupContentPane (shape);
89a110,114
>         if (nodeShape.getLayoutManager () == null) {
>             ConstrainedToolbarLayout layout = new ConstrainedToolbarLayout ();
>             layout.setSpacing (getMapMode ().DPtoLP (5));
>             nodeShape.setLayoutManager (layout);
>         }
112a138,144
>     private org.eclipse.gmf.gmfgraph.Polyline getGmfgraphElement () {
>         View view = getNotationView ();
>         if (view == null) {
>             return null;
>         }
>         EObject element = view.getElement ();
>         if (element instanceof org.eclipse.gmf.gmfgraph.Polyline) {
113,115d137
<     private org.eclipse.gmf.gmfgraph.Polyline getModelFigureElement () {
<         Shape shape = getShape ();
<         if (shape instanceof org.eclipse.gmf.gmfgraph.Polyline) {
116,116c145,145
<             org.eclipse.gmf.gmfgraph.Polyline modelFigureElement = (org.eclipse.gmf.gmfgraph.Polyline) shape;
---
>             org.eclipse.gmf.gmfgraph.Polyline modelFigureElement = (org.eclipse.gmf.gmfgraph.Polyline) element;
123,123c152,152
<         org.eclipse.gmf.gmfgraph.Polyline modelElement = (org.eclipse.gmf.gmfgraph.Polyline) getModelFigureElement ();
---
>         org.eclipse.gmf.gmfgraph.Polyline modelElement = getGmfgraphElement ();
133,133c162,162
<         org.eclipse.gmf.gmfgraph.Polyline modelElement = (org.eclipse.gmf.gmfgraph.Polyline) getModelFigureElement ();
---
>         org.eclipse.gmf.gmfgraph.Polyline modelElement = getGmfgraphElement ();
154,154c183,183
<         final org.eclipse.gmf.gmfgraph.Polyline modelElement = (org.eclipse.gmf.gmfgraph.Polyline) getModelFigureElement ();
---
>         final org.eclipse.gmf.gmfgraph.Polyline modelElement = getGmfgraphElement ();
