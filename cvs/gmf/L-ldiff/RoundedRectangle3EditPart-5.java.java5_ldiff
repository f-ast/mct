2a3,6
> import java.util.ArrayList;
> 
> import java.util.Collection;
> 
38a45,46
> import org.eclipse.emf.common.notify.Adapter;
> 
40a49,50
> import org.eclipse.emf.common.notify.impl.AdapterImpl;
> 
66a37,37
> import org.eclipse.draw2d.XYLayout;
67,67d36
< import org.eclipse.gmf.gmfgraph.XYLayout;
68,68c38,38
< 
---
> 
76a85,90
> import org.eclipse.gmf.graphdef.editor.sheet.AttachAdapter;
> 
> import org.eclipse.gmf.graphdef.editor.sheet.ChangeTracker;
> 
> import org.eclipse.gmf.graphdef.editor.sheet.FeatureTracker;
> 
241,241c255,255
<             this.setLayoutManager (new org.eclipse.draw2d.XYLayout ());
---
>             this.setLayoutManager (new XYLayout ());
258a273,283
>     private Collection < Adapter > myDomainElementAdapters = new ArrayList < Adapter > ();
> 
>     protected void removeSemanticListeners () {
>         View view = (View) getModel ();
>         if (view.getElement () != null) {
>             RoundedRectangle modelElement = (RoundedRectangle) view.getElement ();
>             modelElement.eAdapters ().removeAll (myDomainElementAdapters);
>             myDomainElementAdapters.clear ();
>         }
>         super.removeSemanticListeners ();
>     }
269a295,295
>         myDomainElementAdapters.add (new AttachAdapter (GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData (), new AdapterImpl () {
270,270d294
<         final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener () {
272,272c297,297
<             public void notifyChanged (Notification notification) {
---
>             public void notifyChanged (Notification msg) {
278,282d302
<         ;
<         if (modelElement.getLayoutData () != null) {
<             addListenerFilter ("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData ());
<         }
<         addListenerFilter ("Layoutable_LayoutData_Listener", new NotificationListener () {
284,313d305
<             public void notifyChanged (Notification notification) {
<                 removeListenerFilter ("Layoutable_LayoutData_PropertiesListener");
<                 if (modelElement.getLayoutData () != null) {
<                     addListenerFilter ("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData ());
<                 }
<                 layoutDataChanged (modelElement.getLayoutData ());
<             }
< 
<         }
< 
<         , modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData ());
<         final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener () {
< 
<             public void notifyChanged (Notification notification) {
<                 layoutChanged (modelElement.getLayout ());
<             }
< 
<         }
< 
<         ;
<         if (modelElement.getLayout () != null) {
<             addListenerFilter ("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout ());
<         }
<         addListenerFilter ("Layoutable_Layout_Listener", new NotificationListener () {
< 
<             public void notifyChanged (Notification notification) {
<                 removeListenerFilter ("Layoutable_Layout_PropertiesListener");
<                 if (modelElement.getLayout () != null) {
<                     addListenerFilter ("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout ());
<                 }
318a303,303
>         ));
318a312,313
>         ));
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
319,319c304,304
<         , modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_Layout ());
---
>         myDomainElementAdapters.add (new AttachAdapter (GMFGraphPackage.eINSTANCE.getLayoutable_Layout (), new AdapterImpl () {
320,320d304
<         addListenerFilter ("Shape_Outline_Listener", new NotificationListener () {
322,322c306,306
<             public void notifyChanged (Notification notification) {
---
>             public void notifyChanged (Notification msg) {
328a322,322
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
328,328c321,321
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_Outline ()));
329,329d321
<         addListenerFilter ("Shape_Fill_Listener", new NotificationListener () {
331,331c315,315
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
337a331,331
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
337,337c330,330
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_Fill ()));
338,338d330
<         addListenerFilter ("Shape_LineWidth_Listener", new NotificationListener () {
340,340c324,324
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
346,346c339,339
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_LineWidth ()));
346a340,340
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
347,347d339
<         addListenerFilter ("Shape_LineKind_Listener", new NotificationListener () {
349,349c333,333
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
355,355c348,348
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_LineKind ()));
355a349,349
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
356,356d348
<         addListenerFilter ("Shape_XorFill_Listener", new NotificationListener () {
358,358c342,342
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
364a358,358
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
364,364c357,357
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_XorFill ()));
365,365d357
<         addListenerFilter ("Shape_XorOutline_Listener", new NotificationListener () {
367,367c351,351
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
373,373c366,366
<         , modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline ());
---
>         , GMFGraphPackage.eINSTANCE.getShape_XorOutline ()));
373a367,367
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
374,374d366
<         addListenerFilter ("RoundedRectangle_CornerWidth_Listener", new NotificationListener () {
376,376c360,360
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
383,383c376,376
<         , modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerWidth ());
---
>         , GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerWidth ()));
383a377,377
>         myDomainElementAdapters.add (new FeatureTracker (new ChangeTracker () {
384,384d376
<         addListenerFilter ("RoundedRectangle_CornerHeight_Listener", new NotificationListener () {
385a379,379
>             public void modelChanged (Notification msg) {
386,386c369,369
<             public void notifyChanged (Notification notification) {
---
>             public void modelChanged (Notification msg) {
393,393c386,386
<         , modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerHeight ());
---
>         , GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerHeight ()));
393a387,387
>         modelElement.eAdapters ().addAll (myDomainElementAdapters);
464,464c458,458
<                             if (modelElement.getLayoutData () instanceof XYLayoutData || (modelElement.eContainer () instanceof Layoutable && ((Layoutable) modelElement.eContainer ()).getLayout () instanceof XYLayout)) {
---
>                             if (modelElement.getLayoutData () instanceof XYLayoutData || (modelElement.eContainer () instanceof Layoutable && ((Layoutable) modelElement.eContainer ()).getLayout () instanceof org.eclipse.gmf.gmfgraph.XYLayout)) {
