68a77,77
> import org.eclipse.gmf.runtime.diagram.ui.editpolicies.PopupBarEditPolicy;
69,69d76
< import org.eclipse.gmf.runtime.diagram.ui.editpolicies.ActionBarEditPolicy;
70,70c78,78
< 
---
> 
102,102c102,102
<     private ConnectorRefreshMgr _crMgr;
---
>     private ConnectionRefreshMgr _crMgr;
105,105c105,105
<     public static class ConnectorRefreshMgr {
---
>     public static class ConnectionRefreshMgr {
107,107c107,107
<         protected void refreshConnectors (ShapeCompartmentEditPart scep) {
---
>         protected void refreshConnections (ShapeCompartmentEditPart scep) {
111,111c111,111
<                 Connection connector = (Connection) cep.getFigure ();
---
>                 Connection connection = (Connection) cep.getFigure ();
143,143c143,143
<                 connector.setVisible (sfVisible && tfVisible);
---
>                 connection.setVisible (sfVisible && tfVisible);
155a156,158
>             Iterator edgesIterator = edges.iterator ();
>             while (edgesIterator.hasNext ()) {
>                 Edge edge = (Edge) edgesIterator.next ();
156,158d155
<             Iterator connectors = edges.iterator ();
<             while (connectors.hasNext ()) {
<                 Edge connector = (Edge) connectors.next ();
159,159c159,159
<                 EditPart endPoint = (EditPart) registry.get (connector.getSource ());
---
>                 EditPart endPoint = (EditPart) registry.get (edge.getSource ());
161,161c161,161
<                     Object cep = registry.get (connector);
---
>                     Object cep = registry.get (edge);
167,167c167,167
<                 endPoint = (EditPart) registry.get (connector.getTarget ());
---
>                 endPoint = (EditPart) registry.get (edge.getTarget ());
169,169c169,169
<                     Object cep = registry.get (connector);
---
>                     Object cep = registry.get (edge);
241,241c241,241
<     protected final ConnectorRefreshMgr getConnectorRefreshMgr () {
---
>     protected final ConnectionRefreshMgr getConnectionRefreshMgr () {
243,243c243,243
<             _crMgr = createConnectorRefreshMgr ();
---
>             _crMgr = createConnectionRefreshMgr ();
247a248,249
>     protected ConnectionRefreshMgr createConnectionRefreshMgr () {
>         return new ConnectionRefreshMgr ();
248,249d247
<     protected ConnectorRefreshMgr createConnectorRefreshMgr () {
<         return new ConnectorRefreshMgr ();
279,279c279,279
<         installEditPolicy (EditPolicyRoles.ACTIONBAR_ROLE, new ActionBarEditPolicy ());
---
>         installEditPolicy (EditPolicyRoles.POPUPBAR_ROLE, new PopupBarEditPolicy ());
284a285,285
>             refreshConnections ();
285,285d284
<             refreshConnectors ();
291a292,292
>             refreshConnections ();
292,292d291
<             refreshConnectors ();
295a296,296
>             refreshConnections ();
296,296d295
<             refreshConnectors ();
300,300c300,300
<     protected void refreshConnectors () {
---
>     protected void refreshConnections () {
308,308c308,308
<                             getConnectorRefreshMgr ().refreshConnectors (ShapeCompartmentEditPart.this);
---
>                             getConnectionRefreshMgr ().refreshConnections (ShapeCompartmentEditPart.this);
400a401,401
>         refreshConnections ();
401,401d400
<         refreshConnectors ();
