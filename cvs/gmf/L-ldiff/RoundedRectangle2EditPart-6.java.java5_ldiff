59,64d58
< import org.eclipse.gmf.gmfgraph.Layout;
< 
< import org.eclipse.gmf.gmfgraph.LayoutData;
< 
< import org.eclipse.gmf.gmfgraph.LineKind;
< 
130,130c124,124
<         final NotificationListener layoutListener = new NotificationListener () {
---
>         final NotificationListener Layoutable_LayoutData_PropertiesListener = new NotificationListener () {
133,134d126
<                 Layout layout = (Layout) notification.getNotifier ();
<                 layoutPropertyChanged (layout);
141,141c159,159
<             addListenerFilter ("LayoutPropertiesListener", layoutListener, modelElement.getLayout ());
---
>             addListenerFilter ("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout ());
143,143c161,161
<         addListenerFilter ("ModelElementLayoutListener", new NotificationListener () {
---
>         addListenerFilter ("Layoutable_Layout_Listener", new NotificationListener () {
145a164,166
>                 removeListenerFilter ("Layoutable_Layout_PropertiesListener");
>                 if (modelElement.getLayout () != null) {
>                     addListenerFilter ("Layoutable_Layout_PropertiesListener", Layoutable_Layout_PropertiesListener, modelElement.getLayout ());
146,149d163
<                 Layout newLayout = (Layout) notification.getNewValue ();
<                 removeListenerFilter ("LayoutPropertiesListener");
<                 if (newLayout != null) {
<                     addListenerFilter ("LayoutPropertiesListener", layoutListener, newLayout);
151,151d167
<                 layoutChanged (newLayout, true);
157,157d173
<         final NotificationListener layoutDataListener = new NotificationListener () {
160,160d176
<                 layoutDataPropertyChanged ();
164a182,188
>         , modelElement, GMFGraphPackage.eINSTANCE.getShape_Outline ());
>         addListenerFilter ("Shape_Fill_Listener", new NotificationListener () {
> 
>             public void notifyChanged (Notification notification) {
>                 myFigure.setFill (modelElement.isFill ());
>             }
> 
164a127,131
>                 layoutDataChanged (modelElement.getLayoutData ());
>             }
> 
>         }
> 
165,165c132,132
<         ;
---
>         ;
166,166c133,133
<         if (modelElement.getLayoutData () != null) {
---
>         if (modelElement.getLayoutData () != null) {
167a135,152
>         }
>         addListenerFilter ("Layoutable_LayoutData_Listener", new NotificationListener () {
> 
>             public void notifyChanged (Notification notification) {
>                 removeListenerFilter ("Layoutable_LayoutData_PropertiesListener");
>                 if (modelElement.getLayoutData () != null) {
>                     addListenerFilter ("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData ());
>                 }
>                 layoutDataChanged (modelElement.getLayoutData ());
>             }
> 
>         }
> 
>         , modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData ());
>         final NotificationListener Layoutable_Layout_PropertiesListener = new NotificationListener () {
> 
>             public void notifyChanged (Notification notification) {
>                 layoutChanged (modelElement.getLayout ());
167,167c134,134
<             addListenerFilter ("LayoutDataPropertiesListener", layoutDataListener, modelElement.getLayoutData ());
---
>             addListenerFilter ("Layoutable_LayoutData_PropertiesListener", Layoutable_LayoutData_PropertiesListener, modelElement.getLayoutData ());
169,169c174,174
<         addListenerFilter ("ModelElementLayoutDataListener", new NotificationListener () {
---
>         addListenerFilter ("Shape_Outline_Listener", new NotificationListener () {
172,175d194
<                 LayoutData newLayoutData = (LayoutData) notification.getNewValue ();
<                 removeListenerFilter ("LayoutDataPropertiesListener");
<                 if (newLayoutData != null) {
<                     addListenerFilter ("LayoutDataPropertiesListener", layoutDataListener, newLayoutData);
176a197,197
> 
177,177c495,495
<                 layoutDataChanged ();
---
>                 layoutDataChanged (modelElement.getLayoutData ());
179a200,204
>         , modelElement, GMFGraphPackage.eINSTANCE.getShape_LineWidth ());
>         addListenerFilter ("Shape_LineKind_Listener", new NotificationListener () {
> 
>             public void notifyChanged (Notification notification) {
>                 myFigure.setLineStyle (getLineStyle (modelElement.getLineKind ()));
181a207,210
>         }
> 
>         , modelElement, GMFGraphPackage.eINSTANCE.getShape_LineKind ());
>         addListenerFilter ("Shape_XorFill_Listener", new NotificationListener () {
181a190,191
> 
>         , modelElement, GMFGraphPackage.eINSTANCE.getShape_Fill ());
182,182d189
<         , modelElement, GMFGraphPackage.eINSTANCE.getLayoutable_LayoutData ());
183,183c192,192
<         addListenerFilter ("ModelElementPropertiesListener", new NotificationListener () {
---
>         addListenerFilter ("Shape_LineWidth_Listener", new NotificationListener () {
186,228d212
<                 switch (notification.getFeatureID (RoundedRectangle.class)) {
<                     case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__OUTLINE :
<                         {
<                             boolean value = modelElement.isOutline ();
<                             myFigure.setOutline (value);
<                             break;
<                         } case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__FILL :
<                         {
<                             boolean value = modelElement.isFill ();
<                             myFigure.setFill (value);
<                             break;
<                         } case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__LINE_WIDTH :
<                         {
<                             int value = modelElement.getLineWidth ();
<                             myFigure.setLineWidth (value);
<                             break;
<                         } case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__LINE_KIND :
<                         {
<                             LineKind value = modelElement.getLineKind ();
<                             myFigure.setLineStyle ("LINE_DASH".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DOT : "LINE_DASHDOT".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT : "LINE_DASHDOTDOT".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT : "LINE_CUSTOM".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
<                             break;
<                         } case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__XOR_FILL :
<                         {
<                             boolean value = modelElement.isXorFill ();
<                             myFigure.setFillXOR (value);
<                             break;
<                         } case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__XOR_OUTLINE :
<                         {
<                             boolean value = modelElement.isXorOutline ();
<                             myFigure.setOutlineXOR (value);
<                             break;
<                         } case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__CORNER_WIDTH :
<                         {
<                             int value = modelElement.getCornerWidth ();
<                             myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (value), getMapMode ().DPtoLP (modelElement.getCornerHeight ())));
<                             break;
<                         } case org.eclipse.gmf.gmfgraph.GMFGraphPackage.ROUNDED_RECTANGLE__CORNER_HEIGHT :
<                         {
<                             int value = modelElement.getCornerHeight ();
<                             myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (modelElement.getCornerWidth ()), getMapMode ().DPtoLP (value)));
<                             break;
<                         }}
<                 myFigure.repaint ();
233,233c168,168
<         , modelElement);
---
>                 layoutChanged (modelElement.getLayout ());
483,483c177,177
<                 boolean value = modelElement.isOutline ();
---
>                 myFigure.setOutline (modelElement.isOutline ());
484,484d177
<                 myFigure.setOutline (value);
485a497,497
>                 layoutChanged (modelElement.getLayout ());
486,486c501,501
<                 boolean value = modelElement.isFill ();
---
>                 myFigure.setFill (modelElement.isFill ());
487,487d501
<                 myFigure.setFill (value);
488a499,499
>                 myFigure.setOutline (modelElement.isOutline ());
489,489c195,195
<                 int value = modelElement.getLineWidth ();
---
>                 myFigure.setLineWidth (modelElement.getLineWidth ());
490,490d195
<                 myFigure.setLineWidth (value);
492,493d500
<                 LineKind value = modelElement.getLineKind ();
<                 myFigure.setLineStyle ("LINE_DASH".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DASH : "LINE_DOT".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DOT : "LINE_DASHDOT".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOT : "LINE_DASHDOTDOT".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_DASHDOTDOT : "LINE_CUSTOM".equals (value.getName ()) ? org.eclipse.draw2d.Graphics.LINE_CUSTOM : org.eclipse.draw2d.Graphics.LINE_SOLID);
494a503,503
>                 myFigure.setLineWidth (modelElement.getLineWidth ());
495,495c213,213
<                 boolean value = modelElement.isXorFill ();
---
>                 myFigure.setFillXOR (modelElement.isXorFill ());
496,496d213
<                 myFigure.setFillXOR (value);
497a505,505
>                 myFigure.setLineStyle (getLineStyle (modelElement.getLineKind ()));
498,499d504
<                 boolean value = modelElement.isXorOutline ();
<                 myFigure.setOutlineXOR (value);
500a509,510
>                 myFigure.setOutlineXOR (modelElement.isXorOutline ());
>             } {
500a507,507
>                 myFigure.setFillXOR (modelElement.isXorFill ());
501,501d508
<                 int value = modelElement.getCornerWidth ();
502a512,514
>             } {
>                 myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (modelElement.getCornerWidth ()), getMapMode ().DPtoLP (modelElement.getCornerHeight ())));
>             }}
502,502c511,511
<                 myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (value), getMapMode ().DPtoLP (modelElement.getCornerHeight ())));
---
>                 myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (modelElement.getCornerWidth ()), getMapMode ().DPtoLP (modelElement.getCornerHeight ())));
503a218,224
>         , modelElement, GMFGraphPackage.eINSTANCE.getShape_XorFill ());
>         addListenerFilter ("Shape_XorOutline_Listener", new NotificationListener () {
> 
>             public void notifyChanged (Notification notification) {
>                 myFigure.setOutlineXOR (modelElement.isXorOutline ());
>             }
> 
504,506d217
<                 int value = modelElement.getCornerHeight ();
<                 myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (modelElement.getCornerWidth ()), getMapMode ().DPtoLP (value)));
<             } layoutChanged (modelElement.getLayout (), false);
507a226,245
> 
>         , modelElement, GMFGraphPackage.eINSTANCE.getShape_XorOutline ());
>         addListenerFilter ("RoundedRectangle_CornerWidth_Listener", new NotificationListener () {
> 
>             public void notifyChanged (Notification notification) {
>                 myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (modelElement.getCornerWidth ()), getMapMode ().DPtoLP (modelElement.getCornerHeight ())));
>             }
> 
>         }
> 
>         , modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerWidth ());
>         addListenerFilter ("RoundedRectangle_CornerHeight_Listener", new NotificationListener () {
> 
>             public void notifyChanged (Notification notification) {
>                 myFigure.setCornerDimensions (new org.eclipse.draw2d.geometry.Dimension (getMapMode ().DPtoLP (modelElement.getCornerWidth ()), getMapMode ().DPtoLP (modelElement.getCornerHeight ())));
>             }
> 
>         }
> 
>         , modelElement, GMFGraphPackage.eINSTANCE.getRoundedRectangle_CornerHeight ());
507,507c225,225
<         }
---
>         }
