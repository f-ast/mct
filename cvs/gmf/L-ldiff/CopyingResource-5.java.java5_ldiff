43,43c55,55
< import org.eclipse.gmf.runtime.emf.core.edit.MEditingDomain;
---
> import org.eclipse.gmf.runtime.emf.core.util.EMFCoreUtil;
45,45c53,53
< import org.eclipse.gmf.runtime.emf.core.internal.domain.MSLEditingDomain;
---
> import org.eclipse.gmf.runtime.emf.core.internal.util.Util;
47,47c43,43
< import org.eclipse.gmf.runtime.emf.core.internal.plugin.MSLDebugOptions;
---
> import org.eclipse.gmf.runtime.emf.core.internal.plugin.EMFCoreDebugOptions;
49,49c45,45
< import org.eclipse.gmf.runtime.emf.core.internal.plugin.MSLPlugin;
---
> import org.eclipse.gmf.runtime.emf.core.internal.plugin.EMFCorePlugin;
51,51c47,47
< import org.eclipse.gmf.runtime.emf.core.internal.resources.MSLResource;
---
> import org.eclipse.gmf.runtime.emf.core.internal.resources.GMFResource;
53,53c49,49
< import org.eclipse.gmf.runtime.emf.core.internal.resources.MSLSave;
---
> import org.eclipse.gmf.runtime.emf.core.internal.resources.GMFSave;
55,55c51,51
< import org.eclipse.gmf.runtime.emf.core.internal.util.MSLConstants;
---
> import org.eclipse.gmf.runtime.emf.core.internal.util.EMFCoreConstants;
56,59d51
< 
< import org.eclipse.gmf.runtime.emf.core.internal.util.MSLUtil;
< 
< import org.eclipse.gmf.runtime.emf.core.util.EObjectUtil;
101,101c97,97
<                 if (((MSLConstants.PLATFORM_SCHEME.equals (anUri.scheme ())) && (MSLConstants.PLATFORM_SCHEME.equals (resourceURI.scheme ()))) && ((anUri.segmentCount () > 2) && (resourceURI.segmentCount () > 2)) && ((! anUri.segments () [0].equals (resourceURI.segments () [0])) || (! anUri.segments () [1].equals (resourceURI.segments () [1])))) return anUri;
---
>                 if (((EMFCoreConstants.PLATFORM_SCHEME.equals (anUri.scheme ())) && (EMFCoreConstants.PLATFORM_SCHEME.equals (resourceURI.scheme ()))) && ((anUri.segmentCount () > 2) && (resourceURI.segmentCount () > 2)) && ((! anUri.segments () [0].equals (resourceURI.segments () [0])) || (! anUri.segments () [1].equals (resourceURI.segments () [1])))) return anUri;
106a103,104
>                 EObject eObj = obj;
>                 if (obj.eIsProxy ()) {
107,107c105,105
<                 EObject eObj = MSLUtil.resolve ((MSLEditingDomain) MEditingDomain.getEditingDomain (xmlResource), obj, true);
---
>                     eObj = EcoreUtil.resolve (obj, xmlResource);
107a106,109
>                     if (eObj == null) {
>                         eObj = null;
>                     }
>                 }
123,123c125,125
<                 if (otherResource instanceof MSLResource) {
---
>                 if (otherResource instanceof GMFResource) {
124,124c126,126
<                     String qName = EObjectUtil.getQName (obj, true);
---
>                     String qName = EMFCoreUtil.getQualifiedName (obj, true);
127,127c129,129
<                         buffer.append (MSLConstants.FRAGMENT_SEPARATOR);
---
>                         buffer.append (EMFCoreConstants.FRAGMENT_SEPARATOR);
128,128c130,130
<                         buffer.append (MSLUtil.encodeQName (qName));
---
>                         buffer.append (Util.encodeQualifiedName (qName));
148,148c150,150
<         Trace.throwing (MSLPlugin.getDefault (), MSLDebugOptions.EXCEPTIONS_THROWING, getClass (), methodName, ex);
---
>         Trace.throwing (EMFCorePlugin.getDefault (), EMFCoreDebugOptions.EXCEPTIONS_THROWING, getClass (), methodName, ex);
161,161c163,163
<         return new MSLSave (createXMLHelper ()) {
---
>         return new GMFSave (createXMLHelper ()) {
248,248c250,250
<             getEObjectToIDMap ().put (eObject, EObjectUtil.getID (eObject));
---
>             getEObjectToIDMap ().put (eObject, xmlResource.getID (eObject));
249,249c251,251
<             getIDToEObjectMap ().put (EObjectUtil.getID (eObject), eObject);
---
>             getIDToEObjectMap ().put (xmlResource.getID (eObject), eObject);
