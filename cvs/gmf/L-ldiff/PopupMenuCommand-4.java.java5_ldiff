3,3c7,7
< import org.eclipse.core.runtime.IProgressMonitor;
---
> import org.eclipse.core.runtime.IProgressMonitor;
4a5,5
> import org.eclipse.core.runtime.IAdaptable;
5a18,20
> 
> import org.eclipse.swt.widgets.Shell;
> 
5,5c17,17
< import org.eclipse.jface.dialogs.Dialog;
---
> import org.eclipse.jface.dialogs.Dialog;
7,7c3,3
< import org.eclipse.swt.widgets.Shell;
---
> import org.eclipse.core.commands.ExecutionException;
25,25c29,29
<         super (label);
---
>         super (label, null);
30,30c34,34
<         super (label);
---
>         super (label, null);
35,35c39,39
<     protected CommandResult doExecute (IProgressMonitor progressMonitor) {
---
>     protected CommandResult doExecuteWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
39,39c43,43
<                 return newCancelledCommandResult ();
---
>                 return CommandResult.newCancelledCommandResult ();
41,41c45,45
<             return newOKCommandResult (getPopupMenu ().getResult ());
---
>             return CommandResult.newOKCommandResult (getPopupMenu ().getResult ());
45,45c49,49
<                 return newCancelledCommandResult ();
---
>                 return CommandResult.newCancelledCommandResult ();
47,47c51,51
<             return newOKCommandResult (getPopupDialog ().getResult () [0]);
---
>             return CommandResult.newOKCommandResult (getPopupDialog ().getResult () [0]);
50,50c54,54
<         return newOKCommandResult ();
---
>         return CommandResult.newOKCommandResult ();
52a57,57
>     protected CommandResult doRedoWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
53,53d56
<     protected CommandResult doRedo () {
54,54c58,58
<         return newOKCommandResult ();
---
>         return CommandResult.newOKCommandResult ();
56a61,61
>     protected CommandResult doUndoWithResult (IProgressMonitor progressMonitor, IAdaptable info) throws ExecutionException {
57,57d60
<     protected CommandResult doUndo () {
58,58c62,62
<         return newOKCommandResult ();
---
>         return CommandResult.newOKCommandResult ();
61,61c65,65
<     public boolean isRedoable () {
---
>     public boolean canRedo () {
65,65c69,69
<     public boolean isUndoable () {
---
>     public boolean canUndo () {
