16a41,41
> import org.eclipse.gmf.runtime.emf.commands.core.command.CompositeTransactionalCommand;
17,17d40
< import org.eclipse.gmf.runtime.common.core.command.CompositeCommand;
18,18c42,42
< 
---
> 
106a107,109
>         if ((request instanceof DestroyRequest) && (getHost () instanceof ConnectionEditPart) && ! ((ConnectionEditPart) getHost ()).isSemanticConnection ()) {
>             return null;
>         }
118a122,123
>                 TransactionalEditingDomain domain = ((IGraphicalEditPart) getHost ()).getEditingDomain ();
>                 ICommand ic = new DeleteCommand (domain, (View) getHost ().getModel ());
119,119d121
<                 ICommand ic = new DeleteCommand (((IGraphicalEditPart) getHost ()).getEditingDomain (), (View) getHost ().getModel ());
120a125,125
>                 cc.setTransactionNestingEnabled (true);
120,120c124,124
<                 CompositeCommand cc = new CompositeCommand (semanticCommand.getLabel ());
---
>                 CompositeTransactionalCommand cc = new CompositeTransactionalCommand (domain, semanticCommand.getLabel ());
213a219,224
>         org.eclipse.gef.ConnectionEditPart connectionEP = (request).getConnectionEditPart ();
>         if (connectionEP instanceof ConnectionEditPart) {
>             if (! ((ConnectionEditPart) connectionEP).isSemanticConnection ()) {
>                 return null;
>             }
>         }
214,214c225,225
<         EditPart sourceEditPart = request.getConnectionEditPart ().getSource ();
---
>         EditPart sourceEditPart = connectionEP.getSource ();
215,215c226,226
<         EditPart targetEditPart = request.getConnectionEditPart ().getTarget ();
---
>         EditPart targetEditPart = connectionEP.getTarget ();
225a237,242
>         org.eclipse.gef.ConnectionEditPart connectionEP = (request).getConnectionEditPart ();
>         if (connectionEP instanceof ConnectionEditPart) {
>             if (! ((ConnectionEditPart) connectionEP).isSemanticConnection ()) {
>                 return null;
>             }
>         }
226,226c243,243
<         EditPart sourceEditPart = request.getConnectionEditPart ().getSource ();
---
>         EditPart sourceEditPart = connectionEP.getSource ();
227,227c244,244
<         EditPart targetEditPart = request.getConnectionEditPart ().getTarget ();
---
>         EditPart targetEditPart = connectionEP.getTarget ();
