117,117d116
<         if (semanticAdapter != null && semanticAdapter.getAdapter (IElementType.class) != null && GMFGraphElementTypes.getElement (semanticAdapter) == null) {
168a170,170
>         IElementType elementType = getSemanticElementType (semanticAdapter);
169,169c171,171
<         if (semanticAdapter.getAdapter (IElementType.class) != null && GMFGraphElementTypes.getElement (semanticAdapter) == null) {
---
>         if (elementType != null && ! GMFGraphElementTypes.isKnownElementType (elementType)) {
171a174,174
>         if (GMFGraphElementTypes.DiagramElementFigure_4001.equals (elementType)) {
172,172c117,117
<         IElementType elementType = getSemanticElementType (semanticAdapter);
---
>         IElementType elementType = getSemanticElementType (semanticAdapter);
173,173c118,118
<         if (GMFGraphElementTypes.DiagramElementFigure_3001.equals (elementType)) {
---
>         if (elementType != null && ! GMFGraphElementTypes.isKnownElementType (elementType)) {
