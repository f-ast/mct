41,41c41,41
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode;
108a109,109
>     private IMapMode mm;
110,110c111,111
<     public DiagramRulerProvider (DiagramRuler ruler) {
---
>     public DiagramRulerProvider (DiagramRuler ruler, IMapMode mm) {
111a113,117
>         this.mm = mm;
>     }
> 
>     private IMapMode getMapMode () {
>         return mm;
164,164c170,170
<                 x += MapMode.DPtoLP (pDelta);
---
>                 x += getMapMode ().DPtoLP (pDelta);
167,167c173,173
<                 y += MapMode.DPtoLP (pDelta);
---
>                 y += getMapMode ().DPtoLP (pDelta);
