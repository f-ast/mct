73,73c73,73
<         DiagramPrinterUtil.printWithSettings (diagramEditor, createDiagramMap (diagramEditor), new RenderedDiagramPrinter (preferencesHint, mapMode));
---
>         DiagramPrinterUtil.printWithSettings (diagramEditor, createDiagramMap (), new RenderedDiagramPrinter (preferencesHint, mapMode));
76,76c76,76
<     private Map createDiagramMap (DiagramEditor diagramEditor) {
---
>     private Map createDiagramMap () {
77,77d76
<         assert diagramEditor != null;
78a78,78
>         List diagramEditors = EditorService.getInstance ().getRegisteredEditorParts ();
79,81d77
<         String id = diagramEditor.getEditorSite ().getId ();
<         assert id != null;
<         List diagramEditors = EditorService.getInstance ().getRegisteredEditors (id);
98a96,96
>                     diagramName = dEditor.getDiagram ().getName ();
99,99d95
<                     diagramName = id;
