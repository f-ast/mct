27,27c27,27
< import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapMode;
---
> import org.eclipse.gmf.runtime.draw2d.ui.mapmode.MapModeUtil;
60,60c60,60
<         Point pt = new Point (rBox.getRight ().x - MapMode.DPtoLP (alpha_ir.width), rBox.getTop ().y);
---
>         Point pt = new Point (rBox.getRight ().x - MapModeUtil.getMapMode (figure).DPtoLP (alpha_ir.width), rBox.getTop ().y);
66,66c66,66
<         Dimension dim = getRightShadowDimension (rBox);
---
>         Dimension dim = getRightShadowDimension (figure, rBox);
68,68c68,68
<         Point pt = new Point (rBox.getRight ().x - MapMode.DPtoLP (alpha_ir.width), rBox.getTop ().y + MapMode.DPtoLP (alpha_itr.height));
---
>         Point pt = new Point (rBox.getRight ().x - MapModeUtil.getMapMode (figure).DPtoLP (alpha_ir.width), rBox.getTop ().y + MapModeUtil.getMapMode (figure).DPtoLP (alpha_itr.height));
77,77c77,77
<         Point pt = new Point (rBox.getRight ().x - MapMode.DPtoLP (alpha_ir.width), rBox.getBottom ().y - MapMode.DPtoLP (alpha_ib.height));
---
>         Point pt = new Point (rBox.getRight ().x - MapModeUtil.getMapMode (figure).DPtoLP (alpha_ir.width), rBox.getBottom ().y - MapModeUtil.getMapMode (figure).DPtoLP (alpha_ib.height));
83,83c83,83
<         Dimension dim = getBottomShadowDimension (rBox);
---
>         Dimension dim = getBottomShadowDimension (figure, rBox);
85,85c85,85
<         Point pt = new Point (rBox.getLeft ().x + MapMode.DPtoLP (alpha_ilb.width), rBox.getBottom ().y - MapMode.DPtoLP (alpha_ib.height));
---
>         Point pt = new Point (rBox.getLeft ().x + MapModeUtil.getMapMode (figure).DPtoLP (alpha_ilb.width), rBox.getBottom ().y - MapModeUtil.getMapMode (figure).DPtoLP (alpha_ib.height));
93,93c93,93
<         Point pt = new Point (rBox.getLeft ().x, rBox.getBottom ().y - MapMode.DPtoLP (alpha_ib.height));
---
>         Point pt = new Point (rBox.getLeft ().x, rBox.getBottom ().y - MapModeUtil.getMapMode (figure).DPtoLP (alpha_ib.height));
97a98,98
>     protected Dimension getRightShadowDimension (IFigure figure, Rectangle rBox) {
98,98d97
<     protected Dimension getRightShadowDimension (Rectangle rBox) {
99,99c99,99
<         int height = Math.max (MapMode.LPtoDP (rBox.height) - alpha_itr.height - alpha_irb.height, 1);
---
>         int height = Math.max (MapModeUtil.getMapMode (figure).LPtoDP (rBox.height) - alpha_itr.height - alpha_irb.height, 1);
107,107c107,107
<     protected Dimension getBottomShadowDimension (Rectangle rBox) {
---
>     protected Dimension getBottomShadowDimension (IFigure figure, Rectangle rBox) {
108,108c108,108
<         int width = Math.max (MapMode.LPtoDP (rBox.width) - alpha_ilb.width - alpha_irb.width, 1);
---
>         int width = Math.max (MapModeUtil.getMapMode (figure).LPtoDP (rBox.width) - alpha_ilb.width - alpha_irb.width, 1);
