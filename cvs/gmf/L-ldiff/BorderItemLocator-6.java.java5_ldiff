82a83,83
>         Dimension borderItemSize = getSize (borderItem);
83,83d82
<         Rectangle borderItemBounds = borderItem.getBounds ();
85,85c85,85
<             x = parentFigureX - borderItemBounds.width + getBorderItemOffset ().width;
---
>             x = parentFigureX - borderItemSize.width + getBorderItemOffset ().width;
91,91c91,91
<             y = parentFigureY - borderItemBounds.height + getBorderItemOffset ().height;
---
>             y = parentFigureY - borderItemSize.height + getBorderItemOffset ().height;
106a107,107
>         Dimension borderItemSize = getSize (borderItem);
107,107d106
<         Rectangle borderItemBounds = borderItem.getBounds ();
110,110c110,110
<         int westX = parentFigureX - borderItemBounds.width + getBorderItemOffset ().width;
---
>         int westX = parentFigureX - borderItemSize.width + getBorderItemOffset ().width;
113,113c113,113
<         int northY = parentFigureY - borderItemBounds.height + getBorderItemOffset ().height;
---
>         int northY = parentFigureY - borderItemSize.height + getBorderItemOffset ().height;
118a119,119
>                 newY = northY + borderItemSize.height;
119,119d118
<                 newY = northY + borderItemBounds.height;
120,120c120,120
<             } else if (suggestedLocation.y > bounds.getBottomLeft ().y - borderItemBounds.height) {
---
>             } else if (suggestedLocation.y > bounds.getBottomLeft ().y - borderItemSize.height) {
121,121c121,121
<                 newY = southY - borderItemBounds.height;
---
>                 newY = southY - borderItemSize.height;
128a129,129
>                 newY = northY + borderItemSize.height;
129,129d128
<                 newY = northY + borderItemBounds.height;
130,130c130,130
<             } else if (suggestedLocation.y > bounds.getBottomLeft ().y - borderItemBounds.height) {
---
>             } else if (suggestedLocation.y > bounds.getBottomLeft ().y - borderItemSize.height) {
131,131c131,131
<                 newY = southY - borderItemBounds.height;
---
>                 newY = southY - borderItemSize.height;
138a139,139
>                 newX = westX + borderItemSize.width;
139,139d138
<                 newX = westX + borderItemBounds.width;
140,140c140,140
<             } else if (suggestedLocation.x > bounds.getBottomRight ().x - borderItemBounds.width) {
---
>             } else if (suggestedLocation.x > bounds.getBottomRight ().x - borderItemSize.width) {
141,141c141,141
<                 newX = eastX - borderItemBounds.width;
---
>                 newX = eastX - borderItemSize.width;
148a149,149
>                 newX = westX + borderItemSize.width;
149,149d148
<                 newX = westX + borderItemBounds.width;
150,150c150,150
<             } else if (suggestedLocation.x > bounds.getBottomRight ().x - borderItemBounds.width) {
---
>             } else if (suggestedLocation.x > bounds.getBottomRight ().x - borderItemSize.width) {
151,151c151,151
<                 newX = eastX - borderItemBounds.width;
---
>                 newX = eastX - borderItemSize.width;
178a179,179
>         Dimension borderItemSize = getSize (borderItem);
179,179d178
<         Rectangle borderItemBounds = borderItem.getBounds ();
183,183c183,183
<                     recommendedLocation.y += borderItemBounds.height + vertical_gap;
---
>                     recommendedLocation.y += borderItemSize.height + vertical_gap;
185,185c185,185
<                 if (recommendedLocation.y > getParentBorder ().getBottomLeft ().y - borderItemBounds.height) {
---
>                 if (recommendedLocation.y > getParentBorder ().getBottomLeft ().y - borderItemSize.height) {
190,190c190,190
<                     recommendedLocation.x += borderItemBounds.width + horizontal_gap;
---
>                     recommendedLocation.x += borderItemSize.width + horizontal_gap;
192,192c192,192
<                 if (recommendedLocation.x > getParentBorder ().getBottomRight ().x - borderItemBounds.width) {
---
>                 if (recommendedLocation.x > getParentBorder ().getBottomRight ().x - borderItemSize.width) {
197,197c197,197
<                     recommendedLocation.y -= (borderItemBounds.height + vertical_gap);
---
>                     recommendedLocation.y -= (borderItemSize.height + vertical_gap);
204,204c204,204
<                     recommendedLocation.x -= (borderItemBounds.width + horizontal_gap);
---
>                     recommendedLocation.x -= (borderItemSize.width + horizontal_gap);
266a267,267
>         Dimension size = getSize (borderItem);
267,267c268,268
<         Rectangle rectSuggested = new Rectangle (getPreferredLocation (borderItem), borderItem.getBounds ().getSize ());
---
>         Rectangle rectSuggested = new Rectangle (getPreferredLocation (borderItem), size);
271a273,273
>         borderItem.setSize (size);
272,272c274,274
<         setCurrentSideOfParent (findClosestSideOfParent (new Rectangle (ptNewLocation, borderItem.getBounds ().getSize ()), getParentBorder ()));
---
>         setCurrentSideOfParent (findClosestSideOfParent (new Rectangle (ptNewLocation, size), getParentBorder ()));
303a306,313
>     protected final Dimension getSize (IFigure borderItem) {
>         Dimension size = getConstraint ().getSize ();
>         if (LayoutHelper.UNDEFINED.getSize ().equals (size)) {
>             size = borderItem.getPreferredSize ();
>         }
>         return size;
>     }
> 
