head	1.8;
access;
symbols
	v20080722-1827:1.8
	v20080718-1700:1.8
	v20080718-1731:1.8
	v20080716-1642:1.8
	R2_1_maintenance:1.8.0.2
	Root_R2_1_maintenance:1.8
	R2_1_0:1.8
	v20080610-1132:1.8
	v20080603-1553:1.7
	v20080528-1052:1.7
	v20080521:1.7
	v20080516-1143:1.7
	v20080512-1200:1.7
	v20080510-0100:1.6
	v20080507-1326:1.6
	v20080501-1739:1.6
	v20080425-1959:1.6
	v20080411-0411:1.6
	v20080404-1111:1.6
	v20080322-0000:1.6
	v20080114-2222:1.5
	v20071214-1111:1.5
	v20070809-0000:1.5
	R2_0_maintenance:1.5.0.2
	R2_0:1.5
	R4_20:1.5
	v20070621-0000:1.5
	RC3_20:1.5
	v20070605-1400:1.5
	v20070601-1400:1.5
	v20070520-1200:1.4
	v20070420-1000:1.4
	v20070405-2000:1.4
	v20070405-1100:1.4
	v20070330-1300:1.4
	v20070307-0700:1.4
	v20070221-1500:1.4
	v20070208-1800:1.3
	M4_20:1.3
	v20061214-0000:1.3
	M3_20:1.3
	v20061013-1330:1.3
	M1_20:1.3
	v20060713-1700:1.3
	R1_0_maintenance:1.3.0.2
	R1_0:1.3
	v20060627-1200:1.3
	v20060616-1200:1.2
	v20060609-1400:1.1;
locks; strict;
comment	@# @;
expand	@k@;


1.8
date	2008.06.06.12.58.26;	author ashatalin;	state Exp;
branches;
next	1.7;
commitid	5e7c484934724567;

1.7
date	2008.05.12.17.40.17;	author ashatalin;	state Exp;
branches;
next	1.6;
commitid	a53482880fd4567;

1.6
date	2008.02.22.13.08.00;	author ashatalin;	state Exp;
branches;
next	1.5;
commitid	4c5647bec9294567;

1.5
date	2007.05.31.15.52.31;	author ashatalin;	state Exp;
branches;
next	1.4;
commitid	49f1465eef2c4567;

1.4
date	2007.02.09.20.08.31;	author atikhomirov;	state Exp;
branches;
next	1.3;
commitid	179c45ccd4b34567;

1.3
date	2006.06.27.10.44.27;	author ashatalin;	state Exp;
branches;
next	1.2;

1.2
date	2006.06.12.11.46.43;	author ashatalin;	state Exp;
branches;
next	1.1;

1.1
date	2006.06.08.08.40.34;	author ashatalin;	state Exp;
branches;
next	;


desc
@@


1.8
log
@[209917] - ConcurrentModificationException
@
text
@/*
 *  Copyright (c) 2006, 2007 Borland Software Corporation and others.
 *  All rights reserved. This program and the accompanying materials
 *  are made available under the terms of the Eclipse Public License v1.0
 *  which accompanies this distribution, and is available at
 *  http://www.eclipse.org/legal/epl-v10.html
 * 
 *  Contributors:
 *      Borland Software Corporation - initial API and implementation
 */
package org.eclipse.gmf.graphdef.editor.edit.parts;

import org.eclipse.draw2d.Connection;
import org.eclipse.draw2d.Graphics;
import org.eclipse.draw2d.PolylineDecoration;
import org.eclipse.draw2d.RotatableDecoration;
import org.eclipse.draw2d.geometry.PointList;
import org.eclipse.gmf.graphdef.editor.edit.policies.DiagramElementFigureItemSemanticEditPolicy;
import org.eclipse.gmf.runtime.diagram.ui.editparts.ConnectionNodeEditPart;
import org.eclipse.gmf.runtime.diagram.ui.editparts.ITreeBranchEditPart;
import org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles;
import org.eclipse.gmf.runtime.draw2d.ui.figures.PolylineConnectionEx;
import org.eclipse.gmf.runtime.notation.View;

/**
 * @@generated
 */
public class DiagramElementFigureEditPart extends ConnectionNodeEditPart implements ITreeBranchEditPart {

	/**
	 * @@generated
	 */
	public static final int VISUAL_ID = 4005;

	/**
	 * @@generated
	 */
	public DiagramElementFigureEditPart(View view) {
		super(view);
	}

	/**
	 * @@generated
	 */
	protected void createDefaultEditPolicies() {
		super.createDefaultEditPolicies();
		installEditPolicy(EditPolicyRoles.SEMANTIC_ROLE, new DiagramElementFigureItemSemanticEditPolicy());
	}

	/**
	 * Creates figure for this edit part.
	 * 
	 * Body of this method does not depend on settings in generation model
	 * so you may safely remove <i>generated</i> tag and modify it.
	 * 
	 * @@generated
	 */

	protected Connection createConnectionFigure() {
		return new FigureConnectionFigure();
	}

	/**
	 * @@generated
	 */
	public FigureConnectionFigure getPrimaryShape() {
		return (FigureConnectionFigure) getFigure();
	}

	/**
	 * @@generated
	 */
	public class FigureConnectionFigure extends PolylineConnectionEx {

		/**
		 * @@generated
		 */
		public FigureConnectionFigure() {
			this.setLineStyle(Graphics.LINE_DASHDOT);

			setTargetDecoration(createTargetDecoration());
		}

		/**
		 * @@generated
		 */
		private RotatableDecoration createTargetDecoration() {
			PolylineDecoration df = new PolylineDecoration();
			PointList pl = new PointList();
			pl.addPoint(getMapMode().DPtoLP(-1), getMapMode().DPtoLP(1));
			pl.addPoint(getMapMode().DPtoLP(0), getMapMode().DPtoLP(0));
			pl.addPoint(getMapMode().DPtoLP(-1), getMapMode().DPtoLP(-1));
			df.setTemplate(pl);
			df.setScale(getMapMode().DPtoLP(7), getMapMode().DPtoLP(3));
			return df;
		}

	}

}
@


1.7
log
@[230191] - Start using FeatureTracker/AttachAdapter for listening model changes in org.eclipse.gmf.graphdef.editor
@
text
@d20 1
d28 1
a28 1
public class DiagramElementFigureEditPart extends ConnectionNodeEditPart {
@


1.6
log
@Updating gmfgaph editor:
- Setting default size of all graphical elements to 0,0
- updating aspect templates to reflect latest changes
- regenerating code
@
text
@d57 1
@


1.5
log
@[190196] akarjakina - Adjust GMFGraph Editor according recent gmfgraph metamodel with support for FigureDescriptor introduced
@
text
@d58 2
d61 5
a65 1
		return new FigureConnectionFigure();
@


1.4
log
@[173496] akarjakina - updated gmfgraph.editor bootstrap sample with recent GMF changes
@
text
@d3 7
a9 7
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     Borland Software Corporation - initial API and implementation
d16 1
d32 1
a32 1
	public static final int VISUAL_ID = 4001;
d71 1
a72 1
			this.setLineStyle(Graphics.LINE_DASHDOT);
d79 1
a79 1
		private PolylineDecoration createTargetDecoration() {
a80 2
			// dispatchNext?

d82 3
a84 3
			pl.addPoint(-1, 1);
			pl.addPoint(0, 0);
			pl.addPoint(-1, -1);
a86 1

@


1.3
log
@Updating with new templates.
@
text
@d2 1
a2 1
 * Copyright (c) 2006 Borland Software Corporation and others.
a12 2
import org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles;
import org.eclipse.gmf.runtime.notation.View;
d14 3
a16 3

import org.eclipse.gef.EditPolicy;

a17 2
import org.eclipse.gmf.graphdef.editor.edit.policies.GMFGraphReferenceConnectionEditPolicy;

d19 3
a44 1
		installEditPolicy(EditPolicy.CONNECTION_ROLE, new GMFGraphReferenceConnectionEditPolicy());
d57 1
d64 1
a64 1
	public class FigureConnectionFigure extends org.eclipse.gmf.runtime.draw2d.ui.figures.PolylineConnectionEx {
d71 1
a71 1
			this.setLineStyle(org.eclipse.draw2d.Graphics.LINE_DASHDOT);
d78 2
a79 2
		private org.eclipse.draw2d.PolylineDecoration createTargetDecoration() {
			org.eclipse.draw2d.PolylineDecoration df = new org.eclipse.draw2d.PolylineDecoration();
d82 1
a82 1
			org.eclipse.draw2d.geometry.PointList pl = new org.eclipse.draw2d.geometry.PointList();
d93 1
@


1.2
log
@Updating with new templates.
@
text
@d92 1
@


1.1
log
@Updating with new templates.
@
text
@d88 1
a88 1
			df.setScale(7, 3);
@

