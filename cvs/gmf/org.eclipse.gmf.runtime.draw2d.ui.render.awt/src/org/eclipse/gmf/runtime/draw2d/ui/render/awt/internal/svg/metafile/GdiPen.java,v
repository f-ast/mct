head	1.2;
access;
symbols
	v20081020-0700:1.2
	v20080903-1520:1.2
	v20080903-1510:1.2
	v20080722-1827:1.2
	R2_1_maintenance:1.2.0.4
	Root_R2_1_maintenance:1.2
	R2_1_0:1.2
	v20080603-1553:1.2
	v20080527-1255:1.2
	v20080507-2230:1.2
	v20080425-1959:1.2
	v20080328-1605:1.2
	v20080322-0000:1.2
	v20080222-1200:1.2
	v20071003-0000:1.2
	v20070928-0000:1.2
	v20070809-0000:1.2
	R2_0_maintenance:1.2.0.2
	R2_0:1.2
	R4_20:1.2
	RC3_20:1.2
	v20070614-1400:1.2
	v20070608-1300:1.2
	v20070601-1400:1.2
	v20070504-1000:1.2
	v20070330-1300:1.2
	v20070221-1500:1.2
	v20070208-1800:1.2
	v20070105-1200:1.1.2.1
	M4_20:1.2
	v20061218-1500:1.1.2.1
	v20061214-0000:1.2
	M3_20:1.2
	v20061013-1330:1.2
	v20060919-0800:1.1.2.1
	v20060907-1100:1.1
	M1_20:1.1
	v20060803-1200:1.1
	v20060713-1700:1.1
	R1_0_maintenance:1.1.0.2
	R1_0:1.1
	v20060627-1200:1.1
	v20060616-1200:1.1
	v20060609-1400:1.1
	v20060531-1730:1.1
	I20060505-1400:1.1
	I20060424-0500:1.1
	I20060424-0300:1.1
	M6_10:1.1
	I20060407-1200:1.1
	I20060331-1000:1.1
	I20060324-0300:1.1
	I20060317-1300:1.1
	I20060317-1200:1.1
	I20060316-1300:1.1
	I20060309-1300:1.1
	M5_10:1.1
	S20060303-1600:1.1
	I20060227-1730:1.1
	I20060216-1945:1.1
	I20060210-1715:1.1;
locks; strict;
comment	@# @;


1.2
date	2006.10.03.15.05.27;	author ahunter;	state Exp;
branches;
next	1.1;

1.1
date	2006.02.10.15.42.03;	author sshaw;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2006.09.13.16.44.42;	author ahunter;	state Exp;
branches;
next	;


desc
@@


1.2
log
@gmf_head ahunter 061003 Merge 1.0.1 Runtime to HEAD 2.0
@
text
@/******************************************************************************
 * Copyright (c) 2003, 2006 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    IBM Corporation - initial API and implementation 
 ****************************************************************************/

package org.eclipse.gmf.runtime.draw2d.ui.render.awt.internal.svg.metafile;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics2D;

import org.eclipse.gmf.runtime.draw2d.ui.render.awt.internal.svg.metafile.DeviceContext;


/**
 * Represents a Pen that is used for drawing lines.  There may be multiple pens at any one 
 * time, though only one of the pens will be used at a time to draw.  The currently selected
 * pen may be retrieved from the DeviceContext.  
 *
 * @@author dhabib
 */
public class GdiPen 
{
	/** Pen drawing style */
	public static final int 	PS_SOLID            = 0;
	/** Pen drawing style */
	public static final int 	PS_DASH             = 1;       /* -------  */
	/** Pen drawing style */
	public static final int 	PS_DOT              = 2;       /* .......  */
	/** Pen drawing style */
	public static final int 	PS_DASHDOT          = 3;       /* _._._._  */
	/** Pen drawing style */
	public static final int 	PS_DASHDOTDOT       = 4;       /* _.._.._  */
	/** Pen drawing style */
	public static final int 	PS_NULL             = 5;
	/** Pen drawing style */
	public static final int 	PS_INSIDEFRAME      = 6;
	/** Pen drawing style */
	public static final int 	PS_USERSTYLE        = 7;
	/** Pen drawing style */
	public static final int 	PS_ALTERNATE        = 8;
	/** Pen drawing style */
	public static final int		PS_STYLE_MASK       = 0x0000000F;

	/** Pen cap style */
	public static final int		PS_ENDCAP_ROUND     = 0x00000000;
	/** Pen cap style */
	public static final int		PS_ENDCAP_SQUARE    = 0x00000100;
	/** Pen cap style */
	public static final int		PS_ENDCAP_FLAT      = 0x00000200;
	/** Pen cap style */
	public static final int		PS_ENDCAP_MASK      = 0x00000F00;

	/** Pen join style */
	public static final int		PS_JOIN_ROUND       = 0x00000000;
	/** Pen join style */
	public static final int		PS_JOIN_BEVEL       = 0x00001000;
	/** Pen join style */
	public static final int		PS_JOIN_MITER       = 0x00002000;
	/** Pen join style */
	public static final int		PS_JOIN_MASK        = 0x0000F000;

	private int		m_style		= 0;
	private int		m_width		= 1;
	private Color	m_color		= new Color( 0 );

	private static final float[]	DASH			= { (float) 5.0, (float) 3.0};
	private static final float[]	DOT				= { (float) 1.0, (float) 3.0 };
	private static final float[]	DASH_DOT		= { (float) 5.0, (float) 3.0, (float) 1.0, (float) 3.0 };
	private static final float[]	DASH_DOT_DOT	= { (float) 5.0, (float) 3.0, (float) 1.0, (float) 3.0, (float) 1.0, (float) 3.0 };

	/**
	 * Creates a default pen.
	 */
	public GdiPen()
	{
	    // NOthing to initialize
	}

	/**
	 * Creates a pen with specific attributes.
	 * @@param style - A combination of the PS_* for drawing styles, end caps, and joins.
	 * @@param width - Width of the pen, in pixels.
	 * @@param color - color of the pen.
	 */
	public GdiPen( int style, int width, Color color )
	{
		m_style 	= style;
		m_width 	= width;
		m_color		= color;
	}
	
	/**
	 * Copy constructor
	 * @@param pen
	 */
	GdiPen( GdiPen pen )
	{
		m_style 	= pen.m_style;
		m_width 	= pen.m_width;
		m_color		= new Color( pen.m_color.getRGB() );
	}

	/**
	 * Applies the pen to the specified graphics object.
	 * @@param g Graphics object on which to apply the pen
	 * @@param context Current device context.
	 */
	public void apply( Graphics2D g, DeviceContext context )
	{
		g.setColor( m_color );
		
		int width = context.scaleX( m_width );
		if( width <= 0 )
		{
			width = 1;
		}
		
		boolean bNullStroke = false;
		float[] dotPattern = null;	
		switch( m_style & PS_STYLE_MASK )
		{
			case PS_NULL:
				bNullStroke = true;
				break;
			case PS_INSIDEFRAME:
			case PS_SOLID:
			default:
				break;
			case PS_DASH:
				dotPattern = DASH; 
				break;
			case PS_DOT:
				dotPattern = DOT;
				break;
			case PS_DASHDOT:
				dotPattern = DASH_DOT;
				break;
			case PS_DASHDOTDOT:
				dotPattern = DASH_DOT_DOT;
				break;
		}

		int endcap;
		switch( m_style & PS_ENDCAP_MASK )
		{
			default:
			case PS_ENDCAP_ROUND:
				endcap = BasicStroke.CAP_ROUND;
				break;
			case PS_ENDCAP_SQUARE:
				endcap = BasicStroke.CAP_SQUARE;
				break;
			case PS_ENDCAP_FLAT:
				endcap = BasicStroke.CAP_BUTT;
				break;
		}
	
		int miter;
		switch( m_style & PS_JOIN_MASK )
		{
			case PS_JOIN_ROUND:
				miter = BasicStroke.JOIN_ROUND;
				break;
			case PS_JOIN_BEVEL:
				miter = BasicStroke.JOIN_BEVEL;
				break;
			default:
			case PS_JOIN_MITER:
				miter = BasicStroke.JOIN_MITER;
				break;
		}

		if( !bNullStroke )
		{
			BasicStroke	stroke;
			if( dotPattern != null )
			{
				stroke = new BasicStroke( width, endcap, miter, context.getMiterLimit(), dotPattern, (float) 0.0 );
			}
			else
			{
				stroke = new BasicStroke( width, endcap, miter, context.getMiterLimit() );
			}
	
			g.setStroke( stroke );
		}
		else
		{
			g.setStroke( new NullStroke() );
		}
	}

	public String toString() {
		StringBuffer sb = new StringBuffer();
		sb.append("Pen: width=" + m_width); //$NON-NLS-1$
		sb.append(", color=" + m_color.toString()); //$NON-NLS-1$
		sb.append(", style: "); //$NON-NLS-1$
		switch( m_style & PS_STYLE_MASK )
		{
			case PS_NULL:
				sb.append("nullStroke"); //$NON-NLS-1$
				break;
			case PS_INSIDEFRAME:
			case PS_SOLID:
			default:
				sb.append("solid"); //$NON-NLS-1$
				break;
			case PS_DASH:
				sb.append("dash"); //$NON-NLS-1$
				break;
			case PS_DOT:
				sb.append("dot"); //$NON-NLS-1$
				break;
			case PS_DASHDOT:
				sb.append("dashDot"); //$NON-NLS-1$
				break;
			case PS_DASHDOTDOT:
				sb.append("dashDotDot"); //$NON-NLS-1$
				break;
		}
		switch( m_style & PS_ENDCAP_MASK )
		{
			default:
			case PS_ENDCAP_ROUND:
				sb.append(" roundCap"); //$NON-NLS-1$
				break;
			case PS_ENDCAP_SQUARE:
				sb.append(" squareCap"); //$NON-NLS-1$
				break;
			case PS_ENDCAP_FLAT:
				sb.append(" buttCap"); //$NON-NLS-1$
				break;
		}
		switch( m_style & PS_JOIN_MASK )
		{
			case PS_JOIN_ROUND:
				sb.append(" roundJoin"); //$NON-NLS-1$
				break;
			case PS_JOIN_BEVEL:
				sb.append(" bevelJoin"); //$NON-NLS-1$
				break;
			default:
			case PS_JOIN_MITER:
				sb.append(" miterJoin"); //$NON-NLS-1$
				break;
		}

		return sb.toString();
	}
}
@


1.1
log
@bugzilla 119319 gmf-head sshaw 060210 Support extensibility for RenderedImageFactory
@
text
@d2 1
a2 1
 * Copyright (c) 2003, 2004 IBM Corporation and others.
@


1.1.2.1
log
@[153901] gmf_R1_0_maintenance tmacdoug 060913 Sweep copyright files for anything changed in 2006
@
text
@d2 1
a2 1
 * Copyright (c) 2003, 2006 IBM Corporation and others.
@

