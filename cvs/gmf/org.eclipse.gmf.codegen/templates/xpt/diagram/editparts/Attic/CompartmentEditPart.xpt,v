head	1.11;
access;
symbols
	v20081022-1925:1.11
	v20081015-1925:1.11
	v20081008-1925:1.11
	v20081001-1925:1.11
	v20080924-1925:1.11
	v20080917-1925:1.11
	v20080911-1728:1.11
	v20080910-1520:1.11
	v20080903-1520:1.11
	v20080827-1520:1.11
	v20080813-1520:1.11
	v20080806-1520:1.11
	v20080207-0207:1.10.2.2
	v20071124-0000:1.10.2.2
	v20071003-0000:1.10
	v20070928-0000:1.10
	v20070921-0000:1.10
	v20070915-0000:1.10
	v20070903-0000:1.10
	v20070809-0000:1.10
	R2_0_maintenance:1.10.0.2
	R2_0:1.10
	R4_20:1.10
	v20070621-0000:1.10
	RC3_20:1.10
	v20070614-1400:1.10
	v20070608-1300:1.10
	v20070605-1400:1.10
	v20070601-1400:1.10
	v20070525-1500:1.10
	v20070520-1200:1.10
	v20070518-1300:1.9
	v20070504-1000:1.9
	v20070427-0600:1.9
	v20070420-1000:1.9
	v20070413-1300:1.9
	v20070405-1100:1.9
	v20070403-1500:1.9
	v20070330-1300:1.9
	v20060330-1300:1.9
	v20070322-1100:1.9
	v20060316-0600:1.9
	v20070307-0700:1.9
	v20070301-1200:1.9
	v20070228-2000:1.9
	v20070221-1500:1.9
	v20070208-1800:1.9
	v20070103-0300:1.2
	M4_20:1.2
	v20061222-1800:1.2
	v20061218-1200:1.2;
locks; strict;
comment	@# @;
expand	@k@;


1.11
date	2007.10.29.17.56.19;	author ashatalin;	state dead;
branches;
next	1.10;
commitid	494847261ec24567;

1.10
date	2007.05.18.21.17.18;	author atikhomirov;	state Exp;
branches
	1.10.2.1;
next	1.9;
commitid	2591464e17d14567;

1.9
date	2007.02.06.14.41.20;	author atikhomirov;	state Exp;
branches;
next	1.8;
commitid	30a345c893904567;

1.8
date	2007.02.06.14.36.55;	author atikhomirov;	state Exp;
branches;
next	1.7;
commitid	2e745c892874567;

1.7
date	2007.02.02.20.49.45;	author atikhomirov;	state Exp;
branches;
next	1.6;
commitid	50c945c3a3e84567;

1.6
date	2007.01.30.16.42.28;	author ashatalin;	state Exp;
branches;
next	1.5;
commitid	4e0e45bf75734567;

1.5
date	2007.01.29.19.30.15;	author ashatalin;	state Exp;
branches;
next	1.4;
commitid	7ac145be4b464567;

1.4
date	2007.01.29.18.45.58;	author ashatalin;	state Exp;
branches;
next	1.3;
commitid	3b8945be40e54567;

1.3
date	2007.01.29.18.09.13;	author ashatalin;	state Exp;
branches;
next	1.2;
commitid	21cf45be38464567;

1.2
date	2006.12.18.12.21.38;	author dstadnik;	state Exp;
branches;
next	1.1;
commitid	3d30458687d04567;

1.1
date	2006.12.15.17.46.19;	author dstadnik;	state Exp;
branches;
next	;
commitid	3a134582df6a4567;

1.10.2.1
date	2007.10.29.17.40.24;	author ashatalin;	state Exp;
branches;
next	1.10.2.2;
commitid	16b947261b074567;

1.10.2.2
date	2007.10.29.18.24.40;	author ashatalin;	state Exp;
branches;
next	;
commitid	14e4472625684567;


desc
@@


1.11
log
@[207784] - Add variation-points to xpt\diagram\editparts\*.xpt
@
text
@/*
 * Copyright (c) 2006, 2007 Borland Software Corporation
 * 
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    Dmitry Stadnik (Borland) - initial API and implementation
 */

«IMPORT "http://www.eclipse.org/gmf/2006/GenModel"»
«IMPORT "http://www.eclipse.org/emf/2002/Ecore"»
«EXTENSION xpt::diagram::editparts::Utils»

«DEFINE CompartmentEditPart FOR gmfgen::GenCompartment-»
«EXPAND xpt::Common::copyright FOR getDiagram().editorGen-»
package «getDiagram().editPartsPackageName»;

«EXPAND xpt::Common::generatedClassComment»
public class «editPartClassName» extends «EXPAND extendsList» {

	«EXPAND xpt::diagram::editparts::Common::visualIDConstant FOR this-»

	«EXPAND xpt::Common::generatedMemberComment»
	public «editPartClassName»(org.eclipse.gmf.runtime.notation.View view) {
		super(view);
	}

	«IF listLayout-»
	«EXPAND xpt::Common::generatedMemberComment»
	protected boolean hasModelChildrenChanged(org.eclipse.emf.common.notify.Notification evt) {
		return false;
	}
	«ENDIF-»

	«EXPAND xpt::Common::generatedMemberComment»
	public String getCompartmentName() {
		return «EXPAND xpt::Externalizer::accessorCall(i18nKeyForCompartmentTitle()) FOR getDiagram().editorGen»;
	}

«EXPAND createFigureMethod-»

«EXPAND editPoliciesMethod-»

	«IF isStoringChildPositions(node)-»
	«EXPAND xpt::Common::generatedMemberComment»
	protected void refreshVisuals() {
		super.refreshVisuals();
		refreshBounds();
	}

	«EXPAND xpt::Common::generatedMemberComment»
	protected void handleNotificationEvent(org.eclipse.emf.common.notify.Notification notification) {
		super.handleNotificationEvent(notification);
		Object feature = notification.getFeature();
		if (org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getSize_Width().equals(feature)
				|| org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getSize_Height().equals(feature)
				|| org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getLocation_X().equals(feature)
				|| org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getLocation_Y().equals(feature)) {
			refreshBounds();
		} 
	}

	«EXPAND xpt::Common::generatedMemberComment»
	protected void refreshBounds() {
		int x = ((Integer) getStructuralFeatureValue(
			org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getLocation_X())).intValue();
		int y = ((Integer) getStructuralFeatureValue(
			org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getLocation_Y())).intValue();
		int width = ((Integer) getStructuralFeatureValue(
			org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getSize_Width())).intValue();
		int height = ((Integer) getStructuralFeatureValue(
			org.eclipse.gmf.runtime.notation.NotationPackage.eINSTANCE.getSize_Height())).intValue();
		((org.eclipse.gef.GraphicalEditPart) getParent()).setLayoutConstraint(
			this, getFigure(), new org.eclipse.draw2d.geometry.Rectangle(x, y, width, height));
	}
	«ENDIF-»

	«EXPAND xpt::Common::generatedMemberComment»
	protected void setRatio(Double ratio) {
		«IF gmfgen::ViewmapLayoutType::UNKNOWN.value == node.getLayoutType().value-»
		if (getFigure().getParent().getLayoutManager() instanceof org.eclipse.gmf.runtime.draw2d.ui.figures.ConstrainedToolbarLayout) {
			super.setRatio(ratio);
		}
		«ELSE-»
		// nothing to do -- parent layout does not accept Double constraints as ratio
		// super.setRatio(ratio); 
		«ENDIF-»
	}
«EXPAND additions»
}
«ENDDEFINE»

«DEFINE extendsList FOR gmfgen::GenCompartment-»
«IF listLayout»org.eclipse.gmf.runtime.diagram.ui.editparts.ListCompartmentEditPart«ELSE»org.eclipse.gmf.runtime.diagram.ui.editparts.ShapeCompartmentEditPart«ENDIF-»
«ENDDEFINE»

«DEFINE createFigureMethod FOR gmfgen::GenCompartment-»
«IF !needsTitle-»
	«REM»By default titles are shown even if there are no TitleStyle, we need to switch it off«ENDREM»
	«EXPAND xpt::Common::generatedMemberComment»
	public org.eclipse.draw2d.IFigure createFigure() {
		org.eclipse.gmf.runtime.diagram.ui.figures.ResizableCompartmentFigure result =
			(org.eclipse.gmf.runtime.diagram.ui.figures.ResizableCompartmentFigure) super.createFigure();
		result.setTitleVisibility(false);
		return result;
	}
«ENDIF-»
«ENDDEFINE»

«DEFINE editPoliciesMethod FOR gmfgen::GenCompartment-»
	«EXPAND xpt::Common::generatedMemberComment»
	protected void createDefaultEditPolicies() {
		«EXPAND editPoliciesMethodBody-»
	}
«ENDDEFINE»

«DEFINE editPoliciesMethodBody FOR gmfgen::GenCompartment-»
		super.createDefaultEditPolicies();
		«IF canCollapse-»
		installEditPolicy(org.eclipse.gef.EditPolicy.PRIMARY_DRAG_ROLE,
			new org.eclipse.gmf.runtime.diagram.ui.editpolicies.ResizableCompartmentEditPolicy());
		«ENDIF-»
		«EXPAND xpt::diagram::editparts::Common::installSemanticEditPolicy-»
		«IF childNodes.size() > 0-»
		installEditPolicy(org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles.CREATION_ROLE,
			new org.eclipse.gmf.runtime.diagram.ui.editpolicies.CreationEditPolicy());
		installEditPolicy(org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles.DRAG_DROP_ROLE,
			new org.eclipse.gmf.runtime.diagram.ui.editpolicies.DragDropEditPolicy());
		«ENDIF-»
		«EXPAND xpt::diagram::editparts::Common::installCanonicalEditPolicy-»
		«EXPAND xpt::diagram::editparts::Common::behaviour FOR this-»
«ENDDEFINE»


«DEFINE additions FOR gmfgen::GenCompartment»«ENDDEFINE»

«DEFINE i18nAccessors FOR gmfgen::GenDiagram-»
«EXPAND internal_i18nAccessors FOREACH compartments»
«ENDDEFINE»

«DEFINE internal_i18nAccessors FOR gmfgen::GenCompartment-»
«IF null != title»«EXPAND xpt::Externalizer::accessorField(i18nKeyForCompartmentTitle())»«ENDIF-»
«ENDDEFINE»

«DEFINE i18nValues FOR gmfgen::GenDiagram-»
«EXPAND internal_i18nValues FOREACH compartments»
«ENDDEFINE»

«DEFINE internal_i18nValues FOR gmfgen::GenCompartment-»
«IF null != title»«EXPAND xpt::Externalizer::messageEntry(i18nKeyForCompartmentTitle(), title)»«ENDIF-»
«ENDDEFINE»@


1.10
log
@switching to nsURI format which uses year to denote model version (same way EMF does)
@
text
@@


1.10.2.1
log
@[207784] - Add variation-points to xpt\diagram\editparts\*.xpt
@
text
@d14 1
d18 80
a97 1
	«EXPAND diagram::editparts::CompartmentEditPart::Main-»
d100 40
d141 5
a145 1
«EXPAND impl::diagram::editparts::CompartmentEditPart::i18nAccessors-»
d149 5
a153 1
«EXPAND impl::diagram::editparts::CompartmentEditPart::i18nValues-»
@


1.10.2.2
log
@[207784] - Add variation-points to xpt\diagram\editparts\*.xpt
@
text
@a12 4
«REM»
	@@deprecated: This template file will be removed in GMF version 2.1
«ENDREM»

d14 1
@


1.9
log
@copyright years
@
text
@d13 1
a13 1
«IMPORT "http://www.eclipse.org/gmf/2005/GenModel/2.0"»
@


1.8
log
@[172375] more customization points in xpt templates
@
text
@d2 1
a2 1
 * Copyright (c) 2006 Borland Software Corporation
@


1.7
log
@[139733] akarjakina - lack of i18n support. More templates i18n-ed
@
text
@d22 1
a22 7
public class «editPartClassName» extends 
«IF listLayout-»
	org.eclipse.gmf.runtime.diagram.ui.editparts.ListCompartmentEditPart
«ELSE-»
	org.eclipse.gmf.runtime.diagram.ui.editparts.ShapeCompartmentEditPart
«ENDIF-»
 {
d43 1
a43 10
	«IF !needsTitle-»
	«REM»By default titles are shown even if there are no TitleStyle, we need to switch it off«ENDREM»
	«EXPAND xpt::Common::generatedMemberComment»
	public org.eclipse.draw2d.IFigure createFigure() {
		org.eclipse.gmf.runtime.diagram.ui.figures.ResizableCompartmentFigure result =
			(org.eclipse.gmf.runtime.diagram.ui.figures.ResizableCompartmentFigure) super.createFigure();
		result.setTitleVisibility(false);
		return result;
	}
	«ENDIF-»
d45 1
a45 17
	«EXPAND xpt::Common::generatedMemberComment»
	protected void createDefaultEditPolicies() {
		super.createDefaultEditPolicies();
		«IF canCollapse-»
		installEditPolicy(org.eclipse.gef.EditPolicy.PRIMARY_DRAG_ROLE,
			new org.eclipse.gmf.runtime.diagram.ui.editpolicies.ResizableCompartmentEditPolicy());
		«ENDIF-»
		«EXPAND xpt::diagram::editparts::Common::installSemanticEditPolicy-»
		«IF childNodes.size() > 0-»
		installEditPolicy(org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles.CREATION_ROLE,
			new org.eclipse.gmf.runtime.diagram.ui.editpolicies.CreationEditPolicy());
		installEditPolicy(org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles.DRAG_DROP_ROLE,
			new org.eclipse.gmf.runtime.diagram.ui.editpolicies.DragDropEditPolicy());
		«ENDIF-»
		«EXPAND xpt::diagram::editparts::Common::installCanonicalEditPolicy-»
		«EXPAND xpt::diagram::editparts::Common::behaviour FOR this-»
	}
d92 1
d96 44
@


1.6
log
@All the @@generated comments moved into a separate "define" statement.
@
text
@d46 1
a46 1
		return "«title»";
d124 16
@


1.5
log
@[172032] - Do not generate ??CanonicalEditPolicy for pure-design elements
@
text
@d21 1
a21 3
/**
 * @@generated
 */
d32 1
a32 3
	/**
	 * @@generated
	 */
d38 1
a38 3
	/**
	 * @@generated
	 */
d44 1
a44 3
	/**
	 * @@generated
	 */
d51 1
a51 3
	/**
	 * @@generated
	 */
d60 1
a60 3
	/**
	 * @@generated
	 */
d79 1
a79 3
	/**
	 * @@generated
	 */
d85 1
a85 3
	/**
	 * @@generated
	 */
d97 1
a97 3
	/**
	 * @@generated
	 */
d112 1
a112 3
	/**
	 * @@generated
	 */
@


1.4
log
@[167466] - Do not generate ??ItemSemanticEditPolicy for pure-design elements
@
text
@a84 4
			«IF needsCanonicalEditPolicy()-»
		installEditPolicy(org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles.CANONICAL_ROLE,
			new «getCanonicalEditPolicyQualifiedClassName()»());
			«ENDIF-»
d86 1
@


1.3
log
@[167466] - Do not generate ??ItemSemanticEditPolicy for pure-design elements
@
text
@d79 1
a79 1
		«EXPAND installSemanticEditPolicy-»
a146 6
«ENDDEFINE»

«DEFINE installSemanticEditPolicy FOR gmfgen::GenCompartment-»
	«IF null != node.modelFacet-»
		«EXPAND xpt::diagram::editparts::Common::installSemanticEditPolicy-»
	«ENDIF-»
@


1.2
log
@add copyright headers
@
text
@d79 1
a79 2
		installEditPolicy(org.eclipse.gmf.runtime.diagram.ui.editpolicies.EditPolicyRoles.SEMANTIC_ROLE,
			new «getItemSemanticEditPolicyQualifiedClassName()»());
d148 6
@


1.1
log
@rewrite compartment edit part template in xpand
@
text
@d1 12
@

