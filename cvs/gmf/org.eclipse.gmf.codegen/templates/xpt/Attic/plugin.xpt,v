head	1.23;
access;
symbols
	v20081022-1925:1.23
	v20081015-1925:1.23
	v20081008-1925:1.23
	v20081001-1925:1.23
	v20080924-1925:1.23
	v20080917-1925:1.23
	v20080911-1728:1.23
	v20080910-1520:1.23
	v20080903-1520:1.23
	v20080827-1520:1.23
	v20080813-1520:1.23
	v20080806-1520:1.23
	v20070608-1300:1.20
	v20070605-1400:1.20
	v20070601-1400:1.20
	v20070525-1500:1.20
	v20070520-1200:1.19
	v20070518-1300:1.18
	v20070504-1000:1.17
	v20070427-0600:1.17
	v20070420-1000:1.17
	v20070413-1300:1.17
	v20070405-1100:1.17
	v20070403-1500:1.17
	v20070330-1300:1.17
	v20060330-1300:1.17
	v20070322-1100:1.15
	v20060316-0600:1.14
	v20070307-0700:1.14
	v20070301-1200:1.14
	v20070228-2000:1.14
	v20070221-1500:1.14
	v20070208-1800:1.14;
locks; strict;
comment	@# @;
expand	@k@;


1.23
date	2007.06.13.17.27.13;	author dstadnik;	state dead;
branches;
next	1.22;
commitid	7428467028f04567;

1.22
date	2007.06.12.12.20.13;	author dstadnik;	state Exp;
branches;
next	1.21;
commitid	5d34466e8f7c4567;

1.21
date	2007.06.12.11.56.29;	author dstadnik;	state Exp;
branches;
next	1.20;
commitid	7fc6466e89e84567;

1.20
date	2007.05.22.18.18.54;	author ashatalin;	state Exp;
branches;
next	1.19;
commitid	5a1d465333ad4567;

1.19
date	2007.05.18.21.17.18;	author atikhomirov;	state Exp;
branches;
next	1.18;
commitid	2591464e17d14567;

1.18
date	2007.05.14.14.27.04;	author dstadnik;	state Exp;
branches;
next	1.17;
commitid	38ba464871b24567;

1.17
date	2007.03.29.13.04.52;	author dstadnik;	state Exp;
branches;
next	1.16;
commitid	6fc7460bb9724567;

1.16
date	2007.03.28.08.49.38;	author dstadnik;	state Exp;
branches;
next	1.15;
commitid	2240460a2c174567;

1.15
date	2007.03.16.16.40.13;	author dstadnik;	state Exp;
branches;
next	1.14;
commitid	5ac345fac86b4567;

1.14
date	2007.02.08.19.31.57;	author atikhomirov;	state Exp;
branches;
next	1.13;
commitid	2f8045cb7a9f4567;

1.13
date	2007.02.08.18.06.51;	author atikhomirov;	state Exp;
branches;
next	1.12;
commitid	56b45cb66aa4567;

1.12
date	2007.02.07.00.52.33;	author atikhomirov;	state Exp;
branches;
next	1.11;
commitid	140645c922d04567;

1.11
date	2007.02.07.00.37.49;	author atikhomirov;	state Exp;
branches;
next	1.10;
commitid	c5d45c91f504567;

1.10
date	2007.02.05.14.39.17;	author atikhomirov;	state Exp;
branches;
next	1.9;
commitid	418145c741944567;

1.9
date	2007.01.11.15.30.00;	author dstadnik;	state Exp;
branches;
next	1.8;
commitid	3f6d45a657f64567;

1.8
date	2007.01.09.14.47.11;	author dstadnik;	state Exp;
branches;
next	1.7;
commitid	702945a3aae64567;

1.7
date	2007.01.09.13.05.47;	author dstadnik;	state Exp;
branches;
next	1.6;
commitid	33ac45a3932b4567;

1.6
date	2007.01.08.18.09.51;	author dstadnik;	state Exp;
branches;
next	1.5;
commitid	78dd45a288ee4567;

1.5
date	2007.01.05.17.57.25;	author dstadnik;	state Exp;
branches;
next	1.4;
commitid	12f7459e91854567;

1.4
date	2007.01.05.13.33.03;	author dstadnik;	state Exp;
branches;
next	1.3;
commitid	5a14459e538f4567;

1.3
date	2007.01.05.11.44.00;	author dstadnik;	state Exp;
branches;
next	1.2;
commitid	5fa2459e3a004567;

1.2
date	2007.01.04.15.32.29;	author dstadnik;	state Exp;
branches;
next	1.1;
commitid	54b1459d1e0c4567;

1.1
date	2007.01.03.21.40.26;	author dstadnik;	state Exp;
branches;
next	;
commitid	254b459c22ca4567;


desc
@@


1.23
log
@group plugin templates in one folder
@
text
@/*
 * Copyright (c) 2007 Borland Software Corporation
 * 
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    Dmitry Stadnik (Borland) - initial API and implementation
 */

«IMPORT "http://www.eclipse.org/gmf/2006/GenModel"»
«IMPORT "http://www.eclipse.org/emf/2002/Ecore"»
«EXTENSION xpt::diagram::Utils»
«EXTENSION xpt::GenEditorGenerator»

«DEFINE plugin FOR gmfgen::GenPlugin-»
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
«EXPAND xpt::Common::xcopyright FOR editorGen-»
<plugin>

   <extension point="org.eclipse.team.core.fileTypes">
      «EXPAND xpt::Common::xmlGeneratedTag»
      <fileTypes
         type="text"
         extension="«editorGen.diagramFileExtension»">
      </fileTypes>
   </extension>

   <extension point="org.eclipse.emf.ecore.extension_parser">
      «EXPAND xpt::Common::xmlGeneratedTag»
      <parser
         type="«editorGen.diagramFileExtension»"
         class="org.eclipse.gmf.runtime.emf.core.resources.GMFResourceFactory">
      </parser>
   </extension>

«EXPAND xpt::editor::extensions::extensions FOR editorGen-»
«EXPAND menu-»
«EXPAND validation FOR editorGen.diagram-»
«EXPAND metrics FOR editorGen.metrics-»
«EXPAND xpt::diagram::preferences::extensions::extensions FOR editorGen.diagram-»
«EXPAND xpt::propsheet::extensions::extensions FOR editorGen.propertySheet-»
«EXPAND xpt::providers::extensions::extensions FOR editorGen.diagram-»
«EXPAND xpt::navigator::extensions::extensions FOR editorGen.navigator-»
«EXPAND xpt::application::extensions::extensions FOR editorGen.application-»
«EXPAND xpt::ConstraintProviders::extensions FOR editorGen-»
«EXPAND xpt::diagram::updater::extensions::extensions FOR editorGen.diagramUpdater-»
«EXPAND additions-»
</plugin>
«ENDDEFINE»

«DEFINE menu FOR gmfgen::GenPlugin-»

   <extension point="org.eclipse.gmf.runtime.common.ui.services.action.globalActionHandlerProviders">
      «EXPAND xpt::Common::xmlGeneratedTag»
      <GlobalActionHandlerProvider
         class="org.eclipse.gmf.runtime.diagram.ui.providers.DiagramGlobalActionHandlerProvider"
         id="«editorGen.modelID»Presentation">
         <Priority name="Lowest"/>
         <ViewId id="«editorGen.editor.iD»">
            <ElementType class="org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart">
               <GlobalActionId actionId="delete"/>
            </ElementType>
            <ElementType class="org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramEditPart">
               <GlobalActionId actionId="save"/>
            </ElementType>
         </ViewId>
      </GlobalActionHandlerProvider>
«IF printingEnabled-»
      <GlobalActionHandlerProvider
         class="org.eclipse.gmf.runtime.diagram.ui.printing.render.providers.DiagramWithPrintGlobalActionHandlerProvider"
         id="«editorGen.modelID»PresentationPrint">
         <Priority name="Lowest"/>
         <ViewId id="«editorGen.editor.iD»">
            <ElementType class="org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart">
               <GlobalActionId actionId="print"/>
            </ElementType>
         </ViewId>
      </GlobalActionHandlerProvider>
«ENDIF-»
«IF null == editorGen.application-»
      <GlobalActionHandlerProvider
         class="org.eclipse.gmf.runtime.diagram.ui.providers.ide.providers.DiagramIDEGlobalActionHandlerProvider"
         id="«editorGen.modelID»PresentationIDE">
         <Priority name="Lowest"/>
         <ViewId id="«editorGen.editor.iD»">
            <ElementType class="org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart">
               <GlobalActionId actionId="bookmark"/>
            </ElementType>
         </ViewId>
      </GlobalActionHandlerProvider>
«ENDIF-»
      <GlobalActionHandlerProvider
            class="org.eclipse.gmf.runtime.diagram.ui.render.providers.DiagramUIRenderGlobalActionHandlerProvider"
            id="«editorGen.modelID»Render">
         <Priority name="Lowest"/>
         <ViewId id="«editorGen.editor.iD»">
            <ElementType class="org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart">
               <GlobalActionId actionId="cut"/>
               <GlobalActionId actionId="copy"/>
               <GlobalActionId actionId="paste"/>
            </ElementType>
         </ViewId>
      </GlobalActionHandlerProvider>
   </extension>

   <extension point="org.eclipse.gmf.runtime.common.ui.services.action.contributionItemProviders">
      «EXPAND xpt::Common::xmlGeneratedTag»
«IF printingEnabled-»
      <contributionItemProvider class="«editorGen.diagram.getContributionItemProviderQualifiedClassName()»">
         <Priority name="Low">
         </Priority>
         <partContribution id="«editorGen.editor.iD»">
            <partAction menubarPath="/file/print" id="printPreviewAction">
            </partAction>
         </partContribution>
      </contributionItemProvider>
«ENDIF-»
      <contributionItemProvider
            class="org.eclipse.gmf.runtime.diagram.ui.providers.DiagramContributionItemProvider"
            checkPluginLoaded="false">
         <Priority name="Low"/>
«FOREACH getElements(editorGen.diagram) AS e-»
«EXPAND removeContributions FOR e-»
«EXPAND removeLabelContributions FOR e-»
«ENDFOREACH-»
      </contributionItemProvider>
   </extension>
«ENDDEFINE»

«DEFINE removeLabelContributions FOR gmfgen::GenCommonBase»«ENDDEFINE»

«DEFINE removeLabelContributions FOR gmfgen::GenNode-»
«FOREACH labels AS label-»
«EXPAND removeContributions FOR label-»
«ENDFOREACH-»
«ENDDEFINE»

«DEFINE removeLabelContributions FOR gmfgen::GenLink-»
«FOREACH labels AS label-»
«EXPAND removeContributions FOR label-»
«ENDFOREACH-»
«ENDDEFINE»

«DEFINE removeContributions FOR gmfgen::GenCommonBase»«ENDDEFINE»

«DEFINE removeContributions FOR gmfgen::GenNode-»
«EXPAND removeDeleteFromDiagramContribution(this) FOR modelFacet-»
«ENDDEFINE»

«DEFINE removeContributions FOR gmfgen::GenLink-»
«EXPAND removeAllDeleteContributions(this) FOR modelFacet-»
«EXPAND removeDeleteFromDiagramContribution(this) FOR modelFacet-»
«ENDDEFINE»

«DEFINE removeContributions FOR gmfgen::GenNodeLabel-»
«EXPAND removeDeleteFromDiagramContribution(this) FOR node.modelFacet-»
«ENDDEFINE»

«DEFINE removeContributions FOR gmfgen::GenExternalNodeLabel-»
«EXPAND removeAllDeleteContributions-»
«ENDDEFINE»

«DEFINE removeContributions FOR gmfgen::GenLinkLabel-»
«EXPAND removeAllDeleteContributions-»
«ENDDEFINE»

«DEFINE removeAllDeleteContributions FOR gmfgen::GenCommonBase-»
         <popupContribution class="org.eclipse.gmf.runtime.diagram.ui.providers.DiagramContextMenuProvider">
            <popupStructuredContributionCriteria objectClass="«getEditPartQualifiedClassName()»"/>
            <popupPredefinedItem id="deleteFromDiagramAction" remove="true"/>
            <popupPredefinedItem id="deleteFromModelAction" remove="true"/>
         </popupContribution>
«ENDDEFINE»

«DEFINE removeAllDeleteContributions(gmfgen::GenCommonBase element) FOR gmfgen::ModelFacet»«ENDDEFINE»

«DEFINE removeAllDeleteContributions(gmfgen::GenCommonBase element) FOR gmfgen::FeatureLinkModelFacet-»
         <popupContribution class="org.eclipse.gmf.runtime.diagram.ui.providers.DiagramContextMenuProvider">
            <popupStructuredContributionCriteria objectClass="«element.getEditPartQualifiedClassName()»"/>
            <popupAction path="/editGroup" id="deleteFromModelAction"/>
«IF element.getDiagram().synchronized-»
            <popupPredefinedItem id="deleteFromDiagramAction" remove="true"/>
«ENDIF-»
         </popupContribution>
«ENDDEFINE»

«DEFINE removeDeleteFromDiagramContribution(gmfgen::GenCommonBase element) FOR gmfgen::ModelFacet»«ENDDEFINE»

«DEFINE removeDeleteFromDiagramContribution(gmfgen::GenCommonBase element) FOR gmfgen::TypeModelFacet-»
«IF !element.getDiagram().synchronized-»
         <popupContribution class="org.eclipse.gmf.runtime.diagram.ui.providers.DiagramContextMenuProvider">
            <popupStructuredContributionCriteria objectClass="«element.getEditPartQualifiedClassName()»"/>
            <popupPredefinedItem id="deleteFromDiagramAction" remove="true"/>
         </popupContribution>
«ENDIF-»
«ENDDEFINE»

«DEFINE metrics FOR gmfgen::GenMetricContainer-»
«IF metrics.size() > 0-»

	<extension id="MetricContributionItemProvider" name="Metrics"
		point="org.eclipse.gmf.runtime.common.ui.services.action.contributionItemProviders">
        «EXPAND xpt::Common::xmlGeneratedTag»
		<contributionItemProvider checkPluginLoaded="true" class="«editorGen.diagram.getMetricProviderQualifiedClassName()»">
			<Priority name="«editorGen.diagram.metricProviderPriority»"/>		
			<partContribution id="«editorGen.editor.iD»">
				<partMenuGroup menubarPath="/diagramMenu/" id="validationGroup"/>
				<partAction id="metricsAction" menubarPath="/diagramMenu/validationGroup"/>
			</partContribution>		
		</contributionItemProvider>
	</extension>

   <extension point="org.eclipse.ui.views">
      «EXPAND xpt::Common::xmlGeneratedTag»
   	  <view class="«editorGen.diagram.getMetricProviderQualifiedClassName()»$ResultView"
			id="«editorGen.diagram.getMetricViewID()»"
			name="«editorGen.modelID» Diagram Metrics"/>
   </extension>
«ENDIF-»
«ENDDEFINE»

«DEFINE validation FOR gmfgen::GenDiagram-»
«IF validationEnabled || editorGen.hasAudits()-»
«IF validationEnabled-»

   <extension id="ValidationContributionItemProvider" name="Validation"
      point="org.eclipse.gmf.runtime.common.ui.services.action.contributionItemProviders">
      «EXPAND xpt::Common::xmlGeneratedTag»
      <contributionItemProvider
         class="«getValidationProviderQualifiedClassName()»">
         <Priority name="«validationProviderPriority»"/>
         <partContribution id="«editorGen.editor.iD»">
            <partMenuGroup menubarPath="/diagramMenu/" id="validationGroup"/>
            <partAction id="validateAction" menubarPath="/diagramMenu/validationGroup"/>
         </partContribution>
      </contributionItemProvider>
   </extension>
«ENDIF-»
«IF null == editorGen.application-»

   <extension point="org.eclipse.gmf.runtime.common.ui.services.markerNavigationProviders">
      «EXPAND xpt::Common::xmlGeneratedTag»
      <MarkerNavigationProvider class="«getMarkerNavigationProviderQualifiedClassName()»">
         <MarkerType name="«editorGen.plugin.iD + "." + getValidationDiagnosticMarkerType()»"/>
         <Priority name="«markerNavigationProviderPriority»"/>
      </MarkerNavigationProvider>
   </extension>

   <extension id="«getValidationDiagnosticMarkerType()»" name="«editorGen.plugin.name» problems" point="org.eclipse.core.resources.markers">
      «EXPAND xpt::Common::xmlGeneratedTag»
      <super type="org.eclipse.core.resources.problemmarker"/>
      <super type="org.eclipse.gmf.runtime.common.ui.services.marker"/>
      <persistent value="true"/>
   </extension>   
«ENDIF-»
«IF validationDecorators-»

   <extension id="validationDecoratorProvider" name="ValidationDecorations" point="org.eclipse.gmf.runtime.diagram.ui.decoratorProviders">
      «EXPAND xpt::Common::xmlGeneratedTag»
      <decoratorProvider class="«getValidationDecoratorProviderQualifiedClassName()»">
         <Priority name="«validationDecoratorProviderPriority»"/>
         <object class="org.eclipse.gmf.runtime.diagram.ui.editparts.IPrimaryEditPart(org.eclipse.gmf.runtime.diagram.ui)" id="PRIMARY_VIEW"/>
         <context decoratorTargets="PRIMARY_VIEW"/>
      </decoratorProvider>
   </extension>
«ENDIF-»
«ENDIF-»
«ENDDEFINE»

«DEFINE additions FOR gmfgen::GenPlugin»«ENDDEFINE»
@


1.22
log
@move providers out of diagram folder
@
text
@@


1.21
log
@fix provider qname accessor name
@
text
@d46 1
a46 1
«EXPAND xpt::diagram::providers::extensions::extensions FOR editorGen.diagram-»
@


1.20
log
@F5 triggering update of selected element added
@
text
@d264 1
a264 1
      <decoratorProvider class="«getValidationDecoratorProviderQualifedClassName()»">
@


1.19
log
@switching to nsURI format which uses year to denote model version (same way EMF does)
@
text
@d50 1
@


1.18
log
@[178958] Provide validation decorations in RCP diagram editors
@
text
@d13 1
a13 1
«IMPORT "http://www.eclipse.org/gmf/2005/GenModel/2.0"»
@


1.17
log
@move actions declarations to extensions.xpt of editor
@
text
@d232 1
a232 1
      <contributionItemProvider checkPluginLoaded="true"
d258 1
a270 1
«ENDIF-»
@


1.16
log
@[168660] Support shortcuts in RCP applications
@
text
@a55 30
   <extension point="org.eclipse.ui.popupMenus">
      «EXPAND xpt::Common::xmlGeneratedTag»
«IF editorGen.diagram.generateCreateShortcutAction()-»
      <objectContribution
            adaptable="false"
            id="«iD».ui.objectContribution.«editorGen.diagram.editPartClassName»1"
            objectClass="«editorGen.diagram.getEditPartQualifiedClassName()»">
         <action
               class="«editorGen.diagram.getCreateShortcutActionQualifiedClassName()»"
               enablesFor="1"
               id="«editorGen.diagram.getCreateShortcutActionQualifiedClassName()»ID"
               label="%createShortcutActionLabel"
               menubarPath="additions">
         </action>
      </objectContribution>                      
«ENDIF-»
      <objectContribution
            adaptable="false"
            id="«iD».ui.objectContribution.«editorGen.diagram.editPartClassName»2"
            objectClass="«editorGen.diagram.getEditPartQualifiedClassName()»">
         <action
               class="«editorGen.diagram.getLoadResourceActionQualifiedClassName()»"
               enablesFor="1"
               id="«editorGen.diagram.getLoadResourceActionQualifiedClassName()»ID"
               label="%loadResourceActionLabel"
               menubarPath="additions">
         </action>
      </objectContribution>           
   </extension>

@


1.15
log
@[168661] Support init fiagram in RCP
@
text
@d58 1
a58 1
«IF null == editorGen.application && editorGen.diagram.generateCreateShortcutAction()-»
@


1.14
log
@get rid of GenRuleContainerBase
@
text
@a57 14
«IF null == editorGen.application && editorGen.diagram.generateInitDiagramAction()-»
      <objectContribution
            id="«iD».ui.objectContribution.IFile1"
            nameFilter="*.«editorGen.domainFileExtension»"
            objectClass="org.eclipse.core.resources.IFile">
         <action
               label="%initDiagramActionLabel"
               class="«editorGen.diagram.getInitDiagramFileActionQualifiedClassName()»"
               menubarPath="additions"
               enablesFor="1"
               id="«editorGen.diagram.getInitDiagramFileActionQualifiedClassName()»ID">
         </action>
      </objectContribution>
«ENDIF-»
@


1.13
log
@refactor GenAuditContainer: flatten hierarchy as it fits most for templates we write
@
text
@d251 3
a253 3
		<contributionItemProvider checkPluginLoaded="true" class="«editor.diagram.getMetricProviderQualifiedClassName()»">
			<Priority name="«editor.diagram.metricProviderPriority»"/>		
			<partContribution id="«editor.editor.iD»">
d262 3
a264 3
   	  <view class="«editor.diagram.getMetricProviderQualifiedClassName()»$ResultView"
			id="«editor.diagram.getMetricViewID()»"
			name="«editor.modelID» Diagram Metrics"/>
@


1.12
log
@complete migration of plugin.xml template to xpand version - lite version updated to use same template
@
text
@d16 1
d270 1
a270 1
«IF validationEnabled || (null != editorGen.audits && editorGen.audits.getAllAuditRules().size() > 0)-»
@


1.11
log
@complete migration of plugin.xml template to xpand version - constraint providers rewritten
@
text
@d24 1
a24 1
      <?gmfgen generated="true"?>
d32 1
a32 1
      <?gmfgen generated="true"?>
d48 2
a49 1
«EXPAND constraintProviders FOR editorGen-»
d56 1
a56 1
      <?gmfgen generated="true"?>
d100 1
a100 1
      <?gmfgen generated="true"?>
d153 1
a153 1
      <?gmfgen generated="true"?>
d249 1
a249 1
		<?gmfgen generated="true"?>
d259 3
a261 3
	<extension point="org.eclipse.ui.views">
	    <?gmfgen generated="true"?>
   		<view class="«editor.diagram.getMetricProviderQualifiedClassName()»$ResultView"
d264 1
a264 1
	</extension>
d274 1
a274 1
      <?gmfgen generated="true"?>
d288 1
a288 1
      <?gmfgen generated="true"?>
d296 1
a296 1
      <?gmfgen generated="true"?>
d304 1
a304 1
      <?gmfgen generated="true"?>
d316 1
a316 61
«DEFINE generatedTag FOR Object»<?gmfgen generated="true"?>«ENDDEFINE»

«DEFINE _pathMap FOR gmfgen::GenAuditContainer»«FOREACH getPath() AS p SEPARATOR "/" »«escapeXML(idMap(p))»«ENDFOREACH»«ENDDEFINE»

«DEFINE constraintProviders FOR gmfgen::GenEditorGenerator-»
«IF hasAudits()-»
   <extension point="org.eclipse.emf.validation.constraintProviders">
      «EXPAND generatedTag»
      «FOREACH audits.getAllAuditContainers() AS c-»
      <category id="«EXPAND _pathMap FOR c»" mandatory="false" name="«IF c.name != null»«escapeXML(c.name)»«ELSE»«EXPAND _pathMap FOR c»«ENDIF»">
         <![CDATA[«c.description != null ? c.description : ""»]]>
      </category>
      «ENDFOREACH»
      <constraintProvider cache="true">
«FOREACH audits.getAllTargetedModelPackages() AS p-»
         <package namespaceUri="«p.ecorePackage.nsURI»"/>
«ENDFOREACH-»
«FOREACH audits.getAllAuditContainers() AS c-»
         <constraints categories="«EXPAND _pathMap FOR c»">
         «FOREACH c.audits.select(a | a.target != null && a.target.getTargetClass() != null) AS audit-»
         <constraint id="«escapeXML(audit.id)»"
            «IF audit.requiresConstraintAdapter»lang="Java" class="«audit.getConstraintAdapterQualifiedClassName()»"«ELSE»lang="OCL"«ENDIF»
            name="«escapeXML(audit.name != null ? audit.name : audit.id)»"
            mode="«IF audit.useInLiveMode»Live«ELSE»Batch«ENDIF»"
            severity="«audit.severity.name»" statusCode="200">
            «IF !audit.requiresConstraintAdapter»<![CDATA[«audit.rule != null ? audit.rule.body : ""»]]>«ENDIF»
            <description><![CDATA[«audit.description != null ? audit.description : ""»]]></description>
            <message><![CDATA[«IF audit.message != null»«audit.message»«ELSE»«audit.name != null ? audit.name : audit.id» audit violated«ENDIF»]]></message>
            <target class="«audit.target.getTargetClassModelQualifiedName()»"/>
         </constraint>
         «ENDFOREACH-»
         </constraints>
«ENDFOREACH-»
      </constraintProvider>
   </extension>

   <extension point="org.eclipse.emf.validation.constraintBindings">
      «EXPAND generatedTag»
      «LET getAllRulesWithTargetAndContextID(audits) AS rules-»
      «FOREACH rules.collect(r | r.target.getClientContextID()).toSet() AS ctxId-»
      <clientContext default="false" id="«plugin.iD».«ctxId»">
         <selector class="«rules.select(r | r.target.getClientContextID() == ctxId).getContextSelectorQualifiedClassName().first()»"/>
      </clientContext>
      <binding context="«plugin.iD».«ctxId»">
         «FOREACH rules.select(r | r.target.getClientContextID() == ctxId) AS rule-»
         <constraint ref="«plugin.iD».«escapeXML(rule.id)»"/>
         «ENDFOREACH-»
      </binding>
      «ENDFOREACH-»
      «ENDLET-»
   </extension>
«IF diagram.liveValidationUIFeedback»
   <extension point="org.eclipse.emf.validation.ui.UIRegisteredClientContext">
      «EXPAND generatedTag»
      «FOREACH getAllRulesWithTargetAndContextID(audits).collect(r | r.target.getClientContextID()).toSet() AS ctxId»
      <clientContext id="«plugin.iD».«ctxId»"/>
      «ENDFOREACH-»
   </extension>
«ENDIF-»
«ENDIF-»
«ENDDEFINE»@


1.10
log
@property sheet classes are generated with xpand now
@
text
@d48 1
a48 1
«getConstraintProviders(editorGen.plugin)»
d314 62
@


1.9
log
@[169964] Missing dependency on generating RCP app with validation
@
text
@d44 1
a44 1
«EXPAND xpt::diagram::properties::extensions::extensions FOR editorGen.propertySheet-»
@


1.8
log
@do not generate whitespace
@
text
@d269 16
a299 15
«IF validationEnabled-»

   <extension id="ValidationContributionItemProvider" name="Validation"
      point="org.eclipse.gmf.runtime.common.ui.services.action.contributionItemProviders">
      <?gmfgen generated="true"?>
      <contributionItemProvider checkPluginLoaded="true"
         class="«getValidationProviderQualifiedClassName()»">
         <Priority name="«validationProviderPriority»"/>
         <partContribution id="«editorGen.editor.iD»">
            <partMenuGroup menubarPath="/diagramMenu/" id="validationGroup"/>
            <partAction id="validateAction" menubarPath="/diagramMenu/validationGroup"/>
         </partContribution>
      </contributionItemProvider>
   </extension>
«ENDIF-»
d312 1
@


1.7
log
@do not generate whitespace
@
text
@d52 2
a53 1
«DEFINE menu FOR gmfgen::GenPlugin»
d56 1
a56 1
      «IF null == editorGen.application && editorGen.diagram.generateInitDiagramAction()-»
d69 2
a70 2
      «ENDIF-»
      «IF null == editorGen.application && editorGen.diagram.generateCreateShortcutAction()-»
d83 1
a83 1
      «ENDIF-»
d113 1
a113 1
      «IF printingEnabled-»
d124 2
a125 2
      «ENDIF-»
      «IF null == editorGen.application-»
d136 1
a136 1
      «ENDIF-»
d153 1
a153 1
      «IF printingEnabled-»
d162 1
a162 1
      «ENDIF-»
d167 4
a170 4
         «FOREACH getElements(editorGen.diagram) AS e-»
            «EXPAND removeContributions FOR e-»
            «EXPAND removeLabelContributions FOR e-»
         «ENDFOREACH-»
d175 1
a175 2
«DEFINE removeLabelContributions FOR gmfgen::GenCommonBase»
«ENDDEFINE»
d177 4
a180 4
«DEFINE removeLabelContributions FOR gmfgen::GenNode»
	«FOREACH labels AS label-»
		«EXPAND removeContributions FOR label-»
	«ENDFOREACH-»
d183 4
a186 4
«DEFINE removeLabelContributions FOR gmfgen::GenLink»
	«FOREACH labels AS label-»
		«EXPAND removeContributions FOR label-»
	«ENDFOREACH-»
d189 1
a189 2
«DEFINE removeContributions FOR gmfgen::GenCommonBase»
«ENDDEFINE»
d191 2
a192 2
«DEFINE removeContributions FOR gmfgen::GenNode»
	«EXPAND removeDeleteFromDiagramContribution(this) FOR modelFacet-»
d195 3
a197 3
«DEFINE removeContributions FOR gmfgen::GenLink»
	«EXPAND removeAllDeleteContributions(this) FOR modelFacet-»
	«EXPAND removeDeleteFromDiagramContribution(this) FOR modelFacet-»
d200 2
a201 2
«DEFINE removeContributions FOR gmfgen::GenNodeLabel»
	«EXPAND removeDeleteFromDiagramContribution(this) FOR node.modelFacet-»
d205 1
a205 1
	«EXPAND removeAllDeleteContributions-»
d209 1
a209 1
	«EXPAND removeAllDeleteContributions-»
d212 1
a212 1
«DEFINE removeAllDeleteContributions FOR gmfgen::GenCommonBase»
d220 1
a220 2
«DEFINE removeAllDeleteContributions(gmfgen::GenCommonBase element) FOR gmfgen::ModelFacet»
«ENDDEFINE»
d222 1
a222 1
«DEFINE removeAllDeleteContributions(gmfgen::GenCommonBase element) FOR gmfgen::FeatureLinkModelFacet»
d226 1
a226 1
            «IF element.getDiagram().synchronized-»
d228 1
a228 1
            «ENDIF-»
d232 1
a232 2
«DEFINE removeDeleteFromDiagramContribution(gmfgen::GenCommonBase element) FOR gmfgen::ModelFacet»
«ENDDEFINE»
d234 2
a235 2
«DEFINE removeDeleteFromDiagramContribution(gmfgen::GenCommonBase element) FOR gmfgen::TypeModelFacet»
   «IF !element.getDiagram().synchronized-»
d240 1
a240 1
   «ENDIF-»
d243 3
a245 2
«DEFINE metrics FOR gmfgen::GenMetricContainer»
    «IF metrics.size() > 0-»
d264 1
a264 1
    «ENDIF-»
d267 3
a269 2
«DEFINE validation FOR gmfgen::GenDiagram»
   «IF validationEnabled || (null != editorGen.audits && editorGen.audits.getAllAuditRules().size() > 0)-»
d277 1
d284 2
a285 1
   «IF validationEnabled-»
d298 3
a300 2
   «ENDIF-»
   «IF validationDecorators-»
d309 2
a310 2
   «ENDIF-»
   «ENDIF-»
@


1.6
log
@rewrite plugin.xml template in xpand
@
text
@d39 10
a48 10
   «EXPAND xpt::editor::extensions::extensions FOR editorGen-»
   «EXPAND menu-»
   «EXPAND validation FOR editorGen.diagram-»
   «EXPAND metrics FOR editorGen.metrics-»
   «EXPAND xpt::diagram::preferences::extensions::extensions FOR editorGen.diagram-»
   «EXPAND xpt::diagram::properties::extensions::extensions FOR editorGen.propertySheet-»
   «EXPAND xpt::diagram::providers::extensions::extensions FOR editorGen.diagram-»
   «EXPAND xpt::navigator::extensions::extensions FOR editorGen.navigator-»
   «EXPAND xpt::application::extensions::extensions FOR editorGen.application-»
   «getConstraintProviders(editorGen.plugin)»
@


1.5
log
@add ui contributions extension point
@
text
@d48 1
d197 1
a197 1
	«EXPAND removeAllDeleteContribution(this) FOR modelFacet-»
a212 3
«DEFINE removeDeleteFromDiagramContribution(gmfgen::GenCommonBase element) FOR gmfgen::ModelFacet»
«ENDDEFINE»

@


1.4
log
@rewrite providers extensions in xpand
@
text
@d15 1
d40 1
a40 2
   «EXPAND contextMenu-»
   «EXPAND providers FOR editorGen.diagram-»
d51 1
a51 1
«DEFINE contextMenu FOR gmfgen::GenPlugin»
a147 1
«ENDDEFINE»
d149 1
a149 2
«DEFINE providers FOR gmfgen::GenDiagram»
   <extension point="org.eclipse.gmf.runtime.diagram.core.viewProviders">
d151 19
a169 6
      <viewProvider class="«getNotationViewProviderQualifiedClassName()»">
         <Priority name="«notationViewProviderPriority»"/>
         <context viewClass="org.eclipse.gmf.runtime.notation.Diagram" semanticHints="«editorGen.modelID»"/>
         <context viewClass="org.eclipse.gmf.runtime.notation.Node" semanticHints=""/>
         <context viewClass="org.eclipse.gmf.runtime.notation.Edge" semanticHints=""/>
      </viewProvider>
d171 32
d204 18
a221 6
   <extension point="org.eclipse.gmf.runtime.diagram.ui.editpartProviders">
      <?gmfgen generated="true"?>
      <editpartProvider class="«getEditPartProviderQualifiedClassName()»">
         <Priority name="«editPartProviderPriority»"/>
      </editpartProvider>
   </extension>
d223 2
a224 6
   <extension point="org.eclipse.gmf.runtime.emf.ui.modelingAssistantProviders">
      <?gmfgen generated="true"?>
      <modelingAssistantProvider class="«getModelingAssistantProviderQualifiedClassName()»">
         <Priority name="«modelingAssistantProviderPriority»"/>
      </modelingAssistantProvider>
   </extension>
d226 9
a234 6
   <extension point="org.eclipse.gmf.runtime.common.ui.services.iconProviders">
      <?gmfgen generated="true"?>
      <IconProvider class="«getIconProviderQualifiedClassName()»">
         <Priority name="«iconProviderPriority»"/>
      </IconProvider>
   </extension>
d236 2
a237 7
   <extension point="org.eclipse.gmf.runtime.common.ui.services.parserProviders">
      <?gmfgen generated="true"?>
      <ParserProvider class="«getParserProviderQualifiedClassName()»">
         <Priority name="«parserProviderPriority»"/>
      </ParserProvider>
   </extension>
   «IF generateShortcutIcon()-»
d239 6
a244 6
   <extension point="org.eclipse.gmf.runtime.diagram.ui.decoratorProviders">
      <?gmfgen generated="true"?>
      <decoratorProvider class="«getShortcutsDecoratorProviderQualifiedClassName()»">
         <Priority name="«shortcutsDecoratorProviderPriority»"/>
      </decoratorProvider>
   </extension>
@


1.3
log
@rewrite navigator extensions in xpand
@
text
@d41 2
d45 1
d198 65
@


1.2
log
@rewrite plugin.xml template in xpand
@
text
@d43 1
@


1.1
log
@rewrite plugin.xml template in xpand
@
text
@d38 3
d42 1
a42 1
   «EXPAND xpt::editor::extensions::extensions FOR editorGen-»
d46 148
@

