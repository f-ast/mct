head	1.7;
access;
symbols
	v20081022-1925:1.7
	v20081015-1925:1.7
	v20081008-1925:1.7
	v20081001-1925:1.7
	v20080924-1925:1.7
	v20080917-1925:1.7
	v20080911-1728:1.7
	v20080910-1520:1.7
	v20080903-1520:1.7
	v20080827-1520:1.7
	v20080813-1520:1.7
	v20080806-1520:1.7
	v20070605-1400:1.6
	v20070601-1400:1.6
	v20070525-1500:1.6
	v20070520-1200:1.6
	v20070518-1300:1.6
	v20070504-1000:1.6
	v20070427-0600:1.6
	v20070420-1000:1.6
	v20070413-1300:1.6
	v20070405-1100:1.6
	v20070403-1500:1.6
	v20070330-1300:1.6
	v20060330-1300:1.6
	v20070322-1100:1.6
	v20060316-0600:1.6
	v20070307-0700:1.6
	v20070301-1200:1.6
	v20070228-2000:1.6
	v20070221-1500:1.6
	v20070208-1800:1.6
	v20070202-0200:1.6
	v20070103-0300:1.6
	M4_20:1.6
	v20061222-1800:1.6
	v20061218-1200:1.6
	v20061214-0000:1.6
	v20061120-1300:1.6
	M3_20:1.6
	v20061117-0800:1.6
	v20061027-1200:1.6
	v20061020-1000:1.6
	v20061013-1330:1.6
	v20060919-0800:1.6
	v20060907-1100:1.6
	M1_20:1.6
	v20060904-1500:1.6
	v20060824-1600:1.6
	v20060817-1500:1.6
	v20060728-0500:1.6
	v20060713-1700:1.6
	R1_0_maintenance:1.6.0.2
	R1_0:1.6
	v20060627-1200:1.6
	v20060626-1420:1.6
	v20060620-0400:1.6
	v20060616-1400:1.6
	v20060616-1200:1.6
	v20060609-1400:1.6
	v20060531-1730:1.6
	v20060530-1930:1.6
	v20060526-1200:1.6
	v20060519-1300:1.6
	v20060519-0800:1.6
	v20060512-1000:1.5
	I20060512-1000:1.5
	I20060505-1400:1.5
	I20060428-1300:1.5
	I20060424-0500:1.5
	I20060424-0300:1.5
	M6_10:1.5
	I20060407-1200:1.5
	I20060331-1000:1.5
	I20060324-0300:1.5
	I20060317-1300:1.5
	I20060317-1200:1.5
	I20060316-1300:1.5
	I20060309-1300:1.5
	M5_10:1.4
	S20060303-1600:1.4
	I20060227-1730:1.4
	I20060216-1945:1.4
	I20060210-1715:1.3
	I20060209-1815:1.3
	I20060203-0830:1.1
	I20060202-1415:1.1
	I20060129-1145:1.1
	I20060127-0900:1.1
	I20060120-1530:1.1
	I20060113-1700:1.1
	M4_10:1.1
	I20060107-1100:1.1
	I20060105-1630:1.1
	I20051230-1230:1.1
	I20051223-1100:1.1
	I20051217-0925:1.1
	I20051208-2000:1.1
	I20051201-1800:1.1
	I20051124-2000:1.1;
locks; strict;
comment	@# @;
expand	@k@;


1.7
date	2007.06.07.10.59.13;	author dstadnik;	state dead;
branches;
next	1.6;
commitid	535f4667e5014567;

1.6
date	2006.05.18.13.58.29;	author atikhomirov;	state Exp;
branches;
next	1.5;

1.5
date	2006.03.07.15.45.29;	author dstadnik;	state Exp;
branches;
next	1.4;

1.4
date	2006.02.14.13.20.08;	author dstadnik;	state Exp;
branches;
next	1.3;

1.3
date	2006.02.08.17.15.51;	author atikhomirov;	state Exp;
branches;
next	1.2;

1.2
date	2006.02.05.22.57.54;	author atikhomirov;	state Exp;
branches;
next	1.1;

1.1
date	2005.11.21.09.35.38;	author dstadnik;	state Exp;
branches;
next	;


desc
@@


1.7
log
@rewrite command in xpand
@
text
@<%@@ jet package="org.eclipse.gmf.codegen.templates.commands" class="ReorientConnectionViewCommandGenerator"
	imports="org.eclipse.gmf.codegen.gmfgen.* org.eclipse.gmf.common.codegen.*"%>
<%GenDiagram genDiagram = (GenDiagram) ((Object[]) argument)[0];
final ImportAssistant importManager = (ImportAssistant) ((Object[]) argument)[1];%>
<%@@ include file="../copyright4java.jetinc"%>
<%importManager.emitPackageStatement(stringBuffer);%>

import java.util.List;

import org.eclipse.core.runtime.IAdaptable;
import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.emf.transaction.TransactionalEditingDomain;
import org.eclipse.gmf.runtime.common.core.command.CommandResult;
import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand;
import org.eclipse.gmf.runtime.notation.Edge;
import org.eclipse.gmf.runtime.notation.View;
<%importManager.markImportLocation(stringBuffer);%>

/**
 * @@generated
 */
public class <%=genDiagram.getReorientConnectionViewCommandClassName()%> extends AbstractTransactionalCommand {

	/**
	 * @@generated
	 */
	private IAdaptable edgeAdaptor;

	/**
	 * @@generated
	 */
	public <%=genDiagram.getReorientConnectionViewCommandClassName()%>(TransactionalEditingDomain editingDomain, String label) {
		super(editingDomain, label, null);
	}

	/**
	 * @@generated
	 */
	public List getAffectedFiles() {
		View view = (View) edgeAdaptor.getAdapter(View.class);
		if (view != null) {
			return getWorkspaceFiles(view);
		}
		return super.getAffectedFiles();
	}

	/**
	 * @@generated
	 */
	public IAdaptable getEdgeAdaptor() {
		return edgeAdaptor;
	}

	/**
	 * @@generated
	 */
	public void setEdgeAdaptor(IAdaptable edgeAdaptor) {
		this.edgeAdaptor = edgeAdaptor;
	}

	/**
	 * @@generated
	 */
	protected CommandResult doExecuteWithResult(IProgressMonitor progressMonitor, IAdaptable info) {
		assert null != edgeAdaptor : "Null child in <%=genDiagram.getReorientConnectionViewCommandClassName()%>"; //$NON-NLS-1$
		Edge edge = (Edge) getEdgeAdaptor().getAdapter(Edge.class);
		assert null != edge : "Null edge in <%=genDiagram.getReorientConnectionViewCommandClassName()%>"; //$NON-NLS-1$

		View tempView = edge.getSource();
		edge.setSource(edge.getTarget());
		edge.setTarget(tempView);

		return CommandResult.newOKCommandResult();
	}
}
<%importManager.emitSortedImports();%>
@


1.6
log
@use importAssistant to emit package statement instead of handcoding
@
text
@@


1.5
log
@#130100 Allow to specify copyright text in gmfgen model
@
text
@d3 2
a4 1
<%GenDiagram genDiagram = (GenDiagram) ((Object[]) argument)[0];%>
d6 1
a6 1
package <%=genDiagram.getEditCommandsPackageName()%>;
a7 1
<%ImportUtil importManager = new ImportUtil(genDiagram.getEditCommandsPackageName());%>
@


1.4
log
@use new transactional emf api
@
text
@d4 1
@


1.3
log
@ImportManager has to know its package anyway, so why not use it to emit appropriate statement?
Besides, package fragment is external to template, template has no control over file placement, thus we'd better pass package name as an argument
@
text
@d7 2
a8 1
import java.util.Collection;
d11 1
d13 1
a13 1
import org.eclipse.gmf.runtime.emf.commands.core.command.AbstractModelCommand;
d21 1
a21 1
public class <%=genDiagram.getReorientConnectionViewCommandClassName()%> extends AbstractModelCommand {
d31 2
a32 2
	public <%=genDiagram.getReorientConnectionViewCommandClassName()%>(String label) {
		super(label, null);
d38 1
a38 1
	public Collection getAffectedObjects() {
d41 1
a41 1
			return getWorkspaceFilesFor(view);
d43 1
a43 1
		return super.getAffectedObjects();
d63 1
a63 1
	protected CommandResult doExecute(IProgressMonitor progressMonitor) {
d72 1
a72 1
		return newOKCommandResult();
@


1.2
log
@ImportManager moved to oeg.common
@
text
@d3 1
a3 1
<%GenDiagram genDiagram = (GenDiagram) argument;%>
@


1.1
log
@#116797 provide option in gmfgen model for the links to align direction in view with direction in model
@
text
@d2 1
a2 1
	imports="org.eclipse.gmf.codegen.gmfgen.* org.eclipse.gmf.codegen.util.*"%>
@

