head	1.7;
access;
symbols
	v20080813-1520:1.7
	v20080806-1520:1.7
	v20080731-1520:1.7
	R1_0_maintenance:1.7.0.2
	R1_0:1.7
	I20060203-0830:1.4
	I20060129-1145:1.4
	I20060127-0900:1.4
	I20060120-1530:1.3
	I20060113-1700:1.3
	M4_10:1.3
	I20060107-1100:1.1;
locks; strict;
comment	@# @;
expand	@k@;


1.7
date	2006.02.06.18.10.23;	author atikhomirov;	state dead;
branches;
next	1.6;

1.6
date	2006.02.05.23.00.50;	author atikhomirov;	state Exp;
branches;
next	1.5;

1.5
date	2006.02.04.22.34.49;	author atikhomirov;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.25.14.02.29;	author atikhomirov;	state Exp;
branches;
next	1.3;

1.3
date	2006.01.10.16.16.54;	author ashatalin;	state Exp;
branches;
next	1.2;

1.2
date	2006.01.07.16.50.43;	author ashatalin;	state Exp;
branches;
next	1.1;

1.1
date	2006.01.06.19.17.28;	author atikhomirov;	state Exp;
branches;
next	;


desc
@@


1.7
log
@major refactoring of gmfgraph codegen utilizing dispatcher infrastructure
@
text
@<%@@ jet package="org.eclipse.gmf.graphdef.codegen.templates" class="ConnectionGenerator"
	imports="org.eclipse.gmf.gmfgraph.* org.eclipse.gmf.gmfgraph.util.* org.eclipse.gmf.common.codegen.* org.eclipse.gmf.graphdef.codegen.Dispatcher java.util.*"%>

<%
Object[] args = (Object[]) argument;
PolylineConnection figure = (PolylineConnection) args[0];
final ImportAssistant importManager = (ImportAssistant) args[1];
final GMFGraphSwitch fqnSwitch = new FigureQualifiedNameSwitch();
final Dispatcher dispatcher = (Dispatcher) args[2];
%>

<%importManager.markImportLocation(stringBuffer);%>

/**
 * @@generated
 */
public class <%=figure.getName()%> extends <%=importManager.getImportedName("org.eclipse.gmf.runtime.draw2d.ui.figures.PolylineConnectionEx")%> {

	/**
	 * @@generated
	 */
	public <%=figure.getName()%>() {
<%=dispatcher.dispatch("ShapeAttrs", dispatcher.create(figure, "this", importManager, fqnSwitch))%>
<%if (figure.getSourceDecoration() != null) {%>
		setSourceDecoration(createSourceDecoration());
<%}
if (figure.getTargetDecoration() != null) {%>
		setTargetDecoration(createTargetDecoration());
<%}%>
	}

<%String decFigVarName = "df";
if (figure.getSourceDecoration() != null) {
DecorationFigure df = figure.getSourceDecoration();%>
	/**
	 * @@generated
	 */
	private <%=fqnSwitch.doSwitch(df)%> createSourceDecoration() {
<%@@ include file="decoration.jetinc" %>
		return <%=decFigVarName%>;
	}
<%} /*if sourceDecoration != null */ %>

<%if (figure.getTargetDecoration() != null) {
DecorationFigure df = figure.getTargetDecoration();%>
	/**
	 * @@generated
	 */
	private <%=fqnSwitch.doSwitch(df)%> createTargetDecoration() {
<%@@ include file="decoration.jetinc" %>
		return <%=decFigVarName%>;
	}
<%}%>
}<%importManager.emitSortedImports();%>@


1.6
log
@provisional framework that supports (double-)dispatch from templates to
a) avoid lengthy if instanceof elseif checks,
b) solve scope and name visibility issues when extracting common code into jetinc
@
text
@@


1.5
log
@provide option to use importManager
@
text
@d2 1
a2 1
	imports="org.eclipse.gmf.gmfgraph.* org.eclipse.gmf.gmfgraph.util.* org.eclipse.gmf.common.codegen.* java.util.*"%>
d9 1
d23 1
a23 4
<% { // scope
Shape figureInstance = figure;
String figureVarName = "this";%>
<%@@ include file="ShapeAttrs.jetinc" %><% }// scope %>
@


1.4
log
@support Figure.color attributes
@
text
@d2 1
a2 1
	imports="org.eclipse.gmf.gmfgraph.* org.eclipse.gmf.gmfgraph.util.* java.util.*"%>
d5 3
a7 1
PolylineConnection figure = (PolylineConnection) argument;
d11 2
d16 1
a16 1
public class <%=figure.getName()%> extends org.eclipse.gmf.runtime.draw2d.ui.figures.PolylineConnectionEx {
d56 1
a56 1
}
@


1.3
log
@As a part of implementstion
#114178,114179
"Shortcutting" diagram elements.
@
text
@d18 4
a21 3
<%Shape shapeFigure = figure;
String shapeVarName = "this";%>
<%@@ include file="ShapeAttrs.jetinc" %>
@


1.2
log
@@@generated comments ws added
@
text
@d12 1
a12 1
public class <%=figure.getName()%> extends <%=fqnSwitch.doSwitch(figure)%> {
@


1.1
log
@ some templates to support #114177 (graphical definition model) - with GEF IFigure code as an outcome
@
text
@d9 3
d14 3
d32 3
d43 3
@

