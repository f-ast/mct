head	1.2;
access;
symbols
	JHotdraw6x_compliance_release:1.2
	JHotDraw6x_release:1.2
	Maintenance-Branch_5x:1.1.0.2
	Root_Maintenance-Branch_5x:1.1;
locks; strict;
comment	@# @;


1.2
date	2004.10.07.09.29.49;	author mrfloppy;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.07.09.20.07;	author mrfloppy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Changes for using JHotDraw 6.x
@
text
@/**
 * JModeller
 *
 * @@version 1.0     15.01.2001
 * @@author Wolfram Kaiser (©2001)
 */

import java.awt.Color;

import org.jhotdraw.figures.ArrowTip;
import org.jhotdraw.figures.LineConnection;
import org.jhotdraw.framework.Figure;

/**
 * An InheritanceLineConnection is a graphical representation for
 * an inheritance relationship (is-a) between two classes (represented
 * by ClassFigures).
 */
public class InheritanceLineConnection extends LineConnection {

    static final long serialVersionUID = 3140686678671889499L;

    /**
     * Create a new instance with a predefined arrow
     */
    public InheritanceLineConnection() {
        setStartDecoration(null);
        ArrowTip arrow = new ArrowTip(0.35, 20.0 , 20.0);
        arrow.setFillColor(Color.white);
        arrow.setBorderColor(Color.black);
        setEndDecoration(arrow);
    }
        
    /**
     * Hook method to plug in application behaviour into
     * a template method. This method is called when a
     * connection between two objects has been established.
     */
    protected void handleConnect(Figure start, Figure end) {
        super.handleConnect(start, end);

        JModellerClass startClass = ((ClassFigure)start).getModellerClass();
        JModellerClass endClass = ((ClassFigure)end).getModellerClass();

        startClass.addSuperclass(endClass);
    }

    /**
     * Hook method to plug in application behaviour into
     * a template method. This method is called when a 
     * connection between two objects has been cancelled.
     */
    protected void handleDisconnect(Figure start, Figure end) {
        super.handleDisconnect(start, end);
        if ((start != null) && (end!= null)) {
            JModellerClass startClass = ((ClassFigure)start).getModellerClass();
            JModellerClass endClass = ((ClassFigure)end).getModellerClass();
            startClass.removeSuperclass(endClass);
        }
    }

    /**
     * Test whether an inheritance relationship between two ClassFigures can
     * be established. An inheritance relationshop can be established if
     * there is no cyclic inheritance graph. This method is called before
     * the two classes are connected in the diagram.
     *
     * @@param   start   subclass
     * @@param   end     superclass
     * @@return  true, if an inheritance relationship can be established, false otherwise
     */
    public boolean canConnect(Figure start, Figure end) {
        JModellerClass startClass = ((ClassFigure)start).getModellerClass();
        JModellerClass endClass = ((ClassFigure)end).getModellerClass();

        return !endClass.hasInheritanceCycle(startClass);
    }
}@


1.1
log
@initial files for JModeller
@
text
@a7 3
import CH.ifa.draw.framework.*;
import CH.ifa.draw.figures.LineConnection;
import CH.ifa.draw.figures.ArrowTip;
d10 4
@

