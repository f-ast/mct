head	1.4;
access;
symbols
	jhotdraw60b1-release:1.4
	package_rename:1.4
	directory_rename:1.3
	reorg_6x_split_initial:1.3
	MVC_PHASE1:1.3.0.10
	NEW_ATTRIBUTES:1.3.0.8
	DNOYEB1_ALPHA-2:1.3.4.1
	release_JHD54b1:1.3
	BUGFIX_670992:1.3.0.6
	DNOYEB1_ALPHA-1:1.3.4.1
	dnoyeb1:1.3.0.4
	repack:1.3.0.2
	Root_repack:1.3
	Before_FigureVisitor:1.3;
locks; strict;
comment	@# @;


1.4
date	2004.01.09.22.53.40;	author mrfloppy;	state Exp;
branches;
next	1.3;

1.3
date	2002.08.04.22.48.03;	author mrfloppy;	state Exp;
branches
	1.3.4.1;
next	1.2;

1.2
date	2002.05.20.19.57.58;	author mrfloppy;	state Exp;
branches;
next	1.1;

1.1
date	2002.04.30.20.40.06;	author mrfloppy;	state Exp;
branches;
next	;

1.3.4.1
date	2003.01.10.04.54.38;	author dnoyeb;	state Exp;
branches;
next	;


desc
@@


1.4
log
@After renaming the CH.ifa.draw to org.jhotdraw
@
text
@/*
 * @@(#)ZoomTool.java
 *
 * Project:		JHotdraw - a GUI framework for technical drawings
 *				http://www.jhotdraw.org
 *				http://jhotdraw.sourceforge.net
 * Copyright:	© by the original author(s) and all contributors
 * License:		Lesser GNU Public License (LGPL)
 *				http://www.opensource.org/licenses/lgpl-license.html
 */

package org.jhotdraw.contrib.zoom;

import org.jhotdraw.framework.DrawingEditor;
import org.jhotdraw.framework.Tool;
import org.jhotdraw.standard.AbstractTool;

import java.awt.event.InputEvent;
import java.awt.event.MouseEvent;

/**
 * @@author Andre Spiegel <spiegel@@gnu.org>
 * @@version <$CURRENT_VERSION$>
 */
public class ZoomTool extends AbstractTool {

	private Tool child;

	public ZoomTool(DrawingEditor editor) {
		super(editor);
	}

	public void mouseDown(MouseEvent e, int x, int y) {
		super.mouseDown(e,x,y);
		//  Added handling for SHIFTed and CTRLed BUTTON3_MASK so that normal
		//  BUTTON3_MASK does zoomOut, SHIFTed BUTTON3_MASK does zoomIn
		//  and CTRLed BUTTON3_MASK does deZoom
		if ((e.getModifiers() & InputEvent.BUTTON1_MASK) != 0) {
			if (child != null) {
				return;
			}
			view().freezeView();
			child = new ZoomAreaTracker(editor());
			child.mouseDown(e, x, y);
		}
		else if ((e.getModifiers() & InputEvent.BUTTON2_MASK) != 0) {
			((ZoomDrawingView) view()).deZoom(x, y);
		}
		else if ((e.getModifiers() & InputEvent.BUTTON3_MASK) != 0) {
			if ((e.getModifiers() & InputEvent.SHIFT_MASK) != 0) {
				((ZoomDrawingView)view()).zoomIn(x, y);
			}
			else if ((e.getModifiers() & InputEvent.CTRL_MASK) != 0) {

				((ZoomDrawingView) view()).deZoom(x, y);
			}
			else {
				((ZoomDrawingView)view()).zoomOut(x, y);
			}
		}
	}

	public void mouseDrag(MouseEvent e, int x, int y) {
		if (child != null) {
			child.mouseDrag(e, x, y);
		}
	}

	public void mouseUp(MouseEvent e, int x, int y) {
		if (child != null) {
			view().unfreezeView();
			child.mouseUp(e, x, y);
		}
		child = null;
	}
}
@


1.3
log
@after variou merges... (before 5.4 release)
@
text
@d12 1
a12 1
package CH.ifa.draw.contrib.zoom;
d14 3
a16 3
import CH.ifa.draw.framework.DrawingEditor;
import CH.ifa.draw.framework.Tool;
import CH.ifa.draw.standard.AbstractTool;
@


1.3.4.1
log
@1.  Tool now accepts DrawingViewMouseEvent as opposed to java.awt.MouseEvent and x,y ints.
2. compositeFigure now uses constrained mouse values throughout.
3. nested CreationTOol was calling drawing() before it was setting the view.  should lead to NPE.  this tool still seems broken
   i dont think its needed anymore?
4. bug in splitConnectionTool mouse down. setEndConnector(findConnector(ex, ex, c)); needs to be ex and ey
5. made some of StandardDrawingViews inner class listners protected.
@
text
@d19 1
a19 2
import CH.ifa.draw.framework.DrawingViewMouseEvent;

d33 2
a34 4
	public void mouseDown(DrawingViewMouseEvent dvme) {
		super.mouseDown(dvme);
		int x = getAnchorX();
		int y = getAnchorY();
d38 1
a38 1
		if ((dvme.getMouseEvent().getModifiers() & InputEvent.BUTTON1_MASK) != 0) {
d44 1
a44 1
			child.mouseDown(dvme);
d46 1
a46 1
		else if ((dvme.getMouseEvent().getModifiers() & InputEvent.BUTTON2_MASK) != 0) {
d49 2
a50 2
		else if ((dvme.getMouseEvent().getModifiers() & InputEvent.BUTTON3_MASK) != 0) {
			if ((dvme.getMouseEvent().getModifiers() & InputEvent.SHIFT_MASK) != 0) {
d53 1
a53 1
			else if ((dvme.getMouseEvent().getModifiers() & InputEvent.CTRL_MASK) != 0) {
d63 1
a63 1
	public void mouseDrag(DrawingViewMouseEvent dvme) {
d65 1
a65 1
			child.mouseDrag(dvme);
d69 1
a69 1
	public void mouseUp(DrawingViewMouseEvent dvme) {
d72 1
a72 1
			child.mouseUp(dvme);
@


1.2
log
@various merges (TextArea, HTMLTextArea, CreationTool, MiniMap, bug fixes)
@
text
@d34 1
@


1.1
log
@no message
@
text
@d2 1
a2 2
 * File:   ZoomTool.java
 * Author: Andre Spiegel <spiegel@@gnu.org>
d4 6
a9 1
 * $Id: ZoomTool.java,v 1.4 2001/03/30 11:33:53 spiegel Exp $
d21 4
d54 1
a54 1
				((ZoomDrawingView) view()).zoomOut(x, y);
@

