head	1.3;
access;
symbols
	v20080910-1520:1.3
	v20080722-1827:1.3
	v20080716-1642:1.3
	R2_1_maintenance:1.3.0.2
	Root_R2_1_maintenance:1.3
	R2_1_0:1.3
	v20080507-1326:1.3
	v20080501-1739:1.2
	v20080425-1959:1.2
	v20080322-0000:1.2
	v20071108-0000:1.2
	v20071003-0000:1.2;
locks; strict;
comment	@# @;


1.3
date	2008.05.07.13.55.39;	author atikhomirov;	state Exp;
branches;
next	1.2;
commitid	388c4821b4d44567;

1.2
date	2007.09.18.15.34.32;	author bblajer;	state Exp;
branches;
next	1.1;
commitid	2c8e46eff0074567;

1.1
date	2007.09.18.10.18.54;	author bblajer;	state Exp;
branches;
next	;
commitid	6ac646efa60d4567;


desc
@@


1.3
log
@[228913] updated ValueExpression use in GMFGen to better accomodate codegen needs (items 1,2,3)
@
text
@/*
 * Copyright (c) 2007 Borland Software Corporation
 * 
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    bblajer (Borland) - initial API and implementation
 */

«IMPORT "http://www.eclipse.org/gmf/2008/GenModel"»
«IMPORT "http://www.eclipse.org/emf/2002/Ecore"»

«DEFINE className FOR gmfgen::GenDiagram»DiagramAppearancePreferencePage«ENDDEFINE»

«DEFINE qualifiedClassName FOR gmfgen::GenDiagram»«preferencesPackageName».«EXPAND className»«ENDDEFINE»

«DEFINE preferenceInitializerClassName FOR gmfgen::GenDiagram»PreferenceInitializer«ENDDEFINE»
«DEFINE preferenceInitializerQualifiedClassName FOR gmfgen::GenDiagram»«EXPAND qualifiedClassName»$«EXPAND preferenceInitializerClassName»«ENDDEFINE»

«DEFINE AppearancePreferencePage FOR gmfgen::GenDiagram-»
«EXPAND xpt::Common::copyright FOR editorGen-»
package «preferencesPackageName»;

«EXPAND xpt::Common::generatedClassComment»
public class «EXPAND className» «EXPAND supertypes» {
	«EXPAND xpt::diagram::preferences::Common::doGetPreferenencePage-»
	«EXPAND PreferenceInitializer-»
	«EXPAND additions-»
}
«ENDDEFINE»

«DEFINE supertypes FOR gmfgen::GenDiagram»extends org.eclipse.gmf.runtime.lite.preferences.ColorsAndFontsPreferencePage«ENDDEFINE»

«DEFINE PreferenceInitializer FOR gmfgen::GenDiagram-»
«EXPAND xpt::Common::generatedClassComment»
public static class «EXPAND preferenceInitializerClassName» «EXPAND PreferenceInitializer_supertypes» {
	«EXPAND PreferenceInitializer_ctor-»
	«EXPAND PreferenceInitializer_preferences FOR preferences-»
	«EXPAND PreferenceInitializer_additions-»
}
«ENDDEFINE»

«DEFINE additions FOR gmfgen::GenDiagram»«ENDDEFINE»

«DEFINE PreferenceInitializer_supertypes FOR gmfgen::GenDiagram»extends org.eclipse.gmf.runtime.lite.preferences.ColorsAndFontsPreferencePage.ColorsAndFontsPreferenceInitializer«ENDDEFINE»

«DEFINE PreferenceInitializer_ctor FOR gmfgen::GenDiagram-»
«EXPAND xpt::Common::generatedMemberComment»
public «EXPAND preferenceInitializerClassName»() {
	super(«editorGen.plugin.getActivatorQualifiedClassName()».getInstance().getPreferenceStore());
}
«ENDDEFINE»

«DEFINE PreferenceInitializer_preferences FOR gmfgen::GenDiagramPreferences-»
«EXPAND getDefaultFontData FOR defaultFont-»
«EXPAND getDefaultColor("getDefaultFontColor") FOR fontColor-»
«EXPAND getDefaultColor("getDefaultFillColor") FOR fillColor-»
«EXPAND getDefaultColor("getDefaultLineColor") FOR lineColor-»
«ENDDEFINE»

«DEFINE getDefaultFontData FOR gmfgen::GenFont-»
«EXPAND xpt::Common::generatedMemberComment»
protected org.eclipse.swt.graphics.FontData getDefaultFontData() {
	return «EXPAND fontData»;
}
«ENDDEFINE»

«DEFINE fontData FOR gmfgen::GenFont-»
«ERROR "Unknown font: " + this»
«ENDDEFINE»

«DEFINE fontData FOR gmfgen::GenCustomFont-»
new org.eclipse.swt.graphics.FontData("«name»", «height», org.eclipse.swt.SWT.«style»)
«ENDDEFINE»

«DEFINE fontData FOR gmfgen::GenStandardFont-»
org.eclipse.jface.resource.JFaceResources.get«name»Font().getFontData()
«ENDDEFINE»

«DEFINE getDefaultColor(String methodName) FOR gmfgen::GenColor-»
«EXPAND xpt::Common::generatedMemberComment»
protected org.eclipse.swt.graphics.RGB «methodName»() {
	return «EXPAND rgb»;
}
«ENDDEFINE»

«DEFINE rgb FOR gmfgen::GenColor-»
«ERROR "Unknown colour: " + this»
«ENDDEFINE»

«DEFINE rgb FOR gmfgen::GenConstantColor-»
«REM»TODO: support DIAGRAM_* constants«ENDREM»
«IF this.name.value > gmfgen::DiagramColors::darkBlue.value»«ERROR "Color constant not supported: " + this»«ENDIF-»
org.eclipse.draw2d.ColorConstants.«name».getRGB()
«ENDDEFINE»

«DEFINE rgb FOR gmfgen::GenRGBColor-»
new org.eclipse.swt.graphics.RGB(«red», «green», «blue»)
«ENDDEFINE»

«DEFINE PreferenceInitializer_additions FOR gmfgen::GenDiagram»«ENDDEFINE»
@


1.2
log
@Preference Defaults initialized from GenDiagramPreferences;
Tests for GenDiagramPreferences->PreferenceInitializer->Style->Figure consistency
@
text
@d13 1
a13 1
«IMPORT "http://www.eclipse.org/gmf/2006/GenModel"»
@


1.1
log
@1. Preferences for fonts and colors
2. ResourceManager employed to reuse fonts and colors used for styles
3. Option to check the availability of the font name that is specified in the style
4. Styles are initialized with defaults from preferences
@
text
@d41 1
d57 47
@

