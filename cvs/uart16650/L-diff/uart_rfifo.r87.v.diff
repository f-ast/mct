61d60
<                     fifo [bottom] <= # 1 0;
79c78
<             if (push & (count == fifo_depth))
---
>             if (push & ~ pop & (count == fifo_depth))
