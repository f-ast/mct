62a63
> wire cts_c, dsr_c, ri_c, dcd_c;
70c71,72
< assign {cts, dsr, ri, dcd} = loopback ? {mcr [`UART_MC_RTS], mcr [`UART_MC_DTR], mcr [`UART_MC_OUT1], mcr [`UART_MC_OUT2]} : ~ {cts_pad_i, dsr_pad_i, ri_pad_i, dcd_pad_i};
---
> assign {cts, dsr, ri, dcd} = loopback ? {mcr [`UART_MC_DTR], mcr [`UART_MC_RTS], mcr [`UART_MC_OUT1], mcr [`UART_MC_OUT2]} : ~ {cts_pad_i, dsr_pad_i, ri_pad_i, dcd_pad_i};
> assign {cts_c, dsr_c, ri_c, dcd_c} = loopback ? {mcr [`UART_MC_RTS], mcr [`UART_MC_DTR], mcr [`UART_MC_OUT1], mcr [`UART_MC_OUT2]} : {cts_pad_i, dsr_pad_i, ri_pad_i, dcd_pad_i};
230a233
> reg [3 : 0] delayed_modem_signals;
237,238c240,242
<             | ({dcd, ri, dsr, cts} ^ msr [`UART_MS_CDCD : `UART_MS_CCTS]);
<             msr [`UART_MS_CDCD : `UART_MS_CCTS] <= # 1 {dcd, ri, dsr, cts};
---
>             | ({dcd, ri, dsr, cts} ^ delayed_modem_signals [3 : 0]);
>             msr [`UART_MS_CDCD : `UART_MS_CCTS] <= # 1 {dcd_c, ri_c, dsr_c, cts_c};
>             delayed_modem_signals [3 : 0] <= # 1 {dcd, ri, dsr, cts};
