64a65,68
> // Revision 1.18  2001/11/08 14:54:23  mohor
> // Comments in Slovene language deleted, few small fixes for better work of
> // old tools. IRQs need to be fix.
> //
177c181
< reg 										threi_clear; // THRE interrupt clear flag
---
> //reg 										threi_clear; // THRE interrupt clear flag
314a319
> /*
325c330
< 		threi_clear <= #1 1; // reset bits in Modem Status Register
---
> 		threi_clear <= #1 1;
326a332
> */
457,458c463,464
< 	lsr1r <= #1 wb_rst_i ? 0 : // clear status on read
< 				lsr_mask ? 0 : lsr1 && ~lsr1_d; // set on rise
---
> 	if (wb_rst_i) lsr1_d <= #1 0;
> 	else	lsr1r <= #1	lsr_mask ? 0 : lsr1 && ~lsr1_d; // set on rise
468,469c474,475
< 	lsr2r <= #1 wb_rst_i ? 0 : // clear status on read
< 				lsr_mask ? 0 : lsr2 && ~lsr2_d; // set on rise
---
> 	if (wb_rst_i) lsr2_d <= #1 0;
> 	else lsr2r <= #1 lsr_mask ? 0 : lsr2 && ~lsr2_d; // set on rise
479,480c485,486
< 	lsr3r <= #1 wb_rst_i ? 0 : // clear status on read
< 				lsr_mask ? 0 : lsr3 && ~lsr3_d; // set on rise
---
> 	if (wb_rst_i) lsr3_d <= #1 0;
> 	else lsr3r <= #1 lsr_mask ? 0 : lsr3 && ~lsr3_d; // set on rise
490,492c496,497
< 	lsr4r <= #1  wb_rst_i ? 0 :
< 			  lsr_mask ? 0 : lsr4 && ~lsr4_d;
< 
---
> 	if (wb_rst_i) lsr4_d <= #1 0;
> 	else lsr4r <= #1 lsr_mask ? 0 : lsr4 && ~lsr4_d;
504,505c509,510
< 	lsr5r <= #1 wb_rst_i ? 1 :
< 			(lsr_mask || iir_read || tx_fifo_write) ? 0 :  lsr5 && ~lsr5_d;
---
> 	if (wb_rst_i) lsr5_d <= #1 0;
> 	else lsr5r <= #1 (lsr_mask || iir_read || tx_fifo_write) ? 0 :  lsr5 && ~lsr5_d;
515,516c520,521
< 	lsr6r <= #1 wb_rst_i ? 1 :
< 				 (lsr_mask || tx_fifo_write) ? 0 : lsr6 && ~lsr6_d;
---
> 	if (wb_rst_i) lsr6_d <= #1 0;
> 	else lsr6r <= #1 (lsr_mask || tx_fifo_write) ? 0 : lsr6 && ~lsr6_d;
526,527c531,532
< 	lsr7r <= #1  wb_rst_i ? 0 :
< 			  lsr_mask ? 0 : lsr7 && ~lsr7_d;
---
> 	if (wb_rst_i) lsr7_d <= #1 0;
> 	else lsr7r <= #1 lsr_mask ? 0 : lsr7 && ~lsr7_d;
559c564,565
< assign thre_int = threi_clear ? 0 : ier[`UART_IE_THRE] && lsr[`UART_LS_TFE];
---
> //assign thre_int = threi_clear ? 0 : ier[`UART_IE_THRE] && lsr[`UART_LS_TFE];
> assign thre_int = ier[`UART_IE_THRE] && lsr[`UART_LS_TFE];
681c687
< 		iir[`UART_II_II] <= #1 1'b0;
---
> 		iir[`UART_II_II] <= #1 0;
